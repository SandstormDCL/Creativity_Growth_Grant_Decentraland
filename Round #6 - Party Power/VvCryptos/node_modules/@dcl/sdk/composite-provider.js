import { compositeFromLoader } from '~sdk/all-composites';
import { Composite } from '@dcl/ecs';
const composites = [];
// @public
export const compositeProvider = {
    getCompositeOrNull(src, _currentPath) {
        // TODO: resolve path from src and currentPath
        const fromLoader = compositeFromLoader[src];
        if (fromLoader) {
            try {
                if (fromLoader instanceof Uint8Array) {
                    const composite = Composite.fromBinary(fromLoader);
                    composites.push({ src, composite });
                }
                else if (typeof fromLoader === 'string') {
                    const composite = Composite.fromJson(JSON.parse(fromLoader));
                    composites.push({ src, composite });
                }
                else if (typeof fromLoader === 'object') {
                    const composite = Composite.fromJson(fromLoader);
                    composites.push({ src, composite });
                }
            }
            catch (err) {
                console.error(err);
            }
            delete compositeFromLoader[src];
        }
        return composites.find((item) => item.src === src) || null;
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9zaXRlLXByb3ZpZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL2NvbXBvc2l0ZS1wcm92aWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQTtBQUN6RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sVUFBVSxDQUFBO0FBRXBDLE1BQU0sVUFBVSxHQUF5QixFQUFFLENBQUE7QUFFM0MsVUFBVTtBQUNWLE1BQU0sQ0FBQyxNQUFNLGlCQUFpQixHQUF1QjtJQUNuRCxrQkFBa0IsQ0FBQyxHQUFXLEVBQUUsWUFBcUI7UUFDbkQsOENBQThDO1FBRTlDLE1BQU0sVUFBVSxHQUFHLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQzNDLElBQUksVUFBVSxFQUFFO1lBQ2QsSUFBSTtnQkFDRixJQUFJLFVBQVUsWUFBWSxVQUFVLEVBQUU7b0JBQ3BDLE1BQU0sU0FBUyxHQUFHLFNBQVMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUE7b0JBQ2xELFVBQVUsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQTtpQkFDcEM7cUJBQU0sSUFBSSxPQUFPLFVBQVUsS0FBSyxRQUFRLEVBQUU7b0JBQ3pDLE1BQU0sU0FBUyxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFBO29CQUM1RCxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUE7aUJBQ3BDO3FCQUFNLElBQUksT0FBTyxVQUFVLEtBQUssUUFBUSxFQUFFO29CQUN6QyxNQUFNLFNBQVMsR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFBO29CQUNoRCxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUE7aUJBQ3BDO2FBQ0Y7WUFBQyxPQUFPLEdBQUcsRUFBRTtnQkFDWixPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFBO2FBQ25CO1lBRUQsT0FBTyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsQ0FBQTtTQUNoQztRQUVELE9BQU8sVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUE7SUFDNUQsQ0FBQztDQUNGLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb21wb3NpdGVGcm9tTG9hZGVyIH0gZnJvbSAnfnNkay9hbGwtY29tcG9zaXRlcydcbmltcG9ydCB7IENvbXBvc2l0ZSB9IGZyb20gJ0BkY2wvZWNzJ1xuXG5jb25zdCBjb21wb3NpdGVzOiBDb21wb3NpdGUuUmVzb3VyY2VbXSA9IFtdXG5cbi8vIEBwdWJsaWNcbmV4cG9ydCBjb25zdCBjb21wb3NpdGVQcm92aWRlcjogQ29tcG9zaXRlLlByb3ZpZGVyID0ge1xuICBnZXRDb21wb3NpdGVPck51bGwoc3JjOiBzdHJpbmcsIF9jdXJyZW50UGF0aD86IHN0cmluZykge1xuICAgIC8vIFRPRE86IHJlc29sdmUgcGF0aCBmcm9tIHNyYyBhbmQgY3VycmVudFBhdGhcblxuICAgIGNvbnN0IGZyb21Mb2FkZXIgPSBjb21wb3NpdGVGcm9tTG9hZGVyW3NyY11cbiAgICBpZiAoZnJvbUxvYWRlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGZyb21Mb2FkZXIgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgY29uc3QgY29tcG9zaXRlID0gQ29tcG9zaXRlLmZyb21CaW5hcnkoZnJvbUxvYWRlcilcbiAgICAgICAgICBjb21wb3NpdGVzLnB1c2goeyBzcmMsIGNvbXBvc2l0ZSB9KVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBmcm9tTG9hZGVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGNvbnN0IGNvbXBvc2l0ZSA9IENvbXBvc2l0ZS5mcm9tSnNvbihKU09OLnBhcnNlKGZyb21Mb2FkZXIpKVxuICAgICAgICAgIGNvbXBvc2l0ZXMucHVzaCh7IHNyYywgY29tcG9zaXRlIH0pXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGZyb21Mb2FkZXIgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgY29uc3QgY29tcG9zaXRlID0gQ29tcG9zaXRlLmZyb21Kc29uKGZyb21Mb2FkZXIpXG4gICAgICAgICAgY29tcG9zaXRlcy5wdXNoKHsgc3JjLCBjb21wb3NpdGUgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgICAgfVxuXG4gICAgICBkZWxldGUgY29tcG9zaXRlRnJvbUxvYWRlcltzcmNdXG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbXBvc2l0ZXMuZmluZCgoaXRlbSkgPT4gaXRlbS5zcmMgPT09IHNyYykgfHwgbnVsbFxuICB9XG59XG4iXX0=