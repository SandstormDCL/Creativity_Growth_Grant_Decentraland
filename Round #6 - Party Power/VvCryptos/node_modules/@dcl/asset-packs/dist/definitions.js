import { Schemas, } from '@dcl/ecs';
import { addActionType } from './action-types';
import { ComponentName, TweenType, InterpolationType, ActionType, TriggerType, TriggerConditionType, TriggerConditionOperation, AlignMode, Font, Colliders, ProximityLayer, } from './enums';
import { getExplorerComponents } from './components';
export * from './enums';
export * from './action-types';
export * from './events';
export * from './id';
export * from './states';
export * from './clone';
export * from './lww';
export * from './types';
export const ActionSchemas = {
    [ActionType.PLAY_ANIMATION]: Schemas.Map({
        animation: Schemas.String,
        loop: Schemas.Optional(Schemas.Boolean),
    }),
    [ActionType.STOP_ANIMATION]: Schemas.Map({}),
    [ActionType.SET_STATE]: Schemas.Map({ state: Schemas.String }),
    [ActionType.START_TWEEN]: Schemas.Map({
        type: Schemas.EnumString(TweenType, TweenType.MOVE_ITEM),
        end: Schemas.Vector3,
        interpolationType: Schemas.EnumString(InterpolationType, InterpolationType.LINEAR),
        duration: Schemas.Float,
        relative: Schemas.Boolean,
    }),
    [ActionType.SET_COUNTER]: Schemas.Map({ counter: Schemas.Int }),
    [ActionType.INCREMENT_COUNTER]: Schemas.Map({
        amount: Schemas.Optional(Schemas.Int),
    }),
    [ActionType.DECREASE_COUNTER]: Schemas.Map({
        amount: Schemas.Optional(Schemas.Int),
    }),
    [ActionType.PLAY_SOUND]: Schemas.Map({
        src: Schemas.String,
        loop: Schemas.Optional(Schemas.Boolean),
        volume: Schemas.Optional(Schemas.Float),
    }),
    [ActionType.STOP_SOUND]: Schemas.Map({}),
    [ActionType.SET_VISIBILITY]: Schemas.Map({
        visible: Schemas.Boolean,
        physicsCollider: Schemas.Optional(Schemas.Boolean),
        collider: Schemas.Optional(Schemas.EnumNumber(Colliders, Colliders.CL_POINTER)),
    }),
    [ActionType.ATTACH_TO_PLAYER]: Schemas.Map({
        anchorPointId: Schemas.Int,
    }),
    [ActionType.DETACH_FROM_PLAYER]: Schemas.Map({}),
    [ActionType.PLAY_VIDEO_STREAM]: Schemas.Map({
        src: Schemas.Optional(Schemas.String),
        loop: Schemas.Optional(Schemas.Boolean),
        volume: Schemas.Optional(Schemas.Float),
        dclCast: Schemas.Optional(Schemas.Boolean),
    }),
    [ActionType.STOP_VIDEO_STREAM]: Schemas.Map({}),
    [ActionType.PLAY_AUDIO_STREAM]: Schemas.Map({
        url: Schemas.String,
        volume: Schemas.Optional(Schemas.Float),
    }),
    [ActionType.STOP_AUDIO_STREAM]: Schemas.Map({}),
    [ActionType.TELEPORT_PLAYER]: Schemas.Map({
        x: Schemas.Int,
        y: Schemas.Int,
    }),
    [ActionType.MOVE_PLAYER]: Schemas.Map({
        position: Schemas.Vector3,
        cameraTarget: Schemas.Optional(Schemas.Vector3),
    }),
    [ActionType.PLAY_DEFAULT_EMOTE]: Schemas.Map({
        emote: Schemas.String,
    }),
    [ActionType.PLAY_CUSTOM_EMOTE]: Schemas.Map({
        src: Schemas.String,
        loop: Schemas.Optional(Schemas.Boolean),
    }),
    [ActionType.OPEN_LINK]: Schemas.Map({
        url: Schemas.String,
    }),
    [ActionType.SHOW_TEXT]: Schemas.Map({
        text: Schemas.String,
        hideAfterSeconds: Schemas.Float,
        font: Schemas.EnumNumber(Font, Font.F_SANS_SERIF),
        fontSize: Schemas.Optional(Schemas.Float),
        textAlign: Schemas.EnumNumber(AlignMode, AlignMode.TAM_MIDDLE_CENTER),
    }),
    [ActionType.HIDE_TEXT]: Schemas.Map({}),
    [ActionType.START_DELAY]: Schemas.Map({
        actions: Schemas.Array(Schemas.String),
        timeout: Schemas.Float,
    }),
    [ActionType.STOP_DELAY]: Schemas.Map({
        action: Schemas.String,
    }),
    [ActionType.START_LOOP]: Schemas.Map({
        actions: Schemas.Array(Schemas.String),
        interval: Schemas.Float,
    }),
    [ActionType.STOP_LOOP]: Schemas.Map({
        action: Schemas.String,
    }),
    [ActionType.CLONE_ENTITY]: Schemas.Map({
        position: Schemas.Vector3,
    }),
    [ActionType.REMOVE_ENTITY]: Schemas.Map({}),
    [ActionType.SHOW_IMAGE]: Schemas.Map({
        src: Schemas.String,
        align: Schemas.EnumNumber(AlignMode, AlignMode.TAM_MIDDLE_CENTER),
        height: Schemas.Float,
        width: Schemas.Float,
        hideAfterSeconds: Schemas.Optional(Schemas.Float),
        text: Schemas.Optional(Schemas.String),
        fontSize: Schemas.Optional(Schemas.Float),
    }),
    [ActionType.HIDE_IMAGE]: Schemas.Map({
        imageEntity: Schemas.Optional(Schemas.Int),
    }),
    [ActionType.DAMAGE]: Schemas.Map({
        radius: Schemas.Float,
        layer: Schemas.Optional(Schemas.EnumString(ProximityLayer, ProximityLayer.ALL)),
        hits: Schemas.Optional(Schemas.Int),
    }),
    [ActionType.MOVE_PLAYER_HERE]: Schemas.Map({}),
    [ActionType.PLACE_ON_PLAYER]: Schemas.Map({}),
    [ActionType.ROTATE_AS_PLAYER]: Schemas.Map({}),
    [ActionType.PLACE_ON_CAMERA]: Schemas.Map({}),
    [ActionType.ROTATE_AS_CAMERA]: Schemas.Map({}),
    [ActionType.SET_POSITION]: Schemas.Map({
        x: Schemas.Float,
        y: Schemas.Float,
        z: Schemas.Float,
        relative: Schemas.Optional(Schemas.Boolean),
    }),
    [ActionType.SET_ROTATION]: Schemas.Map({
        x: Schemas.Float,
        y: Schemas.Float,
        z: Schemas.Float,
        relative: Schemas.Optional(Schemas.Boolean),
    }),
    [ActionType.SET_SCALE]: Schemas.Map({
        x: Schemas.Float,
        y: Schemas.Float,
        z: Schemas.Float,
        relative: Schemas.Optional(Schemas.Boolean),
    }),
    [ActionType.FOLLOW_PLAYER]: Schemas.Map({
        speed: Schemas.Float,
        x: Schemas.Boolean,
        y: Schemas.Boolean,
        z: Schemas.Boolean,
        minDistance: Schemas.Float,
    }),
    [ActionType.STOP_FOLLOWING_PLAYER]: Schemas.Map({}),
    [ActionType.RANDOM]: Schemas.Map({
        actions: Schemas.Array(Schemas.String),
    }),
    [ActionType.BATCH]: Schemas.Map({
        actions: Schemas.Array(Schemas.String),
    }),
    [ActionType.HEAL_PLAYER]: Schemas.Map({
        multiplier: Schemas.Int,
    }),
};
export function getComponent(componentName, engine) {
    try {
        return engine.getComponent(componentName);
    }
    catch (error) {
        console.error(`Error using getComponent with componentName="${componentName}"`);
        throw error;
    }
}
export function getComponents(engine) {
    return {
        Actions: getComponent(ComponentName.ACTIONS, engine),
        States: getComponent(ComponentName.STATES, engine),
        Counter: getComponent(ComponentName.COUNTER, engine),
        Triggers: getComponent(ComponentName.TRIGGERS, engine),
        CounterBar: getComponent(ComponentName.COUNTER_BAR, engine),
    };
}
export function createComponents(engine) {
    const ActionTypes = engine.defineComponent(ComponentName.ACTION_TYPES, {
        value: Schemas.Array(Schemas.Map({
            type: Schemas.String,
            jsonSchema: Schemas.String,
        })),
    });
    const Actions = engine.defineComponent(ComponentName.ACTIONS, {
        id: Schemas.Int,
        value: Schemas.Array(Schemas.Map({
            name: Schemas.String,
            type: Schemas.String,
            jsonPayload: Schemas.String,
            allowedInBasicView: Schemas.Optional(Schemas.Boolean),
            basicViewId: Schemas.Optional(Schemas.String),
        })),
    });
    const Counter = engine.defineComponent(ComponentName.COUNTER, {
        id: Schemas.Number,
        value: Schemas.Int,
    });
    const Triggers = engine.defineComponent(ComponentName.TRIGGERS, {
        value: Schemas.Array(Schemas.Map({
            type: Schemas.EnumString(TriggerType, TriggerType.ON_INPUT_ACTION),
            conditions: Schemas.Optional(Schemas.Array(Schemas.Map({
                id: Schemas.Optional(Schemas.Int),
                type: Schemas.EnumString(TriggerConditionType, TriggerConditionType.WHEN_STATE_IS),
                value: Schemas.String,
            }))),
            operation: Schemas.Optional(Schemas.EnumString(TriggerConditionOperation, TriggerConditionOperation.AND)),
            actions: Schemas.Array(Schemas.Map({
                id: Schemas.Optional(Schemas.Int),
                name: Schemas.Optional(Schemas.String),
            })),
            basicViewId: Schemas.Optional(Schemas.String),
        })),
    });
    const States = engine.defineComponent(ComponentName.STATES, {
        id: Schemas.Number,
        value: Schemas.Array(Schemas.String),
        defaultValue: Schemas.Optional(Schemas.String),
        currentValue: Schemas.Optional(Schemas.String),
        previousValue: Schemas.Optional(Schemas.String),
    });
    const CounterBar = engine.defineComponent(ComponentName.COUNTER_BAR, {
        primaryColor: Schemas.Optional(Schemas.String),
        secondaryColor: Schemas.Optional(Schemas.String),
        maxValue: Schemas.Optional(Schemas.Float),
    });
    return {
        ActionTypes,
        Actions,
        Counter,
        Triggers,
        States,
        CounterBar,
    };
}
export function initComponents(engine) {
    const actionTypes = Object.values(ActionType);
    for (const type of actionTypes) {
        const actionType = type;
        addActionType(engine, actionType, ActionSchemas[actionType]);
    }
    const Counter = engine.getComponent(ComponentName.COUNTER);
    const counter = Counter.getOrCreateMutable(engine.RootEntity);
    counter.value = counter.value || 0;
    const { VideoPlayer, Material } = getExplorerComponents(engine);
    initVideoPlayerComponents(engine, { VideoPlayer, Material });
}
function getVideoTexture({ material }) {
    if (material?.$case === 'pbr' &&
        material.pbr.texture?.tex?.$case === 'videoTexture') {
        return material.pbr.texture.tex.videoTexture;
    }
    return undefined;
}
export function initVideoPlayerComponentMaterial(entity, { Material }, material) {
    if (!material || !material.material || material.material.$case !== 'pbr') {
        return null;
    }
    Material.setPbrMaterial(entity, {
        ...material.material.pbr,
        texture: Material.Texture.Video({
            videoPlayerEntity: entity,
        }),
    });
}
function initVideoPlayerComponents(engine, components) {
    function replaceVideoTexture() {
        const { Material, VideoPlayer } = components;
        engine.removeSystem(replaceVideoTexture);
        for (const [entity, material] of engine.getEntitiesWith(Material, VideoPlayer)) {
            const videoTexture = getVideoTexture(material);
            if (videoTexture?.videoPlayerEntity === engine.RootEntity) {
                initVideoPlayerComponentMaterial(entity, components, material);
            }
        }
    }
    engine.addSystem(replaceVideoTexture);
}
export function getConditionTypesByComponentName(componentName) {
    switch (componentName) {
        case ComponentName.STATES: {
            return [
                TriggerConditionType.WHEN_STATE_IS,
                TriggerConditionType.WHEN_STATE_IS_NOT,
                TriggerConditionType.WHEN_PREVIOUS_STATE_IS,
                TriggerConditionType.WHEN_PREVIOUS_STATE_IS_NOT,
            ];
        }
        case ComponentName.COUNTER: {
            return [
                TriggerConditionType.WHEN_COUNTER_EQUALS,
                TriggerConditionType.WHEN_COUNTER_IS_GREATER_THAN,
                TriggerConditionType.WHEN_COUNTER_IS_LESS_THAN,
            ];
        }
        case ComponentName.ACTIONS: {
            return [
                TriggerConditionType.WHEN_DISTANCE_TO_PLAYER_LESS_THAN,
                TriggerConditionType.WHEN_DISTANCE_TO_PLAYER_GREATER_THAN,
            ];
        }
        default: {
            return [];
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmaW5pdGlvbnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvZGVmaW5pdGlvbnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQU9MLE9BQU8sR0FvQlIsTUFBTSxVQUFVLENBQUE7QUFDakIsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGdCQUFnQixDQUFBO0FBQzlDLE9BQU8sRUFDTCxhQUFhLEVBQ2IsU0FBUyxFQUNULGlCQUFpQixFQUNqQixVQUFVLEVBQ1YsV0FBVyxFQUNYLG9CQUFvQixFQUNwQix5QkFBeUIsRUFDekIsU0FBUyxFQUNULElBQUksRUFDSixTQUFTLEVBQ1QsY0FBYyxHQUNmLE1BQU0sU0FBUyxDQUFBO0FBQ2hCLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLGNBQWMsQ0FBQTtBQUVwRCxjQUFjLFNBQVMsQ0FBQTtBQUN2QixjQUFjLGdCQUFnQixDQUFBO0FBQzlCLGNBQWMsVUFBVSxDQUFBO0FBQ3hCLGNBQWMsTUFBTSxDQUFBO0FBQ3BCLGNBQWMsVUFBVSxDQUFBO0FBQ3hCLGNBQWMsU0FBUyxDQUFBO0FBQ3ZCLGNBQWMsT0FBTyxDQUFBO0FBQ3JCLGNBQWMsU0FBUyxDQUFBO0FBRXZCLE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRztJQUMzQixDQUFDLFVBQVUsQ0FBQyxjQUFjLENBQUMsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDO1FBQ3ZDLFNBQVMsRUFBRSxPQUFPLENBQUMsTUFBTTtRQUN6QixJQUFJLEVBQUUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDO0tBQ3hDLENBQUM7SUFDRixDQUFDLFVBQVUsQ0FBQyxjQUFjLENBQUMsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztJQUM1QyxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUUs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QUE0QjtnQkFDakQsb0JBQW9CLENBQUMseUJBQXlCO2FBQy9DLENBQUE7UUFDSCxDQUFDO1FBQ0QsS0FBSyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUMzQixPQUFPO2dCQUNMLG9CQUFvQixDQUFDLGlDQUFpQztnQkFDdEQsb0JBQW9CLENBQUMsb0NBQW9DO2FBQzFELENBQUE7UUFDSCxDQUFDO1FBQ0QsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNSLE9BQU8sRUFBRSxDQUFBO1FBQ1gsQ0FBQztJQUNILENBQUM7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRW50aXR5LFxuICBJRW5naW5lLFxuICBJU2NoZW1hLFxuICBNYXRlcmlhbENvbXBvbmVudERlZmluaXRpb25FeHRlbmRlZCxcbiAgUEJNYXRlcmlhbCxcbiAgUEJWaWRlb1BsYXllcixcbiAgU2NoZW1hcyxcbiAgVmlkZW9UZXh0dXJlLFxuICBBbmltYXRvckNvbXBvbmVudERlZmluaXRpb25FeHRlbmRlZCxcbiAgVHJhbnNmb3JtQ29tcG9uZW50RXh0ZW5kZWQsXG4gIExhc3RXcml0ZVdpbkVsZW1lbnRTZXRDb21wb25lbnREZWZpbml0aW9uLFxuICBQQkF2YXRhckF0dGFjaCxcbiAgUEJWaXNpYmlsaXR5Q29tcG9uZW50LFxuICBQQkdsdGZDb250YWluZXIsXG4gIFBCVWlUcmFuc2Zvcm0sXG4gIFBCVWlUZXh0LFxuICBQQlVpQmFja2dyb3VuZCxcbiAgTWVzaFJlbmRlcmVyQ29tcG9uZW50RGVmaW5pdGlvbkV4dGVuZGVkLFxuICBQQkJpbGxib2FyZCxcbiAgTmFtZVR5cGUsXG4gIFBCVHdlZW4sXG4gIFBCVHdlZW5TZXF1ZW5jZSxcbiAgUEJQb2ludGVyRXZlbnRzLFxuICBOZXR3b3JrRW50aXR5LFxuICBTeW5jQ29tcG9uZW50cyxcbiAgQXVkaW9Tb3VyY2VDb21wb25lbnREZWZpbml0aW9uRXh0ZW5kZWQsXG59IGZyb20gJ0BkY2wvZWNzJ1xuaW1wb3J0IHsgYWRkQWN0aW9uVHlwZSB9IGZyb20gJy4vYWN0aW9uLXR5cGVzJ1xuaW1wb3J0IHtcbiAgQ29tcG9uZW50TmFtZSxcbiAgVHdlZW5UeXBlLFxuICBJbnRlcnBvbGF0aW9uVHlwZSxcbiAgQWN0aW9uVHlwZSxcbiAgVHJpZ2dlclR5cGUsXG4gIFRyaWdnZXJDb25kaXRpb25UeXBlLFxuICBUcmlnZ2VyQ29uZGl0aW9uT3BlcmF0aW9uLFxuICBBbGlnbk1vZGUsXG4gIEZvbnQsXG4gIENvbGxpZGVycyxcbiAgUHJveGltaXR5TGF5ZXIsXG59IGZyb20gJy4vZW51bXMnXG5pbXBvcnQgeyBnZXRFeHBsb3JlckNvbXBvbmVudHMgfSBmcm9tICcuL2NvbXBvbmVudHMnXG5cbmV4cG9ydCAqIGZyb20gJy4vZW51bXMnXG5leHBvcnQgKiBmcm9tICcuL2FjdGlvbi10eXBlcydcbmV4cG9ydCAqIGZyb20gJy4vZXZlbnRzJ1xuZXhwb3J0ICogZnJvbSAnLi9pZCdcbmV4cG9ydCAqIGZyb20gJy4vc3RhdGVzJ1xuZXhwb3J0ICogZnJvbSAnLi9jbG9uZSdcbmV4cG9ydCAqIGZyb20gJy4vbHd3J1xuZXhwb3J0ICogZnJvbSAnLi90eXBlcydcblxuZXhwb3J0IGNvbnN0IEFjdGlvblNjaGVtYXMgPSB7XG4gIFtBY3Rpb25UeXBlLlBMQVlfQU5JTUFUSU9OXTogU2NoZW1hcy5NYXAoe1xuICAgIGFuaW1hdGlvbjogU2NoZW1hcy5TdHJpbmcsXG4gICAgbG9vcDogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLkJvb2xlYW4pLFxuICB9KSxcbiAgW0FjdGlvblR5cGUuU1RPUF9BTklNQVRJT05dOiBTY2hlbWFzLk1hcCh7fSksXG4gIFtBY3Rpb25UeXBlLlNFVF9TVEFURV06IFNjaGVtYXMuTWFwKHsgc3RhdGU6IFNjaGVtYXMuU3RyaW5nIH0pLFxuICBbQWN0aW9uVHlwZS5TVEFSVF9UV0VFTl06IFNjaGVtYXMuTWFwKHtcbiAgICB0eXBlOiBTY2hlbWFzLkVudW1TdHJpbmc8VHdlZW5UeXBlPihUd2VlblR5cGUsIFR3ZWVuVHlwZS5NT1ZFX0lURU0pLFxuICAgIGVuZDogU2NoZW1hcy5WZWN0b3IzLFxuICAgIGludGVycG9sYXRpb25UeXBlOiBTY2hlbWFzLkVudW1TdHJpbmcoXG4gICAgICBJbnRlcnBvbGF0aW9uVHlwZSxcbiAgICAgIEludGVycG9sYXRpb25UeXBlLkxJTkVBUixcbiAgICApLFxuICAgIGR1cmF0aW9uOiBTY2hlbWFzLkZsb2F0LFxuICAgIHJlbGF0aXZlOiBTY2hlbWFzLkJvb2xlYW4sXG4gIH0pLFxuICBbQWN0aW9uVHlwZS5TRVRfQ09VTlRFUl06IFNjaGVtYXMuTWFwKHsgY291bnRlcjogU2NoZW1hcy5JbnQgfSksXG4gIFtBY3Rpb25UeXBlLklOQ1JFTUVOVF9DT1VOVEVSXTogU2NoZW1hcy5NYXAoe1xuICAgIGFtb3VudDogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLkludCksXG4gIH0pLFxuICBbQWN0aW9uVHlwZS5ERUNSRUFTRV9DT1VOVEVSXTogU2NoZW1hcy5NYXAoe1xuICAgIGFtb3VudDogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLkludCksXG4gIH0pLFxuICBbQWN0aW9uVHlwZS5QTEFZX1NPVU5EXTogU2NoZW1hcy5NYXAoe1xuICAgIHNyYzogU2NoZW1hcy5TdHJpbmcsXG4gICAgbG9vcDogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLkJvb2xlYW4pLFxuICAgIHZvbHVtZTogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLkZsb2F0KSxcbiAgfSksXG4gIFtBY3Rpb25UeXBlLlNUT1BfU09VTkRdOiBTY2hlbWFzLk1hcCh7fSksXG4gIFtBY3Rpb25UeXBlLlNFVF9WSVNJQklMSVRZXTogU2NoZW1hcy5NYXAoe1xuICAgIHZpc2libGU6IFNjaGVtYXMuQm9vbGVhbixcbiAgICAvKiogQGRlcHJlY2F0ZWQgdXNlIGNvbGxpZGVyIGluc3RlYWQgKi9cbiAgICBwaHlzaWNzQ29sbGlkZXI6IFNjaGVtYXMuT3B0aW9uYWwoU2NoZW1hcy5Cb29sZWFuKSxcbiAgICBjb2xsaWRlcjogU2NoZW1hcy5PcHRpb25hbChcbiAgICAgIFNjaGVtYXMuRW51bU51bWJlcihDb2xsaWRlcnMsIENvbGxpZGVycy5DTF9QT0lOVEVSKSxcbiAgICApLFxuICB9KSxcbiAgW0FjdGlvblR5cGUuQVRUQUNIX1RPX1BMQVlFUl06IFNjaGVtYXMuTWFwKHtcbiAgICBhbmNob3JQb2ludElkOiBTY2hlbWFzLkludCxcbiAgfSksXG4gIFtBY3Rpb25UeXBlLkRFVEFDSF9GUk9NX1BMQVlFUl06IFNjaGVtYXMuTWFwKHt9KSxcbiAgW0FjdGlvblR5cGUuUExBWV9WSURFT19TVFJFQU1dOiBTY2hlbWFzLk1hcCh7XG4gICAgc3JjOiBTY2hlbWFzLk9wdGlvbmFsKFNjaGVtYXMuU3RyaW5nKSxcbiAgICBsb29wOiBTY2hlbWFzLk9wdGlvbmFsKFNjaGVtYXMuQm9vbGVhbiksXG4gICAgdm9sdW1lOiBTY2hlbWFzLk9wdGlvbmFsKFNjaGVtYXMuRmxvYXQpLFxuICAgIGRjbENhc3Q6IFNjaGVtYXMuT3B0aW9uYWwoU2NoZW1hcy5Cb29sZWFuKSxcbiAgfSksXG4gIFtBY3Rpb25UeXBlLlNUT1BfVklERU9fU1RSRUFNXTogU2NoZW1hcy5NYXAoe30pLFxuICBbQWN0aW9uVHlwZS5QTEFZX0FVRElPX1NUUkVBTV06IFNjaGVtYXMuTWFwKHtcbiAgICB1cmw6IFNjaGVtYXMuU3RyaW5nLFxuICAgIHZvbHVtZTogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLkZsb2F0KSxcbiAgfSksXG4gIFtBY3Rpb25UeXBlLlNUT1BfQVVESU9fU1RSRUFNXTogU2NoZW1hcy5NYXAoe30pLFxuICBbQWN0aW9uVHlwZS5URUxFUE9SVF9QTEFZRVJdOiBTY2hlbWFzLk1hcCh7XG4gICAgeDogU2NoZW1hcy5JbnQsXG4gICAgeTogU2NoZW1hcy5JbnQsXG4gIH0pLFxuICBbQWN0aW9uVHlwZS5NT1ZFX1BMQVlFUl06IFNjaGVtYXMuTWFwKHtcbiAgICBwb3NpdGlvbjogU2NoZW1hcy5WZWN0b3IzLFxuICAgIGNhbWVyYVRhcmdldDogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLlZlY3RvcjMpLFxuICB9KSxcbiAgW0FjdGlvblR5cGUuUExBWV9ERUZBVUxUX0VNT1RFXTogU2NoZW1hcy5NYXAoe1xuICAgIGVtb3RlOiBTY2hlbWFzLlN0cmluZyxcbiAgfSksXG4gIFtBY3Rpb25UeXBlLlBMQVlfQ1VTVE9NX0VNT1RFXTogU2NoZW1hcy5NYXAoe1xuICAgIHNyYzogU2NoZW1hcy5TdHJpbmcsXG4gICAgbG9vcDogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLkJvb2xlYW4pLFxuICB9KSxcbiAgW0FjdGlvblR5cGUuT1BFTl9MSU5LXTogU2NoZW1hcy5NYXAoe1xuICAgIHVybDogU2NoZW1hcy5TdHJpbmcsXG4gIH0pLFxuICBbQWN0aW9uVHlwZS5TSE9XX1RFWFRdOiBTY2hlbWFzLk1hcCh7XG4gICAgdGV4dDogU2NoZW1hcy5TdHJpbmcsXG4gICAgaGlkZUFmdGVyU2Vjb25kczogU2NoZW1hcy5GbG9hdCxcbiAgICBmb250OiBTY2hlbWFzLkVudW1OdW1iZXIoRm9udCwgRm9udC5GX1NBTlNfU0VSSUYpLFxuICAgIGZvbnRTaXplOiBTY2hlbWFzLk9wdGlvbmFsKFNjaGVtYXMuRmxvYXQpLFxuICAgIHRleHRBbGlnbjogU2NoZW1hcy5FbnVtTnVtYmVyKEFsaWduTW9kZSwgQWxpZ25Nb2RlLlRBTV9NSURETEVfQ0VOVEVSKSxcbiAgfSksXG4gIFtBY3Rpb25UeXBlLkhJREVfVEVYVF06IFNjaGVtYXMuTWFwKHt9KSxcbiAgW0FjdGlvblR5cGUuU1RBUlRfREVMQVldOiBTY2hlbWFzLk1hcCh7XG4gICAgYWN0aW9uczogU2NoZW1hcy5BcnJheShTY2hlbWFzLlN0cmluZyksXG4gICAgdGltZW91dDogU2NoZW1hcy5GbG9hdCxcbiAgfSksXG4gIFtBY3Rpb25UeXBlLlNUT1BfREVMQVldOiBTY2hlbWFzLk1hcCh7XG4gICAgYWN0aW9uOiBTY2hlbWFzLlN0cmluZyxcbiAgfSksXG4gIFtBY3Rpb25UeXBlLlNUQVJUX0xPT1BdOiBTY2hlbWFzLk1hcCh7XG4gICAgYWN0aW9uczogU2NoZW1hcy5BcnJheShTY2hlbWFzLlN0cmluZyksXG4gICAgaW50ZXJ2YWw6IFNjaGVtYXMuRmxvYXQsXG4gIH0pLFxuICBbQWN0aW9uVHlwZS5TVE9QX0xPT1BdOiBTY2hlbWFzLk1hcCh7XG4gICAgYWN0aW9uOiBTY2hlbWFzLlN0cmluZyxcbiAgfSksXG4gIFtBY3Rpb25UeXBlLkNMT05FX0VOVElUWV06IFNjaGVtYXMuTWFwKHtcbiAgICBwb3NpdGlvbjogU2NoZW1hcy5WZWN0b3IzLFxuICB9KSxcbiAgW0FjdGlvblR5cGUuUkVNT1ZFX0VOVElUWV06IFNjaGVtYXMuTWFwKHt9KSxcbiAgW0FjdGlvblR5cGUuU0hPV19JTUFHRV06IFNjaGVtYXMuTWFwKHtcbiAgICBzcmM6IFNjaGVtYXMuU3RyaW5nLFxuICAgIGFsaWduOiBTY2hlbWFzLkVudW1OdW1iZXIoQWxpZ25Nb2RlLCBBbGlnbk1vZGUuVEFNX01JRERMRV9DRU5URVIpLFxuICAgIGhlaWdodDogU2NoZW1hcy5GbG9hdCxcbiAgICB3aWR0aDogU2NoZW1hcy5GbG9hdCxcbiAgICBoaWRlQWZ0ZXJTZWNvbmRzOiBTY2hlbWFzLk9wdGlvbmFsKFNjaGVtYXMuRmxvYXQpLFxuICAgIHRleHQ6IFNjaGVtYXMuT3B0aW9uYWwoU2NoZW1hcy5TdHJpbmcpLFxuICAgIGZvbnRTaXplOiBTY2hlbWFzLk9wdGlvbmFsKFNjaGVtYXMuRmxvYXQpLFxuICB9KSxcbiAgW0FjdGlvblR5cGUuSElERV9JTUFHRV06IFNjaGVtYXMuTWFwKHtcbiAgICBpbWFnZUVudGl0eTogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLkludCksXG4gIH0pLFxuICBbQWN0aW9uVHlwZS5EQU1BR0VdOiBTY2hlbWFzLk1hcCh7XG4gICAgcmFkaXVzOiBTY2hlbWFzLkZsb2F0LFxuICAgIGxheWVyOiBTY2hlbWFzLk9wdGlvbmFsKFxuICAgICAgU2NoZW1hcy5FbnVtU3RyaW5nKFByb3hpbWl0eUxheWVyLCBQcm94aW1pdHlMYXllci5BTEwpLFxuICAgICksXG4gICAgaGl0czogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLkludCksXG4gIH0pLFxuICBbQWN0aW9uVHlwZS5NT1ZFX1BMQVlFUl9IRVJFXTogU2NoZW1hcy5NYXAoe30pLFxuICBbQWN0aW9uVHlwZS5QTEFDRV9PTl9QTEFZRVJdOiBTY2hlbWFzLk1hcCh7fSksXG4gIFtBY3Rpb25UeXBlLlJPVEFURV9BU19QTEFZRVJdOiBTY2hlbWFzLk1hcCh7fSksXG4gIFtBY3Rpb25UeXBlLlBMQUNFX09OX0NBTUVSQV06IFNjaGVtYXMuTWFwKHt9KSxcbiAgW0FjdGlvblR5cGUuUk9UQVRFX0FTX0NBTUVSQV06IFNjaGVtYXMuTWFwKHt9KSxcbiAgW0FjdGlvblR5cGUuU0VUX1BPU0lUSU9OXTogU2NoZW1hcy5NYXAoe1xuICAgIHg6IFNjaGVtYXMuRmxvYXQsXG4gICAgeTogU2NoZW1hcy5GbG9hdCxcbiAgICB6OiBTY2hlbWFzLkZsb2F0LFxuICAgIHJlbGF0aXZlOiBTY2hlbWFzLk9wdGlvbmFsKFNjaGVtYXMuQm9vbGVhbiksXG4gIH0pLFxuICBbQWN0aW9uVHlwZS5TRVRfUk9UQVRJT05dOiBTY2hlbWFzLk1hcCh7XG4gICAgeDogU2NoZW1hcy5GbG9hdCxcbiAgICB5OiBTY2hlbWFzLkZsb2F0LFxuICAgIHo6IFNjaGVtYXMuRmxvYXQsXG4gICAgcmVsYXRpdmU6IFNjaGVtYXMuT3B0aW9uYWwoU2NoZW1hcy5Cb29sZWFuKSxcbiAgfSksXG4gIFtBY3Rpb25UeXBlLlNFVF9TQ0FMRV06IFNjaGVtYXMuTWFwKHtcbiAgICB4OiBTY2hlbWFzLkZsb2F0LFxuICAgIHk6IFNjaGVtYXMuRmxvYXQsXG4gICAgejogU2NoZW1hcy5GbG9hdCxcbiAgICByZWxhdGl2ZTogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLkJvb2xlYW4pLFxuICB9KSxcbiAgW0FjdGlvblR5cGUuRk9MTE9XX1BMQVlFUl06IFNjaGVtYXMuTWFwKHtcbiAgICBzcGVlZDogU2NoZW1hcy5GbG9hdCxcbiAgICB4OiBTY2hlbWFzLkJvb2xlYW4sXG4gICAgeTogU2NoZW1hcy5Cb29sZWFuLFxuICAgIHo6IFNjaGVtYXMuQm9vbGVhbixcbiAgICBtaW5EaXN0YW5jZTogU2NoZW1hcy5GbG9hdCxcbiAgfSksXG4gIFtBY3Rpb25UeXBlLlNUT1BfRk9MTE9XSU5HX1BMQVlFUl06IFNjaGVtYXMuTWFwKHt9KSxcbiAgW0FjdGlvblR5cGUuUkFORE9NXTogU2NoZW1hcy5NYXAoe1xuICAgIGFjdGlvbnM6IFNjaGVtYXMuQXJyYXkoU2NoZW1hcy5TdHJpbmcpLFxuICB9KSxcbiAgW0FjdGlvblR5cGUuQkFUQ0hdOiBTY2hlbWFzLk1hcCh7XG4gICAgYWN0aW9uczogU2NoZW1hcy5BcnJheShTY2hlbWFzLlN0cmluZyksXG4gIH0pLFxuICBbQWN0aW9uVHlwZS5IRUFMX1BMQVlFUl06IFNjaGVtYXMuTWFwKHtcbiAgICBtdWx0aXBsaWVyOiBTY2hlbWFzLkludCxcbiAgfSksXG59XG5cbmV4cG9ydCB0eXBlIEFjdGlvblBheWxvYWQ8VCBleHRlbmRzIEFjdGlvblR5cGUgPSBhbnk+ID1cbiAgVCBleHRlbmRzIGtleW9mIHR5cGVvZiBBY3Rpb25TY2hlbWFzXG4gICAgPyAodHlwZW9mIEFjdGlvblNjaGVtYXMpW1RdIGV4dGVuZHMgSVNjaGVtYVxuICAgICAgPyBSZXR1cm5UeXBlPCh0eXBlb2YgQWN0aW9uU2NoZW1hcylbVF1bJ2Rlc2VyaWFsaXplJ10+XG4gICAgICA6IHt9XG4gICAgOiB7fVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29tcG9uZW50PFQ+KGNvbXBvbmVudE5hbWU6IHN0cmluZywgZW5naW5lOiBJRW5naW5lKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGVuZ2luZS5nZXRDb21wb25lbnQoXG4gICAgICBjb21wb25lbnROYW1lLFxuICAgICkgYXMgTGFzdFdyaXRlV2luRWxlbWVudFNldENvbXBvbmVudERlZmluaXRpb248VD5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgYEVycm9yIHVzaW5nIGdldENvbXBvbmVudCB3aXRoIGNvbXBvbmVudE5hbWU9XCIke2NvbXBvbmVudE5hbWV9XCJgLFxuICAgIClcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21wb25lbnRzKGVuZ2luZTogSUVuZ2luZSkge1xuICByZXR1cm4ge1xuICAgIEFjdGlvbnM6IGdldENvbXBvbmVudDxBY3Rpb25zPihDb21wb25lbnROYW1lLkFDVElPTlMsIGVuZ2luZSksXG4gICAgU3RhdGVzOiBnZXRDb21wb25lbnQ8U3RhdGVzPihDb21wb25lbnROYW1lLlNUQVRFUywgZW5naW5lKSxcbiAgICBDb3VudGVyOiBnZXRDb21wb25lbnQ8Q291bnRlcj4oQ29tcG9uZW50TmFtZS5DT1VOVEVSLCBlbmdpbmUpLFxuICAgIFRyaWdnZXJzOiBnZXRDb21wb25lbnQ8VHJpZ2dlcnM+KENvbXBvbmVudE5hbWUuVFJJR0dFUlMsIGVuZ2luZSksXG4gICAgQ291bnRlckJhcjogZ2V0Q29tcG9uZW50PENvdW50ZXJCYXI+KENvbXBvbmVudE5hbWUuQ09VTlRFUl9CQVIsIGVuZ2luZSksXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudHMoZW5naW5lOiBJRW5naW5lKSB7XG4gIGNvbnN0IEFjdGlvblR5cGVzID0gZW5naW5lLmRlZmluZUNvbXBvbmVudChDb21wb25lbnROYW1lLkFDVElPTl9UWVBFUywge1xuICAgIHZhbHVlOiBTY2hlbWFzLkFycmF5KFxuICAgICAgU2NoZW1hcy5NYXAoe1xuICAgICAgICB0eXBlOiBTY2hlbWFzLlN0cmluZyxcbiAgICAgICAganNvblNjaGVtYTogU2NoZW1hcy5TdHJpbmcsXG4gICAgICB9KSxcbiAgICApLFxuICB9KVxuXG4gIGNvbnN0IEFjdGlvbnMgPSBlbmdpbmUuZGVmaW5lQ29tcG9uZW50KENvbXBvbmVudE5hbWUuQUNUSU9OUywge1xuICAgIGlkOiBTY2hlbWFzLkludCxcbiAgICB2YWx1ZTogU2NoZW1hcy5BcnJheShcbiAgICAgIFNjaGVtYXMuTWFwKHtcbiAgICAgICAgbmFtZTogU2NoZW1hcy5TdHJpbmcsXG4gICAgICAgIHR5cGU6IFNjaGVtYXMuU3RyaW5nLFxuICAgICAgICBqc29uUGF5bG9hZDogU2NoZW1hcy5TdHJpbmcsXG4gICAgICAgIGFsbG93ZWRJbkJhc2ljVmlldzogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLkJvb2xlYW4pLFxuICAgICAgICBiYXNpY1ZpZXdJZDogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLlN0cmluZyksXG4gICAgICB9KSxcbiAgICApLFxuICB9KVxuXG4gIGNvbnN0IENvdW50ZXIgPSBlbmdpbmUuZGVmaW5lQ29tcG9uZW50KENvbXBvbmVudE5hbWUuQ09VTlRFUiwge1xuICAgIGlkOiBTY2hlbWFzLk51bWJlcixcbiAgICB2YWx1ZTogU2NoZW1hcy5JbnQsXG4gIH0pXG5cbiAgY29uc3QgVHJpZ2dlcnMgPSBlbmdpbmUuZGVmaW5lQ29tcG9uZW50KENvbXBvbmVudE5hbWUuVFJJR0dFUlMsIHtcbiAgICB2YWx1ZTogU2NoZW1hcy5BcnJheShcbiAgICAgIFNjaGVtYXMuTWFwKHtcbiAgICAgICAgdHlwZTogU2NoZW1hcy5FbnVtU3RyaW5nPFRyaWdnZXJUeXBlPihcbiAgICAgICAgICBUcmlnZ2VyVHlwZSxcbiAgICAgICAgICBUcmlnZ2VyVHlwZS5PTl9JTlBVVF9BQ1RJT04sXG4gICAgICAgICksXG4gICAgICAgIGNvbmRpdGlvbnM6IFNjaGVtYXMuT3B0aW9uYWwoXG4gICAgICAgICAgU2NoZW1hcy5BcnJheShcbiAgICAgICAgICAgIFNjaGVtYXMuTWFwKHtcbiAgICAgICAgICAgICAgaWQ6IFNjaGVtYXMuT3B0aW9uYWwoU2NoZW1hcy5JbnQpLFxuICAgICAgICAgICAgICB0eXBlOiBTY2hlbWFzLkVudW1TdHJpbmc8VHJpZ2dlckNvbmRpdGlvblR5cGU+KFxuICAgICAgICAgICAgICAgIFRyaWdnZXJDb25kaXRpb25UeXBlLFxuICAgICAgICAgICAgICAgIFRyaWdnZXJDb25kaXRpb25UeXBlLldIRU5fU1RBVEVfSVMsXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIHZhbHVlOiBTY2hlbWFzLlN0cmluZyxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICksXG4gICAgICAgICksXG4gICAgICAgIG9wZXJhdGlvbjogU2NoZW1hcy5PcHRpb25hbChcbiAgICAgICAgICBTY2hlbWFzLkVudW1TdHJpbmc8VHJpZ2dlckNvbmRpdGlvbk9wZXJhdGlvbj4oXG4gICAgICAgICAgICBUcmlnZ2VyQ29uZGl0aW9uT3BlcmF0aW9uLFxuICAgICAgICAgICAgVHJpZ2dlckNvbmRpdGlvbk9wZXJhdGlvbi5BTkQsXG4gICAgICAgICAgKSxcbiAgICAgICAgKSxcbiAgICAgICAgYWN0aW9uczogU2NoZW1hcy5BcnJheShcbiAgICAgICAgICBTY2hlbWFzLk1hcCh7XG4gICAgICAgICAgICBpZDogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLkludCksXG4gICAgICAgICAgICBuYW1lOiBTY2hlbWFzLk9wdGlvbmFsKFNjaGVtYXMuU3RyaW5nKSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgKSxcbiAgICAgICAgYmFzaWNWaWV3SWQ6IFNjaGVtYXMuT3B0aW9uYWwoU2NoZW1hcy5TdHJpbmcpLFxuICAgICAgfSksXG4gICAgKSxcbiAgfSlcblxuICBjb25zdCBTdGF0ZXMgPSBlbmdpbmUuZGVmaW5lQ29tcG9uZW50KENvbXBvbmVudE5hbWUuU1RBVEVTLCB7XG4gICAgaWQ6IFNjaGVtYXMuTnVtYmVyLFxuICAgIHZhbHVlOiBTY2hlbWFzLkFycmF5KFNjaGVtYXMuU3RyaW5nKSxcbiAgICBkZWZhdWx0VmFsdWU6IFNjaGVtYXMuT3B0aW9uYWwoU2NoZW1hcy5TdHJpbmcpLFxuICAgIGN1cnJlbnRWYWx1ZTogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLlN0cmluZyksXG4gICAgcHJldmlvdXNWYWx1ZTogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLlN0cmluZyksXG4gIH0pXG5cbiAgY29uc3QgQ291bnRlckJhciA9IGVuZ2luZS5kZWZpbmVDb21wb25lbnQoQ29tcG9uZW50TmFtZS5DT1VOVEVSX0JBUiwge1xuICAgIHByaW1hcnlDb2xvcjogU2NoZW1hcy5PcHRpb25hbChTY2hlbWFzLlN0cmluZyksXG4gICAgc2Vjb25kYXJ5Q29sb3I6IFNjaGVtYXMuT3B0aW9uYWwoU2NoZW1hcy5TdHJpbmcpLFxuICAgIG1heFZhbHVlOiBTY2hlbWFzLk9wdGlvbmFsKFNjaGVtYXMuRmxvYXQpLFxuICB9KVxuXG4gIHJldHVybiB7XG4gICAgQWN0aW9uVHlwZXMsXG4gICAgQWN0aW9ucyxcbiAgICBDb3VudGVyLFxuICAgIFRyaWdnZXJzLFxuICAgIFN0YXRlcyxcbiAgICBDb3VudGVyQmFyLFxuICB9XG59XG5cbmV4cG9ydCB0eXBlIEVuZ2luZUNvbXBvbmVudHMgPSB7XG4gIEFuaW1hdG9yOiBBbmltYXRvckNvbXBvbmVudERlZmluaXRpb25FeHRlbmRlZFxuICBUcmFuc2Zvcm06IFRyYW5zZm9ybUNvbXBvbmVudEV4dGVuZGVkXG4gIEF1ZGlvU291cmNlOiBBdWRpb1NvdXJjZUNvbXBvbmVudERlZmluaXRpb25FeHRlbmRlZFxuICBBdmF0YXJBdHRhY2g6IExhc3RXcml0ZVdpbkVsZW1lbnRTZXRDb21wb25lbnREZWZpbml0aW9uPFBCQXZhdGFyQXR0YWNoPlxuICBWaXNpYmlsaXR5Q29tcG9uZW50OiBMYXN0V3JpdGVXaW5FbGVtZW50U2V0Q29tcG9uZW50RGVmaW5pdGlvbjxQQlZpc2liaWxpdHlDb21wb25lbnQ+XG4gIEdsdGZDb250YWluZXI6IExhc3RXcml0ZVdpbkVsZW1lbnRTZXRDb21wb25lbnREZWZpbml0aW9uPFBCR2x0ZkNvbnRhaW5lcj5cbiAgTWF0ZXJpYWw6IE1hdGVyaWFsQ29tcG9uZW50RGVmaW5pdGlvbkV4dGVuZGVkXG4gIE1lc2hSZW5kZXJlcjogTWVzaFJlbmRlcmVyQ29tcG9uZW50RGVmaW5pdGlvbkV4dGVuZGVkXG4gIFZpZGVvUGxheWVyOiBMYXN0V3JpdGVXaW5FbGVtZW50U2V0Q29tcG9uZW50RGVmaW5pdGlvbjxQQlZpZGVvUGxheWVyPlxuICBVaVRyYW5zZm9ybTogTGFzdFdyaXRlV2luRWxlbWVudFNldENvbXBvbmVudERlZmluaXRpb248UEJVaVRyYW5zZm9ybT5cbiAgVWlUZXh0OiBMYXN0V3JpdGVXaW5FbGVtZW50U2V0Q29tcG9uZW50RGVmaW5pdGlvbjxQQlVpVGV4dD5cbiAgVWlCYWNrZ3JvdW5kOiBMYXN0V3JpdGVXaW5FbGVtZW50U2V0Q29tcG9uZW50RGVmaW5pdGlvbjxQQlVpQmFja2dyb3VuZD5cbiAgQmlsbGJvYXJkOiBMYXN0V3JpdGVXaW5FbGVtZW50U2V0Q29tcG9uZW50RGVmaW5pdGlvbjxQQkJpbGxib2FyZD5cbiAgTmFtZTogTGFzdFdyaXRlV2luRWxlbWVudFNldENvbXBvbmVudERlZmluaXRpb248TmFtZVR5cGU+XG4gIFR3ZWVuOiBMYXN0V3JpdGVXaW5FbGVtZW50U2V0Q29tcG9uZW50RGVmaW5pdGlvbjxQQlR3ZWVuPlxuICBUd2VlblNlcXVlbmNlOiBMYXN0V3JpdGVXaW5FbGVtZW50U2V0Q29tcG9uZW50RGVmaW5pdGlvbjxQQlR3ZWVuU2VxdWVuY2U+XG4gIFBvaW50ZXJFdmVudHM6IExhc3RXcml0ZVdpbkVsZW1lbnRTZXRDb21wb25lbnREZWZpbml0aW9uPFBCUG9pbnRlckV2ZW50cz5cbiAgTmV0d29ya0VudGl0eTogdHlwZW9mIE5ldHdvcmtFbnRpdHlcbiAgU3luY0NvbXBvbmVudHM6IHR5cGVvZiBTeW5jQ29tcG9uZW50c1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdENvbXBvbmVudHMoZW5naW5lOiBJRW5naW5lKSB7XG4gIC8vIEFkZCBhY3Rpb25zIGZyb20gdGhpcyBwYWNrYWdlXG4gIGNvbnN0IGFjdGlvblR5cGVzID0gT2JqZWN0LnZhbHVlcyhBY3Rpb25UeXBlKVxuICBmb3IgKGNvbnN0IHR5cGUgb2YgYWN0aW9uVHlwZXMpIHtcbiAgICBjb25zdCBhY3Rpb25UeXBlID0gdHlwZSBhcyBBY3Rpb25UeXBlXG4gICAgYWRkQWN0aW9uVHlwZShlbmdpbmUsIGFjdGlvblR5cGUsIEFjdGlvblNjaGVtYXNbYWN0aW9uVHlwZV0pXG4gIH1cblxuICAvLyBBZGQgY291bnRlciB0byByb290IGVudGl0eVxuICBjb25zdCBDb3VudGVyID0gZW5naW5lLmdldENvbXBvbmVudChcbiAgICBDb21wb25lbnROYW1lLkNPVU5URVIsXG4gICkgYXMgTGFzdFdyaXRlV2luRWxlbWVudFNldENvbXBvbmVudERlZmluaXRpb248Q291bnRlcj5cbiAgY29uc3QgY291bnRlciA9IENvdW50ZXIuZ2V0T3JDcmVhdGVNdXRhYmxlKGVuZ2luZS5Sb290RW50aXR5KVxuICBjb3VudGVyLnZhbHVlID0gY291bnRlci52YWx1ZSB8fCAwXG5cbiAgY29uc3QgeyBWaWRlb1BsYXllciwgTWF0ZXJpYWwgfSA9IGdldEV4cGxvcmVyQ29tcG9uZW50cyhlbmdpbmUpXG4gIGluaXRWaWRlb1BsYXllckNvbXBvbmVudHMoZW5naW5lLCB7IFZpZGVvUGxheWVyLCBNYXRlcmlhbCB9KVxufVxuXG5mdW5jdGlvbiBnZXRWaWRlb1RleHR1cmUoeyBtYXRlcmlhbCB9OiBQQk1hdGVyaWFsKTogVmlkZW9UZXh0dXJlIHwgdW5kZWZpbmVkIHtcbiAgaWYgKFxuICAgIG1hdGVyaWFsPy4kY2FzZSA9PT0gJ3BicicgJiZcbiAgICBtYXRlcmlhbC5wYnIudGV4dHVyZT8udGV4Py4kY2FzZSA9PT0gJ3ZpZGVvVGV4dHVyZSdcbiAgKSB7XG4gICAgcmV0dXJuIG1hdGVyaWFsLnBici50ZXh0dXJlLnRleC52aWRlb1RleHR1cmVcbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRWaWRlb1BsYXllckNvbXBvbmVudE1hdGVyaWFsKFxuICBlbnRpdHk6IEVudGl0eSxcbiAgeyBNYXRlcmlhbCB9OiBQaWNrPEVuZ2luZUNvbXBvbmVudHMsICdNYXRlcmlhbCc+LFxuICBtYXRlcmlhbD86IFBCTWF0ZXJpYWwgfCBudWxsLFxuKSB7XG4gIGlmICghbWF0ZXJpYWwgfHwgIW1hdGVyaWFsLm1hdGVyaWFsIHx8IG1hdGVyaWFsLm1hdGVyaWFsLiRjYXNlICE9PSAncGJyJykge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBNYXRlcmlhbC5zZXRQYnJNYXRlcmlhbChlbnRpdHksIHtcbiAgICAuLi5tYXRlcmlhbC5tYXRlcmlhbC5wYnIsXG4gICAgdGV4dHVyZTogTWF0ZXJpYWwuVGV4dHVyZS5WaWRlbyh7XG4gICAgICB2aWRlb1BsYXllckVudGl0eTogZW50aXR5LFxuICAgIH0pLFxuICB9KVxufVxuXG5mdW5jdGlvbiBpbml0VmlkZW9QbGF5ZXJDb21wb25lbnRzKFxuICBlbmdpbmU6IElFbmdpbmUsXG4gIGNvbXBvbmVudHM6IFBpY2s8RW5naW5lQ29tcG9uZW50cywgJ01hdGVyaWFsJyB8ICdWaWRlb1BsYXllcic+LFxuKSB7XG4gIGZ1bmN0aW9uIHJlcGxhY2VWaWRlb1RleHR1cmUoKSB7XG4gICAgY29uc3QgeyBNYXRlcmlhbCwgVmlkZW9QbGF5ZXIgfSA9IGNvbXBvbmVudHNcbiAgICBlbmdpbmUucmVtb3ZlU3lzdGVtKHJlcGxhY2VWaWRlb1RleHR1cmUpXG4gICAgZm9yIChjb25zdCBbZW50aXR5LCBtYXRlcmlhbF0gb2YgZW5naW5lLmdldEVudGl0aWVzV2l0aChcbiAgICAgIE1hdGVyaWFsLFxuICAgICAgVmlkZW9QbGF5ZXIsXG4gICAgKSkge1xuICAgICAgY29uc3QgdmlkZW9UZXh0dXJlID0gZ2V0VmlkZW9UZXh0dXJlKG1hdGVyaWFsKVxuICAgICAgaWYgKHZpZGVvVGV4dHVyZT8udmlkZW9QbGF5ZXJFbnRpdHkgPT09IGVuZ2luZS5Sb290RW50aXR5KSB7XG4gICAgICAgIGluaXRWaWRlb1BsYXllckNvbXBvbmVudE1hdGVyaWFsKGVudGl0eSwgY29tcG9uZW50cywgbWF0ZXJpYWwpXG4gICAgICB9XG4gICAgfVxuICB9XG4gIGVuZ2luZS5hZGRTeXN0ZW0ocmVwbGFjZVZpZGVvVGV4dHVyZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbmRpdGlvblR5cGVzQnlDb21wb25lbnROYW1lKGNvbXBvbmVudE5hbWU6IENvbXBvbmVudE5hbWUpIHtcbiAgc3dpdGNoIChjb21wb25lbnROYW1lKSB7XG4gICAgY2FzZSBDb21wb25lbnROYW1lLlNUQVRFUzoge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgVHJpZ2dlckNvbmRpdGlvblR5cGUuV0hFTl9TVEFURV9JUyxcbiAgICAgICAgVHJpZ2dlckNvbmRpdGlvblR5cGUuV0hFTl9TVEFURV9JU19OT1QsXG4gICAgICAgIFRyaWdnZXJDb25kaXRpb25UeXBlLldIRU5fUFJFVklPVVNfU1RBVEVfSVMsXG4gICAgICAgIFRyaWdnZXJDb25kaXRpb25UeXBlLldIRU5fUFJFVklPVVNfU1RBVEVfSVNfTk9ULFxuICAgICAgXVxuICAgIH1cbiAgICBjYXNlIENvbXBvbmVudE5hbWUuQ09VTlRFUjoge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgVHJpZ2dlckNvbmRpdGlvblR5cGUuV0hFTl9DT1VOVEVSX0VRVUFMUyxcbiAgICAgICAgVHJpZ2dlckNvbmRpdGlvblR5cGUuV0hFTl9DT1VOVEVSX0lTX0dSRUFURVJfVEhBTixcbiAgICAgICAgVHJpZ2dlckNvbmRpdGlvblR5cGUuV0hFTl9DT1VOVEVSX0lTX0xFU1NfVEhBTixcbiAgICAgIF1cbiAgICB9XG4gICAgY2FzZSBDb21wb25lbnROYW1lLkFDVElPTlM6IHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIFRyaWdnZXJDb25kaXRpb25UeXBlLldIRU5fRElTVEFOQ0VfVE9fUExBWUVSX0xFU1NfVEhBTixcbiAgICAgICAgVHJpZ2dlckNvbmRpdGlvblR5cGUuV0hFTl9ESVNUQU5DRV9UT19QTEFZRVJfR1JFQVRFUl9USEFOLFxuICAgICAgXVxuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgQ29tcG9uZW50cyA9IFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZUNvbXBvbmVudHM+XG5cbmV4cG9ydCB0eXBlIEFjdGlvblR5cGVzQ29tcG9uZW50ID0gQ29tcG9uZW50c1snQWN0aW9uVHlwZXMnXVxuZXhwb3J0IHR5cGUgQWN0aW9uVHlwZXMgPSBSZXR1cm5UeXBlPFxuICBBY3Rpb25UeXBlc0NvbXBvbmVudFsnc2NoZW1hJ11bJ2Rlc2VyaWFsaXplJ11cbj5cblxuZXhwb3J0IHR5cGUgQWN0aW9uc0NvbXBvbmVudCA9IENvbXBvbmVudHNbJ0FjdGlvbnMnXVxuZXhwb3J0IHR5cGUgQWN0aW9ucyA9IFJldHVyblR5cGU8QWN0aW9uc0NvbXBvbmVudFsnc2NoZW1hJ11bJ2Rlc2VyaWFsaXplJ10+XG5leHBvcnQgdHlwZSBBY3Rpb24gPSBBY3Rpb25zWyd2YWx1ZSddWzBdXG5cbmV4cG9ydCB0eXBlIENvdW50ZXJDb21wb25lbnQgPSBDb21wb25lbnRzWydDb3VudGVyJ11cbmV4cG9ydCB0eXBlIENvdW50ZXIgPSBSZXR1cm5UeXBlPENvdW50ZXJDb21wb25lbnRbJ3NjaGVtYSddWydkZXNlcmlhbGl6ZSddPlxuXG5leHBvcnQgdHlwZSBDb3VudGVyQmFyQ29tcG9uZW50ID0gQ29tcG9uZW50c1snQ291bnRlckJhciddXG5leHBvcnQgdHlwZSBDb3VudGVyQmFyID0gUmV0dXJuVHlwZTxcbiAgQ291bnRlckJhckNvbXBvbmVudFsnc2NoZW1hJ11bJ2Rlc2VyaWFsaXplJ11cbj5cblxuZXhwb3J0IHR5cGUgVHJpZ2dlcnNDb21wb25lbnQgPSBDb21wb25lbnRzWydUcmlnZ2VycyddXG5leHBvcnQgdHlwZSBUcmlnZ2VycyA9IFJldHVyblR5cGU8VHJpZ2dlcnNDb21wb25lbnRbJ3NjaGVtYSddWydkZXNlcmlhbGl6ZSddPlxuZXhwb3J0IHR5cGUgVHJpZ2dlciA9IFRyaWdnZXJzWyd2YWx1ZSddWzBdXG5leHBvcnQgdHlwZSBUcmlnZ2VyQWN0aW9uID0gVHJpZ2dlclsnYWN0aW9ucyddWzBdXG5leHBvcnQgdHlwZSBUcmlnZ2VyQ29uZGl0aW9uID0gRXhjbHVkZTxUcmlnZ2VyWydjb25kaXRpb25zJ10sIHVuZGVmaW5lZD5bMF1cblxuZXhwb3J0IHR5cGUgU3RhdGVzQ29tcG9uZW50ID0gQ29tcG9uZW50c1snU3RhdGVzJ11cbmV4cG9ydCB0eXBlIFN0YXRlcyA9IFJldHVyblR5cGU8U3RhdGVzQ29tcG9uZW50WydzY2hlbWEnXVsnZGVzZXJpYWxpemUnXT5cbiJdfQ==