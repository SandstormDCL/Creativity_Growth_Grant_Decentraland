import { getComponents } from './definitions';
import { Color4, Quaternion } from '@dcl/sdk/math';
const bars = new Map();
const backgrounds = new Map();
const SCALE = 1;
export function createCounterBarSystem(engine, components) {
    const { Material, MeshRenderer, Transform, Billboard } = components;
    const { Counter, CounterBar } = getComponents(engine);
    return function counterBarSystem() {
        for (const [entity, { value }, { primaryColor, secondaryColor, maxValue },] of engine.getEntitiesWith(Counter, CounterBar)) {
            if (!bars.has(entity)) {
                const primary = primaryColor
                    ? Color4.fromHexString(primaryColor)
                    : Color4.Green();
                const seconday = secondaryColor
                    ? Color4.fromHexString(secondaryColor)
                    : Color4.Red();
                const container = engine.addEntity();
                Transform.create(container, { parent: entity });
                Billboard.create(container);
                const bar = engine.addEntity();
                bars.set(entity, bar);
                Material.setBasicMaterial(bar, {
                    diffuseColor: primary,
                });
                MeshRenderer.setCylinder(bar);
                Transform.create(bar, {
                    position: { x: 0, y: 0, z: 0 },
                    scale: { x: 0.1 * SCALE, y: 1 * SCALE, z: 0.1 * SCALE },
                    rotation: Quaternion.fromEulerDegrees(0, 0, 90),
                    parent: container,
                });
                const background = engine.addEntity();
                backgrounds.set(entity, background);
                Material.setBasicMaterial(background, {
                    diffuseColor: seconday,
                });
                MeshRenderer.setCylinder(background);
                Transform.create(background, {
                    position: { x: 0, y: 0, z: 0 },
                    scale: { x: 0.09 * SCALE, y: 1 * SCALE, z: 0.09 * SCALE },
                    rotation: Quaternion.fromEulerDegrees(0, 0, 90),
                    parent: container,
                });
                const entityTransform = Transform.getMutableOrNull(entity);
                if (entityTransform) {
                    if (entityTransform.parent === engine.PlayerEntity) {
                        entityTransform.position = { x: 0, y: 2.1, z: 0 };
                        entityTransform.scale = { x: 0.5, y: 0.5, z: 0.5 };
                    }
                    else if (entityTransform.parent === engine.CameraEntity) {
                        entityTransform.position = { x: 0, y: 0.5, z: 1 };
                        entityTransform.scale = { x: 0.5, y: 0.5, z: 0.5 };
                    }
                }
            }
            const max = maxValue || 10;
            const counter = Counter.getMutable(entity);
            if (counter.value > max) {
                counter.value = max;
            }
            if (counter.value < 0) {
                counter.value = 0;
            }
            const currentValue = Math.max(Math.min(counter.value / max, 1), 0) / (1 / SCALE);
            const bar = bars.get(entity);
            const background = backgrounds.get(entity);
            const barTransform = Transform.getMutable(bar);
            barTransform.position.x = (currentValue - SCALE) / 2;
            barTransform.scale.y = currentValue;
            const backgroundTransform = Transform.getMutable(background);
            backgroundTransform.position.x = SCALE / 2 + barTransform.position.x;
            backgroundTransform.scale.y = SCALE - currentValue;
        }
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY291bnRlci1iYXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvY291bnRlci1iYXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFvQixhQUFhLEVBQUUsTUFBTSxlQUFlLENBQUE7QUFDL0QsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUE7QUFFbEQsTUFBTSxJQUFJLEdBQUcsSUFBSSxHQUFHLEVBQWtCLENBQUE7QUFDdEMsTUFBTSxXQUFXLEdBQUcsSUFBSSxHQUFHLEVBQWtCLENBQUE7QUFFN0MsTUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFBO0FBRWYsTUFBTSxVQUFVLHNCQUFzQixDQUNwQyxNQUFlLEVBQ2YsVUFBNEI7SUFFNUIsTUFBTSxFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxHQUFHLFVBQVUsQ0FBQTtJQUNuRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxHQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUNyRCxPQUFPLFNBQVMsZ0JBQWdCO1FBQzlCLEtBQUssTUFBTSxDQUNULE1BQU0sRUFDTixFQUFFLEtBQUssRUFBRSxFQUNULEVBQUUsWUFBWSxFQUFFLGNBQWMsRUFBRSxRQUFRLEVBQUUsRUFDM0MsSUFBSSxNQUFNLENBQUMsZUFBZSxDQUFDLE9BQU8sRUFBRSxVQUFVLENBQUMsRUFBRSxDQUFDO1lBQ2pELElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7Z0JBQ3RCLE1BQU0sT0FBTyxHQUFHLFlBQVk7b0JBQzFCLENBQUMsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQztvQkFDcEMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQTtnQkFDbEIsTUFBTSxRQUFRLEdBQUcsY0FBYztvQkFDN0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxhQUFh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QUFtQixHQUFHLFNBQVMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUE7WUFDNUQsbUJBQW1CLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsQ0FBQyxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFBO1lBQ3BFLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLFlBQVksQ0FBQTtRQUNwRCxDQUFDO0lBQ0gsQ0FBQyxDQUFBO0FBQ0gsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVudGl0eSwgSUVuZ2luZSB9IGZyb20gJ0BkY2wvZWNzJ1xuaW1wb3J0IHsgRW5naW5lQ29tcG9uZW50cywgZ2V0Q29tcG9uZW50cyB9IGZyb20gJy4vZGVmaW5pdGlvbnMnXG5pbXBvcnQgeyBDb2xvcjQsIFF1YXRlcm5pb24gfSBmcm9tICdAZGNsL3Nkay9tYXRoJ1xuXG5jb25zdCBiYXJzID0gbmV3IE1hcDxFbnRpdHksIEVudGl0eT4oKVxuY29uc3QgYmFja2dyb3VuZHMgPSBuZXcgTWFwPEVudGl0eSwgRW50aXR5PigpXG5cbmNvbnN0IFNDQUxFID0gMVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ291bnRlckJhclN5c3RlbShcbiAgZW5naW5lOiBJRW5naW5lLFxuICBjb21wb25lbnRzOiBFbmdpbmVDb21wb25lbnRzLFxuKSB7XG4gIGNvbnN0IHsgTWF0ZXJpYWwsIE1lc2hSZW5kZXJlciwgVHJhbnNmb3JtLCBCaWxsYm9hcmQgfSA9IGNvbXBvbmVudHNcbiAgY29uc3QgeyBDb3VudGVyLCBDb3VudGVyQmFyIH0gPSBnZXRDb21wb25lbnRzKGVuZ2luZSlcbiAgcmV0dXJuIGZ1bmN0aW9uIGNvdW50ZXJCYXJTeXN0ZW0oKSB7XG4gICAgZm9yIChjb25zdCBbXG4gICAgICBlbnRpdHksXG4gICAgICB7IHZhbHVlIH0sXG4gICAgICB7IHByaW1hcnlDb2xvciwgc2Vjb25kYXJ5Q29sb3IsIG1heFZhbHVlIH0sXG4gICAgXSBvZiBlbmdpbmUuZ2V0RW50aXRpZXNXaXRoKENvdW50ZXIsIENvdW50ZXJCYXIpKSB7XG4gICAgICBpZiAoIWJhcnMuaGFzKGVudGl0eSkpIHtcbiAgICAgICAgY29uc3QgcHJpbWFyeSA9IHByaW1hcnlDb2xvclxuICAgICAgICAgID8gQ29sb3I0LmZyb21IZXhTdHJpbmcocHJpbWFyeUNvbG9yKVxuICAgICAgICAgIDogQ29sb3I0LkdyZWVuKClcbiAgICAgICAgY29uc3Qgc2Vjb25kYXkgPSBzZWNvbmRhcnlDb2xvclxuICAgICAgICAgID8gQ29sb3I0LmZyb21IZXhTdHJpbmcoc2Vjb25kYXJ5Q29sb3IpXG4gICAgICAgICAgOiBDb2xvcjQuUmVkKClcblxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBlbmdpbmUuYWRkRW50aXR5KClcbiAgICAgICAgVHJhbnNmb3JtLmNyZWF0ZShjb250YWluZXIsIHsgcGFyZW50OiBlbnRpdHkgfSlcbiAgICAgICAgQmlsbGJvYXJkLmNyZWF0ZShjb250YWluZXIpXG5cbiAgICAgICAgY29uc3QgYmFyID0gZW5naW5lLmFkZEVudGl0eSgpXG4gICAgICAgIGJhcnMuc2V0KGVudGl0eSwgYmFyKVxuICAgICAgICBNYXRlcmlhbC5zZXRCYXNpY01hdGVyaWFsKGJhciwge1xuICAgICAgICAgIGRpZmZ1c2VDb2xvcjogcHJpbWFyeSxcbiAgICAgICAgfSlcbiAgICAgICAgTWVzaFJlbmRlcmVyLnNldEN5bGluZGVyKGJhcilcbiAgICAgICAgVHJhbnNmb3JtLmNyZWF0ZShiYXIsIHtcbiAgICAgICAgICBwb3NpdGlvbjogeyB4OiAwLCB5OiAwLCB6OiAwIH0sXG4gICAgICAgICAgc2NhbGU6IHsgeDogMC4xICogU0NBTEUsIHk6IDEgKiBTQ0FMRSwgejogMC4xICogU0NBTEUgfSxcbiAgICAgICAgICByb3RhdGlvbjogUXVhdGVybmlvbi5mcm9tRXVsZXJEZWdyZWVzKDAsIDAsIDkwKSxcbiAgICAgICAgICBwYXJlbnQ6IGNvbnRhaW5lcixcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBiYWNrZ3JvdW5kID0gZW5naW5lLmFkZEVudGl0eSgpXG4gICAgICAgIGJhY2tncm91bmRzLnNldChlbnRpdHksIGJhY2tncm91bmQpXG4gICAgICAgIE1hdGVyaWFsLnNldEJhc2ljTWF0ZXJpYWwoYmFja2dyb3VuZCwge1xuICAgICAgICAgIGRpZmZ1c2VDb2xvcjogc2Vjb25kYXksXG4gICAgICAgIH0pXG4gICAgICAgIE1lc2hSZW5kZXJlci5zZXRDeWxpbmRlcihiYWNrZ3JvdW5kKVxuICAgICAgICBUcmFuc2Zvcm0uY3JlYXRlKGJhY2tncm91bmQsIHtcbiAgICAgICAgICBwb3NpdGlvbjogeyB4OiAwLCB5OiAwLCB6OiAwIH0sXG4gICAgICAgICAgc2NhbGU6IHsgeDogMC4wOSAqIFNDQUxFLCB5OiAxICogU0NBTEUsIHo6IDAuMDkgKiBTQ0FMRSB9LFxuICAgICAgICAgIHJvdGF0aW9uOiBRdWF0ZXJuaW9uLmZyb21FdWxlckRlZ3JlZXMoMCwgMCwgOTApLFxuICAgICAgICAgIHBhcmVudDogY29udGFpbmVyLFxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IGVudGl0eVRyYW5zZm9ybSA9IFRyYW5zZm9ybS5nZXRNdXRhYmxlT3JOdWxsKGVudGl0eSlcbiAgICAgICAgaWYgKGVudGl0eVRyYW5zZm9ybSkge1xuICAgICAgICAgIGlmIChlbnRpdHlUcmFuc2Zvcm0ucGFyZW50ID09PSBlbmdpbmUuUGxheWVyRW50aXR5KSB7XG4gICAgICAgICAgICBlbnRpdHlUcmFuc2Zvcm0ucG9zaXRpb24gPSB7IHg6IDAsIHk6IDIuMSwgejogMCB9XG4gICAgICAgICAgICBlbnRpdHlUcmFuc2Zvcm0uc2NhbGUgPSB7IHg6IDAuNSwgeTogMC41LCB6OiAwLjUgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoZW50aXR5VHJhbnNmb3JtLnBhcmVudCA9PT0gZW5naW5lLkNhbWVyYUVudGl0eSkge1xuICAgICAgICAgICAgZW50aXR5VHJhbnNmb3JtLnBvc2l0aW9uID0geyB4OiAwLCB5OiAwLjUsIHo6IDEgfVxuICAgICAgICAgICAgZW50aXR5VHJhbnNmb3JtLnNjYWxlID0geyB4OiAwLjUsIHk6IDAuNSwgejogMC41IH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgbWF4ID0gbWF4VmFsdWUgfHwgMTBcblxuICAgICAgY29uc3QgY291bnRlciA9IENvdW50ZXIuZ2V0TXV0YWJsZShlbnRpdHkpXG4gICAgICBpZiAoY291bnRlci52YWx1ZSA+IG1heCkge1xuICAgICAgICBjb3VudGVyLnZhbHVlID0gbWF4XG4gICAgICB9XG4gICAgICBpZiAoY291bnRlci52YWx1ZSA8IDApIHtcbiAgICAgICAgY291bnRlci52YWx1ZSA9IDBcbiAgICAgIH1cbiAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9XG4gICAgICAgIE1hdGgubWF4KE1hdGgubWluKGNvdW50ZXIudmFsdWUgLyBtYXgsIDEpLCAwKSAvICgxIC8gU0NBTEUpIC8vIDAuNzVcbiAgICAgIGNvbnN0IGJhciA9IGJhcnMuZ2V0KGVudGl0eSkhXG4gICAgICBjb25zdCBiYWNrZ3JvdW5kID0gYmFja2dyb3VuZHMuZ2V0KGVudGl0eSkhXG4gICAgICBjb25zdCBiYXJUcmFuc2Zvcm0gPSBUcmFuc2Zvcm0uZ2V0TXV0YWJsZShiYXIpXG4gICAgICBiYXJUcmFuc2Zvcm0ucG9zaXRpb24ueCA9IChjdXJyZW50VmFsdWUgLSBTQ0FMRSkgLyAyIC8vIC0wLjEyNVxuICAgICAgYmFyVHJhbnNmb3JtLnNjYWxlLnkgPSBjdXJyZW50VmFsdWVcblxuICAgICAgY29uc3QgYmFja2dyb3VuZFRyYW5zZm9ybSA9IFRyYW5zZm9ybS5nZXRNdXRhYmxlKGJhY2tncm91bmQpXG4gICAgICBiYWNrZ3JvdW5kVHJhbnNmb3JtLnBvc2l0aW9uLnggPSBTQ0FMRSAvIDIgKyBiYXJUcmFuc2Zvcm0ucG9zaXRpb24ueFxuICAgICAgYmFja2dyb3VuZFRyYW5zZm9ybS5zY2FsZS55ID0gU0NBTEUgLSBjdXJyZW50VmFsdWVcbiAgICB9XG4gIH1cbn1cbiJdfQ==