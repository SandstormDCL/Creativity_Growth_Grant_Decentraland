"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getCommands = exports.COMMANDS_PATH = void 0;
const path_1 = require("path");
const error_1 = require("./error");
exports.COMMANDS_PATH = (0, path_1.resolve)(__dirname, '../commands');
async function getCommands({ fs }) {
    const commandDirs = await fs.readdir(exports.COMMANDS_PATH);
    const commands = commandDirs.map(async (dir) => {
        const path = (0, path_1.resolve)(exports.COMMANDS_PATH, dir);
        if (!(await fs.directoryExists(path))) {
            throw new error_1.CliError('Developer: All commands must be inside a folder');
        }
        try {
            require.resolve(`${path}`);
        }
        catch {
            /* istanbul ignore next */
            throw new error_1.CliError('Developer: All commands must have an "index.js" file inside');
        }
        return dir;
    });
    return Promise.all(commands);
}
exports.getCommands = getCommands;
//# sourceMappingURL=commands.js.map