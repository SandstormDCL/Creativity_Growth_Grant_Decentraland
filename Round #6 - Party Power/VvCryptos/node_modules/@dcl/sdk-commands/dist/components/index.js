"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.initComponents = void 0;
const child_process_1 = require("child_process");
const exec_1 = require("../logic/exec");
const analytics_1 = require("./analytics");
const config_1 = require("./config");
const fetch_1 = require("./fetch");
const fs_1 = require("./fs");
const log_1 = require("./log");
async function initComponents() {
    const fs = (0, fs_1.createFsComponent)();
    const config = await (0, config_1.createConfigComponent)({ fs });
    const logger = (0, log_1.createStderrCliLogger)();
    const spawner = (0, exec_1.createProcessSpawnerComponent)(child_process_1.spawn);
    return {
        fs,
        fetch: (0, fetch_1.createFetchComponent)(),
        logger,
        config,
        spawner,
        analytics: await (0, analytics_1.createAnalyticsComponent)({ config, logger, fs })
    };
}
exports.initComponents = initComponents;
//# sourceMappingURL=index.js.map