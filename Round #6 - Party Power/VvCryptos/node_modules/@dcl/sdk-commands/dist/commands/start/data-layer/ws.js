"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handleDataLayerWs = void 0;
const WebSocket_1 = require("@dcl/rpc/dist/transports/WebSocket");
// TODO: dataLayer should be an optional component after WKC supports it
async function handleDataLayerWs(components, ws, dataLayer) {
    const wsTransport = (0, WebSocket_1.WebSocketTransport)(ws);
    dataLayer.rpcServer.attachTransport(wsTransport, dataLayer.context);
    ws.on('error', (error) => {
        components.logger.error(error);
        ws.close();
    });
    ws.on('close', () => {
        components.logger.debug('Websocket closed');
    });
}
exports.handleDataLayerWs = handleDataLayerWs;
//# sourceMappingURL=ws.js.map