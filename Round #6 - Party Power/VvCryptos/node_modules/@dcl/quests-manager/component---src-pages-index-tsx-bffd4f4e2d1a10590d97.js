"use strict";(self.webpackChunk_dcl_quests_manager=self.webpackChunk_dcl_quests_manager||[]).push([[691],{37200:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(63366),a=n(15861),i=n(64687),s=n.n(i),o=n(67294),l=n(99389),c=n(72118),u=n(84092),m=n(389),d=n(66687),p=n(4950),h=n(38026),f=n(73355),g=["id"],y=function(){return o.createElement("div",{className:"line"})},E=function(){return o.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.5 12C7.5 12.4125 7.1625 12.75 6.75 12.75C6.3375 12.75 6 12.4125 6 12V9C6 8.5875 6.3375 8.25 6.75 8.25C7.1625 8.25 7.5 8.5875 7.5 9V12ZM12 12C12 12.4125 11.6625 12.75 11.25 12.75C10.8375 12.75 10.5 12.4125 10.5 12V9C10.5 8.5875 10.8375 8.25 11.25 8.25C11.6625 8.25 12 8.5875 12 9V12ZM13.5 14.25C13.5 14.6632 13.164 15 12.75 15H5.25C4.836 15 4.5 14.6632 4.5 14.25V6H13.5V14.25ZM7.5 3.246C7.5 3.12975 7.6605 3 7.875 3H10.125C10.3395 3 10.5 3.12975 10.5 3.246V4.5H7.5V3.246ZM15.75 4.5H15H12V3.246C12 2.283 11.1593 1.5 10.125 1.5H7.875C6.84075 1.5 6 2.283 6 3.246V4.5H3H2.25C1.8375 4.5 1.5 4.8375 1.5 5.25C1.5 5.6625 1.8375 6 2.25 6H3V14.25C3 15.4905 4.0095 16.5 5.25 16.5H12.75C13.9905 16.5 15 15.4905 15 14.25V6H15.75C16.1625 6 16.5 5.6625 16.5 5.25C16.5 4.8375 16.1625 4.5 15.75 4.5Z",fill:"#161518"}))};function v(){var e=(0,c.useAuthContext)(),t=e[0],n=e[1],i=(0,o.useState)([]),v=i[0],C=i[1],w=(0,o.useState)((0,f.CU)()),x=w[0],k=w[1];if((0,o.useEffect)((function(){t&&new h.N(t).getMyQuests().then((function(e){return C(e.quests)})).catch(console.error)}),[t]),!t||n.loading)return o.createElement(p.SignIn,{onConnect:function(){return n.select()},isConnecting:n.loading});var N=function(e){try{return(0,l.NJ)(e),!0}catch(t){return!1}};return o.createElement(d.Container,{className:"full overview-container"},o.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"}},o.createElement("h1",{style:{textAlign:"center",marginBottom:"0"}},"Quests Manager"),o.createElement(m.Button,{onClick:function(){return(0,u.navigate)(f.Kl.designer())},content:"Create Quest",primary:!0})),o.createElement("div",{style:{background:"#ECEBED",marginTop:"45px",marginBottom:"40px",width:"410px",borderRadius:6}},o.createElement("p",{style:{padding:15}},"Need help getting started? Check out the"," ",o.createElement(u.Link,{href:"https://docs.decentraland.org/creator/quests/overview/",style:{textDecoration:"underline"}},"documentation")," ")),o.createElement("h2",null,"My published Quests"),v.length?o.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.createElement(b,null),v.map((function(e){return o.createElement("div",{key:e.name},o.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"28px 0",width:"100%"}},o.createElement("p",{style:{width:"20%",marginBottom:"0"}},"- ",e.name),o.createElement("p",{style:{width:"20%",marginBottom:"0"}},e.description.length>=20?e.description.slice(0,20)+"...":e.description),o.createElement(u.Link,{style:{width:"20%",marginBottom:"0",fontWeight:"600"},href:e.imageUrl},"Link"),o.createElement("p",{style:{width:"20%",marginBottom:"0"}},e.active?"Active":"Not Active"),o.createElement("div",{style:{width:"20%",display:"flex"}},o.createElement(m.Button,{size:"small",onClick:function(){return(0,u.navigate)(f.Kl.editPublishedQuest(e.id))},className:"quests-btn",primary:!0,content:"Edit"}))),o.createElement(y,null))}))):o.createElement("p",null,"You don't have any published Quests"),o.createElement("h2",null,"My drafts"),x.length?o.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.createElement(b,{draft:!0}),x.map((function(e){return o.createElement("div",{key:e.name||e.id},o.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"28px 0",width:"100%"}},o.createElement("p",{style:{width:"20%",marginBottom:"0"}},"- ",e.id),o.createElement("p",{style:{width:"20%",marginBottom:"0"}},e.name||"No name"),o.createElement("p",{style:{width:"20%",marginBottom:"0"}},e.description?e.description.length>=20?e.description.slice(0,20)+"...":e.description:"No Description"),o.createElement("p",{style:{width:"20%",marginBottom:"0"}},N(e)?"Ready":"Not Ready"),o.createElement("div",{style:{width:"20%",display:"flex",justifyContent:"space-between"}},o.createElement(m.Button,{size:"small",onClick:function(){return(0,u.navigate)(f.Kl.editDraftQuest(e.id))},primary:!0,className:"quests-btn",content:"Edit"}),o.createElement(m.Button,{size:"small",onClick:(0,a.Z)(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!N(e)){t.next=5;break}return e.id,n=(0,r.Z)(e,g),t.next=4,navigator.clipboard.writeText(JSON.stringify(n));case 4:alert("Definition has been Copied to your clipboard");case 5:case"end":return t.stop()}}),t)}))),className:"quests-btn",style:{padding:"0 0"},content:"Export",disabled:!N(e)}),o.createElement(m.Button,{size:"small",onClick:function(){(0,f.th)(e.id),k((0,f.CU)())},style:{minWidth:"20%",padding:"5px",alignSelf:"flex-end",background:"none",border:"2px solid black",display:"flex",justifyContent:"center"},content:o.createElement(E,null)}))),o.createElement(y,null))}))):o.createElement("p",null,"You don't have any drafts"))}var b=function(e){var t=e.draft,n=void 0!==t&&t;return o.createElement(o.Fragment,null,o.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderColor:"#736E7D",width:"100%"}},o.createElement("p",{className:"quest-table-column-name"},n?"#":"Name"),o.createElement("p",{className:"quest-table-column-name"},n?"Name":"Description"),o.createElement("p",{className:"quest-table-column-name"},n?"Description":"Image"),o.createElement("p",{className:"quest-table-column-name"},n?"Ready to Publish?":"Status"),o.createElement("p",{className:"quest-table-column-name",style:{marginBottom:"1em"}},"Actions")),o.createElement(y,null))}},38026:function(e,t,n){n.d(t,{N:function(){return h}});var r=n(15861),a=n(94578),i=n(64687),s=n.n(i),o=n(99389),l=n(18509),c=n.n(l),u=n(94012),m=n.n(u);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=function(e){function t(n){var r;return(r=e.call(this,t.URL)||this).user=n,r}(0,a.Z)(t,e);var n=t.prototype;return n.getMyQuests=function(){return this.fetch("/creators/"+this.user+"/quests",this.options().method("GET").authorization({sign:!0}))},n.publishQuest=function(e){(0,o.NJ)(e);for(var t,n=d(e.definition.steps);!(t=n()).done;)for(var r,a=d(t.value.tasks);!(r=a()).done;)for(var i,s=d(r.value.actionItems);!(i=s()).done;){var l=i.value;for(var c in l.parameters)"string"!=typeof l.parameters[c]&&(l.parameters[c]=JSON.stringify(l.parameters[c]))}return this.fetch("/quests",this.options().method("POST").authorization({sign:!0}).json(e).metadata(e))},n.getQuest=function(){var e=(0,r.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch("/quests/"+t,this.options().method("GET").authorization({sign:!0}));case 2:return n=e.sent,r=null,e.prev=4,e.next=7,this.fetch("/quests/"+t+"/reward?with_hook=true",this.options().method("GET").authorization({sign:!0}));case 7:r=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0);case 13:return e.abrupt("return",Object.assign({},n.quest,{reward:r||void 0}));case 14:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),n.updateQuest=function(e,t){if(!t.name)throw new Error("Quest must have a name");return this.fetch("/quests/"+e,this.options().method("PUT").authorization({sign:!0}).json(t))},n.deactivateQuest=function(e){return this.fetch("/quests/"+e,this.options().method("DELETE").authorization({sign:!0}))},n.activateQuest=function(e){return this.fetch("/quests/"+e+"/activate",this.options().method("PUT").authorization({sign:!0}))},n.getOldVersions=function(e){return this.fetch("/quests/"+e+"/updates",this.options().method("GET"))},t}(c());h.URL=m()("QUESTS_SERVER_URL","https://quests.decentraland.org/api")}}]);
//# sourceMappingURL=component---src-pages-index-tsx-bffd4f4e2d1a10590d97.js.map