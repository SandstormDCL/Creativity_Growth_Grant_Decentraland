"use strict";(self.webpackChunk_dcl_quests_manager=self.webpackChunk_dcl_quests_manager||[]).push([[241],{47845:function(e,n,t){t.d(n,{AC:function(){return I},HH:function(){return qe},Ly:function(){return de},Rr:function(){return so},Z_:function(){return Ie},_K:function(){return zn},hR:function(){return Oe},ll:function(){return go},my:function(){return ze},oR:function(){return D},s_:function(){return Z},tV:function(){return eo},x$:function(){return co}});var o,r,a,i=t(29439),l=t(93433),d=t(4942),c=t(45987),u=t(67294),s=t(46801),g=t(50074),f=t(1851),v=t(26214),h=t(28174),p=t(65011),m=t(60272),y=(t(73935),["position","children","className","style"]),S=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"],b=["type","position","isValidConnection","isConnectable","isConnectableStart","isConnectableEnd","id","onConnect","children","className","onMouseDown","onTouchStart"],E=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","onSelectionStart","onSelectionEnd","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","selectionOnDrag","selectionMode","panActivationKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","nodesFocusable","nodeOrigin","edgesFocusable","edgesUpdatable","elementsSelectable","defaultViewport","minZoom","maxZoom","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","disableKeyboardA11y","autoPanOnConnect","autoPanOnNodeDrag","connectionRadius","isValidConnection","onError","style","id","nodeDragThreshold"];function x(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return C(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return C(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==t.return||t.return()}finally{if(l)throw a}}}}function C(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var M=(0,u.createContext)(null),P=M.Provider,O={error001:function(){return"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001"},error002:function(){return"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them."},error003:function(e){return'Node type "'.concat(e,'" not found. Using fallback type "default".')},error004:function(){return"The React Flow parent container needs a width and a height to render the graph."},error005:function(){return"Only child nodes can use a parent extent."},error006:function(){return"Can't create edge. An edge needs a source and a target."},error007:function(e){return"The old edge with id=".concat(e," does not exist.")},error009:function(e){return'Marker type "'.concat(e,"\" doesn't exist.")},error008:function(e,n){return"Couldn't create edge for ".concat(e?"target":"source",' handle id: "').concat(e?n.targetHandle:n.sourceHandle,'", edge id: ').concat(n.id,".")},error010:function(){return"Handle: No node id found. Make sure to only use a Handle inside a custom Node."},error011:function(e){return'Edge type "'.concat(e,'" not found. Using fallback type "default".')},error012:function(e){return'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.')}},k=O.error001();function D(e,n){var t=(0,u.useContext)(M);if(null===t)throw new Error(k);return(0,g.s)(t,e,n)}var I=function(){var e=(0,u.useContext)(M);if(null===e)throw new Error(k);return(0,u.useMemo)((function(){return{getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}}),[e])},A=function(e){return e.userSelectionActive?"none":"all"};function Z(e){var n=e.position,t=e.children,o=e.className,r=e.style,a=(0,c.Z)(e,y),i=D(A),d="".concat(n).split("-");return u.createElement("div",w({className:(0,s.Z)(["react-flow__panel",o].concat((0,l.Z)(d))),style:w(w({},r),{},{pointerEvents:i})},a),t)}function R(e){var n=e.proOptions,t=e.position,o=void 0===t?"bottom-right":t;return null!=n&&n.hideAttribution?null:u.createElement(Z,{position:o,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev"},u.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var B=(0,u.memo)((function(e){var n=e.x,t=e.y,o=e.label,r=e.labelStyle,a=void 0===r?{}:r,l=e.labelShowBg,d=void 0===l||l,g=e.labelBgStyle,f=void 0===g?{}:g,v=e.labelBgPadding,h=void 0===v?[2,4]:v,p=e.labelBgBorderRadius,m=void 0===p?2:p,y=e.children,b=e.className,E=(0,c.Z)(e,S),x=(0,u.useRef)(null),C=(0,u.useState)({x:0,y:0,width:0,height:0}),N=(0,i.Z)(C,2),M=N[0],P=N[1],O=(0,s.Z)(["react-flow__edge-textwrapper",b]);return(0,u.useEffect)((function(){if(x.current){var e=x.current.getBBox();P({x:e.x,y:e.y,width:e.width,height:e.height})}}),[o]),void 0!==o&&o?u.createElement("g",w({transform:"translate(".concat(n-M.width/2," ").concat(t-M.height/2,")"),className:O,visibility:M.width?"visible":"hidden"},E),d&&u.createElement("rect",{width:M.width+2*h[0],x:-h[0],y:-h[1],height:M.height+2*h[1],className:"react-flow__edge-textbg",style:f,rx:m,ry:m}),u.createElement("text",{className:"react-flow__edge-text",y:M.height/2,dy:"0.3em",ref:x,style:a},o),y):null})),_=function(e){return{width:e.offsetWidth,height:e.offsetHeight}},z=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,n),t)},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},n=arguments.length>1?arguments[1]:void 0;return{x:z(e.x,n[0][0],n[1][0]),y:z(e.y,n[0][1],n[1][1])}},L=function(e,n,t){return e<n?z(Math.abs(e-n),1,50)/50:e>t?-z(Math.abs(e-t),1,50)/50:0},X=function(e,n){return[20*L(e.x,35,n.width-35),20*L(e.y,35,n.height-35)]},H=function(e){var n,t;return(null===(n=e.getRootNode)||void 0===n?void 0:n.call(e))||(null===(t=window)||void 0===t?void 0:t.document)},Y=function(e,n){return{x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}},V=function(e){var n=e.x,t=e.y;return{x:n,y:t,x2:n+e.width,y2:t+e.height}},K=function(e){var n=e.x,t=e.y;return{x:n,y:t,width:e.x2-n,height:e.y2-t}},U=function(e){return w(w({},e.positionAbsolute||{x:0,y:0}),{},{width:e.width||0,height:e.height||0})},F=function(e,n){var t=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),o=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(t*o)},W=function(e){return j(e.width)&&j(e.height)&&j(e.x)&&j(e.y)},j=function(e){return!isNaN(e)&&isFinite(e)},G=Symbol.for("internals"),q=["Enter"," ","Escape"],Q=function(e,n){0};function $(e){var n,t=function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,o=(null===(n=t.composedPath)||void 0===n||null===(n=n.call(t))||void 0===n?void 0:n[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(null==o?void 0:o.nodeName)||(null==o?void 0:o.hasAttribute("contenteditable"))||!(null==o||!o.closest(".nokey"))}var J=function(e){return"clientX"in e},ee=function(e,n){var t,o,r,a,i=J(e),l=i?e.clientX:null===(t=e.touches)||void 0===t?void 0:t[0].clientX,d=i?e.clientY:null===(o=e.touches)||void 0===o?void 0:o[0].clientY;return{x:l-(null!==(r=null==n?void 0:n.left)&&void 0!==r?r:0),y:d-(null!==(a=null==n?void 0:n.top)&&void 0!==a?a:0)}},ne=function(){var e;return"undefined"!=typeof navigator&&(null===(e=navigator)||void 0===e||null===(e=e.userAgent)||void 0===e?void 0:e.indexOf("Mac"))>=0},te=function(e){var n=e.id,t=e.path,o=e.labelX,r=e.labelY,a=e.label,i=e.labelStyle,l=e.labelShowBg,d=e.labelBgStyle,c=e.labelBgPadding,s=e.labelBgBorderRadius,g=e.style,f=e.markerEnd,v=e.markerStart,h=e.interactionWidth,p=void 0===h?20:h;return u.createElement(u.Fragment,null,u.createElement("path",{id:n,style:g,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:v}),p&&u.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),a&&j(o)&&j(r)?u.createElement(B,{x:o,y:r,label:a,labelStyle:i,labelShowBg:l,labelBgStyle:d,labelBgPadding:c,labelBgBorderRadius:s}):null)};te.displayName="BaseEdge";var oe,re,ae,ie,le,de;function ce(e,n,t){return void 0===t?t:function(o){var r=n().edges.find((function(n){return n.id===e}));r&&t(o,w({},r))}}function ue(e){var n=e.sourceX,t=e.sourceY,o=e.targetX,r=e.targetY,a=Math.abs(o-n)/2,i=o<n?o+a:o-a,l=Math.abs(r-t)/2;return[i,r<t?r+l:r-l,a,l]}function se(e){var n=e.sourceX,t=e.sourceY,o=e.targetX,r=e.targetY,a=e.sourceControlX,i=e.sourceControlY,l=.125*n+.375*a+.375*e.targetControlX+.125*o,d=.125*t+.375*i+.375*e.targetControlY+.125*r;return[l,d,Math.abs(l-n),Math.abs(d-t)]}function ge(e){var n=e.pos,t=e.x1,o=e.y1,r=e.x2,a=e.y2;return n===de.Left||n===de.Right?[.5*(t+r),o]:[t,.5*(o+a)]}function fe(e){var n=e.sourceX,t=e.sourceY,o=e.sourcePosition,r=void 0===o?de.Bottom:o,a=e.targetX,l=e.targetY,d=e.targetPosition,c=void 0===d?de.Top:d,u=ge({pos:r,x1:n,y1:t,x2:a,y2:l}),s=(0,i.Z)(u,2),g=s[0],f=s[1],v=ge({pos:c,x1:a,y1:l,x2:n,y2:t}),h=(0,i.Z)(v,2),p=h[0],m=h[1],y=se({sourceX:n,sourceY:t,targetX:a,targetY:l,sourceControlX:g,sourceControlY:f,targetControlX:p,targetControlY:m}),S=(0,i.Z)(y,4),b=S[0],E=S[1],x=S[2],C=S[3];return["M".concat(n,",").concat(t," C").concat(g,",").concat(f," ").concat(p,",").concat(m," ").concat(a,",").concat(l),b,E,x,C]}!function(e){e.Strict="strict",e.Loose="loose"}(oe||(oe={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(re||(re={})),function(e){e.Partial="partial",e.Full="full"}(ae||(ae={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(ie||(ie={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(le||(le={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(de||(de={}));var ve=(0,u.memo)((function(e){var n=e.sourceX,t=e.sourceY,o=e.targetX,r=e.targetY,a=e.sourcePosition,l=void 0===a?de.Bottom:a,d=e.targetPosition,c=void 0===d?de.Top:d,s=e.label,g=e.labelStyle,f=e.labelShowBg,v=e.labelBgStyle,h=e.labelBgPadding,p=e.labelBgBorderRadius,m=e.style,y=e.markerEnd,S=e.markerStart,b=e.interactionWidth,E=fe({sourceX:n,sourceY:t,sourcePosition:l,targetX:o,targetY:r,targetPosition:c}),x=(0,i.Z)(E,3),C=x[0],N=x[1],w=x[2];return u.createElement(te,{path:C,labelX:N,labelY:w,label:s,labelStyle:g,labelShowBg:f,labelBgStyle:v,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:y,markerStart:S,interactionWidth:b})}));ve.displayName="SimpleBezierEdge";var he=(o={},(0,d.Z)(o,de.Left,{x:-1,y:0}),(0,d.Z)(o,de.Right,{x:1,y:0}),(0,d.Z)(o,de.Top,{x:0,y:-1}),(0,d.Z)(o,de.Bottom,{x:0,y:1}),o),pe=function(e){var n=e.source,t=e.sourcePosition,o=void 0===t?de.Bottom:t,r=e.target;return o===de.Left||o===de.Right?n.x<r.x?{x:1,y:0}:{x:-1,y:0}:n.y<r.y?{x:0,y:1}:{x:0,y:-1}},me=function(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))};function ye(e){var n=e.sourceX,t=e.sourceY,o=e.sourcePosition,r=void 0===o?de.Bottom:o,a=e.targetX,d=e.targetY,c=e.targetPosition,u=void 0===c?de.Top:c,s=e.borderRadius,g=void 0===s?5:s,f=e.centerX,v=e.centerY,h=e.offset,p=function(e){var n,t,o=e.source,r=e.sourcePosition,a=void 0===r?de.Bottom:r,d=e.target,c=e.targetPosition,u=void 0===c?de.Top:c,s=e.center,g=e.offset,f=he[a],v=he[u],h={x:o.x+f.x*g,y:o.y+f.y*g},p={x:d.x+v.x*g,y:d.y+v.y*g},m=pe({source:h,sourcePosition:a,target:p}),y=0!==m.x?"x":"y",S=m[y],b=[],E={x:0,y:0},x={x:0,y:0},C=ue({sourceX:o.x,sourceY:o.y,targetX:d.x,targetY:d.y}),N=(0,i.Z)(C,4),w=N[0],M=N[1],P=N[2],O=N[3];if(f[y]*v[y]==-1){n=s.x||w,t=s.y||M;var k=[{x:n,y:h.y},{x:n,y:p.y}],D=[{x:h.x,y:t},{x:p.x,y:t}];b=f[y]===S?"x"===y?k:D:"x"===y?D:k}else{var I=[{x:h.x,y:p.y}],A=[{x:p.x,y:h.y}];if(b="x"===y?f.x===S?A:I:f.y===S?I:A,a===u){var Z=Math.abs(o[y]-d[y]);if(Z<=g){var R=Math.min(g-1,g-Z);f[y]===S?E[y]=(h[y]>o[y]?-1:1)*R:x[y]=(p[y]>d[y]?-1:1)*R}}if(a!==u){var B="x"===y?"y":"x",_=f[y]===v[B],z=h[B]>p[B],T=h[B]<p[B];(1===f[y]&&(!_&&z||_&&T)||1!==f[y]&&(!_&&T||_&&z))&&(b="x"===y?I:A)}var L={x:h.x+E.x,y:h.y+E.y},X={x:p.x+x.x,y:p.y+x.y};Math.max(Math.abs(L.x-b[0].x),Math.abs(X.x-b[0].x))>=Math.max(Math.abs(L.y-b[0].y),Math.abs(X.y-b[0].y))?(n=(L.x+X.x)/2,t=b[0].y):(n=b[0].x,t=(L.y+X.y)/2)}return[[o,{x:h.x+E.x,y:h.y+E.y}].concat((0,l.Z)(b),[{x:p.x+x.x,y:p.y+x.y},d]),n,t,P,O]}({source:{x:n,y:t},sourcePosition:r,target:{x:a,y:d},targetPosition:u,center:{x:f,y:v},offset:void 0===h?20:h}),m=(0,i.Z)(p,5),y=m[0],S=m[1],b=m[2],E=m[3],x=m[4];return[y.reduce((function(e,n,t){return e+=t>0&&t<y.length-1?function(e,n,t,o){var r=Math.min(me(e,n)/2,me(n,t)/2,o),a=n.x,i=n.y;if(e.x===a&&a===t.x||e.y===i&&i===t.y)return"L".concat(a," ").concat(i);if(e.y===i){var l=e.x<t.x?-1:1,d=e.y<t.y?1:-1;return"L ".concat(a+r*l,",").concat(i,"Q ").concat(a,",").concat(i," ").concat(a,",").concat(i+r*d)}var c=e.x<t.x?1:-1,u=e.y<t.y?-1:1;return"L ".concat(a,",").concat(i+r*u,"Q ").concat(a,",").concat(i," ").concat(a+r*c,",").concat(i)}(y[t-1],n,y[t+1],g):"".concat(0===t?"M":"L").concat(n.x," ").concat(n.y)}),""),S,b,E,x]}var Se=(0,u.memo)((function(e){var n=e.sourceX,t=e.sourceY,o=e.targetX,r=e.targetY,a=e.label,l=e.labelStyle,d=e.labelShowBg,c=e.labelBgStyle,s=e.labelBgPadding,g=e.labelBgBorderRadius,f=e.style,v=e.sourcePosition,h=void 0===v?de.Bottom:v,p=e.targetPosition,m=void 0===p?de.Top:p,y=e.markerEnd,S=e.markerStart,b=e.pathOptions,E=e.interactionWidth,x=ye({sourceX:n,sourceY:t,sourcePosition:h,targetX:o,targetY:r,targetPosition:m,borderRadius:null==b?void 0:b.borderRadius,offset:null==b?void 0:b.offset}),C=(0,i.Z)(x,3),N=C[0],w=C[1],M=C[2];return u.createElement(te,{path:N,labelX:w,labelY:M,label:a,labelStyle:l,labelShowBg:d,labelBgStyle:c,labelBgPadding:s,labelBgBorderRadius:g,style:f,markerEnd:y,markerStart:S,interactionWidth:E})}));Se.displayName="SmoothStepEdge";var be=(0,u.memo)((function(e){var n;return u.createElement(Se,w(w({},e),{},{pathOptions:(0,u.useMemo)((function(){var n;return{borderRadius:0,offset:null===(n=e.pathOptions)||void 0===n?void 0:n.offset}}),[null===(n=e.pathOptions)||void 0===n?void 0:n.offset])}))}));be.displayName="StepEdge";var Ee=(0,u.memo)((function(e){var n=e.sourceX,t=e.sourceY,o=e.targetX,r=e.targetY,a=e.label,l=e.labelStyle,d=e.labelShowBg,c=e.labelBgStyle,s=e.labelBgPadding,g=e.labelBgBorderRadius,f=e.style,v=e.markerEnd,h=e.markerStart,p=e.interactionWidth,m=function(e){var n=e.sourceX,t=e.sourceY,o=e.targetX,r=e.targetY,a=ue({sourceX:n,sourceY:t,targetX:o,targetY:r}),l=(0,i.Z)(a,4),d=l[0],c=l[1],u=l[2],s=l[3];return["M ".concat(n,",").concat(t,"L ").concat(o,",").concat(r),d,c,u,s]}({sourceX:n,sourceY:t,targetX:o,targetY:r}),y=(0,i.Z)(m,3),S=y[0],b=y[1],E=y[2];return u.createElement(te,{path:S,labelX:b,labelY:E,label:a,labelStyle:l,labelShowBg:d,labelBgStyle:c,labelBgPadding:s,labelBgBorderRadius:g,style:f,markerEnd:v,markerStart:h,interactionWidth:p})}));function xe(e,n){return e>=0?.5*e:25*n*Math.sqrt(-e)}function Ce(e){var n=e.pos,t=e.x1,o=e.y1,r=e.x2,a=e.y2,i=e.c;switch(n){case de.Left:return[t-xe(t-r,i),o];case de.Right:return[t+xe(r-t,i),o];case de.Top:return[t,o-xe(o-a,i)];case de.Bottom:return[t,o+xe(a-o,i)]}}function Ne(e){var n=e.sourceX,t=e.sourceY,o=e.sourcePosition,r=void 0===o?de.Bottom:o,a=e.targetX,l=e.targetY,d=e.targetPosition,c=void 0===d?de.Top:d,u=e.curvature,s=void 0===u?.25:u,g=Ce({pos:r,x1:n,y1:t,x2:a,y2:l,c:s}),f=(0,i.Z)(g,2),v=f[0],h=f[1],p=Ce({pos:c,x1:a,y1:l,x2:n,y2:t,c:s}),m=(0,i.Z)(p,2),y=m[0],S=m[1],b=se({sourceX:n,sourceY:t,targetX:a,targetY:l,sourceControlX:v,sourceControlY:h,targetControlX:y,targetControlY:S}),E=(0,i.Z)(b,4),x=E[0],C=E[1],N=E[2],w=E[3];return["M".concat(n,",").concat(t," C").concat(v,",").concat(h," ").concat(y,",").concat(S," ").concat(a,",").concat(l),x,C,N,w]}Ee.displayName="StraightEdge";var we=(0,u.memo)((function(e){var n=e.sourceX,t=e.sourceY,o=e.targetX,r=e.targetY,a=e.sourcePosition,l=void 0===a?de.Bottom:a,d=e.targetPosition,c=void 0===d?de.Top:d,s=e.label,g=e.labelStyle,f=e.labelShowBg,v=e.labelBgStyle,h=e.labelBgPadding,p=e.labelBgBorderRadius,m=e.style,y=e.markerEnd,S=e.markerStart,b=e.pathOptions,E=e.interactionWidth,x=Ne({sourceX:n,sourceY:t,sourcePosition:l,targetX:o,targetY:r,targetPosition:c,curvature:null==b?void 0:b.curvature}),C=(0,i.Z)(x,3),N=C[0],w=C[1],M=C[2];return u.createElement(te,{path:N,labelX:w,labelY:M,label:s,labelStyle:g,labelShowBg:f,labelBgStyle:v,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:y,markerStart:S,interactionWidth:E})}));we.displayName="BezierEdge";var Me=(0,u.createContext)(null),Pe=Me.Provider;Me.Consumer;var Oe=function(){return(0,u.useContext)(Me)},ke=function(e){var n=e.source,t=e.sourceHandle,o=e.target,r=e.targetHandle;return"reactflow__edge-".concat(n).concat(t||"","-").concat(o).concat(r||"")},De=function(e,n){if(void 0===e)return"";if("string"==typeof e)return e;var t=n?"".concat(n,"__"):"";return"".concat(t).concat(Object.keys(e).sort().map((function(n){return"".concat(n,"=").concat(e[n])})).join("&"))},Ie=function(e,n){return e.source&&e.target?function(e,n){return n.some((function(n){return!(n.source!==e.source||n.target!==e.target||n.sourceHandle!==e.sourceHandle&&(n.sourceHandle||e.sourceHandle)||n.targetHandle!==e.targetHandle&&(n.targetHandle||e.targetHandle))}))}(t="id"in(o=e)&&"source"in o&&"target"in o?w({},e):w(w({},e),{},{id:ke(e)}),n)?n:n.concat(t):(Q(0,O.error006()),n);var t,o},Ae=function(e,n,t,o){var r=e.x,a=e.y,l=(0,i.Z)(n,3),d=l[0],c=l[1],u=l[2],s=(0,i.Z)(o,2),g=s[0],f=s[1],v={x:(r-d)/u,y:(a-c)/u};return t?{x:g*Math.round(v.x/g),y:f*Math.round(v.y/f)}:v},Ze=function(e,n){var t=e.x,o=e.y,r=(0,i.Z)(n,3),a=r[0],l=r[1],d=r[2];return{x:t*d+a,y:o*d+l}},Re=function(e){var n,t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};var r=(null!==(n=e.width)&&void 0!==n?n:0)*o[0],a=(null!==(t=e.height)&&void 0!==t?t:0)*o[1],i={x:e.position.x-r,y:e.position.y-a};return w(w({},i),{},{positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-a}:i})},Be=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(0===e.length)return{x:0,y:0,width:0,height:0};var t=e.reduce((function(e,t){var o=Re(t,n).positionAbsolute,r=o.x,a=o.y;return Y(e,V({x:r,y:a,width:t.width||0,height:t.height||0}))}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return K(t)},_e=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],o=(0,i.Z)(t,3),r=o[0],a=o[1],l=o[2],d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0],s={x:(n.x-r)/l,y:(n.y-a)/l,width:n.width/l,height:n.height/l},g=[];return e.forEach((function(e){var n=e.width,t=e.height,o=e.selectable,r=void 0===o||o,a=e.hidden;if(c&&!r||void 0!==a&&a)return!1;var i=Re(e,u).positionAbsolute,l={x:i.x,y:i.y,width:n||0,height:t||0},f=F(s,l);(void 0===n||void 0===t||null===n||null===t||d&&f>0||f>=(n||0)*(t||0)||e.dragging)&&g.push(e)})),g},ze=function(e,n){var t=e.map((function(e){return e.id}));return n.filter((function(e){return t.includes(e.source)||t.includes(e.target)}))},Te=function(e,n,t,o,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1,i=n/(e.width*(1+a)),l=t/(e.height*(1+a)),d=Math.min(i,l),c=z(d,o,r);return[n/2-(e.x+e.width/2)*c,t/2-(e.y+e.height/2)*c,c]},Le=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.transition().duration(n)};function Xe(e,n,t,o){return(n[t]||[]).reduce((function(n,r){var a,i,l,d;"".concat(e.id,"-").concat(r.id,"-").concat(t)!==o&&n.push({id:r.id||null,type:t,nodeId:e.id,x:(null!==(a=null===(i=e.positionAbsolute)||void 0===i?void 0:i.x)&&void 0!==a?a:0)+r.x+r.width/2,y:(null!==(l=null===(d=e.positionAbsolute)||void 0===d?void 0:d.y)&&void 0!==l?l:0)+r.y+r.height/2});return n}),[])}var He={source:null,target:null,sourceHandle:null,targetHandle:null},Ye=function(){return{handleDomNode:null,isValid:!1,connection:He,endHandle:null}};function Ve(e,n,t,o,r,a,i){var l="target"===r,d=i.querySelector('.react-flow__handle[data-id="'.concat(null==e?void 0:e.nodeId,"-").concat(null==e?void 0:e.id,"-").concat(null==e?void 0:e.type,'"]')),c=w(w({},Ye()),{},{handleDomNode:d});if(d){var u=Ke(void 0,d),s=d.getAttribute("data-nodeid"),g=d.getAttribute("data-handleid"),f=d.classList.contains("connectable"),v=d.classList.contains("connectableend"),h={source:l?s:t,sourceHandle:l?g:o,target:l?t:s,targetHandle:l?o:g};c.connection=h,f&&v&&(n===oe.Strict?l&&"source"===u||!l&&"target"===u:s!==t||g!==o)&&(c.endHandle={nodeId:s,handleId:g,type:u},c.isValid=a(h))}return c}function Ke(e,n){return e||(null!=n&&n.classList.contains("target")?"target":null!=n&&n.classList.contains("source")?"source":null)}function Ue(e){null==e||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Fe(e){var n,t=e.event,o=e.handleId,r=e.nodeId,a=e.onConnect,d=e.isTarget,c=e.getState,u=e.setState,s=e.isValidConnection,g=e.edgeUpdaterType,f=e.onEdgeUpdateEnd,v=H(t.target),h=c(),p=h.connectionMode,m=h.domNode,y=h.autoPanOnConnect,S=h.connectionRadius,b=h.onConnectStart,E=h.panBy,x=h.getNodes,C=h.cancelConnection,N=0,w=ee(t),M=w.x,P=w.y,O=null==v?void 0:v.elementFromPoint(M,P),k=Ke(g,O),D=null==m?void 0:m.getBoundingClientRect();if(D&&k){var I,A=ee(t,D),Z=!1,R=null,B=!1,_=null,z=function(e){var n=e.nodes,t=e.nodeId,o=e.handleId,r=e.handleType;return n.reduce((function(e,n){if(n[G]){var a=n[G].handleBounds,i=[],d=[];a&&(i=Xe(n,a,"source","".concat(t,"-").concat(o,"-").concat(r)),d=Xe(n,a,"target","".concat(t,"-").concat(o,"-").concat(r))),e.push.apply(e,(0,l.Z)(i).concat((0,l.Z)(d)))}return e}),[])}({nodes:x(),nodeId:r,handleId:o,handleType:k}),T=function e(){if(y){var n=X(A,D),t=(0,i.Z)(n,2),o=t[0],r=t[1];E({x:o,y:r}),N=requestAnimationFrame(e)}};u({connectionPosition:A,connectionStatus:null,connectionNodeId:r,connectionHandleId:o,connectionHandleType:k,connectionStartHandle:{nodeId:r,handleId:o,type:k},connectionEndHandle:null}),null==b||b(t,{nodeId:r,handleId:o,handleType:k}),v.addEventListener("mousemove",L),v.addEventListener("mouseup",Y),v.addEventListener("touchmove",L),v.addEventListener("touchend",Y)}function L(e){var t=c().transform;A=ee(e,D);var a,i,l,g=function(e,n,t,o,r,a){var i=ee(e),l=i.x,d=i.y,c=n.elementsFromPoint(l,d).find((function(e){return e.classList.contains("react-flow__handle")}));if(c){var u=c.getAttribute("data-nodeid");if(u){var s=Ke(void 0,c),g=c.getAttribute("data-handleid"),f=a({nodeId:u,id:g,type:s});if(f)return{handle:{id:g,type:s,nodeId:u,x:t.x,y:t.y},validHandleResult:f}}}var v=[],h=1/0;if(r.forEach((function(e){var n=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));if(n<=o){var r=a(e);n<=h&&(n<h?v=[{handle:e,validHandleResult:r}]:n===h&&v.push({handle:e,validHandleResult:r}),h=n)}})),!v.length)return{handle:null,validHandleResult:Ye()};if(1===v.length)return v[0];var p=v.some((function(e){return e.validHandleResult.isValid})),m=v.some((function(e){return"target"===e.handle.type}));return v.find((function(e){var n=e.handle,t=e.validHandleResult;return m?"target"===n.type:!p||t.isValid}))||v[0]}(e,v,Ae(A,t,!1,[1,1]),S,z,(function(e){return Ve(e,p,r,o,d?"target":"source",s,v)})),f=g.handle,h=g.validHandleResult;if(n=f,Z||(T(),Z=!0),_=h.handleDomNode,R=h.connection,B=h.isValid,u({connectionPosition:n&&B?Ze({x:n.x,y:n.y},t):A,connectionStatus:(a=!!n,i=B,l=null,i?l="valid":a&&!i&&(l="invalid"),l),connectionEndHandle:h.endHandle}),!n&&!B&&!_)return Ue(I);R.source!==R.target&&_&&(Ue(I),I=_,_.classList.add("connecting","react-flow__handle-connecting"),_.classList.toggle("valid",B),_.classList.toggle("react-flow__handle-valid",B))}function Y(e){var t,o;(n||_)&&R&&B&&(null==a||a(R)),null===(t=(o=c()).onConnectEnd)||void 0===t||t.call(o,e),g&&(null==f||f(e)),Ue(I),C(),cancelAnimationFrame(N),Z=!1,B=!1,R=null,_=null,v.removeEventListener("mousemove",L),v.removeEventListener("mouseup",Y),v.removeEventListener("touchmove",L),v.removeEventListener("touchend",Y)}}var We=function(){return!0},je=function(e){return{connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}},Ge=(0,u.forwardRef)((function(e,n){var t,o,r=e.type,a=void 0===r?"source":r,i=e.position,l=void 0===i?de.Top:i,d=e.isValidConnection,g=e.isConnectable,v=void 0===g||g,h=e.isConnectableStart,p=void 0===h||h,m=e.isConnectableEnd,y=void 0===m||m,S=e.id,E=e.onConnect,x=e.children,C=e.className,N=e.onMouseDown,M=e.onTouchStart,P=(0,c.Z)(e,b),k=S||null,A="target"===a,Z=I(),R=Oe(),B=D(je,f.X),_=B.connectOnClick,z=B.noPanClassName,T=D(function(e,n,t){return function(o){var r=o.connectionStartHandle,a=o.connectionEndHandle,i=o.connectionClickStartHandle;return{connecting:(null==r?void 0:r.nodeId)===e&&(null==r?void 0:r.handleId)===n&&(null==r?void 0:r.type)===t||(null==a?void 0:a.nodeId)===e&&(null==a?void 0:a.handleId)===n&&(null==a?void 0:a.type)===t,clickConnecting:(null==i?void 0:i.nodeId)===e&&(null==i?void 0:i.handleId)===n&&(null==i?void 0:i.type)===t}}}(R,k,a),f.X),L=T.connecting,X=T.clickConnecting;R||(null===(t=(o=Z.getState()).onError)||void 0===t||t.call(o,"010",O.error010()));var Y=function(e){var n=Z.getState(),t=n.defaultEdgeOptions,o=n.onConnect,r=n.hasDefaultEdges,a=w(w({},t),e);if(r){var i=Z.getState(),l=i.edges;(0,i.setEdges)(Ie(a,l))}null==o||o(a),null==E||E(a)},V=function(e){if(R){var n=J(e);p&&(n&&0===e.button||!n)&&Fe({event:e,handleId:k,nodeId:R,onConnect:Y,isTarget:A,getState:Z.getState,setState:Z.setState,isValidConnection:d||Z.getState().isValidConnection||We}),n?null==N||N(e):null==M||M(e)}};return u.createElement("div",w({"data-handleid":k,"data-nodeid":R,"data-handlepos":l,"data-id":"".concat(R,"-").concat(k,"-").concat(a),className:(0,s.Z)(["react-flow__handle","react-flow__handle-".concat(l),"nodrag",z,C,{source:!A,target:A,connectable:v,connectablestart:p,connectableend:y,connecting:X,connectionindicator:v&&(p&&!L||y&&L)}]),onMouseDown:V,onTouchStart:V,onClick:_?function(e){var n=Z.getState(),t=n.onClickConnectStart,o=n.onClickConnectEnd,r=n.connectionClickStartHandle,i=n.connectionMode,l=n.isValidConnection;if(R&&(r||p)){if(!r)return null==t||t(e,{nodeId:R,handleId:k,handleType:a}),void Z.setState({connectionClickStartHandle:{nodeId:R,type:a,handleId:k}});var c=H(e.target),u=d||l||We,s=Ve({nodeId:R,id:k,type:a},i,r.nodeId,r.handleId||null,r.type,u,c),g=s.connection;s.isValid&&Y(g),null==o||o(e),Z.setState({connectionClickStartHandle:null})}}:void 0,ref:n},P),x)}));Ge.displayName="Handle";var qe=(0,u.memo)(Ge),Qe=function(e){var n=e.data,t=e.isConnectable,o=e.targetPosition,r=void 0===o?de.Top:o,a=e.sourcePosition,i=void 0===a?de.Bottom:a;return u.createElement(u.Fragment,null,u.createElement(qe,{type:"target",position:r,isConnectable:t}),null==n?void 0:n.label,u.createElement(qe,{type:"source",position:i,isConnectable:t}))};Qe.displayName="DefaultNode";var $e=(0,u.memo)(Qe),Je=function(e){var n=e.data,t=e.isConnectable,o=e.sourcePosition,r=void 0===o?de.Bottom:o;return u.createElement(u.Fragment,null,null==n?void 0:n.label,u.createElement(qe,{type:"source",position:r,isConnectable:t}))};Je.displayName="InputNode";var en=(0,u.memo)(Je),nn=function(e){var n=e.data,t=e.isConnectable,o=e.targetPosition,r=void 0===o?de.Top:o;return u.createElement(u.Fragment,null,u.createElement(qe,{type:"target",position:r,isConnectable:t}),null==n?void 0:n.label)};nn.displayName="OutputNode";var tn=(0,u.memo)(nn),on=function(){return null};on.displayName="GroupNode";var rn=function(e){return{selectedNodes:e.getNodes().filter((function(e){return e.selected})),selectedEdges:e.edges.filter((function(e){return e.selected}))}},an=function(e){return e.id};function ln(e,n){return(0,f.X)(e.selectedNodes.map(an),n.selectedNodes.map(an))&&(0,f.X)(e.selectedEdges.map(an),n.selectedEdges.map(an))}var dn=(0,u.memo)((function(e){var n=e.onSelectionChange,t=I(),o=D(rn,ln),r=o.selectedNodes,a=o.selectedEdges;return(0,u.useEffect)((function(){var e,o,i={nodes:r,edges:a};null==n||n(i),null===(e=(o=t.getState()).onSelectionChange)||void 0===e||e.call(o,i)}),[r,a,n]),null}));dn.displayName="SelectionListener";var cn=function(e){return!!e.onSelectionChange};function un(e){var n=e.onSelectionChange,t=D(cn);return n||t?u.createElement(dn,{onSelectionChange:n}):null}var sn=function(e){return{setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset}};function gn(e,n){(0,u.useEffect)((function(){void 0!==e&&n(e)}),[e])}function fn(e,n,t){(0,u.useEffect)((function(){void 0!==n&&t((0,d.Z)({},e,n))}),[n])}var vn=function(e){var n=e.nodes,t=e.edges,o=e.defaultNodes,r=e.defaultEdges,a=e.onConnect,i=e.onConnectStart,l=e.onConnectEnd,d=e.onClickConnectStart,c=e.onClickConnectEnd,s=e.nodesDraggable,g=e.nodesConnectable,v=e.nodesFocusable,h=e.edgesFocusable,p=e.edgesUpdatable,m=e.elevateNodesOnSelect,y=e.minZoom,S=e.maxZoom,b=e.nodeExtent,E=e.onNodesChange,x=e.onEdgesChange,C=e.elementsSelectable,N=e.connectionMode,M=e.snapGrid,P=e.snapToGrid,O=e.translateExtent,k=e.connectOnClick,A=e.defaultEdgeOptions,Z=e.fitView,R=e.fitViewOptions,B=e.onNodesDelete,_=e.onEdgesDelete,z=e.onNodeDrag,T=e.onNodeDragStart,L=e.onNodeDragStop,X=e.onSelectionDrag,H=e.onSelectionDragStart,Y=e.onSelectionDragStop,V=e.noPanClassName,K=e.nodeOrigin,U=e.rfId,F=e.autoPanOnConnect,W=e.autoPanOnNodeDrag,j=e.onError,G=e.connectionRadius,q=e.isValidConnection,Q=e.nodeDragThreshold,$=D(sn,f.X),J=$.setNodes,ee=$.setEdges,ne=$.setDefaultNodesAndEdges,te=$.setMinZoom,oe=$.setMaxZoom,re=$.setTranslateExtent,ae=$.setNodeExtent,ie=$.reset,le=I();return(0,u.useEffect)((function(){var e=null==r?void 0:r.map((function(e){return w(w({},e),A)}));return ne(o,e),function(){ie()}}),[]),fn("defaultEdgeOptions",A,le.setState),fn("connectionMode",N,le.setState),fn("onConnect",a,le.setState),fn("onConnectStart",i,le.setState),fn("onConnectEnd",l,le.setState),fn("onClickConnectStart",d,le.setState),fn("onClickConnectEnd",c,le.setState),fn("nodesDraggable",s,le.setState),fn("nodesConnectable",g,le.setState),fn("nodesFocusable",v,le.setState),fn("edgesFocusable",h,le.setState),fn("edgesUpdatable",p,le.setState),fn("elementsSelectable",C,le.setState),fn("elevateNodesOnSelect",m,le.setState),fn("snapToGrid",P,le.setState),fn("snapGrid",M,le.setState),fn("onNodesChange",E,le.setState),fn("onEdgesChange",x,le.setState),fn("connectOnClick",k,le.setState),fn("fitViewOnInit",Z,le.setState),fn("fitViewOnInitOptions",R,le.setState),fn("onNodesDelete",B,le.setState),fn("onEdgesDelete",_,le.setState),fn("onNodeDrag",z,le.setState),fn("onNodeDragStart",T,le.setState),fn("onNodeDragStop",L,le.setState),fn("onSelectionDrag",X,le.setState),fn("onSelectionDragStart",H,le.setState),fn("onSelectionDragStop",Y,le.setState),fn("noPanClassName",V,le.setState),fn("nodeOrigin",K,le.setState),fn("rfId",U,le.setState),fn("autoPanOnConnect",F,le.setState),fn("autoPanOnNodeDrag",W,le.setState),fn("onError",j,le.setState),fn("connectionRadius",G,le.setState),fn("isValidConnection",q,le.setState),fn("nodeDragThreshold",Q,le.setState),gn(n,J),gn(t,ee),gn(y,te),gn(S,oe),gn(O,re),gn(b,ae),null},hn={display:"none"},pn={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},mn="react-flow__node-desc",yn="react-flow__edge-desc",Sn="react-flow__aria-live",bn=function(e){return e.ariaLiveMessage};function En(e){var n=e.rfId,t=D(bn);return u.createElement("div",{id:"".concat(Sn,"-").concat(n),"aria-live":"assertive","aria-atomic":"true",style:pn},t)}function xn(e){var n=e.rfId,t=e.disableKeyboardA11y;return u.createElement(u.Fragment,null,u.createElement("div",{id:"".concat(mn,"-").concat(n),style:hn},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),u.createElement("div",{id:"".concat(yn,"-").concat(n),style:hn},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&u.createElement(En,{rfId:n}))}var Cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{actInsideInputWithModifier:!0},t=(0,u.useState)(!1),o=(0,i.Z)(t,2),r=o[0],a=o[1],d=(0,u.useRef)(!1),c=(0,u.useRef)(new Set([])),s=(0,u.useMemo)((function(){if(null!==e){var n=(Array.isArray(e)?e:[e]).filter((function(e){return"string"==typeof e})).map((function(e){return e.split("+")})),t=n.reduce((function(e,n){return e.concat.apply(e,(0,l.Z)(n))}),[]);return[n,t]}return[[],[]]}),[e]),g=(0,i.Z)(s,2),f=g[0],v=g[1];return(0,u.useEffect)((function(){var t="undefined"!=typeof document?document:null,o=(null==n?void 0:n.target)||t;if(null!==e){var r=function(e){if(d.current=e.ctrlKey||e.metaKey||e.shiftKey,(!d.current||d.current&&!n.actInsideInputWithModifier)&&$(e))return!1;var t=wn(e.code,v);c.current.add(e[t]),Nn(f,c.current,!1)&&(e.preventDefault(),a(!0))},i=function(e){if((!d.current||d.current&&!n.actInsideInputWithModifier)&&$(e))return!1;var t=wn(e.code,v);Nn(f,c.current,!0)?(a(!1),c.current.clear()):c.current.delete(e[t]),"Meta"===e.key&&c.current.clear(),d.current=!1},l=function(){c.current.clear(),a(!1)};return null==o||o.addEventListener("keydown",r),null==o||o.addEventListener("keyup",i),window.addEventListener("blur",l),function(){null==o||o.removeEventListener("keydown",r),null==o||o.removeEventListener("keyup",i),window.removeEventListener("blur",l)}}}),[e,a]),r};function Nn(e,n,t){return e.filter((function(e){return t||e.length===n.size})).some((function(e){return e.every((function(e){return n.has(e)}))}))}function wn(e,n){return n.includes(e)?"code":"key"}function Mn(e,n,t,o){var r,a,i,l,d,c,u,s;if(!e.parentNode)return t;var g=n.get(e.parentNode),f=Re(g,o);return Mn(g,n,{x:(null!==(r=t.x)&&void 0!==r?r:0)+f.x,y:(null!==(a=t.y)&&void 0!==a?a:0)+f.y,z:(null!==(i=null===(l=g[G])||void 0===l?void 0:l.z)&&void 0!==i?i:0)>(null!==(d=t.z)&&void 0!==d?d:0)?null!==(c=null===(u=g[G])||void 0===u?void 0:u.z)&&void 0!==c?c:0:null!==(s=t.z)&&void 0!==s?s:0},o)}function Pn(e,n,t){e.forEach((function(o){if(o.parentNode&&!e.has(o.parentNode))throw new Error("Parent node ".concat(o.parentNode," not found"));if(o.parentNode||null!=t&&t[o.id]){var r,a,i=Mn(o,e,w(w({},o.position),{},{z:null!==(r=null===(a=o[G])||void 0===a?void 0:a.z)&&void 0!==r?r:0}),n),l=i.x,d=i.y,c=i.z;o.positionAbsolute={x:l,y:d},o[G].z=c,null!=t&&t[o.id]&&(o[G].isParent=!0)}}))}function On(e,n,t,o){var r=new Map,a={},i=o?1e3:0;return e.forEach((function(e){var t,o=(j(e.zIndex)?e.zIndex:0)+(e.selected?i:0),l=n.get(e.id),d=w(w({width:null==l?void 0:l.width,height:null==l?void 0:l.height},e),{},{positionAbsolute:{x:e.position.x,y:e.position.y}});e.parentNode&&(d.parentNode=e.parentNode,a[e.parentNode]=!0),Object.defineProperty(d,G,{enumerable:!1,value:{handleBounds:null==l||null===(t=l[G])||void 0===t?void 0:t.handleBounds,z:o}}),r.set(e.id,d)})),Pn(r,t,a),r}function kn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e(),o=t.getNodes,r=t.width,a=t.height,l=t.minZoom,d=t.maxZoom,c=t.d3Zoom,u=t.d3Selection,s=t.fitViewOnInitDone,g=t.fitViewOnInit,f=t.nodeOrigin,h=n.initial&&!s&&g;if(c&&u&&(h||!n.initial)){var p=o().filter((function(e){var t,o=n.includeHiddenNodes?e.width&&e.height:!e.hidden;return null!==(t=n.nodes)&&void 0!==t&&t.length?o&&n.nodes.some((function(n){return n.id===e.id})):o})),m=p.every((function(e){return e.width&&e.height}));if(p.length>0&&m){var y,S,b,E=Be(p,f),x=Te(E,r,a,null!==(y=n.minZoom)&&void 0!==y?y:l,null!==(S=n.maxZoom)&&void 0!==S?S:d,null!==(b=n.padding)&&void 0!==b?b:.1),C=(0,i.Z)(x,3),N=C[0],w=C[1],M=C[2],P=v.CR.translate(N,w).scale(M);return"number"==typeof n.duration&&n.duration>0?c.transform(Le(u,n.duration),P):c.transform(u,P),!0}}return!1}function Dn(e,n){return e.forEach((function(e){var t,o=n.get(e.id);o&&n.set(o.id,w(w({},o),{},(t={},(0,d.Z)(t,G,o[G]),(0,d.Z)(t,"selected",e.selected),t)))})),new Map(n)}function In(e,n){return n.map((function(n){var t=e.find((function(e){return e.id===n.id}));return t&&(n.selected=t.selected),n}))}function An(e){var n=e.changedNodes,t=e.changedEdges,o=e.get,r=e.set,a=o(),i=a.nodeInternals,l=a.edges,d=a.onNodesChange,c=a.onEdgesChange,u=a.hasDefaultNodes,s=a.hasDefaultEdges;null!=n&&n.length&&(u&&r({nodeInternals:Dn(n,i)}),null==d||d(n)),null!=t&&t.length&&(s&&r({edges:In(t,l)}),null==c||c(t))}var Zn=function(){},Rn={zoomIn:Zn,zoomOut:Zn,zoomTo:Zn,getZoom:function(){return 1},setViewport:Zn,getViewport:function(){return{x:0,y:0,zoom:1}},fitView:function(){return!1},setCenter:Zn,fitBounds:Zn,project:function(e){return e},viewportInitialized:!1},Bn=function(e){return{d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}},_n=function(){var e=I(),n=D(Bn,f.X),t=n.d3Zoom,o=n.d3Selection;return(0,u.useMemo)((function(){return o&&t?{zoomIn:function(e){return t.scaleBy(Le(o,null==e?void 0:e.duration),1.2)},zoomOut:function(e){return t.scaleBy(Le(o,null==e?void 0:e.duration),1/1.2)},zoomTo:function(e,n){return t.scaleTo(Le(o,null==n?void 0:n.duration),e)},getZoom:function(){return e.getState().transform[2]},setViewport:function(n,r){var a,l,d,c=(0,i.Z)(e.getState().transform,3),u=c[0],s=c[1],g=c[2],f=v.CR.translate(null!==(a=n.x)&&void 0!==a?a:u,null!==(l=n.y)&&void 0!==l?l:s).scale(null!==(d=n.zoom)&&void 0!==d?d:g);t.transform(Le(o,null==r?void 0:r.duration),f)},getViewport:function(){var n=(0,i.Z)(e.getState().transform,3);return{x:n[0],y:n[1],zoom:n[2]}},fitView:function(n){return kn(e.getState,n)},setCenter:function(n,r,a){var i=e.getState(),l=i.width,d=i.height,c=i.maxZoom,u=void 0!==(null==a?void 0:a.zoom)?a.zoom:c,s=l/2-n*u,g=d/2-r*u,f=v.CR.translate(s,g).scale(u);t.transform(Le(o,null==a?void 0:a.duration),f)},fitBounds:function(n,r){var a,l=e.getState(),d=l.width,c=l.height,u=l.minZoom,s=l.maxZoom,g=Te(n,d,c,u,s,null!==(a=null==r?void 0:r.padding)&&void 0!==a?a:.1),f=(0,i.Z)(g,3),h=f[0],p=f[1],m=f[2],y=v.CR.translate(h,p).scale(m);t.transform(Le(o,null==r?void 0:r.duration),y)},project:function(n){var t=e.getState(),o=t.transform,r=t.snapToGrid,a=t.snapGrid;return Ae(n,o,r,a)},viewportInitialized:!0}:Rn}),[t,o])};function zn(){var e=_n(),n=I(),t=(0,u.useCallback)((function(){return n.getState().getNodes().map((function(e){return w({},e)}))}),[]),o=(0,u.useCallback)((function(e){return n.getState().nodeInternals.get(e)}),[]),r=(0,u.useCallback)((function(){var e=n.getState().edges;return(void 0===e?[]:e).map((function(e){return w({},e)}))}),[]),a=(0,u.useCallback)((function(e){var t=n.getState().edges;return(void 0===t?[]:t).find((function(n){return n.id===e}))}),[]),d=(0,u.useCallback)((function(e){var t=n.getState(),o=t.getNodes,r=t.setNodes,a=t.hasDefaultNodes,i=t.onNodesChange,l=o(),d="function"==typeof e?e(l):e;if(a)r(d);else if(i){i(0===d.length?l.map((function(e){return{type:"remove",id:e.id}})):d.map((function(e){return{item:e,type:"reset"}})))}}),[]),c=(0,u.useCallback)((function(e){var t=n.getState(),o=t.edges,r=void 0===o?[]:o,a=t.setEdges,i=t.hasDefaultEdges,l=t.onEdgesChange,d="function"==typeof e?e(r):e;if(i)a(d);else if(l){l(0===d.length?r.map((function(e){return{type:"remove",id:e.id}})):d.map((function(e){return{item:e,type:"reset"}})))}}),[]),s=(0,u.useCallback)((function(e){var t=Array.isArray(e)?e:[e],o=n.getState(),r=o.getNodes,a=o.setNodes,i=o.hasDefaultNodes,d=o.onNodesChange;if(i){var c=r();a([].concat((0,l.Z)(c),(0,l.Z)(t)))}else if(d){d(t.map((function(e){return{item:e,type:"add"}})))}}),[]),g=(0,u.useCallback)((function(e){var t=Array.isArray(e)?e:[e],o=n.getState(),r=o.edges,a=void 0===r?[]:r,i=o.setEdges,d=o.hasDefaultEdges,c=o.onEdgesChange;if(d)i([].concat((0,l.Z)(a),(0,l.Z)(t)));else if(c){c(t.map((function(e){return{item:e,type:"add"}})))}}),[]),f=(0,u.useCallback)((function(){var e=n.getState(),t=e.getNodes,o=e.edges,r=void 0===o?[]:o,a=e.transform,l=(0,i.Z)(a,3),d=l[0],c=l[1],u=l[2];return{nodes:t().map((function(e){return w({},e)})),edges:r.map((function(e){return w({},e)})),viewport:{x:d,y:c,zoom:u}}}),[]),v=(0,u.useCallback)((function(e){var t=e.nodes,o=e.edges,r=n.getState(),a=r.nodeInternals,i=r.getNodes,d=r.edges,c=r.hasDefaultNodes,u=r.hasDefaultEdges,s=r.onNodesDelete,g=r.onEdgesDelete,f=r.onNodesChange,v=r.onEdgesChange,h=(t||[]).map((function(e){return e.id})),p=(o||[]).map((function(e){return e.id})),m=i().reduce((function(e,n){var t=!h.includes(n.id)&&n.parentNode&&e.find((function(e){return e.id===n.parentNode}));return("boolean"!=typeof n.deletable||n.deletable)&&(h.includes(n.id)||t)&&e.push(n),e}),[]),y=d.filter((function(e){return"boolean"!=typeof e.deletable||e.deletable})),S=y.filter((function(e){return p.includes(e.id)}));if(m||S){var b=ze(m,y),E=[].concat((0,l.Z)(S),(0,l.Z)(b)),x=E.reduce((function(e,n){return e.includes(n.id)||e.push(n.id),e}),[]);if((u||c)&&(u&&n.setState({edges:d.filter((function(e){return!x.includes(e.id)}))}),c&&(m.forEach((function(e){a.delete(e.id)})),n.setState({nodeInternals:new Map(a)}))),x.length>0&&(null==g||g(E),v&&v(x.map((function(e){return{id:e,type:"remove"}})))),m.length>0)if(null==s||s(m),f)f(m.map((function(e){return{id:e.id,type:"remove"}})))}}),[]),h=(0,u.useCallback)((function(e){var t=W(e),o=t?null:n.getState().nodeInternals.get(e.id);return[t?e:U(o),o,t]}),[]),p=(0,u.useCallback)((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0,r=h(e),a=(0,i.Z)(r,3),l=a[0],d=a[1],c=a[2];return l?(o||n.getState().getNodes()).filter((function(n){if(!(c||n.id!==d.id&&n.positionAbsolute))return!1;var o=U(n),r=F(o,l);return t&&r>0||r>=e.width*e.height})):[]}),[]),m=(0,u.useCallback)((function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=h(e),r=(0,i.Z)(o,1)[0];if(!r)return!1;var a=F(r,n);return t&&a>0||a>=e.width*e.height}),[]);return(0,u.useMemo)((function(){return w(w({},e),{},{getNodes:t,getNode:o,getEdges:r,getEdge:a,setNodes:d,setEdges:c,addNodes:s,addEdges:g,toObject:f,deleteElements:v,getIntersectingNodes:p,isNodeIntersecting:m})}),[e,t,o,r,a,d,c,s,g,f,v,p,m])}var Tn={actInsideInputWithModifier:!1};var Ln={position:"absolute",width:"100%",height:"100%",top:0,left:0},Xn=function(e){return{x:e.x,y:e.y,zoom:e.k}},Hn=function(e,n){return e.target.closest(".".concat(n))},Yn=function(e,n){return 2===n&&Array.isArray(e)&&e.includes(2)},Vn=function(e){var n=e.ctrlKey&&ne()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*n},Kn=function(e){return{d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}},Un=function(e){var n=e.onMove,t=e.onMoveStart,o=e.onMoveEnd,r=e.onPaneContextMenu,a=e.zoomOnScroll,i=void 0===a||a,l=e.zoomOnPinch,d=void 0===l||l,c=e.panOnScroll,s=void 0!==c&&c,g=e.panOnScrollSpeed,m=void 0===g?.5:g,y=e.panOnScrollMode,S=void 0===y?re.Free:y,b=e.zoomOnDoubleClick,E=void 0===b||b,x=e.elementsSelectable,C=e.panOnDrag,N=void 0===C||C,w=e.defaultViewport,M=e.translateExtent,P=e.minZoom,k=e.maxZoom,A=e.zoomActivationKeyCode,Z=e.preventScrolling,R=void 0===Z||Z,B=e.children,T=e.noWheelClassName,L=e.noPanClassName,X=(0,u.useRef)(),H=I(),Y=(0,u.useRef)(!1),V=(0,u.useRef)(!1),K=(0,u.useRef)(null),U=(0,u.useRef)({x:0,y:0,zoom:0}),F=D(Kn,f.X),W=F.d3Zoom,j=F.d3Selection,G=F.d3ZoomHandler,q=F.userSelectionActive,Q=Cn(A),$=(0,u.useRef)(0),J=(0,u.useRef)(!1),ee=(0,u.useRef)();return function(e){var n=I();(0,u.useEffect)((function(){var t,o=function(){if(e.current){var t,o,r=_(e.current);0!==r.height&&0!==r.width||null===(t=(o=n.getState()).onError)||void 0===t||t.call(o,"004",O.error004()),n.setState({width:r.width||500,height:r.height||500})}};return o(),window.addEventListener("resize",o),e.current&&(t=new ResizeObserver((function(){return o()}))).observe(e.current),function(){window.removeEventListener("resize",o),t&&e.current&&t.unobserve(e.current)}}),[])}(K),(0,u.useEffect)((function(){if(K.current){var e=K.current.getBoundingClientRect(),n=(0,v.sP)().scaleExtent([P,k]).translateExtent(M),t=(0,h.Z)(K.current).call(n),o=v.CR.translate(w.x,w.y).scale(z(w.zoom,P,k)),r=[[0,0],[e.width,e.height]],a=n.constrain()(o,r,M);n.transform(t,a),n.wheelDelta(Vn),H.setState({d3Zoom:n,d3Selection:t,d3ZoomHandler:t.on("wheel.zoom"),transform:[a.x,a.y,a.k],domNode:K.current.closest(".react-flow")})}}),[]),(0,u.useEffect)((function(){j&&W&&(!s||Q||q?void 0!==G&&j.on("wheel.zoom",(function(e,n){if(!R||Hn(e,T))return null;e.preventDefault(),G.call(this,e,n)}),{passive:!1}):j.on("wheel.zoom",(function(e){if(Hn(e,T))return!1;e.preventDefault(),e.stopImmediatePropagation();var r=j.property("__zoom").k||1,a=ne();if(e.ctrlKey&&d&&a){var i=(0,p.Z)(e),l=Vn(e),c=r*Math.pow(2,l);W.scaleTo(j,c,i,e)}else{var u=1===e.deltaMode?20:1,s=S===re.Vertical?0:e.deltaX*u,g=S===re.Horizontal?0:e.deltaY*u;!a&&e.shiftKey&&S!==re.Vertical&&(s=e.deltaY*u,g=0),W.translateBy(j,-s/r*m,-g/r*m,{internal:!0});var f=Xn(j.property("__zoom")),v=H.getState(),h=v.onViewportChangeStart,y=v.onViewportChange,b=v.onViewportChangeEnd;clearTimeout(ee.current),J.current||(J.current=!0,null==t||t(e,f),null==h||h(f)),J.current&&(null==n||n(e,f),null==y||y(f),ee.current=setTimeout((function(){null==o||o(e,f),null==b||b(f),J.current=!1}),150))}}),{passive:!1}))}),[q,s,S,j,W,G,Q,d,R,T,t,n,o]),(0,u.useEffect)((function(){W&&W.on("start",(function(e){var n,o;if(!e.sourceEvent||e.sourceEvent.internal)return null;$.current=null===(n=e.sourceEvent)||void 0===n?void 0:n.button;var r=H.getState().onViewportChangeStart,a=Xn(e.transform);Y.current=!0,U.current=a,"mousedown"===(null===(o=e.sourceEvent)||void 0===o?void 0:o.type)&&H.setState({paneDragging:!0}),null==r||r(a),null==t||t(e.sourceEvent,a)}))}),[W,t]),(0,u.useEffect)((function(){W&&(q&&!Y.current?W.on("zoom",null):q||W.on("zoom",(function(e){var t,o,a=H.getState().onViewportChange;if(H.setState({transform:[e.transform.x,e.transform.y,e.transform.k]}),V.current=!(!r||!Yn(N,null!==(t=$.current)&&void 0!==t?t:0)),(n||a)&&(null===(o=e.sourceEvent)||void 0===o||!o.internal)){var i=Xn(e.transform);null==a||a(i),null==n||n(e.sourceEvent,i)}})))}),[q,W,n,N,r]),(0,u.useEffect)((function(){W&&W.on("end",(function(e){var n;if(!e.sourceEvent||e.sourceEvent.internal)return null;var t,a,i=H.getState().onViewportChangeEnd;if(Y.current=!1,H.setState({paneDragging:!1}),r&&Yn(N,null!==(n=$.current)&&void 0!==n?n:0)&&!V.current&&r(e.sourceEvent),V.current=!1,(o||i)&&(t=U.current,a=e.transform,t.x!==a.x||t.y!==a.y||t.zoom!==a.k)){var l=Xn(e.transform);U.current=l,clearTimeout(X.current),X.current=setTimeout((function(){null==i||i(l),null==o||o(e.sourceEvent,l)}),s?150:0)}}))}),[W,s,N,o,r]),(0,u.useEffect)((function(){W&&W.filter((function(e){var n=Q||i,t=d&&e.ctrlKey;if((!0===N||Array.isArray(N)&&N.includes(1))&&1===e.button&&"mousedown"===e.type&&(Hn(e,"react-flow__node")||Hn(e,"react-flow__edge")))return!0;if(!(N||n||s||E||d))return!1;if(q)return!1;if(!E&&"dblclick"===e.type)return!1;if(Hn(e,T)&&"wheel"===e.type)return!1;if(Hn(e,L)&&("wheel"!==e.type||s&&"wheel"===e.type))return!1;if(!d&&e.ctrlKey&&"wheel"===e.type)return!1;if(!n&&!s&&!t&&"wheel"===e.type)return!1;if(!N&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(N)&&!N.includes(e.button)&&("mousedown"===e.type||"touchstart"===e.type))return!1;var o=Array.isArray(N)&&N.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&o}))}),[q,W,i,d,s,E,N,x,Q]),u.createElement("div",{className:"react-flow__renderer",ref:K,style:Ln},B)},Fn=function(e){return{userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect}};function Wn(){var e=D(Fn,f.X),n=e.userSelectionActive,t=e.userSelectionRect;return n&&t?u.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}function jn(e,n){var t=e.find((function(e){return e.id===n.parentNode}));if(t){var o=n.position.x+n.width-t.width,r=n.position.y+n.height-t.height;if(o>0||r>0||n.position.x<0||n.position.y<0){var a,i;if(t.style=w({},t.style)||{},t.style.width=null!==(a=t.style.width)&&void 0!==a?a:t.width,t.style.height=null!==(i=t.style.height)&&void 0!==i?i:t.height,o>0&&(t.style.width+=o),r>0&&(t.style.height+=r),n.position.x<0){var l=Math.abs(n.position.x);t.position.x=t.position.x-l,t.style.width+=l,n.position.x=0}if(n.position.y<0){var d=Math.abs(n.position.y);t.position.y=t.position.y-d,t.style.height+=d,n.position.y=0}t.width=t.style.width,t.height=t.style.height}}}function Gn(e,n){if(e.some((function(e){return"reset"===e.type})))return e.filter((function(e){return"reset"===e.type})).map((function(e){return e.item}));var t=e.filter((function(e){return"add"===e.type})).map((function(e){return e.item}));return n.reduce((function(n,t){var o=e.filter((function(e){return e.id===t.id}));if(0===o.length)return n.push(t),n;var r,a=w({},t),i=x(o);try{for(i.s();!(r=i.n()).done;){var l=r.value;if(l)switch(l.type){case"select":a.selected=l.selected;break;case"position":void 0!==l.position&&(a.position=l.position),void 0!==l.positionAbsolute&&(a.positionAbsolute=l.positionAbsolute),void 0!==l.dragging&&(a.dragging=l.dragging),a.expandParent&&jn(n,a);break;case"dimensions":void 0!==l.dimensions&&(a.width=l.dimensions.width,a.height=l.dimensions.height),void 0!==l.updateStyle&&(a.style=w(w({},a.style||{}),l.dimensions)),"boolean"==typeof l.resizing&&(a.resizing=l.resizing),a.expandParent&&jn(n,a);break;case"remove":return n}}}catch(d){i.e(d)}finally{i.f()}return n.push(a),n}),t)}function qn(e,n){return Gn(e,n)}var Qn=function(e,n){return{id:e,type:"select",selected:n}};function $n(e,n){return e.reduce((function(e,t){var o=n.includes(t.id);return!t.selected&&o?(t.selected=!0,e.push(Qn(t.id,!0))):t.selected&&!o&&(t.selected=!1,e.push(Qn(t.id,!1))),e}),[])}var Jn=function(e,n){return function(t){t.target===n.current&&(null==e||e(t))}},et=function(e){return{userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}},nt=(0,u.memo)((function(e){var n=e.isSelecting,t=e.selectionMode,o=void 0===t?ae.Full:t,r=e.panOnDrag,a=e.onSelectionStart,i=e.onSelectionEnd,l=e.onPaneClick,d=e.onPaneContextMenu,c=e.onPaneScroll,g=e.onPaneMouseEnter,v=e.onPaneMouseMove,h=e.onPaneMouseLeave,p=e.children,m=(0,u.useRef)(null),y=I(),S=(0,u.useRef)(0),b=(0,u.useRef)(0),E=(0,u.useRef)(),x=D(et,f.X),C=x.userSelectionActive,N=x.elementsSelectable,M=x.dragging,P=function(){y.setState({userSelectionActive:!1,userSelectionRect:null}),S.current=0,b.current=0},O=function(e){null==l||l(e),y.getState().resetSelectedElements(),y.setState({nodesSelectionActive:!1})},k=c?function(e){return c(e)}:void 0,A=N&&(n||C);return u.createElement("div",{className:(0,s.Z)(["react-flow__pane",{dragging:M,selection:n}]),onClick:A?void 0:Jn(O,m),onContextMenu:Jn((function(e){Array.isArray(r)&&null!=r&&r.includes(2)?e.preventDefault():null==d||d(e)}),m),onWheel:Jn(k,m),onMouseEnter:A?void 0:g,onMouseDown:A?function(e){var t=y.getState(),o=t.resetSelectedElements,r=t.domNode;if(E.current=null==r?void 0:r.getBoundingClientRect(),N&&n&&0===e.button&&e.target===m.current&&E.current){var i=ee(e,E.current),l=i.x,d=i.y;o(),y.setState({userSelectionRect:{width:0,height:0,startX:l,startY:d,x:l,y:d}}),null==a||a(e)}}:void 0,onMouseMove:A?function(e){var t,r,a=y.getState(),i=a.userSelectionRect,l=a.nodeInternals,d=a.edges,c=a.transform,u=a.onNodesChange,s=a.onEdgesChange,g=a.nodeOrigin,f=a.getNodes;if(n&&E.current&&i){y.setState({userSelectionActive:!0,nodesSelectionActive:!1});var v=ee(e,E.current),h=null!==(t=i.startX)&&void 0!==t?t:0,p=null!==(r=i.startY)&&void 0!==r?r:0,m=w(w({},i),{},{x:v.x<h?v.x:h,y:v.y<p?v.y:p,width:Math.abs(v.x-h),height:Math.abs(v.y-p)}),x=f(),C=_e(l,m,c,o===ae.Partial,!0,g),N=ze(C,d).map((function(e){return e.id})),M=C.map((function(e){return e.id}));if(S.current!==M.length){S.current=M.length;var P=$n(x,M);P.length&&(null==u||u(P))}if(b.current!==N.length){b.current=N.length;var O=$n(d,N);O.length&&(null==s||s(O))}y.setState({userSelectionRect:m})}}:v,onMouseUp:A?function(e){if(0===e.button){var n=y.getState().userSelectionRect;!C&&n&&e.target===m.current&&(null==O||O(e)),y.setState({nodesSelectionActive:S.current>0}),P(),null==i||i(e)}}:void 0,onMouseLeave:A?function(e){C&&(y.setState({nodesSelectionActive:S.current>0}),null==i||i(e)),P()}:h,ref:m,style:Ln},p,u.createElement(Wn,null))}));function tt(e,n){if(!e.parentNode)return!1;var t=n.get(e.parentNode);return!!t&&(!!t.selected||tt(t,n))}function ot(e,n,t){var o=e;do{var r;if(null!==(r=o)&&void 0!==r&&r.matches(n))return!0;if(o===t.current)return!1;o=o.parentElement}while(o);return!1}function rt(e,n,t,o){return Array.from(e.values()).filter((function(t){return(t.selected||t.id===o)&&(!t.parentNode||!tt(t,e))&&(t.draggable||n&&void 0===t.draggable)})).map((function(e){var n,o,r,a;return{id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:t.x-(null!==(n=null===(o=e.positionAbsolute)||void 0===o?void 0:o.x)&&void 0!==n?n:0),y:t.y-(null!==(r=null===(a=e.positionAbsolute)||void 0===a?void 0:a.y)&&void 0!==r?r:0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode,width:e.width,height:e.height,expandParent:e.expandParent}}))}function at(e,n,t,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],a=arguments.length>5?arguments[5]:void 0,i=function(e,n){return n&&"parent"!==n?[n[0],[n[1][0]-(e.width||0),n[1][1]-(e.height||0)]]:n}(e,e.extent||o),l=i;if("parent"!==e.extent||e.expandParent){if(e.extent&&e.parentNode&&"parent"!==e.extent){var d=t.get(e.parentNode),c=Re(d,r).positionAbsolute,u=c.x,s=c.y;l=[[e.extent[0][0]+u,e.extent[0][1]+s],[e.extent[1][0]+u,e.extent[1][1]+s]]}}else if(e.parentNode&&e.width&&e.height){var g=t.get(e.parentNode),f=Re(g,r).positionAbsolute,v=f.x,h=f.y;l=g&&j(v)&&j(h)&&j(g.width)&&j(g.height)?[[v+e.width*r[0],h+e.height*r[1]],[v+g.width-e.width+e.width*r[0],h+g.height-e.height+e.height*r[1]]]:l}else null==a||a("005",O.error005()),l=i;var p={x:0,y:0};if(e.parentNode){var m=t.get(e.parentNode);p=Re(m,r).positionAbsolute}var y=l&&"parent"!==l?T(n,l):n;return{position:{x:y.x-p.x,y:y.y-p.y},positionAbsolute:y}}function it(e){var n=e.nodeId,t=e.dragItems,o=e.nodeInternals,r=t.map((function(e){return w(w({},o.get(e.id)),{},{position:e.position,positionAbsolute:e.positionAbsolute})}));return[n?r.find((function(e){return e.id===n})):r[0],r]}nt.displayName="Pane";var lt=function(e,n,t,o){var r=n.querySelectorAll(e);if(!r||!r.length)return null;var a=Array.from(r),i=n.getBoundingClientRect(),l=i.width*o[0],d=i.height*o[1];return a.map((function(e){var n=e.getBoundingClientRect();return w({id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(n.left-i.left-l)/t,y:(n.top-i.top-d)/t},_(e))}))};function dt(e,n,t){return void 0===t?t:function(o){var r=n().nodeInternals.get(e);r&&t(o,w({},r))}}function ct(e){var n=e.id,t=e.store,o=e.unselect,r=void 0!==o&&o,a=e.nodeRef,i=t.getState(),l=i.addSelectedNodes,d=i.unselectNodesAndEdges,c=i.multiSelectionActive,u=i.nodeInternals,s=i.onError,g=u.get(n);g?(t.setState({nodesSelectionActive:!1}),g.selected?(r||g.selected&&c)&&(d({nodes:[g],edges:[]}),requestAnimationFrame((function(){var e;return null==a||null===(e=a.current)||void 0===e?void 0:e.blur()}))):l([n])):null==s||s("012",O.error012(n))}function ut(e){return function(n,t,o){return null==e?void 0:e(n,o)}}function st(e){var n=e.nodeRef,t=e.disabled,o=void 0!==t&&t,r=e.noDragClassName,a=e.handleSelector,l=e.nodeId,d=e.isSelectable,c=e.selectNodesOnDrag,s=I(),g=(0,u.useState)(!1),f=(0,i.Z)(g,2),v=f[0],p=f[1],y=(0,u.useRef)([]),S=(0,u.useRef)({x:null,y:null}),b=(0,u.useRef)(0),E=(0,u.useRef)(null),x=(0,u.useRef)({x:0,y:0}),C=(0,u.useRef)(null),N=(0,u.useRef)(!1),M=(0,u.useRef)(!1),P=function(){var e=I();return(0,u.useCallback)((function(n){var t=n.sourceEvent,o=e.getState(),r=o.transform,a=o.snapGrid,i=o.snapToGrid,l=t.touches?t.touches[0].clientX:t.clientX,d=t.touches?t.touches[0].clientY:t.clientY,c={x:(l-r[0])/r[2],y:(d-r[1])/r[2]};return w({xSnapped:i?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:i?a[1]*Math.round(c.y/a[1]):c.y},c)}),[])}();return(0,u.useEffect)((function(){if(null!=n&&n.current){var e=(0,h.Z)(n.current),t=function(e){var n=e.x,t=e.y,o=s.getState(),r=o.nodeInternals,a=o.onNodeDrag,d=o.onSelectionDrag,c=o.updateNodePositions,u=o.nodeExtent,g=o.snapGrid,f=o.snapToGrid,v=o.nodeOrigin,h=o.onError;S.current={x:n,y:t};var m=!1,b={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&u){var E=Be(y.current,v);b=V(E)}if(y.current=y.current.map((function(e){var o={x:n-e.distance.x,y:t-e.distance.y};f&&(o.x=g[0]*Math.round(o.x/g[0]),o.y=g[1]*Math.round(o.y/g[1]));var a,i,l=[[u[0][0],u[0][1]],[u[1][0],u[1][1]]];y.current.length>1&&u&&!e.extent&&(l[0][0]=e.positionAbsolute.x-b.x+u[0][0],l[1][0]=e.positionAbsolute.x+(null!==(a=e.width)&&void 0!==a?a:0)-b.x2+u[1][0],l[0][1]=e.positionAbsolute.y-b.y+u[0][1],l[1][1]=e.positionAbsolute.y+(null!==(i=e.height)&&void 0!==i?i:0)-b.y2+u[1][1]);var d=at(e,o,r,l,v,h);return m=m||e.position.x!==d.position.x||e.position.y!==d.position.y,e.position=d.position,e.positionAbsolute=d.positionAbsolute,e})),m){c(y.current,!0,!0),p(!0);var x=l?a:ut(d);if(x&&C.current){var N=it({nodeId:l,dragItems:y.current,nodeInternals:r}),w=(0,i.Z)(N,2),M=w[0],P=w[1];x(C.current,M,P)}}},u=function e(){if(E.current){var n=X(x.current,E.current),o=(0,i.Z)(n,2),r=o[0],a=o[1];if(0!==r||0!==a){var l,d,c=s.getState(),u=c.transform,g=c.panBy;S.current.x=(null!==(l=S.current.x)&&void 0!==l?l:0)-r/u[2],S.current.y=(null!==(d=S.current.y)&&void 0!==d?d:0)-a/u[2],g({x:r,y:a})&&t(S.current)}b.current=requestAnimationFrame(e)}},g=function(e){var t=s.getState(),o=t.nodeInternals,r=t.multiSelectionActive,a=t.nodesDraggable,u=t.unselectNodesAndEdges,g=t.onNodeDragStart,f=t.onSelectionDragStart;M.current=!0;var v,h=l?g:ut(f);c&&d||r||!l||(null!==(v=o.get(l))&&void 0!==v&&v.selected||u());l&&d&&c&&ct({id:l,store:s,nodeRef:n});var p=P(e);if(S.current=p,y.current=rt(o,a,p,l),h&&y.current){var m=it({nodeId:l,dragItems:y.current,nodeInternals:o}),b=(0,i.Z)(m,2),E=b[0],x=b[1];h(e.sourceEvent,E,x)}};if(!o){var f=(0,m.Z)().on("start",(function(e){var n=s.getState(),t=n.domNode;0===n.nodeDragThreshold&&g(e);var o=P(e);S.current=o,E.current=(null==t?void 0:t.getBoundingClientRect())||null,x.current=ee(e.sourceEvent,E.current)})).on("drag",(function(e){var n=P(e),o=s.getState(),r=o.autoPanOnNodeDrag,a=o.nodeDragThreshold;if(!N.current&&M.current&&r&&(N.current=!0,u()),!M.current){var i,l,d,c,f=n.xSnapped-(null!==(i=null==S||null===(l=S.current)||void 0===l?void 0:l.x)&&void 0!==i?i:0),v=n.ySnapped-(null!==(d=null==S||null===(c=S.current)||void 0===c?void 0:c.y)&&void 0!==d?d:0);Math.sqrt(f*f+v*v)>a&&g(e)}(S.current.x!==n.xSnapped||S.current.y!==n.ySnapped)&&y.current&&M.current&&(C.current=e.sourceEvent,x.current=ee(e.sourceEvent,E.current),t(n))})).on("end",(function(e){if(M.current&&(p(!1),N.current=!1,M.current=!1,cancelAnimationFrame(b.current),y.current)){var n=s.getState(),t=n.updateNodePositions,o=n.nodeInternals,r=n.onNodeDragStop,a=n.onSelectionDragStop,d=l?r:ut(a);if(t(y.current,!1,!1),d){var c=it({nodeId:l,dragItems:y.current,nodeInternals:o}),u=(0,i.Z)(c,2),g=u[0],f=u[1];d(e.sourceEvent,g,f)}}})).filter((function(e){var t=e.target;return!e.button&&(!r||!ot(t,".".concat(r),n))&&(!a||ot(t,a,n))}));return e.call(f),function(){e.on(".drag",null)}}e.on(".drag",null)}}),[n,o,r,a,d,s,l,c,P]),v}function gt(){var e=I();return(0,u.useCallback)((function(n){var t=e.getState(),o=t.nodeInternals,r=t.nodeExtent,a=t.updateNodePositions,i=t.getNodes,l=t.snapToGrid,d=t.snapGrid,c=t.onError,u=t.nodesDraggable,s=i().filter((function(e){return e.selected&&(e.draggable||u&&void 0===e.draggable)})),g=l?d[0]:5,f=l?d[1]:5,v=n.isShiftPressed?4:1,h=n.x*g*v,p=n.y*f*v;a(s.map((function(e){if(e.positionAbsolute){var n={x:e.positionAbsolute.x+h,y:e.positionAbsolute.y+p};l&&(n.x=d[0]*Math.round(n.x/d[0]),n.y=d[1]*Math.round(n.y/d[1]));var t=at(e,n,o,r,void 0,c),a=t.positionAbsolute,i=t.position;e.position=i,e.positionAbsolute=a}return e})),!0,!1)}),[])}var ft={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},vt=function(e){var n=function(n){var t=n.id,o=n.type,r=n.data,a=n.xPos,i=n.yPos,l=n.xPosOrigin,c=n.yPosOrigin,g=n.selected,f=n.onClick,v=n.onMouseEnter,h=n.onMouseMove,p=n.onMouseLeave,m=n.onContextMenu,y=n.onDoubleClick,S=n.style,b=n.className,E=n.isDraggable,x=n.isSelectable,C=n.isConnectable,N=n.isFocusable,M=n.selectNodesOnDrag,P=n.sourcePosition,O=n.targetPosition,k=n.hidden,D=n.resizeObserver,A=n.dragHandle,Z=n.zIndex,R=n.isParent,B=n.noDragClassName,_=n.noPanClassName,z=n.initialized,T=n.disableKeyboardA11y,L=n.ariaLabel,X=n.rfId,H=I(),Y=(0,u.useRef)(null),V=(0,u.useRef)(P),K=(0,u.useRef)(O),U=(0,u.useRef)(o),F=x||E||f||v||h||p,W=gt(),j=dt(t,H.getState,v),G=dt(t,H.getState,h),Q=dt(t,H.getState,p),J=dt(t,H.getState,m),ee=dt(t,H.getState,y);(0,u.useEffect)((function(){if(Y.current&&!k){var e=Y.current;return null==D||D.observe(e),function(){return null==D?void 0:D.unobserve(e)}}}),[k]),(0,u.useEffect)((function(){var e=U.current!==o,n=V.current!==P,r=K.current!==O;Y.current&&(e||n||r)&&(e&&(U.current=o),n&&(V.current=P),r&&(K.current=O),H.getState().updateNodeDimensions([{id:t,nodeElement:Y.current,forceUpdate:!0}]))}),[t,o,P,O]);var ne=st({nodeRef:Y,disabled:k||!E,noDragClassName:B,handleSelector:A,nodeId:t,isSelectable:x,selectNodesOnDrag:M});return k?null:u.createElement("div",{className:(0,s.Z)(["react-flow__node","react-flow__node-".concat(o),(0,d.Z)({},_,E),b,{selected:g,selectable:x,parent:R,dragging:ne}]),ref:Y,style:w({zIndex:Z,transform:"translate(".concat(l,"px,").concat(c,"px)"),pointerEvents:F?"all":"none",visibility:z?"visible":"hidden"},S),"data-id":t,"data-testid":"rf__node-".concat(t),onMouseEnter:j,onMouseMove:G,onMouseLeave:Q,onContextMenu:J,onClick:function(e){var n=H.getState().nodeDragThreshold;if(x&&(!M||!E||n>0)&&ct({id:t,store:H,nodeRef:Y}),f){var o=H.getState().nodeInternals.get(t);o&&f(e,w({},o))}},onDoubleClick:ee,onKeyDown:N?function(e){if(!$(e))if(q.includes(e.key)&&x){var n="Escape"===e.key;ct({id:t,store:H,unselect:n,nodeRef:Y})}else!T&&E&&g&&Object.prototype.hasOwnProperty.call(ft,e.key)&&(H.setState({ariaLiveMessage:"Moved selected node ".concat(e.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~a,", y: ").concat(~~i)}),W({x:ft[e.key].x,y:ft[e.key].y,isShiftPressed:e.shiftKey}))}:void 0,tabIndex:N?0:void 0,role:N?"button":void 0,"aria-describedby":T?void 0:"".concat(mn,"-").concat(X),"aria-label":L},u.createElement(Pe,{value:t},u.createElement(e,{id:t,data:r,type:o,xPos:a,yPos:i,selected:g,isConnectable:C,sourcePosition:P,targetPosition:O,dragging:ne,dragHandle:A,zIndex:Z})))};return n.displayName="NodeWrapper",(0,u.memo)(n)},ht=function(e){var n=e.getNodes().filter((function(e){return e.selected}));return w(w({},Be(n,e.nodeOrigin)),{},{transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")"),userSelectionActive:e.userSelectionActive})};var pt=(0,u.memo)((function(e){var n=e.onSelectionContextMenu,t=e.noPanClassName,o=e.disableKeyboardA11y,r=I(),a=D(ht,f.X),i=a.width,l=a.height,d=a.x,c=a.y,g=a.transformString,v=a.userSelectionActive,h=gt(),p=(0,u.useRef)(null);if((0,u.useEffect)((function(){var e;o||(null===(e=p.current)||void 0===e||e.focus({preventScroll:!0}))}),[o]),st({nodeRef:p}),v||!i||!l)return null;var m=n?function(e){var t=r.getState().getNodes().filter((function(e){return e.selected}));n(e,t)}:void 0;return u.createElement("div",{className:(0,s.Z)(["react-flow__nodesselection","react-flow__container",t]),style:{transform:g}},u.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:o?void 0:-1,onKeyDown:o?void 0:function(e){Object.prototype.hasOwnProperty.call(ft,e.key)&&h({x:ft[e.key].x,y:ft[e.key].y,isShiftPressed:e.shiftKey})},style:{width:i,height:l,top:c,left:d}}))})),mt=function(e){return e.nodesSelectionActive},yt=function(e){var n=e.children,t=e.onPaneClick,o=e.onPaneMouseEnter,r=e.onPaneMouseMove,a=e.onPaneMouseLeave,i=e.onPaneContextMenu,l=e.onPaneScroll,d=e.deleteKeyCode,c=e.onMove,s=e.onMoveStart,g=e.onMoveEnd,f=e.selectionKeyCode,v=e.selectionOnDrag,h=e.selectionMode,p=e.onSelectionStart,m=e.onSelectionEnd,y=e.multiSelectionKeyCode,S=e.panActivationKeyCode,b=e.zoomActivationKeyCode,E=e.elementsSelectable,x=e.zoomOnScroll,C=e.zoomOnPinch,N=e.panOnScroll,w=e.panOnScrollSpeed,M=e.panOnScrollMode,P=e.zoomOnDoubleClick,O=e.panOnDrag,k=e.defaultViewport,A=e.translateExtent,Z=e.minZoom,R=e.maxZoom,B=e.preventScrolling,_=e.onSelectionContextMenu,z=e.noWheelClassName,T=e.noPanClassName,L=e.disableKeyboardA11y,X=D(mt),H=Cn(f),Y=Cn(S)||O,V=H||v&&!0!==Y;return function(e){var n=e.deleteKeyCode,t=e.multiSelectionKeyCode,o=I(),r=zn().deleteElements,a=Cn(n,Tn),i=Cn(t);(0,u.useEffect)((function(){if(a){var e=o.getState(),n=e.edges,t=(0,e.getNodes)().filter((function(e){return e.selected})),i=n.filter((function(e){return e.selected}));r({nodes:t,edges:i}),o.setState({nodesSelectionActive:!1})}}),[a]),(0,u.useEffect)((function(){o.setState({multiSelectionActive:i})}),[i])}({deleteKeyCode:d,multiSelectionKeyCode:y}),u.createElement(Un,{onMove:c,onMoveStart:s,onMoveEnd:g,onPaneContextMenu:i,elementsSelectable:E,zoomOnScroll:x,zoomOnPinch:C,panOnScroll:N,panOnScrollSpeed:w,panOnScrollMode:M,zoomOnDoubleClick:P,panOnDrag:!H&&Y,defaultViewport:k,translateExtent:A,minZoom:Z,maxZoom:R,zoomActivationKeyCode:b,preventScrolling:B,noWheelClassName:z,noPanClassName:T},u.createElement(nt,{onSelectionStart:p,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:o,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:i,onPaneScroll:l,panOnDrag:Y,isSelecting:!!V,selectionMode:h},n,X&&u.createElement(pt,{onSelectionContextMenu:_,noPanClassName:T,disableKeyboardA11y:L})))};yt.displayName="FlowRenderer";var St=(0,u.memo)(yt);function bt(e){var n={input:vt(e.input||en),default:vt(e.default||$e),output:vt(e.output||tn),group:vt(e.group||on)},t=Object.keys(e).filter((function(e){return!["input","default","output","group"].includes(e)})).reduce((function(n,t){return n[t]=vt(e[t]||$e),n}),{});return w(w({},n),t)}var Et=function(e){return{nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}},xt=function(e){var n,t=D(Et,f.X),o=t.nodesDraggable,r=t.nodesConnectable,a=t.nodesFocusable,i=t.elementsSelectable,l=t.updateNodeDimensions,d=t.onError,c=(n=e.onlyRenderVisibleElements,D((0,u.useCallback)((function(e){return n?_e(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes()}),[n]))),s=(0,u.useRef)(),g=(0,u.useMemo)((function(){if("undefined"==typeof ResizeObserver)return null;var e=new ResizeObserver((function(e){var n=e.map((function(e){return{id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0}}));l(n)}));return s.current=e,e}),[]);return(0,u.useEffect)((function(){return function(){var e;null==s||null===(e=s.current)||void 0===e||e.disconnect()}}),[]),u.createElement("div",{className:"react-flow__nodes",style:Ln},c.map((function(n){var t,l,c,s,f,v,h,p=n.type||"default";e.nodeTypes[p]||(null==d||d("003",O.error003(p)),p="default");var m,y,S,b,E,x,C=e.nodeTypes[p]||e.nodeTypes.default,N=!!(n.draggable||o&&void 0===n.draggable),w=!!(n.selectable||i&&void 0===n.selectable),M=!!(n.connectable||r&&void 0===n.connectable),P=!!(n.focusable||a&&void 0===n.focusable),k=e.nodeExtent?T(n.positionAbsolute,e.nodeExtent):n.positionAbsolute,D=null!==(t=null==k?void 0:k.x)&&void 0!==t?t:0,I=null!==(l=null==k?void 0:k.y)&&void 0!==l?l:0,A=(m={x:D,y:I,width:null!==(c=n.width)&&void 0!==c?c:0,height:null!==(s=n.height)&&void 0!==s?s:0,origin:e.nodeOrigin},y=m.x,S=m.y,b=m.width,E=m.height,x=m.origin,b&&E?x[0]<0||x[1]<0||x[0]>1||x[1]>1?{x:y,y:S}:{x:y-b*x[0],y:S-E*x[1]}:{x:y,y:S});return u.createElement(C,{key:n.id,id:n.id,className:n.className,style:n.style,type:p,data:n.data,sourcePosition:n.sourcePosition||de.Bottom,targetPosition:n.targetPosition||de.Top,hidden:n.hidden,xPos:D,yPos:I,xPosOrigin:A.x,yPosOrigin:A.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!n.selected,isDraggable:N,isSelectable:w,isConnectable:M,isFocusable:P,resizeObserver:g,dragHandle:n.dragHandle,zIndex:null!==(f=null===(v=n[G])||void 0===v?void 0:v.z)&&void 0!==f?f:0,isParent:!(null===(h=n[G])||void 0===h||!h.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!n.width&&!!n.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:n.ariaLabel})})))};xt.displayName="NodeRenderer";var Ct=(0,u.memo)(xt),Nt=function(e,n,t){return t===de.Left?e-n:t===de.Right?e+n:e},wt=function(e,n,t){return t===de.Top?e-n:t===de.Bottom?e+n:e},Mt="react-flow__edgeupdater",Pt=function(e){var n=e.position,t=e.centerX,o=e.centerY,r=e.radius,a=void 0===r?10:r,i=e.onMouseDown,l=e.onMouseEnter,d=e.onMouseOut,c=e.type;return u.createElement("circle",{onMouseDown:i,onMouseEnter:l,onMouseOut:d,className:(0,s.Z)([Mt,"".concat(Mt,"-").concat(c)]),cx:Nt(t,a,n),cy:wt(o,a,n),r:a,stroke:"transparent",fill:"transparent"})},Ot=function(){return!0},kt=function(e){var n=function(n){var t=n.id,o=n.className,r=n.type,a=n.data,l=n.onClick,d=n.onEdgeDoubleClick,c=n.selected,g=n.animated,f=n.label,v=n.labelStyle,h=n.labelShowBg,p=n.labelBgStyle,m=n.labelBgPadding,y=n.labelBgBorderRadius,S=n.style,b=n.source,E=n.target,x=n.sourceX,C=n.sourceY,N=n.targetX,w=n.targetY,M=n.sourcePosition,P=n.targetPosition,O=n.elementsSelectable,k=n.hidden,D=n.sourceHandleId,A=n.targetHandleId,Z=n.onContextMenu,R=n.onMouseEnter,B=n.onMouseMove,_=n.onMouseLeave,z=n.edgeUpdaterRadius,T=n.onEdgeUpdate,L=n.onEdgeUpdateStart,X=n.onEdgeUpdateEnd,H=n.markerEnd,Y=n.markerStart,V=n.rfId,K=n.ariaLabel,U=n.isFocusable,F=n.isUpdatable,W=n.pathOptions,j=n.interactionWidth,G=(0,u.useRef)(null),Q=(0,u.useState)(!1),$=(0,i.Z)(Q,2),J=$[0],ee=$[1],ne=(0,u.useState)(!1),te=(0,i.Z)(ne,2),oe=te[0],re=te[1],ae=I(),ie=(0,u.useMemo)((function(){return"url(#".concat(De(Y,V),")")}),[Y,V]),le=(0,u.useMemo)((function(){return"url(#".concat(De(H,V),")")}),[H,V]);if(k)return null;var de=ce(t,ae.getState,d),ue=ce(t,ae.getState,Z),se=ce(t,ae.getState,R),ge=ce(t,ae.getState,B),fe=ce(t,ae.getState,_),ve=function(e,n){if(0===e.button){var o=ae.getState(),r=o.edges,a=o.isValidConnection,i=n?E:b,l=(n?A:D)||null,d=n?"target":"source",c=a||Ot,u=n,s=r.find((function(e){return e.id===t}));re(!0),null==L||L(e,s,d);Fe({event:e,handleId:l,nodeId:i,onConnect:function(e){return null==T?void 0:T(s,e)},isTarget:u,getState:ae.getState,setState:ae.setState,isValidConnection:c,edgeUpdaterType:d,onEdgeUpdateEnd:function(e){re(!1),null==X||X(e,s,d)}})}},he=function(){return ee(!0)},pe=function(){return ee(!1)},me=!O&&!l;return u.createElement("g",{className:(0,s.Z)(["react-flow__edge","react-flow__edge-".concat(r),o,{selected:c,animated:g,inactive:me,updating:J}]),onClick:function(e){var n=ae.getState(),o=n.edges,r=n.addSelectedEdges,a=n.unselectNodesAndEdges,i=n.multiSelectionActive,d=o.find((function(e){return e.id===t}));if(d){var c;if(O)if(ae.setState({nodesSelectionActive:!1}),d.selected&&i)a({nodes:[],edges:[d]}),null===(c=G.current)||void 0===c||c.blur();else r([t]);l&&l(e,d)}},onDoubleClick:de,onContextMenu:ue,onMouseEnter:se,onMouseMove:ge,onMouseLeave:fe,onKeyDown:U?function(e){if(q.includes(e.key)&&O){var n,o=ae.getState(),r=o.unselectNodesAndEdges,a=o.addSelectedEdges,i=o.edges;if("Escape"===e.key)null===(n=G.current)||void 0===n||n.blur(),r({edges:[i.find((function(e){return e.id===t}))]});else a([t])}}:void 0,tabIndex:U?0:void 0,role:U?"button":"img","data-testid":"rf__edge-".concat(t),"aria-label":null===K?void 0:K||"Edge from ".concat(b," to ").concat(E),"aria-describedby":U?"".concat(yn,"-").concat(V):void 0,ref:G},!oe&&u.createElement(e,{id:t,source:b,target:E,selected:c,animated:g,label:f,labelStyle:v,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,data:a,style:S,sourceX:x,sourceY:C,targetX:N,targetY:w,sourcePosition:M,targetPosition:P,sourceHandleId:D,targetHandleId:A,markerStart:ie,markerEnd:le,pathOptions:W,interactionWidth:j}),F&&u.createElement(u.Fragment,null,("source"===F||!0===F)&&u.createElement(Pt,{position:M,centerX:x,centerY:C,radius:z,onMouseDown:function(e){return ve(e,!0)},onMouseEnter:he,onMouseOut:pe,type:"source"}),("target"===F||!0===F)&&u.createElement(Pt,{position:P,centerX:N,centerY:w,radius:z,onMouseDown:function(e){return ve(e,!1)},onMouseEnter:he,onMouseOut:pe,type:"target"})))};return n.displayName="EdgeWrapper",(0,u.memo)(n)};function Dt(e){var n={default:kt(e.default||we),straight:kt(e.bezier||Ee),step:kt(e.step||be),smoothstep:kt(e.step||Se),simplebezier:kt(e.simplebezier||ve)},t=Object.keys(e).filter((function(e){return!["default","bezier"].includes(e)})).reduce((function(n,t){return n[t]=kt(e[t]||we),n}),{});return w(w({},n),t)}function It(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=((null==t?void 0:t.x)||0)+n.x,r=((null==t?void 0:t.y)||0)+n.y,a=(null==t?void 0:t.width)||n.width,i=(null==t?void 0:t.height)||n.height;switch(e){case de.Top:return{x:o+a/2,y:r};case de.Right:return{x:o+a,y:r+i/2};case de.Bottom:return{x:o+a/2,y:r+i};case de.Left:return{x:o,y:r+i/2}}}function At(e,n){return e?1!==e.length&&n?n&&e.find((function(e){return e.id===n}))||null:e[0]:null}function Zt(e){var n,t,o,r,a,i=(null==e||null===(n=e[G])||void 0===n?void 0:n.handleBounds)||null,l=i&&(null==e?void 0:e.width)&&(null==e?void 0:e.height)&&void 0!==(null==e||null===(t=e.positionAbsolute)||void 0===t?void 0:t.x)&&void 0!==(null==e||null===(o=e.positionAbsolute)||void 0===o?void 0:o.y);return[{x:(null==e||null===(r=e.positionAbsolute)||void 0===r?void 0:r.x)||0,y:(null==e||null===(a=e.positionAbsolute)||void 0===a?void 0:a.y)||0,width:(null==e?void 0:e.width)||0,height:(null==e?void 0:e.height)||0},i,!!l]}var Rt=[{level:0,isMaxLevel:!0,edges:[]}];function Bt(e,n,t){return function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=-1,r=e.reduce((function(e,r){var a=j(r.zIndex),i=a?r.zIndex:0;if(t){var l,d,c=n.get(r.target),u=n.get(r.source),s=r.selected||(null==c?void 0:c.selected)||(null==u?void 0:u.selected),g=Math.max((null==u||null===(l=u[G])||void 0===l?void 0:l.z)||0,(null==c||null===(d=c[G])||void 0===d?void 0:d.z)||0,1e3);i=(a?r.zIndex:0)+(s?g:0)}return e[i]?e[i].push(r):e[i]=[r],o=i>o?i:o,e}),{}),a=Object.entries(r).map((function(e){var n=(0,i.Z)(e,2),t=+n[0];return{edges:n[1],level:t,isMaxLevel:t===o}}));return 0===a.length?Rt:a}(D((0,u.useCallback)((function(t){return e?t.edges.filter((function(e){var o=n.get(e.source),r=n.get(e.target);return(null==o?void 0:o.width)&&(null==o?void 0:o.height)&&(null==r?void 0:r.width)&&(null==r?void 0:r.height)&&function(e){var n=e.sourcePos,t=e.targetPos,o=e.sourceWidth,r=e.sourceHeight,a=e.targetWidth,i=e.targetHeight,l=e.width,d=e.height,c=e.transform,u={x:Math.min(n.x,t.x),y:Math.min(n.y,t.y),x2:Math.max(n.x+o,t.x+a),y2:Math.max(n.y+r,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);var s=V({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:l/c[2],height:d/c[2]}),g=Math.max(0,Math.min(s.x2,u.x2)-Math.max(s.x,u.x)),f=Math.max(0,Math.min(s.y2,u.y2)-Math.max(s.y,u.y));return Math.ceil(g*f)>0}({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:r.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:r.width,targetHeight:r.height,width:t.width,height:t.height,transform:t.transform})})):t.edges}),[e,n])),n,t)}var _t=(r={},(0,d.Z)(r,le.Arrow,(function(e){var n=e.color,t=void 0===n?"none":n,o=e.strokeWidth,r=void 0===o?1:o;return u.createElement("polyline",{style:{stroke:t,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})})),(0,d.Z)(r,le.ArrowClosed,(function(e){var n=e.color,t=void 0===n?"none":n,o=e.strokeWidth,r=void 0===o?1:o;return u.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:r},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})})),r);var zt=function(e){var n=e.id,t=e.type,o=e.color,r=e.width,a=void 0===r?12.5:r,i=e.height,l=void 0===i?12.5:i,d=e.markerUnits,c=void 0===d?"strokeWidth":d,s=e.strokeWidth,g=e.orient,f=void 0===g?"auto-start-reverse":g,v=function(e){var n=I();return(0,u.useMemo)((function(){var t,o;return Object.prototype.hasOwnProperty.call(_t,e)?_t[e]:(null===(t=(o=n.getState()).onError)||void 0===t||t.call(o,"009",O.error009(e)),null)}),[e])}(t);return v?u.createElement("marker",{className:"react-flow__arrowhead",id:n,markerWidth:"".concat(a),markerHeight:"".concat(l),viewBox:"-10 -10 20 20",markerUnits:c,orient:f,refX:"0",refY:"0"},u.createElement(v,{color:o,strokeWidth:s})):null},Tt=function(e){var n=e.defaultColor,t=e.rfId,o=D((0,u.useCallback)(function(e){var n=e.defaultColor,t=e.rfId;return function(e){var o=[];return e.edges.reduce((function(e,r){return[r.markerStart,r.markerEnd].forEach((function(r){if(r&&"object"==typeof r){var a=De(r,t);o.includes(a)||(e.push(w({id:a,color:r.color||n},r)),o.push(a))}})),e}),[]).sort((function(e,n){return e.id.localeCompare(n.id)}))}}({defaultColor:n,rfId:t}),[n,t]),(function(e,n){return!(e.length!==n.length||e.some((function(e,t){return e.id!==n[t].id})))}));return u.createElement("defs",null,o.map((function(e){return u.createElement(zt,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})})))};Tt.displayName="MarkerDefinitions";var Lt=(0,u.memo)(Tt),Xt=function(e){return{nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}},Ht=function(e){var n=e.defaultMarkerColor,t=e.onlyRenderVisibleElements,o=e.elevateEdgesOnSelect,r=e.rfId,a=e.edgeTypes,l=e.noPanClassName,d=e.onEdgeUpdate,c=e.onEdgeContextMenu,g=e.onEdgeMouseEnter,v=e.onEdgeMouseMove,h=e.onEdgeMouseLeave,p=e.onEdgeClick,m=e.edgeUpdaterRadius,y=e.onEdgeDoubleClick,S=e.onEdgeUpdateStart,b=e.onEdgeUpdateEnd,E=e.children,x=D(Xt,f.X),C=x.edgesFocusable,N=x.edgesUpdatable,w=x.elementsSelectable,M=x.width,P=x.height,k=x.connectionMode,I=x.nodeInternals,A=x.onError,Z=Bt(t,I,o);return M?u.createElement(u.Fragment,null,Z.map((function(e){var t=e.level,o=e.edges,f=e.isMaxLevel;return u.createElement("svg",{key:t,style:{zIndex:t},width:M,height:P,className:"react-flow__edges react-flow__container"},f&&u.createElement(Lt,{defaultColor:n,rfId:r}),u.createElement("g",null,o.map((function(e){var n,t,o=Zt(I.get(e.source)),f=(0,i.Z)(o,3),E=f[0],x=f[1],M=f[2],P=Zt(I.get(e.target)),D=(0,i.Z)(P,3),Z=D[0],R=D[1],B=D[2];if(!M||!B)return null;var _=e.type||"default";a[_]||(null==A||A("011",O.error011(_)),_="default");var z=a[_]||a.default,T=k===oe.Strict?R.target:(null!==(n=R.target)&&void 0!==n?n:[]).concat(null!==(t=R.source)&&void 0!==t?t:[]),L=At(x.source,e.sourceHandle),X=At(T,e.targetHandle),H=(null==L?void 0:L.position)||de.Bottom,Y=(null==X?void 0:X.position)||de.Top,V=!!(e.focusable||C&&void 0===e.focusable),K=void 0!==d&&(e.updatable||N&&void 0===e.updatable);if(!L||!X)return null==A||A("008",O.error008(L,e)),null;var U=function(e,n,t,o,r,a){var i=It(t,e,n),l=It(a,o,r);return{sourceX:i.x,sourceY:i.y,targetX:l.x,targetY:l.y}}(E,L,H,Z,X,Y),F=U.sourceX,W=U.sourceY,j=U.targetX,G=U.targetY;return u.createElement(z,{key:e.id,id:e.id,className:(0,s.Z)([e.className,l]),type:_,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:F,sourceY:W,targetX:j,targetY:G,sourcePosition:H,targetPosition:Y,elementsSelectable:w,onEdgeUpdate:d,onContextMenu:c,onMouseEnter:g,onMouseMove:v,onMouseLeave:h,onClick:p,edgeUpdaterRadius:m,onEdgeDoubleClick:y,onEdgeUpdateStart:S,onEdgeUpdateEnd:b,rfId:r,ariaLabel:e.ariaLabel,isFocusable:V,isUpdatable:K,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth})}))))})),E):null};Ht.displayName="EdgeRenderer";var Yt=(0,u.memo)(Ht),Vt=function(e){return"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")")};function Kt(e){var n=e.children,t=D(Vt);return u.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},n)}var Ut=(a={},(0,d.Z)(a,de.Left,de.Right),(0,d.Z)(a,de.Right,de.Left),(0,d.Z)(a,de.Top,de.Bottom),(0,d.Z)(a,de.Bottom,de.Top),a),Ft=function(e){var n,t,o,r,a,l,d,c=e.nodeId,s=e.handleType,g=e.style,v=e.type,h=void 0===v?ie.Bezier:v,p=e.CustomComponent,m=e.connectionStatus,y=D((0,u.useCallback)((function(e){return{fromNode:e.nodeInternals.get(c),handleId:e.connectionHandleId,toX:(e.connectionPosition.x-e.transform[0])/e.transform[2],toY:(e.connectionPosition.y-e.transform[1])/e.transform[2],connectionMode:e.connectionMode}}),[c]),f.X),S=y.fromNode,b=y.handleId,E=y.toX,x=y.toY,C=y.connectionMode,N=null==S||null===(n=S[G])||void 0===n?void 0:n.handleBounds,M=null==N?void 0:N[s];if(C===oe.Loose&&(M=M||(null==N?void 0:N["source"===s?"target":"source"])),!S||!M)return null;var P=b?M.find((function(e){return e.id===b})):M[0],O=P?P.x+P.width/2:(null!==(t=S.width)&&void 0!==t?t:0)/2,k=P?P.y+P.height/2:null!==(o=S.height)&&void 0!==o?o:0,I=(null!==(r=null===(a=S.positionAbsolute)||void 0===a?void 0:a.x)&&void 0!==r?r:0)+O,A=(null!==(l=null===(d=S.positionAbsolute)||void 0===d?void 0:d.y)&&void 0!==l?l:0)+k,Z=null==P?void 0:P.position,R=Z?Ut[Z]:null;if(!Z||!R)return null;if(p)return u.createElement(p,{connectionLineType:h,connectionLineStyle:g,fromNode:S,fromHandle:P,fromX:I,fromY:A,toX:E,toY:x,fromPosition:Z,toPosition:R,connectionStatus:m});var B="",_={sourceX:I,sourceY:A,sourcePosition:Z,targetX:E,targetY:x,targetPosition:R};if(h===ie.Bezier){var z=Ne(_);B=(0,i.Z)(z,1)[0]}else if(h===ie.Step){var T=ye(w(w({},_),{},{borderRadius:0}));B=(0,i.Z)(T,1)[0]}else if(h===ie.SmoothStep){var L=ye(_);B=(0,i.Z)(L,1)[0]}else if(h===ie.SimpleBezier){var X=fe(_);B=(0,i.Z)(X,1)[0]}else B="M".concat(I,",").concat(A," ").concat(E,",").concat(x);return u.createElement("path",{d:B,fill:"none",className:"react-flow__connection-path",style:g})};Ft.displayName="ConnectionLine";var Wt=function(e){return{nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height}};function jt(e){var n=e.containerStyle,t=e.style,o=e.type,r=e.component,a=D(Wt,f.X),i=a.nodeId,l=a.handleType,d=a.nodesConnectable,c=a.width,g=a.height,v=a.connectionStatus;return!!(i&&l&&c&&d)?u.createElement("svg",{style:n,width:c,height:g,className:"react-flow__edges react-flow__connectionline react-flow__container"},u.createElement("g",{className:(0,s.Z)(["react-flow__connection",v])},u.createElement(Ft,{nodeId:i,handleType:l,style:t,type:o,CustomComponent:r,connectionStatus:v}))):null}function Gt(e,n){(0,u.useRef)(null),I();return(0,u.useMemo)((function(){return n(e)}),[e])}var qt=function(e){var n=e.nodeTypes,t=e.edgeTypes,o=e.onMove,r=e.onMoveStart,a=e.onMoveEnd,i=e.onInit,l=e.onNodeClick,d=e.onEdgeClick,c=e.onNodeDoubleClick,s=e.onEdgeDoubleClick,g=e.onNodeMouseEnter,f=e.onNodeMouseMove,v=e.onNodeMouseLeave,h=e.onNodeContextMenu,p=e.onSelectionContextMenu,m=e.onSelectionStart,y=e.onSelectionEnd,S=e.connectionLineType,b=e.connectionLineStyle,E=e.connectionLineComponent,x=e.connectionLineContainerStyle,C=e.selectionKeyCode,N=e.selectionOnDrag,w=e.selectionMode,M=e.multiSelectionKeyCode,P=e.panActivationKeyCode,O=e.zoomActivationKeyCode,k=e.deleteKeyCode,D=e.onlyRenderVisibleElements,I=e.elementsSelectable,A=e.selectNodesOnDrag,Z=e.defaultViewport,R=e.translateExtent,B=e.minZoom,_=e.maxZoom,z=e.preventScrolling,T=e.defaultMarkerColor,L=e.zoomOnScroll,X=e.zoomOnPinch,H=e.panOnScroll,Y=e.panOnScrollSpeed,V=e.panOnScrollMode,K=e.zoomOnDoubleClick,U=e.panOnDrag,F=e.onPaneClick,W=e.onPaneMouseEnter,j=e.onPaneMouseMove,G=e.onPaneMouseLeave,q=e.onPaneScroll,Q=e.onPaneContextMenu,$=e.onEdgeUpdate,J=e.onEdgeContextMenu,ee=e.onEdgeMouseEnter,ne=e.onEdgeMouseMove,te=e.onEdgeMouseLeave,oe=e.edgeUpdaterRadius,re=e.onEdgeUpdateStart,ae=e.onEdgeUpdateEnd,ie=e.noDragClassName,le=e.noWheelClassName,de=e.noPanClassName,ce=e.elevateEdgesOnSelect,ue=e.disableKeyboardA11y,se=e.nodeOrigin,ge=e.nodeExtent,fe=e.rfId,ve=Gt(n,bt),he=Gt(t,Dt);return function(e){var n=zn(),t=(0,u.useRef)(!1);(0,u.useEffect)((function(){!t.current&&n.viewportInitialized&&e&&(setTimeout((function(){return e(n)}),1),t.current=!0)}),[e,n.viewportInitialized])}(i),u.createElement(St,{onPaneClick:F,onPaneMouseEnter:W,onPaneMouseMove:j,onPaneMouseLeave:G,onPaneContextMenu:Q,onPaneScroll:q,deleteKeyCode:k,selectionKeyCode:C,selectionOnDrag:N,selectionMode:w,onSelectionStart:m,onSelectionEnd:y,multiSelectionKeyCode:M,panActivationKeyCode:P,zoomActivationKeyCode:O,elementsSelectable:I,onMove:o,onMoveStart:r,onMoveEnd:a,zoomOnScroll:L,zoomOnPinch:X,zoomOnDoubleClick:K,panOnScroll:H,panOnScrollSpeed:Y,panOnScrollMode:V,panOnDrag:U,defaultViewport:Z,translateExtent:R,minZoom:B,maxZoom:_,onSelectionContextMenu:p,preventScrolling:z,noDragClassName:ie,noWheelClassName:le,noPanClassName:de,disableKeyboardA11y:ue},u.createElement(Kt,null,u.createElement(Yt,{edgeTypes:he,onEdgeClick:d,onEdgeDoubleClick:s,onEdgeUpdate:$,onlyRenderVisibleElements:D,onEdgeContextMenu:J,onEdgeMouseEnter:ee,onEdgeMouseMove:ne,onEdgeMouseLeave:te,onEdgeUpdateStart:re,onEdgeUpdateEnd:ae,edgeUpdaterRadius:oe,defaultMarkerColor:T,noPanClassName:de,elevateEdgesOnSelect:!!ce,disableKeyboardA11y:ue,rfId:fe},u.createElement(jt,{style:b,type:S,component:E,containerStyle:x})),u.createElement("div",{className:"react-flow__edgelabel-renderer"}),u.createElement(Ct,{nodeTypes:ve,onNodeClick:l,onNodeDoubleClick:c,onNodeMouseEnter:g,onNodeMouseMove:f,onNodeMouseLeave:v,onNodeContextMenu:h,selectNodesOnDrag:A,onlyRenderVisibleElements:D,noPanClassName:de,noDragClassName:ie,disableKeyboardA11y:ue,nodeOrigin:se,nodeExtent:ge,rfId:fe})))};qt.displayName="GraphView";var Qt=(0,u.memo)(qt),$t=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Jt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:$t,nodeExtent:$t,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:oe.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Q,isValidConnection:void 0},eo=function(e){var n=e.children,t=(0,u.useRef)(null);return t.current||(t.current=(0,g.F)((function(e,n){return w(w({},Jt),{},{setNodes:function(t){var o=n(),r=o.nodeInternals,a=o.nodeOrigin,i=o.elevateNodesOnSelect;e({nodeInternals:On(t,r,a,i)})},getNodes:function(){return Array.from(n().nodeInternals.values())},setEdges:function(t){var o=n().defaultEdgeOptions,r=void 0===o?{}:o;e({edges:t.map((function(e){return w(w({},r),e)}))})},setDefaultNodesAndEdges:function(t,o){var r=void 0!==t,a=void 0!==o,i=r?On(t,new Map,n().nodeOrigin,n().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:a?o:[],hasDefaultNodes:r,hasDefaultEdges:a})},updateNodeDimensions:function(t){var o=n(),r=o.onNodesChange,a=o.nodeInternals,i=o.fitViewOnInit,l=o.fitViewOnInitDone,c=o.fitViewOnInitOptions,u=o.domNode,s=o.nodeOrigin,g=null==u?void 0:u.querySelector(".react-flow__viewport");if(g){var f=window.getComputedStyle(g),v=new window.DOMMatrixReadOnly(f.transform).m22,h=t.reduce((function(e,n){var t=a.get(n.id);if(t){var o=_(n.nodeElement);o.width&&o.height&&(t.width!==o.width||t.height!==o.height||n.forceUpdate)&&(a.set(t.id,w(w({},t),{},(0,d.Z)({},G,w(w({},t[G]),{},{handleBounds:{source:lt(".source",n.nodeElement,v,s),target:lt(".target",n.nodeElement,v,s)}})),o)),e.push({id:t.id,type:"dimensions",dimensions:o}))}return e}),[]);Pn(a,s);var p=l||i&&!l&&kn(n,w({initial:!0},c));e({nodeInternals:new Map(a),fitViewOnInitDone:p}),(null==h?void 0:h.length)>0&&(null==r||r(h))}},updateNodePositions:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,n().triggerNodeChanges)(e.map((function(e){var n={id:e.id,type:"position",dragging:o};return t&&(n.positionAbsolute=e.positionAbsolute,n.position=e.position),n})))},triggerNodeChanges:function(t){var o=n(),r=o.onNodesChange,a=o.nodeInternals,i=o.hasDefaultNodes,l=o.nodeOrigin,d=o.getNodes,c=o.elevateNodesOnSelect;if(null!=t&&t.length){if(i){var u=On(qn(t,d()),a,l,c);e({nodeInternals:u})}null==r||r(t)}},addSelectedNodes:function(t){var o,r=n(),a=r.multiSelectionActive,i=r.edges,l=r.getNodes,d=null;a?o=t.map((function(e){return Qn(e,!0)})):(o=$n(l(),t),d=$n(i,[])),An({changedNodes:o,changedEdges:d,get:n,set:e})},addSelectedEdges:function(t){var o,r=n(),a=r.multiSelectionActive,i=r.edges,l=r.getNodes,d=null;a?o=t.map((function(e){return Qn(e,!0)})):(o=$n(i,t),d=$n(l(),[])),An({changedNodes:d,changedEdges:o,get:n,set:e})},unselectNodesAndEdges:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.nodes,r=t.edges,a=n(),i=a.edges,l=a.getNodes,d=r||i;An({changedNodes:(o||l()).map((function(e){return e.selected=!1,Qn(e.id,!1)})),changedEdges:d.map((function(e){return Qn(e.id,!1)})),get:n,set:e})},setMinZoom:function(t){var o=n(),r=o.d3Zoom,a=o.maxZoom;null==r||r.scaleExtent([t,a]),e({minZoom:t})},setMaxZoom:function(t){var o=n(),r=o.d3Zoom,a=o.minZoom;null==r||r.scaleExtent([a,t]),e({maxZoom:t})},setTranslateExtent:function(t){var o;null===(o=n().d3Zoom)||void 0===o||o.translateExtent(t),e({translateExtent:t})},resetSelectedElements:function(){var t=n(),o=t.edges;An({changedNodes:(0,t.getNodes)().filter((function(e){return e.selected})).map((function(e){return Qn(e.id,!1)})),changedEdges:o.filter((function(e){return e.selected})).map((function(e){return Qn(e.id,!1)})),get:n,set:e})},setNodeExtent:function(t){var o=n().nodeInternals;o.forEach((function(e){e.positionAbsolute=T(e.position,t)})),e({nodeExtent:t,nodeInternals:new Map(o)})},panBy:function(e){var t=n(),o=t.transform,r=t.width,a=t.height,i=t.d3Zoom,l=t.d3Selection,d=t.translateExtent;if(!i||!l||!e.x&&!e.y)return!1;var c=v.CR.translate(o[0]+e.x,o[1]+e.y).scale(o[2]),u=[[0,0],[r,a]],s=null==i?void 0:i.constrain()(c,u,d);return i.transform(l,s),o[0]!==s.x||o[1]!==s.y||o[2]!==s.k},cancelConnection:function(){return e({connectionNodeId:Jt.connectionNodeId,connectionHandleId:Jt.connectionHandleId,connectionHandleType:Jt.connectionHandleType,connectionStatus:Jt.connectionStatus,connectionStartHandle:Jt.connectionStartHandle,connectionEndHandle:Jt.connectionEndHandle})},reset:function(){return e(w({},Jt))}})}),Object.is)),u.createElement(P,{value:t.current},n)};eo.displayName="ReactFlowProvider";var no=function(e){var n=e.children;return(0,u.useContext)(M)?u.createElement(u.Fragment,null,n):u.createElement(eo,null,n)};no.displayName="ReactFlowWrapper";var to={input:en,default:$e,output:tn,group:on},oo={default:we,straight:Ee,step:be,smoothstep:Se,simplebezier:ve},ro=[0,0],ao=[15,15],io={x:0,y:0,zoom:1},lo={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},co=(0,u.forwardRef)((function(e,n){var t=e.nodes,o=e.edges,r=e.defaultNodes,a=e.defaultEdges,i=e.className,l=e.nodeTypes,d=void 0===l?to:l,g=e.edgeTypes,f=void 0===g?oo:g,v=e.onNodeClick,h=e.onEdgeClick,p=e.onInit,m=e.onMove,y=e.onMoveStart,S=e.onMoveEnd,b=e.onConnect,x=e.onConnectStart,C=e.onConnectEnd,N=e.onClickConnectStart,M=e.onClickConnectEnd,P=e.onNodeMouseEnter,O=e.onNodeMouseMove,k=e.onNodeMouseLeave,D=e.onNodeContextMenu,I=e.onNodeDoubleClick,A=e.onNodeDragStart,Z=e.onNodeDrag,B=e.onNodeDragStop,_=e.onNodesDelete,z=e.onEdgesDelete,T=e.onSelectionChange,L=e.onSelectionDragStart,X=e.onSelectionDrag,H=e.onSelectionDragStop,Y=e.onSelectionContextMenu,V=e.onSelectionStart,K=e.onSelectionEnd,U=e.connectionMode,F=void 0===U?oe.Strict:U,W=e.connectionLineType,j=void 0===W?ie.Bezier:W,G=e.connectionLineStyle,q=e.connectionLineComponent,Q=e.connectionLineContainerStyle,$=e.deleteKeyCode,J=void 0===$?"Backspace":$,ee=e.selectionKeyCode,te=void 0===ee?"Shift":ee,le=e.selectionOnDrag,de=void 0!==le&&le,ce=e.selectionMode,ue=void 0===ce?ae.Full:ce,se=e.panActivationKeyCode,ge=void 0===se?"Space":se,fe=e.multiSelectionKeyCode,ve=void 0===fe?ne()?"Meta":"Control":fe,he=e.zoomActivationKeyCode,pe=void 0===he?ne()?"Meta":"Control":he,me=e.snapToGrid,ye=void 0!==me&&me,Se=e.snapGrid,be=void 0===Se?ao:Se,Ee=e.onlyRenderVisibleElements,xe=void 0!==Ee&&Ee,Ce=e.selectNodesOnDrag,Ne=void 0===Ce||Ce,we=e.nodesDraggable,Me=e.nodesConnectable,Pe=e.nodesFocusable,Oe=e.nodeOrigin,ke=void 0===Oe?ro:Oe,De=e.edgesFocusable,Ie=e.edgesUpdatable,Ae=e.elementsSelectable,Ze=e.defaultViewport,Re=void 0===Ze?io:Ze,Be=e.minZoom,_e=void 0===Be?.5:Be,ze=e.maxZoom,Te=void 0===ze?2:ze,Le=e.translateExtent,Xe=void 0===Le?$t:Le,He=e.preventScrolling,Ye=void 0===He||He,Ve=e.nodeExtent,Ke=e.defaultMarkerColor,Ue=void 0===Ke?"#b1b1b7":Ke,Fe=e.zoomOnScroll,We=void 0===Fe||Fe,je=e.zoomOnPinch,Ge=void 0===je||je,qe=e.panOnScroll,Qe=void 0!==qe&&qe,$e=e.panOnScrollSpeed,Je=void 0===$e?.5:$e,en=e.panOnScrollMode,nn=void 0===en?re.Free:en,tn=e.zoomOnDoubleClick,on=void 0===tn||tn,rn=e.panOnDrag,an=void 0===rn||rn,ln=e.onPaneClick,dn=e.onPaneMouseEnter,cn=e.onPaneMouseMove,sn=e.onPaneMouseLeave,gn=e.onPaneScroll,fn=e.onPaneContextMenu,hn=e.children,pn=e.onEdgeUpdate,mn=e.onEdgeContextMenu,yn=e.onEdgeDoubleClick,Sn=e.onEdgeMouseEnter,bn=e.onEdgeMouseMove,En=e.onEdgeMouseLeave,Cn=e.onEdgeUpdateStart,Nn=e.onEdgeUpdateEnd,wn=e.edgeUpdaterRadius,Mn=void 0===wn?10:wn,Pn=e.onNodesChange,On=e.onEdgesChange,kn=e.noDragClassName,Dn=void 0===kn?"nodrag":kn,In=e.noWheelClassName,An=void 0===In?"nowheel":In,Zn=e.noPanClassName,Rn=void 0===Zn?"nopan":Zn,Bn=e.fitView,_n=void 0!==Bn&&Bn,zn=e.fitViewOptions,Tn=e.connectOnClick,Ln=void 0===Tn||Tn,Xn=e.attributionPosition,Hn=e.proOptions,Yn=e.defaultEdgeOptions,Vn=e.elevateNodesOnSelect,Kn=void 0===Vn||Vn,Un=e.elevateEdgesOnSelect,Fn=void 0!==Un&&Un,Wn=e.disableKeyboardA11y,jn=void 0!==Wn&&Wn,Gn=e.autoPanOnConnect,qn=void 0===Gn||Gn,Qn=e.autoPanOnNodeDrag,$n=void 0===Qn||Qn,Jn=e.connectionRadius,et=void 0===Jn?20:Jn,nt=e.isValidConnection,tt=e.onError,ot=e.style,rt=e.id,at=e.nodeDragThreshold,it=(0,c.Z)(e,E),lt=rt||"1";return u.createElement("div",w(w({},it),{},{style:w(w({},ot),lo),ref:n,className:(0,s.Z)(["react-flow",i]),"data-testid":"rf__wrapper",id:rt}),u.createElement(no,null,u.createElement(Qt,{onInit:p,onMove:m,onMoveStart:y,onMoveEnd:S,onNodeClick:v,onEdgeClick:h,onNodeMouseEnter:P,onNodeMouseMove:O,onNodeMouseLeave:k,onNodeContextMenu:D,onNodeDoubleClick:I,nodeTypes:d,edgeTypes:f,connectionLineType:j,connectionLineStyle:G,connectionLineComponent:q,connectionLineContainerStyle:Q,selectionKeyCode:te,selectionOnDrag:de,selectionMode:ue,deleteKeyCode:J,multiSelectionKeyCode:ve,panActivationKeyCode:ge,zoomActivationKeyCode:pe,onlyRenderVisibleElements:xe,selectNodesOnDrag:Ne,defaultViewport:Re,translateExtent:Xe,minZoom:_e,maxZoom:Te,preventScrolling:Ye,zoomOnScroll:We,zoomOnPinch:Ge,zoomOnDoubleClick:on,panOnScroll:Qe,panOnScrollSpeed:Je,panOnScrollMode:nn,panOnDrag:an,onPaneClick:ln,onPaneMouseEnter:dn,onPaneMouseMove:cn,onPaneMouseLeave:sn,onPaneScroll:gn,onPaneContextMenu:fn,onSelectionContextMenu:Y,onSelectionStart:V,onSelectionEnd:K,onEdgeUpdate:pn,onEdgeContextMenu:mn,onEdgeDoubleClick:yn,onEdgeMouseEnter:Sn,onEdgeMouseMove:bn,onEdgeMouseLeave:En,onEdgeUpdateStart:Cn,onEdgeUpdateEnd:Nn,edgeUpdaterRadius:Mn,defaultMarkerColor:Ue,noDragClassName:Dn,noWheelClassName:An,noPanClassName:Rn,elevateEdgesOnSelect:Fn,rfId:lt,disableKeyboardA11y:jn,nodeOrigin:ke,nodeExtent:Ve}),u.createElement(vn,{nodes:t,edges:o,defaultNodes:r,defaultEdges:a,onConnect:b,onConnectStart:x,onConnectEnd:C,onClickConnectStart:N,onClickConnectEnd:M,nodesDraggable:we,nodesConnectable:Me,nodesFocusable:Pe,edgesFocusable:De,edgesUpdatable:Ie,elementsSelectable:Ae,elevateNodesOnSelect:Kn,minZoom:_e,maxZoom:Te,nodeExtent:Ve,onNodesChange:Pn,onEdgesChange:On,snapToGrid:ye,snapGrid:be,connectionMode:F,translateExtent:Xe,connectOnClick:Ln,defaultEdgeOptions:Yn,fitView:_n,fitViewOptions:zn,onNodesDelete:_,onEdgesDelete:z,onNodeDragStart:A,onNodeDrag:Z,onNodeDragStop:B,onSelectionDrag:X,onSelectionDragStart:L,onSelectionDragStop:H,noPanClassName:Rn,nodeOrigin:ke,rfId:lt,autoPanOnConnect:qn,autoPanOnNodeDrag:$n,onError:tt,connectionRadius:et,isValidConnection:nt,nodeDragThreshold:at}),u.createElement(un,{onSelectionChange:T}),hn,u.createElement(R,{proOptions:Hn,position:Xn}),u.createElement(xn,{rfId:lt,disableKeyboardA11y:jn})))}));co.displayName="ReactFlow";function uo(e){return function(n){var t=(0,u.useState)(n),o=(0,i.Z)(t,2),r=o[0],a=o[1],l=(0,u.useCallback)((function(n){return a((function(t){return e(n,t)}))}),[]);return[r,a,l]}}var so=uo(qn),go=uo((function(e,n){return Gn(e,n)}))}}]);
//# sourceMappingURL=971df74e-dd9e68b35435d0503b2f.js.map