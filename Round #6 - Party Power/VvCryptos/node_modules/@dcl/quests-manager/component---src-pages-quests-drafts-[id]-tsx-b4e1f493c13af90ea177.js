"use strict";(self.webpackChunk_dcl_quests_manager=self.webpackChunk_dcl_quests_manager||[]).push([[644],{3464:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Checkbox=void 0;var l=n(71256);Object.defineProperty(t,"Checkbox",{enumerable:!0,get:function(){return r(l).default}}),n(84791)},62886:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(67294),l=n(48190),a=n.n(l),i=n(84092),o=function(e){var t=e.initialNodes,l=e.initialEdges,o=e.type,s=void 0===o?"new":o,u=e.onClick,d=e.close,c=a()((function(){return Promise.all([n.e(532),n.e(774),n.e(241),n.e(351),n.e(440),n.e(649)]).then(n.bind(n,10115))}))[0];return r.createElement("div",{style:{height:"100vh",width:"100vw"}},c&&r.createElement(c.QuestsDesigner,{saveDesignButton:"old"!==s&&u?{content:"new"==s?"Save Draft":"draft"==s?"Update Draft":"Update Quest",onClick:u,validate:"published"==s}:void 0,backButton:function(){return d?d():(0,i.back)()},initialNodes:t,initialEdges:l}))}},72660:function(e,t,n){n.d(t,{I:function(){return m}});n(38559);var r=n(93433),l=n(67294),a=n(389),i=n(3464),o=n(5765),s=n(3558),u=n(73355),d=function(e){var t=e.items,n=e.onSaveItem,r=(0,l.useState)(null),i=r[0],o=r[1],s=(0,l.useState)(null),u=s[0],d=s[1];return u?l.createElement(c,{item:u,onChange:function(e,t){var n;return d(Object.assign({},u,((n={})[e]=t,n)))},onClose:function(){return d(null)},onSave:function(){n(u,u.index),d(null)}}):i?l.createElement(c,{item:i,onChange:function(e,t){var n;return o(Object.assign({},i,((n={})[e]=t,n)))},onClose:function(){return o(null)},onSave:function(){n(i,-1),o(null)}}):l.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"20px",marginBottom:"20px"}},l.createElement("h4",null,"Reward Items ",l.createElement("span",{style:{color:"var(--primary)"}},"*")),t.length?l.createElement("ul",null,t.map((function(e,t){return l.createElement(a.Button,{size:"small",type:"button",content:""+e.name,inverted:!0,onClick:function(){return d(Object.assign({},e,{index:t}))}})}))):l.createElement("p",null,"No items"),l.createElement(a.Button,{type:"button",content:"Add item",size:"small",inverted:!0,style:{border:"none",width:"20px"},onClick:function(){return o({name:"",imageLink:""})}}))},c=function(e){var t=e.item,n=e.onSave,r=e.onClose,i=e.onChange;return l.createElement("div",{style:{width:"100%",marginTop:"20px"}},l.createElement("h4",null,"Adding Item"),l.createElement("div",{style:{display:"flex",maxWidth:"100%",justifyContent:"space-between"},className:"key-value"},l.createElement(o.Field,{label:"name",value:t.name,onChange:function(e){return i("name",e.target.value)},error:t.name.length<3,message:t.name.length<3?"Name should be at least 3 chars":void 0}),l.createElement(o.Field,{label:"image link",value:t.imageLink,onChange:function(e){return i("imageLink",e.target.value)},error:!new RegExp(u.yV).test(t.imageLink||""),message:new RegExp(u.yV).test(t.imageLink||"")?void 0:"Image URL is invalud"})),l.createElement("div",{style:{display:"flex",justifyContent:"flex-start"}},l.createElement(a.Button,{type:"button",content:"Save",secondary:!0,size:"small",style:{maxWidth:"20px",marginRight:"10px"},disabled:(null==t?void 0:t.name.length)<3||""==(null==t?void 0:t.imageLink)||!new RegExp(u.yV).test(t.imageLink||""),onClick:function(){return n()}}),l.createElement(a.Button,{type:"button",content:"Close",inverted:!0,size:"small",style:{maxWidth:"20px"},onClick:function(){r()}})))},m=function(e){var t,n,c,m,h,p,v,f,g=e.onChange,b=e.quest,E=e.readonly,y=void 0!==E&&E;return l.createElement(l.Fragment,null,l.createElement("h3",null,"Quest Information"),l.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between"}},l.createElement(s.Header,{sub:!0,size:"small"},l.createElement("label",null,"Name ",l.createElement("span",{style:{color:"var(--primary)"}},"*"))),l.createElement(o.Field,{placeholder:"Name of the quest",value:b.name,onChange:function(e){g(Object.assign({},b,{name:e.target.value}))},readOnly:y,error:!!(b.name&&(null===(t=b.name)||void 0===t?void 0:t.length)<5),message:b.name&&(null===(n=b.name)||void 0===n?void 0:n.length)<5?"Name should be at least 5 chars ":void 0}),l.createElement(s.Header,{sub:!0,size:"small"},l.createElement("label",null,"Description ",l.createElement("span",{style:{color:"var(--primary)"}},"*"))),l.createElement(o.Field,{placeholder:"Short description of the quest",value:b.description,onChange:function(e){g(Object.assign({},b,{description:e.target.value}))},readOnly:y,error:!!(b.description&&(null===(c=b.description)||void 0===c?void 0:c.length)<5),message:b.description&&(null===(m=b.description)||void 0===m?void 0:m.length)<5?"Description should be at least 5 chars ":void 0}),l.createElement(s.Header,{sub:!0,size:"small"},l.createElement("label",null,"Image ",l.createElement("span",{style:{color:"var(--primary)"}},"*"))),l.createElement(o.Field,{value:b.imageUrl,placeholder:"Image URL to display when listing the quest",onChange:function(e){g(Object.assign({},b,{imageUrl:e.target.value}))},readOnly:y,error:!!b.imageUrl&&!new RegExp(u.yV).test(b.imageUrl),message:!!b.imageUrl&&(new RegExp(u.yV).test(b.imageUrl)?void 0:"Image URL is invalid")})),l.createElement("div",null,l.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.createElement("div",null,l.createElement("h3",{style:{marginBottom:"0px"}},"Rewards")),l.createElement(i.Checkbox,{toggle:!0,checked:!!b.reward,onChange:function(){b.reward?g(Object.assign({},b,{reward:void 0})):g(Object.assign({},b,{reward:{hook:{webhookUrl:"",requestBody:{}},items:[]}}))}})),b.reward&&l.createElement(l.Fragment,null,l.createElement("p",{style:{fontSize:"10px",marginBottom:"10px",whiteSpace:"pre",color:"#676370"}},"Available placeholders for Webhook URL and Data to Receive (request body): ","\n","{ ",l.createElement("span",{style:{fontWeight:"bold"}},"quest_id"),"} , { ",l.createElement("span",{style:{fontWeight:"bold"}},"user_address"),"} ","\n","E.g: { beneficary: {user_address}, quest: {quest_id} }"),l.createElement("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column",marginTop:"40px"}},l.createElement(s.Header,{sub:!0,size:"small"},l.createElement("label",null,"Webhook URL ",l.createElement("span",{style:{color:"var(--primary)"}},"*"))),l.createElement(o.Field,{value:(null==b||null===(h=b.reward)||void 0===h?void 0:h.hook.webhookUrl)||"",onChange:function(e){var t,n,r;g(Object.assign({},b,{reward:{items:(null===(t=b.reward)||void 0===t?void 0:t.items)||[],hook:{requestBody:(null===(n=b.reward)||void 0===n||null===(r=n.hook)||void 0===r?void 0:r.requestBody)||{},webhookUrl:e.target.value}}}))},placeholder:"URL to call when the quest is completed",readOnly:y,error:!new RegExp(u.yV).test(b.reward.hook.webhookUrl||""),message:new RegExp(u.yV).test(b.reward.hook.webhookUrl||"")?void 0:"Webhook URL is invalud"}),l.createElement("div",{style:{width:"100%"}},l.createElement(s.Header,{sub:!0,size:"small"},l.createElement("label",null,"Data to Receive"," ",l.createElement("span",{style:{color:"var(--primary)"}},"*"))),Object.entries((null==b||null===(p=b.reward)||void 0===p?void 0:p.hook.requestBody)||{}).length?Object.entries((null==b||null===(v=b.reward)||void 0===v?void 0:v.hook.requestBody)||{}).map((function(e,t){var n=e[0],r=e[1];return l.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},className:"key-value"},l.createElement(o.Field,{value:n,onChange:function(e){var n,r,l,a=Object.entries((null===(n=b.reward)||void 0===n?void 0:n.hook.requestBody)||{});a[t][0]=e.target.value,g(Object.assign({},b,{reward:{hook:{webhookUrl:(null===(r=b.reward)||void 0===r?void 0:r.hook.webhookUrl)||"",requestBody:Object.fromEntries(a)},items:(null===(l=b.reward)||void 0===l?void 0:l.items)||[]}}))},readOnly:y,error:!n.length,message:n.length?void 0:"Key cannot be empty"}),l.createElement("span",{style:{fontSize:"24px"}},":"),l.createElement(o.Field,{value:r,onChange:function(e){var n,r,l,a=Object.entries((null===(n=b.reward)||void 0===n?void 0:n.hook.requestBody)||{});a[t][1]=e.target.value,g(Object.assign({},b,{reward:{hook:{webhookUrl:(null===(r=b.reward)||void 0===r?void 0:r.hook.webhookUrl)||"",requestBody:Object.fromEntries(a)},items:(null===(l=b.reward)||void 0===l?void 0:l.items)||[]}}))},readOnly:y,error:!r.length,message:r.length?void 0:"Value cannot be empty"}),!y&&l.createElement("button",{style:{color:"red",backgroundColor:"transparent",border:"none",cursor:"pointer"},onClick:function(){var e,t,r,l=Object.entries((null===(e=b.reward)||void 0===e?void 0:e.hook.requestBody)||{});g(Object.assign({},b,{reward:{hook:{webhookUrl:(null===(t=b.reward)||void 0===t?void 0:t.hook.webhookUrl)||"",requestBody:Object.fromEntries(l.filter((function(e){return e[0]!=n})))},items:(null===(r=b.reward)||void 0===r?void 0:r.items)||[]}}))}},"âœ•"))})):null,!y&&l.createElement(a.Button,{type:"button",content:"Add Key:Value",size:"small",inverted:!0,style:{border:"none"},onClick:function(){var e,t,n,r,l,a=Object.keys((null===(e=b.reward)||void 0===e?void 0:e.hook.requestBody)||{});g(Object.assign({},b,{reward:{hook:{webhookUrl:(null===(t=b.reward)||void 0===t?void 0:t.hook.webhookUrl)||"",requestBody:Object.assign({},(null===(n=b.reward)||void 0===n?void 0:n.hook.requestBody)||{},(r={},r["key"+(0==a.length?"":a.length)]="value",r))},items:(null===(l=b.reward)||void 0===l?void 0:l.items)||[]}}))}})),!y&&l.createElement(d,{items:(null==b||null===(f=b.reward)||void 0===f?void 0:f.items)||[],onSaveItem:function(e,t){var n,l,a,i,o=(0,r.Z)((null==b||null===(n=b.reward)||void 0===n?void 0:n.items)||[]);-1===t?o.push(e):o[t]=e,g(Object.assign({},b,{reward:{hook:{requestBody:(null===(l=b.reward)||void 0===l?void 0:l.hook.requestBody)||{},webhookUrl:(null===(a=b.reward)||void 0===a||null===(i=a.hook)||void 0===i?void 0:i.webhookUrl)||""},items:o}}))}})))))}},91314:function(e,t,n){n.d(t,{T:function(){return i}});var r=n(67294),l=n(389),a=n(64328),i=function(e){var t=e.onContinue,n=e.onKeepEditing;return r.createElement(a.Modal,{open:!0,size:"tiny",className:"quests-modal"},r.createElement(a.Modal.Header,null,"Quest Draft saved successfully"),r.createElement(a.Modal.Content,null),r.createElement(a.Modal.Actions,null,r.createElement(l.Button,{primary:!0,onClick:t,size:"medium"},"Continue"),r.createElement(l.Button,{inverted:!0,onClick:n,size:"medium",style:{backgroundColor:"transparent"}},"Keep Editing")))}},98930:function(e,t,n){n.r(t);var r=n(63366),l=n(15861),a=n(64687),i=n.n(a),o=n(67294),s=n(91285),u=n(72118),d=n(84092),c=n(37677),m=n(389),h=n(66687),p=n(57740),v=n(64328),f=n(4950),g=n(62886),b=n(72660),E=n(91314),y=n(38026),w=n(73355),k=["metadata","id"],C=["metadata","id"],Q=function(e){var t=e.onClick;return o.createElement(v.Modal,{open:!0,size:"tiny",className:"quests-modal"},o.createElement(v.Modal.Content,null,"Your draft has been saved"),o.createElement(v.Modal.Actions,null,o.createElement(m.Button,{primary:!0,onClick:t},"Close")))},x=function(e){var t=e.onClick;return o.createElement(v.Modal,{open:!0,size:"tiny",className:"quests-modal"},o.createElement(v.Modal.Content,null,"Your Quest was published!"),o.createElement(v.Modal.Actions,null,o.createElement(m.Button,{primary:!0,onClick:t},"Go to edit page")))},D=function(e){var t=e.onDelete,n=e.onCancel;return o.createElement(v.Modal,{open:!0,size:"tiny",className:"quests-modal"},o.createElement(v.Modal.Header,null,"Delete Quest"),o.createElement(v.Modal.Content,null,"You will lose your quest definition and information"),o.createElement(v.Modal.Actions,null,o.createElement(m.Button,{primary:!0,onClick:t,size:"medium"},"Delete"),o.createElement(m.Button,{inverted:!0,onClick:n,size:"medium"},"Cancel")))},q=function(e){var t=e.onDelete,n=e.onProceed,r=e.onCancel;return o.createElement(v.Modal,{open:!0,size:"tiny",className:"quests-modal"},o.createElement(v.Modal.Header,null,"Publish Quest"),o.createElement(v.Modal.Content,null,"Once your Quest is published, it will become live on the server."),o.createElement(v.Modal.Actions,null,o.createElement(m.Button,{primary:!0,onClick:n,size:"medium"},"Publish and Keep Draft"),o.createElement(m.Button,{onClick:t,size:"medium"},"Publish and Delete Draft"),o.createElement(m.Button,{inverted:!0,style:{backgroundColor:"transparent"},onClick:r,size:"medium"},"Cancel")))},j=function(){return o.createElement("svg",{width:"17",height:"17",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{id:"Group 2971"},o.createElement("circle",{id:"Ellipse 86",cx:"12",cy:"12.5",r:"11.9104",fill:"#FF2D55"}),o.createElement("g",{id:"x"},o.createElement("g",{id:"Vector"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.9109 9.2488C16.2429 9.5803 16.2427 10.1175 15.9104 10.4487L9.9516 16.3879C9.61931 16.7191 9.08081 16.7189 8.74882 16.3874C8.41684 16.0558 8.41709 15.5186 8.74938 15.1874L14.7082 9.24824C15.0405 8.91704 15.579 8.91729 15.9109 9.2488Z",fill:"#FCFCFC"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.9109 16.3876C15.579 16.7191 15.0405 16.7193 14.7082 16.3881L8.74939 10.449C8.41709 10.1178 8.41684 9.58052 8.74882 9.24901C9.08081 8.9175 9.61931 8.91725 9.9516 9.24845L15.9104 15.1876C16.2427 15.5188 16.2429 16.0561 15.9109 16.3876Z",fill:"#FCFCFC"})))))};t.default=function(e){var t=e.id,n=(0,o.useState)(!1),a=n[0],v=n[1],B=(0,o.useState)((0,w.YH)(Number(t))),L=B[0],O=B[1],U=(0,o.useState)({savedDraft:!1,publishingQuest:!1,publishedQuest:!1,publishQuestLoading:!1,publishedQuestID:"",publishedQuestError:null,deleteDraft:!1}),z=U[0],S=U[1],I=(0,o.useState)(!1),R=I[0],M=I[1],N=(0,u.useAuthContext)(),F=N[0],T=N[1];if(!F||T.loading)return o.createElement(f.SignIn,{onConnect:function(){return T.select()},isConnecting:T.loading});var _=new y.N(F);if(!L)return o.createElement(h.Container,null,o.createElement("h2",null,"Draft not found :("));if(a){var A,P;if(L.definition){var V,H=(0,s.tV)(L.definition,null===(V=L.metadata)||void 0===V?void 0:V.stepPositions);A=H.nodes,P=H.edges}else A=L.metadata.nodes,P=L.metadata.edges;return o.createElement(o.Fragment,null,o.createElement(g.B,{initialEdges:P,initialNodes:A,type:"draft",close:function(){return v(!1)},onClick:function(e,n,r){(0,w.Ak)(Number(t),{definition:r,metadata:{stepPositions:e.reduce((function(e,t){return t.data.id?e[t.data.id]=t.position:e[t.id]=t.position,e}),{}),nodes:e,edges:n}}),O((0,w.YH)(Number(t)))}}),R&&o.createElement(E.T,{onContinue:function(){M(!1),v(!1)},onKeepEditing:function(){M(!1)}}))}return z.publishQuestLoading?o.createElement(p.Loader,{active:!0,size:"massive"}):z.publishedQuest?o.createElement(x,{onClick:function(){(0,d.navigate)(w.Kl.editPublishedQuest(z.publishedQuestID))}}):o.createElement(h.Container,null,o.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start"}},o.createElement("div",{style:{display:"flex",justifyContent:"flex-start",width:"45%"}},o.createElement(c.Back,{onClick:function(){return(0,d.navigate)(w.Kl.home())}}),o.createElement("div",{style:{marginLeft:"24px"}},o.createElement("h2",null,"Edit Quest"))),o.createElement("div",{style:{display:"flex",justifyContent:"center",width:"55%"}},o.createElement(m.Button,{onClick:function(){return v(!0)}},"Edit Quest Steps"),o.createElement(m.Button,{type:"button",content:"Delete Draft",size:"small",style:{marginLeft:"10px"},inverted:!0,onClick:function(){S({savedDraft:!0,publishingQuest:!1,publishQuestLoading:!1,publishedQuest:!1,publishedQuestID:"",publishedQuestError:null,deleteDraft:!0})}}))),o.createElement("div",{style:{width:"50%",marginLeft:"60px"}},o.createElement(b.I,{quest:L,onChange:function(e){return O(Object.assign({},L,e))}})),o.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"40px",width:"50%",marginLeft:"60px"}},o.createElement(m.Button,{type:"button",content:"Save Draft",size:"small",style:{backgroundColor:"transparent",border:"2px solid black",width:"45%"},onClick:function(){return(0,w.Jg)(L),void S({savedDraft:!0,publishingQuest:!1,publishQuestLoading:!1,publishedQuest:!1,publishedQuestID:"",publishedQuestError:null,deleteDraft:!1})}}),o.createElement(m.Button,{type:"button",content:"Publish",size:"small",primary:!0,style:{width:"45%"},disabled:!(0,w.HV)(L),onClick:(0,l.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S({publishedQuestID:"",publishingQuest:!0,publishedQuest:!1,publishQuestLoading:!1,savedDraft:!1,publishedQuestError:null,deleteDraft:!1});case 1:case"end":return e.stop()}}),e)})))})),!L.definition&&o.createElement("div",{style:{display:"flex",alignContent:"center",marginLeft:"60px",marginTop:"5px"}},o.createElement("span",null,o.createElement(j,null)),o.createElement("p",{style:{color:"var(--primary)",fontSize:"12px",marginLeft:"5px"}},"Cannot publish due to invalid Quest steps")),z.savedDraft&&o.createElement(Q,{onClick:function(){return S({publishedQuest:!1,publishingQuest:!1,savedDraft:!1,publishQuestLoading:!1,publishedQuestID:"",publishedQuestError:null,deleteDraft:!1})}}),z.publishingQuest&&o.createElement(q,{onCancel:function(){S({publishedQuestID:"",publishingQuest:!1,publishedQuest:!1,publishQuestLoading:!1,savedDraft:!1,publishedQuestError:null,deleteDraft:!1})},onDelete:(0,l.Z)(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,w.th)(Number(L.id)),S({publishedQuestID:"",publishingQuest:!1,publishedQuest:!1,publishQuestLoading:!0,savedDraft:!1,publishedQuestError:null,deleteDraft:!1}),L.metadata,L.id,t=(0,r.Z)(L,k),e.next=5,_.publishQuest(t);case 5:n=e.sent,setTimeout((function(){S({publishedQuestID:n.id,publishingQuest:!1,publishedQuest:!0,publishQuestLoading:!1,savedDraft:!1,publishedQuestError:null,deleteDraft:!1})}),1500);case 7:case"end":return e.stop()}}),e)}))),onProceed:(0,l.Z)(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S({publishedQuestID:"",publishingQuest:!1,publishedQuest:!1,publishQuestLoading:!0,savedDraft:!1,publishedQuestError:null,deleteDraft:!1}),L.metadata,L.id,t=(0,r.Z)(L,C),e.next=4,_.publishQuest(t);case 4:n=e.sent,setTimeout((function(){S({publishedQuestID:n.id,publishingQuest:!1,publishedQuest:!0,publishQuestLoading:!1,savedDraft:!1,publishedQuestError:null,deleteDraft:!1})}),1500);case 6:case"end":return e.stop()}}),e)})))}),z.deleteDraft&&o.createElement(D,{onDelete:function(){(0,w.th)(L.id),(0,d.navigate)(w.Kl.home())},onCancel:function(){S({publishedQuestID:"",publishingQuest:!1,publishedQuest:!0,publishQuestLoading:!1,savedDraft:!1,publishedQuestError:null,deleteDraft:!1})}}))}},38026:function(e,t,n){n.d(t,{N:function(){return p}});var r=n(15861),l=n(94578),a=n(64687),i=n.n(a),o=n(99389),s=n(18509),u=n.n(s),d=n(94012),c=n.n(d);function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e){function t(n){var r;return(r=e.call(this,t.URL)||this).user=n,r}(0,l.Z)(t,e);var n=t.prototype;return n.getMyQuests=function(){return this.fetch("/creators/"+this.user+"/quests",this.options().method("GET").authorization({sign:!0}))},n.publishQuest=function(e){(0,o.NJ)(e);for(var t,n=m(e.definition.steps);!(t=n()).done;)for(var r,l=m(t.value.tasks);!(r=l()).done;)for(var a,i=m(r.value.actionItems);!(a=i()).done;){var s=a.value;for(var u in s.parameters)"string"!=typeof s.parameters[u]&&(s.parameters[u]=JSON.stringify(s.parameters[u]))}return this.fetch("/quests",this.options().method("POST").authorization({sign:!0}).json(e).metadata(e))},n.getQuest=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch("/quests/"+t,this.options().method("GET").authorization({sign:!0}));case 2:return n=e.sent,r=null,e.prev=4,e.next=7,this.fetch("/quests/"+t+"/reward?with_hook=true",this.options().method("GET").authorization({sign:!0}));case 7:r=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0);case 13:return e.abrupt("return",Object.assign({},n.quest,{reward:r||void 0}));case 14:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),n.updateQuest=function(e,t){if(!t.name)throw new Error("Quest must have a name");return this.fetch("/quests/"+e,this.options().method("PUT").authorization({sign:!0}).json(t))},n.deactivateQuest=function(e){return this.fetch("/quests/"+e,this.options().method("DELETE").authorization({sign:!0}))},n.activateQuest=function(e){return this.fetch("/quests/"+e+"/activate",this.options().method("PUT").authorization({sign:!0}))},n.getOldVersions=function(e){return this.fetch("/quests/"+e+"/updates",this.options().method("GET"))},t}(u());p.URL=c()("QUESTS_SERVER_URL","https://quests.decentraland.org/api")},84791:function(e,t,n){n.r(t)}}]);
//# sourceMappingURL=component---src-pages-quests-drafts-[id]-tsx-b4e1f493c13af90ea177.js.map