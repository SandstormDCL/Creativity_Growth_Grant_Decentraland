{"version":3,"file":"bd1a647f-7304316d5a5e980c6326.js","mappings":"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","sources":["webpack://@dcl/quests-manager/./node_modules/framer-motion/dist/cjs/index.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar tslib = require('tslib');\nvar React = require('react');\nvar heyListen = require('hey-listen');\nvar styleValueTypes = require('style-value-types');\nvar popmotion = require('popmotion');\nvar sync = require('framesync');\nvar dom = require('@motionone/dom');\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function get() {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n  n[\"default\"] = e;\n  return Object.freeze(n);\n}\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\nvar sync__default = /*#__PURE__*/_interopDefaultLegacy(sync);\n\n/**\n * Browser-safe usage of process\n */\nvar defaultEnvironment = \"production\";\nvar env = typeof process === \"undefined\" || process.env === undefined ? defaultEnvironment : process.env.NODE_ENV || defaultEnvironment;\nvar createDefinition = function createDefinition(propNames) {\n  return {\n    isEnabled: function isEnabled(props) {\n      return propNames.some(function (name) {\n        return !!props[name];\n      });\n    }\n  };\n};\nvar featureDefinitions = {\n  measureLayout: createDefinition([\"layout\", \"layoutId\", \"drag\"]),\n  animation: createDefinition([\"animate\", \"exit\", \"variants\", \"whileHover\", \"whileTap\", \"whileFocus\", \"whileDrag\", \"whileInView\"]),\n  exit: createDefinition([\"exit\"]),\n  drag: createDefinition([\"drag\", \"dragControls\"]),\n  focus: createDefinition([\"whileFocus\"]),\n  hover: createDefinition([\"whileHover\", \"onHoverStart\", \"onHoverEnd\"]),\n  tap: createDefinition([\"whileTap\", \"onTap\", \"onTapStart\", \"onTapCancel\"]),\n  pan: createDefinition([\"onPan\", \"onPanStart\", \"onPanSessionStart\", \"onPanEnd\"]),\n  inView: createDefinition([\"whileInView\", \"onViewportEnter\", \"onViewportLeave\"])\n};\nfunction loadFeatures(features) {\n  for (var key in features) {\n    if (features[key] === null) continue;\n    if (key === \"projectionNodeConstructor\") {\n      featureDefinitions.projectionNodeConstructor = features[key];\n    } else {\n      featureDefinitions[key].Component = features[key];\n    }\n  }\n}\nvar LazyContext = React.createContext({\n  strict: false\n});\nvar featureNames = Object.keys(featureDefinitions);\nvar numFeatures = featureNames.length;\n/**\n * Load features via renderless components based on the provided MotionProps.\n */\nfunction useFeatures(props, visualElement, preloadedFeatures) {\n  var features = [];\n  var lazyContext = React.useContext(LazyContext);\n  if (!visualElement) return null;\n  /**\n   * If we're in development mode, check to make sure we're not rendering a motion component\n   * as a child of LazyMotion, as this will break the file-size benefits of using it.\n   */\n  if (env !== \"production\" && preloadedFeatures && lazyContext.strict) {\n    heyListen.invariant(false, \"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.\");\n  }\n  for (var i = 0; i < numFeatures; i++) {\n    var name_1 = featureNames[i];\n    var _a = featureDefinitions[name_1],\n      isEnabled = _a.isEnabled,\n      Component = _a.Component;\n    /**\n     * It might be possible in the future to use this moment to\n     * dynamically request functionality. In initial tests this\n     * was producing a lot of duplication amongst bundles.\n     */\n    if (isEnabled(props) && Component) {\n      features.push(React__namespace.createElement(Component, tslib.__assign({\n        key: name_1\n      }, props, {\n        visualElement: visualElement\n      })));\n    }\n  }\n  return features;\n}\n\n/**\n * @public\n */\nvar MotionConfigContext = React.createContext({\n  transformPagePoint: function transformPagePoint(p) {\n    return p;\n  },\n  isStatic: false,\n  reducedMotion: \"never\"\n});\nvar MotionContext = React.createContext({});\nfunction useVisualElementContext() {\n  return React.useContext(MotionContext).visualElement;\n}\n\n/**\n * @public\n */\nvar PresenceContext = React.createContext(null);\nvar isBrowser = typeof document !== \"undefined\";\nvar useIsomorphicLayoutEffect = isBrowser ? React.useLayoutEffect : React.useEffect;\n\n// Does this device prefer reduced motion? Returns `null` server-side.\nvar prefersReducedMotion = {\n  current: null\n};\nvar hasDetected = false;\nfunction initPrefersReducedMotion() {\n  hasDetected = true;\n  if (!isBrowser) return;\n  if (window.matchMedia) {\n    var motionMediaQuery_1 = window.matchMedia(\"(prefers-reduced-motion)\");\n    var setReducedMotionPreferences = function setReducedMotionPreferences() {\n      return prefersReducedMotion.current = motionMediaQuery_1.matches;\n    };\n    motionMediaQuery_1.addListener(setReducedMotionPreferences);\n    setReducedMotionPreferences();\n  } else {\n    prefersReducedMotion.current = false;\n  }\n}\n/**\n * A hook that returns `true` if we should be using reduced motion based on the current device's Reduced Motion setting.\n *\n * This can be used to implement changes to your UI based on Reduced Motion. For instance, replacing motion-sickness inducing\n * `x`/`y` animations with `opacity`, disabling the autoplay of background videos, or turning off parallax motion.\n *\n * It will actively respond to changes and re-render your components with the latest setting.\n *\n * ```jsx\n * export function Sidebar({ isOpen }) {\n *   const shouldReduceMotion = useReducedMotion()\n *   const closedX = shouldReduceMotion ? 0 : \"-100%\"\n *\n *   return (\n *     <motion.div animate={{\n *       opacity: isOpen ? 1 : 0,\n *       x: isOpen ? 0 : closedX\n *     }} />\n *   )\n * }\n * ```\n *\n * @return boolean\n *\n * @public\n */\nfunction useReducedMotion() {\n  /**\n   * Lazy initialisation of prefersReducedMotion\n   */\n  !hasDetected && initPrefersReducedMotion();\n  var _a = tslib.__read(React.useState(prefersReducedMotion.current), 1),\n    shouldReduceMotion = _a[0];\n  /**\n   * TODO See if people miss automatically updating shouldReduceMotion setting\n   */\n  return shouldReduceMotion;\n}\nfunction useReducedMotionConfig() {\n  var reducedMotionPreference = useReducedMotion();\n  var reducedMotion = React.useContext(MotionConfigContext).reducedMotion;\n  if (reducedMotion === \"never\") {\n    return false;\n  } else if (reducedMotion === \"always\") {\n    return true;\n  } else {\n    return reducedMotionPreference;\n  }\n}\nfunction useVisualElement(Component, visualState, props, createVisualElement) {\n  var lazyContext = React.useContext(LazyContext);\n  var parent = useVisualElementContext();\n  var presenceContext = React.useContext(PresenceContext);\n  var shouldReduceMotion = useReducedMotionConfig();\n  var visualElementRef = React.useRef(undefined);\n  /**\n   * If we haven't preloaded a renderer, check to see if we have one lazy-loaded\n   */\n  if (!createVisualElement) createVisualElement = lazyContext.renderer;\n  if (!visualElementRef.current && createVisualElement) {\n    visualElementRef.current = createVisualElement(Component, {\n      visualState: visualState,\n      parent: parent,\n      props: props,\n      presenceId: presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.id,\n      blockInitialAnimation: (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false,\n      shouldReduceMotion: shouldReduceMotion\n    });\n  }\n  var visualElement = visualElementRef.current;\n  useIsomorphicLayoutEffect(function () {\n    visualElement === null || visualElement === void 0 ? void 0 : visualElement.syncRender();\n  });\n  React.useEffect(function () {\n    var _a;\n    (_a = visualElement === null || visualElement === void 0 ? void 0 : visualElement.animationState) === null || _a === void 0 ? void 0 : _a.animateChanges();\n  });\n  useIsomorphicLayoutEffect(function () {\n    return function () {\n      return visualElement === null || visualElement === void 0 ? void 0 : visualElement.notifyUnmount();\n    };\n  }, []);\n  return visualElement;\n}\nfunction isRefObject(ref) {\n  return typeof ref === \"object\" && Object.prototype.hasOwnProperty.call(ref, \"current\");\n}\n\n/**\n * Creates a ref function that, when called, hydrates the provided\n * external ref and VisualElement.\n */\nfunction useMotionRef(visualState, visualElement, externalRef) {\n  return React.useCallback(function (instance) {\n    var _a;\n    instance && ((_a = visualState.mount) === null || _a === void 0 ? void 0 : _a.call(visualState, instance));\n    if (visualElement) {\n      instance ? visualElement.mount(instance) : visualElement.unmount();\n    }\n    if (externalRef) {\n      if (typeof externalRef === \"function\") {\n        externalRef(instance);\n      } else if (isRefObject(externalRef)) {\n        externalRef.current = instance;\n      }\n    }\n  },\n  /**\n   * Only pass a new ref callback to React if we've received a visual element\n   * factory. Otherwise we'll be mounting/remounting every time externalRef\n   * or other dependencies change.\n   */\n  [visualElement]);\n}\n\n/**\n * Decides if the supplied variable is an array of variant labels\n */\nfunction isVariantLabels(v) {\n  return Array.isArray(v);\n}\n/**\n * Decides if the supplied variable is variant label\n */\nfunction isVariantLabel(v) {\n  return typeof v === \"string\" || isVariantLabels(v);\n}\n/**\n * Creates an object containing the latest state of every MotionValue on a VisualElement\n */\nfunction getCurrent(visualElement) {\n  var current = {};\n  visualElement.forEachValue(function (value, key) {\n    return current[key] = value.get();\n  });\n  return current;\n}\n/**\n * Creates an object containing the latest velocity of every MotionValue on a VisualElement\n */\nfunction getVelocity$1(visualElement) {\n  var velocity = {};\n  visualElement.forEachValue(function (value, key) {\n    return velocity[key] = value.getVelocity();\n  });\n  return velocity;\n}\nfunction resolveVariantFromProps(props, definition, custom, currentValues, currentVelocity) {\n  var _a;\n  if (currentValues === void 0) {\n    currentValues = {};\n  }\n  if (currentVelocity === void 0) {\n    currentVelocity = {};\n  }\n  /**\n   * If the variant definition is a function, resolve.\n   */\n  if (typeof definition === \"function\") {\n    definition = definition(custom !== null && custom !== void 0 ? custom : props.custom, currentValues, currentVelocity);\n  }\n  /**\n   * If the variant definition is a variant label, or\n   * the function returned a variant label, resolve.\n   */\n  if (typeof definition === \"string\") {\n    definition = (_a = props.variants) === null || _a === void 0 ? void 0 : _a[definition];\n  }\n  /**\n   * At this point we've resolved both functions and variant labels,\n   * but the resolved variant label might itself have been a function.\n   * If so, resolve. This can only have returned a valid target object.\n   */\n  if (typeof definition === \"function\") {\n    definition = definition(custom !== null && custom !== void 0 ? custom : props.custom, currentValues, currentVelocity);\n  }\n  return definition;\n}\nfunction resolveVariant(visualElement, definition, custom) {\n  var props = visualElement.getProps();\n  return resolveVariantFromProps(props, definition, custom !== null && custom !== void 0 ? custom : props.custom, getCurrent(visualElement), getVelocity$1(visualElement));\n}\nfunction checkIfControllingVariants(props) {\n  var _a;\n  return typeof ((_a = props.animate) === null || _a === void 0 ? void 0 : _a.start) === \"function\" || isVariantLabel(props.initial) || isVariantLabel(props.animate) || isVariantLabel(props.whileHover) || isVariantLabel(props.whileDrag) || isVariantLabel(props.whileTap) || isVariantLabel(props.whileFocus) || isVariantLabel(props.exit);\n}\nfunction checkIfVariantNode(props) {\n  return Boolean(checkIfControllingVariants(props) || props.variants);\n}\nfunction getCurrentTreeVariants(props, context) {\n  if (checkIfControllingVariants(props)) {\n    var initial = props.initial,\n      animate = props.animate;\n    return {\n      initial: initial === false || isVariantLabel(initial) ? initial : undefined,\n      animate: isVariantLabel(animate) ? animate : undefined\n    };\n  }\n  return props.inherit !== false ? context : {};\n}\nfunction useCreateMotionContext(props) {\n  var _a = getCurrentTreeVariants(props, React.useContext(MotionContext)),\n    initial = _a.initial,\n    animate = _a.animate;\n  return React.useMemo(function () {\n    return {\n      initial: initial,\n      animate: animate\n    };\n  }, [variantLabelsAsDependency(initial), variantLabelsAsDependency(animate)]);\n}\nfunction variantLabelsAsDependency(prop) {\n  return Array.isArray(prop) ? prop.join(\" \") : prop;\n}\n\n/**\n * Creates a constant value over the lifecycle of a component.\n *\n * Even if `useMemo` is provided an empty array as its final argument, it doesn't offer\n * a guarantee that it won't re-run for performance reasons later on. By using `useConstant`\n * you can ensure that initialisers don't execute twice or more.\n */\nfunction useConstant(init) {\n  var ref = React.useRef(null);\n  if (ref.current === null) {\n    ref.current = init();\n  }\n  return ref.current;\n}\n\n/**\n * This should only ever be modified on the client otherwise it'll\n * persist through server requests. If we need instanced states we\n * could lazy-init via root.\n */\nvar globalProjectionState = {\n  /**\n   * Global flag as to whether the tree has animated since the last time\n   * we resized the window\n   */\n  hasAnimatedSinceResize: true,\n  /**\n   * We set this to true once, on the first update. Any nodes added to the tree beyond that\n   * update will be given a `data-projection-id` attribute.\n   */\n  hasEverUpdated: false\n};\nvar id$1 = 1;\nfunction useProjectionId() {\n  return useConstant(function () {\n    if (globalProjectionState.hasEverUpdated) {\n      return id$1++;\n    }\n  });\n}\nvar LayoutGroupContext = React.createContext({});\n\n/**\n * Internal, exported only for usage in Framer\n */\nvar SwitchLayoutGroupContext = React.createContext({});\nfunction useProjection(projectionId, _a, visualElement, ProjectionNodeConstructor) {\n  var _b;\n  var layoutId = _a.layoutId,\n    layout = _a.layout,\n    drag = _a.drag,\n    dragConstraints = _a.dragConstraints,\n    layoutScroll = _a.layoutScroll;\n  var initialPromotionConfig = React.useContext(SwitchLayoutGroupContext);\n  if (!ProjectionNodeConstructor || !visualElement || (visualElement === null || visualElement === void 0 ? void 0 : visualElement.projection)) {\n    return;\n  }\n  visualElement.projection = new ProjectionNodeConstructor(projectionId, visualElement.getLatestValues(), (_b = visualElement.parent) === null || _b === void 0 ? void 0 : _b.projection);\n  visualElement.projection.setOptions({\n    layoutId: layoutId,\n    layout: layout,\n    alwaysMeasureLayout: Boolean(drag) || dragConstraints && isRefObject(dragConstraints),\n    visualElement: visualElement,\n    scheduleRender: function scheduleRender() {\n      return visualElement.scheduleRender();\n    },\n    /**\n     * TODO: Update options in an effect. This could be tricky as it'll be too late\n     * to update by the time layout animations run.\n     * We also need to fix this safeToRemove by linking it up to the one returned by usePresence,\n     * ensuring it gets called if there's no potential layout animations.\n     *\n     */\n    animationType: typeof layout === \"string\" ? layout : \"both\",\n    initialPromotionConfig: initialPromotionConfig,\n    layoutScroll: layoutScroll\n  });\n}\nvar VisualElementHandler = /** @class */function (_super) {\n  tslib.__extends(VisualElementHandler, _super);\n  function VisualElementHandler() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * Update visual element props as soon as we know this update is going to be commited.\n   */\n  VisualElementHandler.prototype.getSnapshotBeforeUpdate = function () {\n    this.updateProps();\n    return null;\n  };\n  VisualElementHandler.prototype.componentDidUpdate = function () {};\n  VisualElementHandler.prototype.updateProps = function () {\n    var _a = this.props,\n      visualElement = _a.visualElement,\n      props = _a.props;\n    if (visualElement) visualElement.setProps(props);\n  };\n  VisualElementHandler.prototype.render = function () {\n    return this.props.children;\n  };\n  return VisualElementHandler;\n}(React__default[\"default\"].Component);\n\n/**\n * Create a `motion` component.\n *\n * This function accepts a Component argument, which can be either a string (ie \"div\"\n * for `motion.div`), or an actual React component.\n *\n * Alongside this is a config option which provides a way of rendering the provided\n * component \"offline\", or outside the React render cycle.\n */\nfunction createMotionComponent(_a) {\n  var preloadedFeatures = _a.preloadedFeatures,\n    createVisualElement = _a.createVisualElement,\n    projectionNodeConstructor = _a.projectionNodeConstructor,\n    useRender = _a.useRender,\n    useVisualState = _a.useVisualState,\n    Component = _a.Component;\n  preloadedFeatures && loadFeatures(preloadedFeatures);\n  function MotionComponent(props, externalRef) {\n    var layoutId = useLayoutId(props);\n    props = tslib.__assign(tslib.__assign({}, props), {\n      layoutId: layoutId\n    });\n    /**\n     * If we're rendering in a static environment, we only visually update the component\n     * as a result of a React-rerender rather than interactions or animations. This\n     * means we don't need to load additional memory structures like VisualElement,\n     * or any gesture/animation features.\n     */\n    var config = React.useContext(MotionConfigContext);\n    var features = null;\n    var context = useCreateMotionContext(props);\n    /**\n     * Create a unique projection ID for this component. If a new component is added\n     * during a layout animation we'll use this to query the DOM and hydrate its ref early, allowing\n     * us to measure it as soon as any layout effect flushes pending layout animations.\n     *\n     * Performance note: It'd be better not to have to search the DOM for these elements.\n     * For newly-entering components it could be enough to only correct treeScale, in which\n     * case we could mount in a scale-correction mode. This wouldn't be enough for\n     * shared element transitions however. Perhaps for those we could revert to a root node\n     * that gets forceRendered and layout animations are triggered on its layout effect.\n     */\n    var projectionId = config.isStatic ? undefined : useProjectionId();\n    /**\n     *\n     */\n    var visualState = useVisualState(props, config.isStatic);\n    if (!config.isStatic && isBrowser) {\n      /**\n       * Create a VisualElement for this component. A VisualElement provides a common\n       * interface to renderer-specific APIs (ie DOM/Three.js etc) as well as\n       * providing a way of rendering to these APIs outside of the React render loop\n       * for more performant animations and interactions\n       */\n      context.visualElement = useVisualElement(Component, visualState, tslib.__assign(tslib.__assign({}, config), props), createVisualElement);\n      useProjection(projectionId, props, context.visualElement, projectionNodeConstructor || featureDefinitions.projectionNodeConstructor);\n      /**\n       * Load Motion gesture and animation features. These are rendered as renderless\n       * components so each feature can optionally make use of React lifecycle methods.\n       */\n      features = useFeatures(props, context.visualElement, preloadedFeatures);\n    }\n    /**\n     * The mount order and hierarchy is specific to ensure our element ref\n     * is hydrated by the time features fire their effects.\n     */\n    return React__namespace.createElement(VisualElementHandler, {\n      visualElement: context.visualElement,\n      props: tslib.__assign(tslib.__assign({}, config), props)\n    }, features, React__namespace.createElement(MotionContext.Provider, {\n      value: context\n    }, useRender(Component, props, projectionId, useMotionRef(visualState, context.visualElement, externalRef), visualState, config.isStatic, context.visualElement)));\n  }\n  return React.forwardRef(MotionComponent);\n}\nfunction useLayoutId(_a) {\n  var _b;\n  var layoutId = _a.layoutId;\n  var layoutGroupId = (_b = React.useContext(LayoutGroupContext)) === null || _b === void 0 ? void 0 : _b.id;\n  return layoutGroupId && layoutId !== undefined ? layoutGroupId + \"-\" + layoutId : layoutId;\n}\n\n/**\n * Convert any React component into a `motion` component. The provided component\n * **must** use `React.forwardRef` to the underlying DOM component you want to animate.\n *\n * ```jsx\n * const Component = React.forwardRef((props, ref) => {\n *   return <div ref={ref} />\n * })\n *\n * const MotionComponent = motion(Component)\n * ```\n *\n * @public\n */\nfunction createMotionProxy(createConfig) {\n  function custom(Component, customMotionComponentConfig) {\n    if (customMotionComponentConfig === void 0) {\n      customMotionComponentConfig = {};\n    }\n    return createMotionComponent(createConfig(Component, customMotionComponentConfig));\n  }\n  if (typeof Proxy === \"undefined\") {\n    return custom;\n  }\n  /**\n   * A cache of generated `motion` components, e.g `motion.div`, `motion.input` etc.\n   * Rather than generating them anew every render.\n   */\n  var componentCache = new Map();\n  return new Proxy(custom, {\n    /**\n     * Called when `motion` is referenced with a prop: `motion.div`, `motion.input` etc.\n     * The prop name is passed through as `key` and we can use that to generate a `motion`\n     * DOM component with that name.\n     */\n    get: function get(_target, key) {\n      /**\n       * If this element doesn't exist in the component cache, create it and cache.\n       */\n      if (!componentCache.has(key)) {\n        componentCache.set(key, custom(key));\n      }\n      return componentCache.get(key);\n    }\n  });\n}\n\n/**\n * We keep these listed seperately as we use the lowercase tag names as part\n * of the runtime bundle to detect SVG components\n */\nvar lowercaseSVGElements = [\"animate\", \"circle\", \"defs\", \"desc\", \"ellipse\", \"g\", \"image\", \"line\", \"filter\", \"marker\", \"mask\", \"metadata\", \"path\", \"pattern\", \"polygon\", \"polyline\", \"rect\", \"stop\", \"svg\", \"switch\", \"symbol\", \"text\", \"tspan\", \"use\", \"view\"];\nfunction isSVGComponent(Component) {\n  if (\n  /**\n   * If it's not a string, it's a custom React component. Currently we only support\n   * HTML custom React components.\n   */\n  typeof Component !== \"string\" ||\n  /**\n   * If it contains a dash, the element is a custom HTML webcomponent.\n   */\n  Component.includes(\"-\")) {\n    return false;\n  } else if (\n  /**\n   * If it's in our list of lowercase SVG tags, it's an SVG component\n   */\n  lowercaseSVGElements.indexOf(Component) > -1 ||\n  /**\n   * If it contains a capital letter, it's an SVG component\n   */\n  /[A-Z]/.test(Component)) {\n    return true;\n  }\n  return false;\n}\nvar scaleCorrectors = {};\nfunction addScaleCorrector(correctors) {\n  Object.assign(scaleCorrectors, correctors);\n}\n\n/**\n * A list of all transformable axes. We'll use this list to generated a version\n * of each axes for each transform.\n */\nvar transformAxes = [\"\", \"X\", \"Y\", \"Z\"];\n/**\n * An ordered array of each transformable value. By default, transform values\n * will be sorted to this order.\n */\nvar order = [\"translate\", \"scale\", \"rotate\", \"skew\"];\n/**\n * Generate a list of every possible transform key.\n */\nvar transformProps = [\"transformPerspective\", \"x\", \"y\", \"z\"];\norder.forEach(function (operationKey) {\n  return transformAxes.forEach(function (axesKey) {\n    return transformProps.push(operationKey + axesKey);\n  });\n});\n/**\n * A function to use with Array.sort to sort transform keys by their default order.\n */\nfunction sortTransformProps(a, b) {\n  return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\n/**\n * A quick lookup for transform props.\n */\nvar transformPropSet = new Set(transformProps);\nfunction isTransformProp(key) {\n  return transformPropSet.has(key);\n}\n/**\n * A quick lookup for transform origin props\n */\nvar transformOriginProps = new Set([\"originX\", \"originY\", \"originZ\"]);\nfunction isTransformOriginProp(key) {\n  return transformOriginProps.has(key);\n}\nfunction isForcedMotionValue(key, _a) {\n  var layout = _a.layout,\n    layoutId = _a.layoutId;\n  return isTransformProp(key) || isTransformOriginProp(key) || (layout || layoutId !== undefined) && (!!scaleCorrectors[key] || key === \"opacity\");\n}\nvar isMotionValue = function isMotionValue(value) {\n  return Boolean(value !== null && typeof value === \"object\" && value.getVelocity);\n};\nvar translateAlias = {\n  x: \"translateX\",\n  y: \"translateY\",\n  z: \"translateZ\",\n  transformPerspective: \"perspective\"\n};\n/**\n * Build a CSS transform style from individual x/y/scale etc properties.\n *\n * This outputs with a default order of transforms/scales/rotations, this can be customised by\n * providing a transformTemplate function.\n */\nfunction buildTransform(_a, _b, transformIsDefault, transformTemplate) {\n  var transform = _a.transform,\n    transformKeys = _a.transformKeys;\n  var _c = _b.enableHardwareAcceleration,\n    enableHardwareAcceleration = _c === void 0 ? true : _c,\n    _d = _b.allowTransformNone,\n    allowTransformNone = _d === void 0 ? true : _d;\n  // The transform string we're going to build into.\n  var transformString = \"\";\n  // Transform keys into their default order - this will determine the output order.\n  transformKeys.sort(sortTransformProps);\n  // Track whether the defined transform has a defined z so we don't add a\n  // second to enable hardware acceleration\n  var transformHasZ = false;\n  // Loop over each transform and build them into transformString\n  var numTransformKeys = transformKeys.length;\n  for (var i = 0; i < numTransformKeys; i++) {\n    var key = transformKeys[i];\n    transformString += \"\".concat(translateAlias[key] || key, \"(\").concat(transform[key], \") \");\n    if (key === \"z\") transformHasZ = true;\n  }\n  if (!transformHasZ && enableHardwareAcceleration) {\n    transformString += \"translateZ(0)\";\n  } else {\n    transformString = transformString.trim();\n  }\n  // If we have a custom `transform` template, pass our transform values and\n  // generated transformString to that before returning\n  if (transformTemplate) {\n    transformString = transformTemplate(transform, transformIsDefault ? \"\" : transformString);\n  } else if (allowTransformNone && transformIsDefault) {\n    transformString = \"none\";\n  }\n  return transformString;\n}\n/**\n * Build a transformOrigin style. Uses the same defaults as the browser for\n * undefined origins.\n */\nfunction buildTransformOrigin(_a) {\n  var _b = _a.originX,\n    originX = _b === void 0 ? \"50%\" : _b,\n    _c = _a.originY,\n    originY = _c === void 0 ? \"50%\" : _c,\n    _d = _a.originZ,\n    originZ = _d === void 0 ? 0 : _d;\n  return \"\".concat(originX, \" \").concat(originY, \" \").concat(originZ);\n}\n\n/**\n * Returns true if the provided key is a CSS variable\n */\nfunction isCSSVariable$1(key) {\n  return key.startsWith(\"--\");\n}\n\n/**\n * Provided a value and a ValueType, returns the value as that value type.\n */\nvar getValueAsType = function getValueAsType(value, type) {\n  return type && typeof value === \"number\" ? type.transform(value) : value;\n};\nvar int = tslib.__assign(tslib.__assign({}, styleValueTypes.number), {\n  transform: Math.round\n});\nvar numberValueTypes = {\n  // Border props\n  borderWidth: styleValueTypes.px,\n  borderTopWidth: styleValueTypes.px,\n  borderRightWidth: styleValueTypes.px,\n  borderBottomWidth: styleValueTypes.px,\n  borderLeftWidth: styleValueTypes.px,\n  borderRadius: styleValueTypes.px,\n  radius: styleValueTypes.px,\n  borderTopLeftRadius: styleValueTypes.px,\n  borderTopRightRadius: styleValueTypes.px,\n  borderBottomRightRadius: styleValueTypes.px,\n  borderBottomLeftRadius: styleValueTypes.px,\n  // Positioning props\n  width: styleValueTypes.px,\n  maxWidth: styleValueTypes.px,\n  height: styleValueTypes.px,\n  maxHeight: styleValueTypes.px,\n  size: styleValueTypes.px,\n  top: styleValueTypes.px,\n  right: styleValueTypes.px,\n  bottom: styleValueTypes.px,\n  left: styleValueTypes.px,\n  // Spacing props\n  padding: styleValueTypes.px,\n  paddingTop: styleValueTypes.px,\n  paddingRight: styleValueTypes.px,\n  paddingBottom: styleValueTypes.px,\n  paddingLeft: styleValueTypes.px,\n  margin: styleValueTypes.px,\n  marginTop: styleValueTypes.px,\n  marginRight: styleValueTypes.px,\n  marginBottom: styleValueTypes.px,\n  marginLeft: styleValueTypes.px,\n  // Transform props\n  rotate: styleValueTypes.degrees,\n  rotateX: styleValueTypes.degrees,\n  rotateY: styleValueTypes.degrees,\n  rotateZ: styleValueTypes.degrees,\n  scale: styleValueTypes.scale,\n  scaleX: styleValueTypes.scale,\n  scaleY: styleValueTypes.scale,\n  scaleZ: styleValueTypes.scale,\n  skew: styleValueTypes.degrees,\n  skewX: styleValueTypes.degrees,\n  skewY: styleValueTypes.degrees,\n  distance: styleValueTypes.px,\n  translateX: styleValueTypes.px,\n  translateY: styleValueTypes.px,\n  translateZ: styleValueTypes.px,\n  x: styleValueTypes.px,\n  y: styleValueTypes.px,\n  z: styleValueTypes.px,\n  perspective: styleValueTypes.px,\n  transformPerspective: styleValueTypes.px,\n  opacity: styleValueTypes.alpha,\n  originX: styleValueTypes.progressPercentage,\n  originY: styleValueTypes.progressPercentage,\n  originZ: styleValueTypes.px,\n  // Misc\n  zIndex: int,\n  // SVG\n  fillOpacity: styleValueTypes.alpha,\n  strokeOpacity: styleValueTypes.alpha,\n  numOctaves: int\n};\nfunction buildHTMLStyles(state, latestValues, options, transformTemplate) {\n  var _a;\n  var style = state.style,\n    vars = state.vars,\n    transform = state.transform,\n    transformKeys = state.transformKeys,\n    transformOrigin = state.transformOrigin;\n  // Empty the transformKeys array. As we're throwing out refs to its items\n  // this might not be as cheap as suspected. Maybe using the array as a buffer\n  // with a manual incrementation would be better.\n  transformKeys.length = 0;\n  // Track whether we encounter any transform or transformOrigin values.\n  var hasTransform = false;\n  var hasTransformOrigin = false;\n  // Does the calculated transform essentially equal \"none\"?\n  var transformIsNone = true;\n  /**\n   * Loop over all our latest animated values and decide whether to handle them\n   * as a style or CSS variable.\n   *\n   * Transforms and transform origins are kept seperately for further processing.\n   */\n  for (var key in latestValues) {\n    var value = latestValues[key];\n    /**\n     * If this is a CSS variable we don't do any further processing.\n     */\n    if (isCSSVariable$1(key)) {\n      vars[key] = value;\n      continue;\n    }\n    // Convert the value to its default value type, ie 0 -> \"0px\"\n    var valueType = numberValueTypes[key];\n    var valueAsType = getValueAsType(value, valueType);\n    if (isTransformProp(key)) {\n      // If this is a transform, flag to enable further transform processing\n      hasTransform = true;\n      transform[key] = valueAsType;\n      transformKeys.push(key);\n      // If we already know we have a non-default transform, early return\n      if (!transformIsNone) continue;\n      // Otherwise check to see if this is a default transform\n      if (value !== ((_a = valueType.default) !== null && _a !== void 0 ? _a : 0)) transformIsNone = false;\n    } else if (isTransformOriginProp(key)) {\n      transformOrigin[key] = valueAsType;\n      // If this is a transform origin, flag and enable further transform-origin processing\n      hasTransformOrigin = true;\n    } else {\n      style[key] = valueAsType;\n    }\n  }\n  if (hasTransform) {\n    style.transform = buildTransform(state, options, transformIsNone, transformTemplate);\n  } else if (transformTemplate) {\n    style.transform = transformTemplate({}, \"\");\n  } else if (!latestValues.transform && style.transform) {\n    style.transform = \"none\";\n  }\n  if (hasTransformOrigin) {\n    style.transformOrigin = buildTransformOrigin(transformOrigin);\n  }\n}\nvar createHtmlRenderState = function createHtmlRenderState() {\n  return {\n    style: {},\n    transform: {},\n    transformKeys: [],\n    transformOrigin: {},\n    vars: {}\n  };\n};\nfunction copyRawValuesOnly(target, source, props) {\n  for (var key in source) {\n    if (!isMotionValue(source[key]) && !isForcedMotionValue(key, props)) {\n      target[key] = source[key];\n    }\n  }\n}\nfunction useInitialMotionValues(_a, visualState, isStatic) {\n  var transformTemplate = _a.transformTemplate;\n  return React.useMemo(function () {\n    var state = createHtmlRenderState();\n    buildHTMLStyles(state, visualState, {\n      enableHardwareAcceleration: !isStatic\n    }, transformTemplate);\n    var vars = state.vars,\n      style = state.style;\n    return tslib.__assign(tslib.__assign({}, vars), style);\n  }, [visualState]);\n}\nfunction useStyle(props, visualState, isStatic) {\n  var styleProp = props.style || {};\n  var style = {};\n  /**\n   * Copy non-Motion Values straight into style\n   */\n  copyRawValuesOnly(style, styleProp, props);\n  Object.assign(style, useInitialMotionValues(props, visualState, isStatic));\n  if (props.transformValues) {\n    style = props.transformValues(style);\n  }\n  return style;\n}\nfunction useHTMLProps(props, visualState, isStatic) {\n  // The `any` isn't ideal but it is the type of createElement props argument\n  var htmlProps = {};\n  var style = useStyle(props, visualState, isStatic);\n  if (Boolean(props.drag) && props.dragListener !== false) {\n    // Disable the ghost element when a user drags\n    htmlProps.draggable = false;\n    // Disable text selection\n    style.userSelect = style.WebkitUserSelect = style.WebkitTouchCallout = \"none\";\n    // Disable scrolling on the draggable direction\n    style.touchAction = props.drag === true ? \"none\" : \"pan-\".concat(props.drag === \"x\" ? \"y\" : \"x\");\n  }\n  htmlProps.style = style;\n  return htmlProps;\n}\n\n/**\n * A list of all valid MotionProps.\n *\n * @privateRemarks\n * This doesn't throw if a `MotionProp` name is missing - it should.\n */\nvar validMotionProps = new Set([\"initial\", \"animate\", \"exit\", \"style\", \"variants\", \"transition\", \"transformTemplate\", \"transformValues\", \"custom\", \"inherit\", \"layout\", \"layoutId\", \"layoutDependency\", \"onLayoutAnimationStart\", \"onLayoutAnimationComplete\", \"onLayoutMeasure\", \"onBeforeLayoutMeasure\", \"onAnimationStart\", \"onAnimationComplete\", \"onUpdate\", \"onDragStart\", \"onDrag\", \"onDragEnd\", \"onMeasureDragConstraints\", \"onDirectionLock\", \"onDragTransitionEnd\", \"drag\", \"dragControls\", \"dragListener\", \"dragConstraints\", \"dragDirectionLock\", \"dragSnapToOrigin\", \"_dragX\", \"_dragY\", \"dragElastic\", \"dragMomentum\", \"dragPropagation\", \"dragTransition\", \"whileDrag\", \"onPan\", \"onPanStart\", \"onPanEnd\", \"onPanSessionStart\", \"onTap\", \"onTapStart\", \"onTapCancel\", \"onHoverStart\", \"onHoverEnd\", \"whileFocus\", \"whileTap\", \"whileHover\", \"whileInView\", \"onViewportEnter\", \"onViewportLeave\", \"viewport\", \"layoutScroll\"]);\n/**\n * Check whether a prop name is a valid `MotionProp` key.\n *\n * @param key - Name of the property to check\n * @returns `true` is key is a valid `MotionProp`.\n *\n * @public\n */\nfunction isValidMotionProp(key) {\n  return validMotionProps.has(key);\n}\nvar shouldForward = function shouldForward(key) {\n  return !isValidMotionProp(key);\n};\nfunction loadExternalIsValidProp(isValidProp) {\n  if (!isValidProp) return;\n  // Explicitly filter our events\n  shouldForward = function shouldForward(key) {\n    return key.startsWith(\"on\") ? !isValidMotionProp(key) : isValidProp(key);\n  };\n}\n/**\n * Emotion and Styled Components both allow users to pass through arbitrary props to their components\n * to dynamically generate CSS. They both use the `@emotion/is-prop-valid` package to determine which\n * of these should be passed to the underlying DOM node.\n *\n * However, when styling a Motion component `styled(motion.div)`, both packages pass through *all* props\n * as it's seen as an arbitrary component rather than a DOM node. Motion only allows arbitrary props\n * passed through the `custom` prop so it doesn't *need* the payload or computational overhead of\n * `@emotion/is-prop-valid`, however to fix this problem we need to use it.\n *\n * By making it an optionalDependency we can offer this functionality only in the situations where it's\n * actually required.\n */\ntry {\n  /**\n   * We attempt to import this package but require won't be defined in esm environments, in that case\n   * isPropValid will have to be provided via `MotionContext`. In a 6.0.0 this should probably be removed\n   * in favour of explicit injection.\n   */\n  loadExternalIsValidProp(require(\"@emotion/is-prop-valid\").default);\n} catch (_a) {\n  // We don't need to actually do anything here - the fallback is the existing `isPropValid`.\n}\nfunction filterProps(props, isDom, forwardMotionProps) {\n  var filteredProps = {};\n  for (var key in props) {\n    if (shouldForward(key) || forwardMotionProps === true && isValidMotionProp(key) || !isDom && !isValidMotionProp(key) ||\n    // If trying to use native HTML drag events, forward drag listeners\n    props[\"draggable\"] && key.startsWith(\"onDrag\")) {\n      filteredProps[key] = props[key];\n    }\n  }\n  return filteredProps;\n}\nfunction calcOrigin$1(origin, offset, size) {\n  return typeof origin === \"string\" ? origin : styleValueTypes.px.transform(offset + size * origin);\n}\n/**\n * The SVG transform origin defaults are different to CSS and is less intuitive,\n * so we use the measured dimensions of the SVG to reconcile these.\n */\nfunction calcSVGTransformOrigin(dimensions, originX, originY) {\n  var pxOriginX = calcOrigin$1(originX, dimensions.x, dimensions.width);\n  var pxOriginY = calcOrigin$1(originY, dimensions.y, dimensions.height);\n  return \"\".concat(pxOriginX, \" \").concat(pxOriginY);\n}\nvar dashKeys = {\n  offset: \"stroke-dashoffset\",\n  array: \"stroke-dasharray\"\n};\nvar camelKeys = {\n  offset: \"strokeDashoffset\",\n  array: \"strokeDasharray\"\n};\n/**\n * Build SVG path properties. Uses the path's measured length to convert\n * our custom pathLength, pathSpacing and pathOffset into stroke-dashoffset\n * and stroke-dasharray attributes.\n *\n * This function is mutative to reduce per-frame GC.\n */\nfunction buildSVGPath(attrs, length, spacing, offset, useDashCase) {\n  if (spacing === void 0) {\n    spacing = 1;\n  }\n  if (offset === void 0) {\n    offset = 0;\n  }\n  if (useDashCase === void 0) {\n    useDashCase = true;\n  }\n  // Normalise path length by setting SVG attribute pathLength to 1\n  attrs.pathLength = 1;\n  // We use dash case when setting attributes directly to the DOM node and camel case\n  // when defining props on a React component.\n  var keys = useDashCase ? dashKeys : camelKeys;\n  // Build the dash offset\n  attrs[keys.offset] = styleValueTypes.px.transform(-offset);\n  // Build the dash array\n  var pathLength = styleValueTypes.px.transform(length);\n  var pathSpacing = styleValueTypes.px.transform(spacing);\n  attrs[keys.array] = \"\".concat(pathLength, \" \").concat(pathSpacing);\n}\n\n/**\n * Build SVG visual attrbutes, like cx and style.transform\n */\nfunction buildSVGAttrs(state, _a, options, transformTemplate) {\n  var attrX = _a.attrX,\n    attrY = _a.attrY,\n    originX = _a.originX,\n    originY = _a.originY,\n    pathLength = _a.pathLength,\n    _b = _a.pathSpacing,\n    pathSpacing = _b === void 0 ? 1 : _b,\n    _c = _a.pathOffset,\n    pathOffset = _c === void 0 ? 0 : _c,\n    // This is object creation, which we try to avoid per-frame.\n    latest = tslib.__rest(_a, [\"attrX\", \"attrY\", \"originX\", \"originY\", \"pathLength\", \"pathSpacing\", \"pathOffset\"]);\n  buildHTMLStyles(state, latest, options, transformTemplate);\n  state.attrs = state.style;\n  state.style = {};\n  var attrs = state.attrs,\n    style = state.style,\n    dimensions = state.dimensions;\n  /**\n   * However, we apply transforms as CSS transforms. So if we detect a transform we take it from attrs\n   * and copy it into style.\n   */\n  if (attrs.transform) {\n    if (dimensions) style.transform = attrs.transform;\n    delete attrs.transform;\n  }\n  // Parse transformOrigin\n  if (dimensions && (originX !== undefined || originY !== undefined || style.transform)) {\n    style.transformOrigin = calcSVGTransformOrigin(dimensions, originX !== undefined ? originX : 0.5, originY !== undefined ? originY : 0.5);\n  }\n  // Treat x/y not as shortcuts but as actual attributes\n  if (attrX !== undefined) attrs.x = attrX;\n  if (attrY !== undefined) attrs.y = attrY;\n  // Build SVG path if one has been defined\n  if (pathLength !== undefined) {\n    buildSVGPath(attrs, pathLength, pathSpacing, pathOffset, false);\n  }\n}\nvar createSvgRenderState = function createSvgRenderState() {\n  return tslib.__assign(tslib.__assign({}, createHtmlRenderState()), {\n    attrs: {}\n  });\n};\nfunction useSVGProps(props, visualState) {\n  var visualProps = React.useMemo(function () {\n    var state = createSvgRenderState();\n    buildSVGAttrs(state, visualState, {\n      enableHardwareAcceleration: false\n    }, props.transformTemplate);\n    return tslib.__assign(tslib.__assign({}, state.attrs), {\n      style: tslib.__assign({}, state.style)\n    });\n  }, [visualState]);\n  if (props.style) {\n    var rawStyles = {};\n    copyRawValuesOnly(rawStyles, props.style, props);\n    visualProps.style = tslib.__assign(tslib.__assign({}, rawStyles), visualProps.style);\n  }\n  return visualProps;\n}\nfunction createUseRender(forwardMotionProps) {\n  if (forwardMotionProps === void 0) {\n    forwardMotionProps = false;\n  }\n  var useRender = function useRender(Component, props, projectionId, ref, _a, isStatic) {\n    var latestValues = _a.latestValues;\n    var useVisualProps = isSVGComponent(Component) ? useSVGProps : useHTMLProps;\n    var visualProps = useVisualProps(props, latestValues, isStatic);\n    var filteredProps = filterProps(props, typeof Component === \"string\", forwardMotionProps);\n    var elementProps = tslib.__assign(tslib.__assign(tslib.__assign({}, filteredProps), visualProps), {\n      ref: ref\n    });\n    if (projectionId) {\n      elementProps[\"data-projection-id\"] = projectionId;\n    }\n    return React.createElement(Component, elementProps);\n  };\n  return useRender;\n}\nvar CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = \"$1-$2\";\n/**\n * Convert camelCase to dash-case properties.\n */\nvar camelToDash = function camelToDash(str) {\n  return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\nfunction renderHTML(element, _a, styleProp, projection) {\n  var style = _a.style,\n    vars = _a.vars;\n  Object.assign(element.style, style, projection && projection.getProjectionStyles(styleProp));\n  // Loop over any CSS variables and assign those.\n  for (var key in vars) {\n    element.style.setProperty(key, vars[key]);\n  }\n}\n\n/**\n * A set of attribute names that are always read/written as camel case.\n */\nvar camelCaseAttributes = new Set([\"baseFrequency\", \"diffuseConstant\", \"kernelMatrix\", \"kernelUnitLength\", \"keySplines\", \"keyTimes\", \"limitingConeAngle\", \"markerHeight\", \"markerWidth\", \"numOctaves\", \"targetX\", \"targetY\", \"surfaceScale\", \"specularConstant\", \"specularExponent\", \"stdDeviation\", \"tableValues\", \"viewBox\", \"gradientTransform\", \"pathLength\"]);\nfunction renderSVG(element, renderState, _styleProp, projection) {\n  renderHTML(element, renderState, undefined, projection);\n  for (var key in renderState.attrs) {\n    element.setAttribute(!camelCaseAttributes.has(key) ? camelToDash(key) : key, renderState.attrs[key]);\n  }\n}\nfunction scrapeMotionValuesFromProps$1(props) {\n  var style = props.style;\n  var newValues = {};\n  for (var key in style) {\n    if (isMotionValue(style[key]) || isForcedMotionValue(key, props)) {\n      newValues[key] = style[key];\n    }\n  }\n  return newValues;\n}\nfunction scrapeMotionValuesFromProps(props) {\n  var newValues = scrapeMotionValuesFromProps$1(props);\n  for (var key in props) {\n    if (isMotionValue(props[key])) {\n      var targetKey = key === \"x\" || key === \"y\" ? \"attr\" + key.toUpperCase() : key;\n      newValues[targetKey] = props[key];\n    }\n  }\n  return newValues;\n}\nfunction isAnimationControls(v) {\n  return typeof v === \"object\" && typeof v.start === \"function\";\n}\nvar isKeyframesTarget = function isKeyframesTarget(v) {\n  return Array.isArray(v);\n};\nvar isCustomValue = function isCustomValue(v) {\n  return Boolean(v && typeof v === \"object\" && v.mix && v.toValue);\n};\nvar resolveFinalValueInKeyframes = function resolveFinalValueInKeyframes(v) {\n  // TODO maybe throw if v.length - 1 is placeholder token?\n  return isKeyframesTarget(v) ? v[v.length - 1] || 0 : v;\n};\n\n/**\n * If the provided value is a MotionValue, this returns the actual value, otherwise just the value itself\n *\n * TODO: Remove and move to library\n */\nfunction resolveMotionValue(value) {\n  var unwrappedValue = isMotionValue(value) ? value.get() : value;\n  return isCustomValue(unwrappedValue) ? unwrappedValue.toValue() : unwrappedValue;\n}\nfunction makeState(_a, props, context, presenceContext) {\n  var scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps,\n    createRenderState = _a.createRenderState,\n    onMount = _a.onMount;\n  var state = {\n    latestValues: makeLatestValues(props, context, presenceContext, scrapeMotionValuesFromProps),\n    renderState: createRenderState()\n  };\n  if (onMount) {\n    state.mount = function (instance) {\n      return onMount(props, instance, state);\n    };\n  }\n  return state;\n}\nvar makeUseVisualState = function makeUseVisualState(config) {\n  return function (props, isStatic) {\n    var context = React.useContext(MotionContext);\n    var presenceContext = React.useContext(PresenceContext);\n    return isStatic ? makeState(config, props, context, presenceContext) : useConstant(function () {\n      return makeState(config, props, context, presenceContext);\n    });\n  };\n};\nfunction makeLatestValues(props, context, presenceContext, scrapeMotionValues) {\n  var values = {};\n  var blockInitialAnimation = (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false;\n  var motionValues = scrapeMotionValues(props);\n  for (var key in motionValues) {\n    values[key] = resolveMotionValue(motionValues[key]);\n  }\n  var initial = props.initial,\n    animate = props.animate;\n  var isControllingVariants = checkIfControllingVariants(props);\n  var isVariantNode = checkIfVariantNode(props);\n  if (context && isVariantNode && !isControllingVariants && props.inherit !== false) {\n    initial !== null && initial !== void 0 ? initial : initial = context.initial;\n    animate !== null && animate !== void 0 ? animate : animate = context.animate;\n  }\n  var initialAnimationIsBlocked = blockInitialAnimation || initial === false;\n  var variantToSet = initialAnimationIsBlocked ? animate : initial;\n  if (variantToSet && typeof variantToSet !== \"boolean\" && !isAnimationControls(variantToSet)) {\n    var list = Array.isArray(variantToSet) ? variantToSet : [variantToSet];\n    list.forEach(function (definition) {\n      var resolved = resolveVariantFromProps(props, definition);\n      if (!resolved) return;\n      var transitionEnd = resolved.transitionEnd;\n      resolved.transition;\n      var target = tslib.__rest(resolved, [\"transitionEnd\", \"transition\"]);\n      for (var key in target) {\n        var valueTarget = target[key];\n        if (Array.isArray(valueTarget)) {\n          /**\n           * Take final keyframe if the initial animation is blocked because\n           * we want to initialise at the end of that blocked animation.\n           */\n          var index = initialAnimationIsBlocked ? valueTarget.length - 1 : 0;\n          valueTarget = valueTarget[index];\n        }\n        if (valueTarget !== null) {\n          values[key] = valueTarget;\n        }\n      }\n      for (var key in transitionEnd) values[key] = transitionEnd[key];\n    });\n  }\n  return values;\n}\nvar svgMotionConfig = {\n  useVisualState: makeUseVisualState({\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n    createRenderState: createSvgRenderState,\n    onMount: function onMount(props, instance, _a) {\n      var renderState = _a.renderState,\n        latestValues = _a.latestValues;\n      try {\n        renderState.dimensions = typeof instance.getBBox === \"function\" ? instance.getBBox() : instance.getBoundingClientRect();\n      } catch (e) {\n        // Most likely trying to measure an unrendered element under Firefox\n        renderState.dimensions = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      buildSVGAttrs(renderState, latestValues, {\n        enableHardwareAcceleration: false\n      }, props.transformTemplate);\n      renderSVG(instance, renderState);\n    }\n  })\n};\nvar htmlMotionConfig = {\n  useVisualState: makeUseVisualState({\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps$1,\n    createRenderState: createHtmlRenderState\n  })\n};\nfunction createDomMotionConfig(Component, _a, preloadedFeatures, createVisualElement, projectionNodeConstructor) {\n  var _b = _a.forwardMotionProps,\n    forwardMotionProps = _b === void 0 ? false : _b;\n  var baseConfig = isSVGComponent(Component) ? svgMotionConfig : htmlMotionConfig;\n  return tslib.__assign(tslib.__assign({}, baseConfig), {\n    preloadedFeatures: preloadedFeatures,\n    useRender: createUseRender(forwardMotionProps),\n    createVisualElement: createVisualElement,\n    projectionNodeConstructor: projectionNodeConstructor,\n    Component: Component\n  });\n}\nexports.AnimationType = void 0;\n(function (AnimationType) {\n  AnimationType[\"Animate\"] = \"animate\";\n  AnimationType[\"Hover\"] = \"whileHover\";\n  AnimationType[\"Tap\"] = \"whileTap\";\n  AnimationType[\"Drag\"] = \"whileDrag\";\n  AnimationType[\"Focus\"] = \"whileFocus\";\n  AnimationType[\"InView\"] = \"whileInView\";\n  AnimationType[\"Exit\"] = \"exit\";\n})(exports.AnimationType || (exports.AnimationType = {}));\nfunction addDomEvent(target, eventName, handler, options) {\n  if (options === void 0) {\n    options = {\n      passive: true\n    };\n  }\n  target.addEventListener(eventName, handler, options);\n  return function () {\n    return target.removeEventListener(eventName, handler);\n  };\n}\n/**\n * Attaches an event listener directly to the provided DOM element.\n *\n * Bypassing React's event system can be desirable, for instance when attaching non-passive\n * event handlers.\n *\n * ```jsx\n * const ref = useRef(null)\n *\n * useDomEvent(ref, 'wheel', onWheel, { passive: false })\n *\n * return <div ref={ref} />\n * ```\n *\n * @param ref - React.RefObject that's been provided to the element you want to bind the listener to.\n * @param eventName - Name of the event you want listen for.\n * @param handler - Function to fire when receiving the event.\n * @param options - Options to pass to `Event.addEventListener`.\n *\n * @public\n */\nfunction useDomEvent(ref, eventName, handler, options) {\n  React.useEffect(function () {\n    var element = ref.current;\n    if (handler && element) {\n      return addDomEvent(element, eventName, handler, options);\n    }\n  }, [ref, eventName, handler, options]);\n}\n\n/**\n *\n * @param props\n * @param ref\n * @internal\n */\nfunction useFocusGesture(_a) {\n  var whileFocus = _a.whileFocus,\n    visualElement = _a.visualElement;\n  var onFocus = function onFocus() {\n    var _a;\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(exports.AnimationType.Focus, true);\n  };\n  var onBlur = function onBlur() {\n    var _a;\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(exports.AnimationType.Focus, false);\n  };\n  useDomEvent(visualElement, \"focus\", whileFocus ? onFocus : undefined);\n  useDomEvent(visualElement, \"blur\", whileFocus ? onBlur : undefined);\n}\nfunction isMouseEvent(event) {\n  // PointerEvent inherits from MouseEvent so we can't use a straight instanceof check.\n  if (typeof PointerEvent !== \"undefined\" && event instanceof PointerEvent) {\n    return !!(event.pointerType === \"mouse\");\n  }\n  return event instanceof MouseEvent;\n}\nfunction isTouchEvent(event) {\n  var hasTouches = !!event.touches;\n  return hasTouches;\n}\n\n/**\n * Filters out events not attached to the primary pointer (currently left mouse button)\n * @param eventHandler\n */\nfunction filterPrimaryPointer(eventHandler) {\n  return function (event) {\n    var isMouseEvent = event instanceof MouseEvent;\n    var isPrimaryPointer = !isMouseEvent || isMouseEvent && event.button === 0;\n    if (isPrimaryPointer) {\n      eventHandler(event);\n    }\n  };\n}\nvar defaultPagePoint = {\n  pageX: 0,\n  pageY: 0\n};\nfunction pointFromTouch(e, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n  var primaryTouch = e.touches[0] || e.changedTouches[0];\n  var point = primaryTouch || defaultPagePoint;\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\nfunction pointFromMouse(point, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\nfunction extractEventInfo(event, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n  return {\n    point: isTouchEvent(event) ? pointFromTouch(event, pointType) : pointFromMouse(event, pointType)\n  };\n}\nvar wrapHandler = function wrapHandler(handler, shouldFilterPrimaryPointer) {\n  if (shouldFilterPrimaryPointer === void 0) {\n    shouldFilterPrimaryPointer = false;\n  }\n  var listener = function listener(event) {\n    return handler(event, extractEventInfo(event));\n  };\n  return shouldFilterPrimaryPointer ? filterPrimaryPointer(listener) : listener;\n};\n\n// We check for event support via functions in case they've been mocked by a testing suite.\nvar supportsPointerEvents = function supportsPointerEvents() {\n  return isBrowser && window.onpointerdown === null;\n};\nvar supportsTouchEvents = function supportsTouchEvents() {\n  return isBrowser && window.ontouchstart === null;\n};\nvar supportsMouseEvents = function supportsMouseEvents() {\n  return isBrowser && window.onmousedown === null;\n};\nvar mouseEventNames = {\n  pointerdown: \"mousedown\",\n  pointermove: \"mousemove\",\n  pointerup: \"mouseup\",\n  pointercancel: \"mousecancel\",\n  pointerover: \"mouseover\",\n  pointerout: \"mouseout\",\n  pointerenter: \"mouseenter\",\n  pointerleave: \"mouseleave\"\n};\nvar touchEventNames = {\n  pointerdown: \"touchstart\",\n  pointermove: \"touchmove\",\n  pointerup: \"touchend\",\n  pointercancel: \"touchcancel\"\n};\nfunction getPointerEventName(name) {\n  if (supportsPointerEvents()) {\n    return name;\n  } else if (supportsTouchEvents()) {\n    return touchEventNames[name];\n  } else if (supportsMouseEvents()) {\n    return mouseEventNames[name];\n  }\n  return name;\n}\nfunction addPointerEvent(target, eventName, handler, options) {\n  return addDomEvent(target, getPointerEventName(eventName), wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\nfunction usePointerEvent(ref, eventName, handler, options) {\n  return useDomEvent(ref, getPointerEventName(eventName), handler && wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\nfunction createLock(name) {\n  var lock = null;\n  return function () {\n    var openLock = function openLock() {\n      lock = null;\n    };\n    if (lock === null) {\n      lock = name;\n      return openLock;\n    }\n    return false;\n  };\n}\nvar globalHorizontalLock = createLock(\"dragHorizontal\");\nvar globalVerticalLock = createLock(\"dragVertical\");\nfunction getGlobalLock(drag) {\n  var lock = false;\n  if (drag === \"y\") {\n    lock = globalVerticalLock();\n  } else if (drag === \"x\") {\n    lock = globalHorizontalLock();\n  } else {\n    var openHorizontal_1 = globalHorizontalLock();\n    var openVertical_1 = globalVerticalLock();\n    if (openHorizontal_1 && openVertical_1) {\n      lock = function lock() {\n        openHorizontal_1();\n        openVertical_1();\n      };\n    } else {\n      // Release the locks because we don't use them\n      if (openHorizontal_1) openHorizontal_1();\n      if (openVertical_1) openVertical_1();\n    }\n  }\n  return lock;\n}\nfunction isDragActive() {\n  // Check the gesture lock - if we get it, it means no drag gesture is active\n  // and we can safely fire the tap gesture.\n  var openGestureLock = getGlobalLock(true);\n  if (!openGestureLock) return true;\n  openGestureLock();\n  return false;\n}\nfunction createHoverEvent(visualElement, isActive, callback) {\n  return function (event, info) {\n    var _a;\n    if (!isMouseEvent(event) || isDragActive()) return;\n    /**\n     * Ensure we trigger animations before firing event callback\n     */\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(exports.AnimationType.Hover, isActive);\n    callback === null || callback === void 0 ? void 0 : callback(event, info);\n  };\n}\nfunction useHoverGesture(_a) {\n  var onHoverStart = _a.onHoverStart,\n    onHoverEnd = _a.onHoverEnd,\n    whileHover = _a.whileHover,\n    visualElement = _a.visualElement;\n  usePointerEvent(visualElement, \"pointerenter\", onHoverStart || whileHover ? createHoverEvent(visualElement, true, onHoverStart) : undefined, {\n    passive: !onHoverStart\n  });\n  usePointerEvent(visualElement, \"pointerleave\", onHoverEnd || whileHover ? createHoverEvent(visualElement, false, onHoverEnd) : undefined, {\n    passive: !onHoverEnd\n  });\n}\n\n/**\n * Recursively traverse up the tree to check whether the provided child node\n * is the parent or a descendant of it.\n *\n * @param parent - Element to find\n * @param child - Element to test against parent\n */\nvar isNodeOrChild = function isNodeOrChild(parent, child) {\n  if (!child) {\n    return false;\n  } else if (parent === child) {\n    return true;\n  } else {\n    return isNodeOrChild(parent, child.parentElement);\n  }\n};\nfunction useUnmountEffect(callback) {\n  return React.useEffect(function () {\n    return function () {\n      return callback();\n    };\n  }, []);\n}\n\n/**\n * @param handlers -\n * @internal\n */\nfunction useTapGesture(_a) {\n  var onTap = _a.onTap,\n    onTapStart = _a.onTapStart,\n    onTapCancel = _a.onTapCancel,\n    whileTap = _a.whileTap,\n    visualElement = _a.visualElement;\n  var hasPressListeners = onTap || onTapStart || onTapCancel || whileTap;\n  var isPressing = React.useRef(false);\n  var cancelPointerEndListeners = React.useRef(null);\n  /**\n   * Only set listener to passive if there are no external listeners.\n   */\n  var eventOptions = {\n    passive: !(onTapStart || onTap || onTapCancel || onPointerDown)\n  };\n  function removePointerEndListener() {\n    var _a;\n    (_a = cancelPointerEndListeners.current) === null || _a === void 0 ? void 0 : _a.call(cancelPointerEndListeners);\n    cancelPointerEndListeners.current = null;\n  }\n  function checkPointerEnd() {\n    var _a;\n    removePointerEndListener();\n    isPressing.current = false;\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(exports.AnimationType.Tap, false);\n    return !isDragActive();\n  }\n  function onPointerUp(event, info) {\n    if (!checkPointerEnd()) return;\n    /**\n     * We only count this as a tap gesture if the event.target is the same\n     * as, or a child of, this component's element\n     */\n    !isNodeOrChild(visualElement.getInstance(), event.target) ? onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info) : onTap === null || onTap === void 0 ? void 0 : onTap(event, info);\n  }\n  function onPointerCancel(event, info) {\n    if (!checkPointerEnd()) return;\n    onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info);\n  }\n  function onPointerDown(event, info) {\n    var _a;\n    removePointerEndListener();\n    if (isPressing.current) return;\n    isPressing.current = true;\n    cancelPointerEndListeners.current = popmotion.pipe(addPointerEvent(window, \"pointerup\", onPointerUp, eventOptions), addPointerEvent(window, \"pointercancel\", onPointerCancel, eventOptions));\n    /**\n     * Ensure we trigger animations before firing event callback\n     */\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(exports.AnimationType.Tap, true);\n    onTapStart === null || onTapStart === void 0 ? void 0 : onTapStart(event, info);\n  }\n  usePointerEvent(visualElement, \"pointerdown\", hasPressListeners ? onPointerDown : undefined, eventOptions);\n  useUnmountEffect(removePointerEndListener);\n}\nvar warned = new Set();\nfunction warnOnce(condition, message, element) {\n  if (condition || warned.has(message)) return;\n  console.warn(message);\n  if (element) console.warn(element);\n  warned.add(message);\n}\n\n/**\n * Map an IntersectionHandler callback to an element. We only ever make one handler for one\n * element, so even though these handlers might all be triggered by different\n * observers, we can keep them in the same map.\n */\nvar observerCallbacks = new WeakMap();\n/**\n * Multiple observers can be created for multiple element/document roots. Each with\n * different settings. So here we store dictionaries of observers to each root,\n * using serialised settings (threshold/margin) as lookup keys.\n */\nvar observers = new WeakMap();\nvar fireObserverCallback = function fireObserverCallback(entry) {\n  var _a;\n  (_a = observerCallbacks.get(entry.target)) === null || _a === void 0 ? void 0 : _a(entry);\n};\nvar fireAllObserverCallbacks = function fireAllObserverCallbacks(entries) {\n  entries.forEach(fireObserverCallback);\n};\nfunction initIntersectionObserver(_a) {\n  var root = _a.root,\n    options = tslib.__rest(_a, [\"root\"]);\n  var lookupRoot = root || document;\n  /**\n   * If we don't have an observer lookup map for this root, create one.\n   */\n  if (!observers.has(lookupRoot)) {\n    observers.set(lookupRoot, {});\n  }\n  var rootObservers = observers.get(lookupRoot);\n  var key = JSON.stringify(options);\n  /**\n   * If we don't have an observer for this combination of root and settings,\n   * create one.\n   */\n  if (!rootObservers[key]) {\n    rootObservers[key] = new IntersectionObserver(fireAllObserverCallbacks, tslib.__assign({\n      root: root\n    }, options));\n  }\n  return rootObservers[key];\n}\nfunction observeIntersection(element, options, callback) {\n  var rootInteresectionObserver = initIntersectionObserver(options);\n  observerCallbacks.set(element, callback);\n  rootInteresectionObserver.observe(element);\n  return function () {\n    observerCallbacks.delete(element);\n    rootInteresectionObserver.unobserve(element);\n  };\n}\nfunction useViewport(_a) {\n  var visualElement = _a.visualElement,\n    whileInView = _a.whileInView,\n    onViewportEnter = _a.onViewportEnter,\n    onViewportLeave = _a.onViewportLeave,\n    _b = _a.viewport,\n    viewport = _b === void 0 ? {} : _b;\n  var state = React.useRef({\n    hasEnteredView: false,\n    isInView: false\n  });\n  var shouldObserve = Boolean(whileInView || onViewportEnter || onViewportLeave);\n  if (viewport.once && state.current.hasEnteredView) shouldObserve = false;\n  var useObserver = typeof IntersectionObserver === \"undefined\" ? useMissingIntersectionObserver : useIntersectionObserver;\n  useObserver(shouldObserve, state.current, visualElement, viewport);\n}\nvar thresholdNames = {\n  some: 0,\n  all: 1\n};\nfunction useIntersectionObserver(shouldObserve, state, visualElement, _a) {\n  var root = _a.root,\n    rootMargin = _a.margin,\n    _b = _a.amount,\n    amount = _b === void 0 ? \"some\" : _b,\n    once = _a.once;\n  React.useEffect(function () {\n    if (!shouldObserve) return;\n    var options = {\n      root: root === null || root === void 0 ? void 0 : root.current,\n      rootMargin: rootMargin,\n      threshold: typeof amount === \"number\" ? amount : thresholdNames[amount]\n    };\n    var intersectionCallback = function intersectionCallback(entry) {\n      var _a;\n      var isIntersecting = entry.isIntersecting;\n      /**\n       * If there's been no change in the viewport state, early return.\n       */\n      if (state.isInView === isIntersecting) return;\n      state.isInView = isIntersecting;\n      /**\n       * Handle hasEnteredView. If this is only meant to run once, and\n       * element isn't visible, early return. Otherwise set hasEnteredView to true.\n       */\n      if (once && !isIntersecting && state.hasEnteredView) {\n        return;\n      } else if (isIntersecting) {\n        state.hasEnteredView = true;\n      }\n      (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(exports.AnimationType.InView, isIntersecting);\n      /**\n       * Use the latest committed props rather than the ones in scope\n       * when this observer is created\n       */\n      var props = visualElement.getProps();\n      var callback = isIntersecting ? props.onViewportEnter : props.onViewportLeave;\n      callback === null || callback === void 0 ? void 0 : callback(entry);\n    };\n    return observeIntersection(visualElement.getInstance(), options, intersectionCallback);\n  }, [shouldObserve, root, rootMargin, amount]);\n}\n/**\n * If IntersectionObserver is missing, we activate inView and fire onViewportEnter\n * on mount. This way, the page will be in the state the author expects users\n * to see it in for everyone.\n */\nfunction useMissingIntersectionObserver(shouldObserve, state, visualElement, _a) {\n  var _b = _a.fallback,\n    fallback = _b === void 0 ? true : _b;\n  React.useEffect(function () {\n    if (!shouldObserve || !fallback) return;\n    if (env !== \"production\") {\n      warnOnce(false, \"IntersectionObserver not available on this device. whileInView animations will trigger on mount.\");\n    }\n    /**\n     * Fire this in an rAF because, at this point, the animation state\n     * won't have flushed for the first time and there's certain logic in\n     * there that behaves differently on the initial animation.\n     *\n     * This hook should be quite rarely called so setting this in an rAF\n     * is preferred to changing the behaviour of the animation state.\n     */\n    requestAnimationFrame(function () {\n      var _a;\n      state.hasEnteredView = true;\n      var onViewportEnter = visualElement.getProps().onViewportEnter;\n      onViewportEnter === null || onViewportEnter === void 0 ? void 0 : onViewportEnter(null);\n      (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(exports.AnimationType.InView, true);\n    });\n  }, [shouldObserve]);\n}\nvar makeRenderlessComponent = function makeRenderlessComponent(hook) {\n  return function (props) {\n    hook(props);\n    return null;\n  };\n};\nvar gestureAnimations = {\n  inView: makeRenderlessComponent(useViewport),\n  tap: makeRenderlessComponent(useTapGesture),\n  focus: makeRenderlessComponent(useFocusGesture),\n  hover: makeRenderlessComponent(useHoverGesture)\n};\nvar counter = 0;\nvar incrementId = function incrementId() {\n  return counter++;\n};\nvar useId = function useId() {\n  return useConstant(incrementId);\n};\n/**\n * Ideally we'd use the following code to support React 18 optionally.\n * But this fairly fails in Webpack (otherwise treeshaking wouldn't work at all).\n * Need to come up with a different way of figuring this out.\n */\n// export const useId = (React as any).useId\n//     ? (React as any).useId\n//     : () => useConstant(incrementId)\n\n/**\n * When a component is the child of `AnimatePresence`, it can use `usePresence`\n * to access information about whether it's still present in the React tree.\n *\n * ```jsx\n * import { usePresence } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const [isPresent, safeToRemove] = usePresence()\n *\n *   useEffect(() => {\n *     !isPresent && setTimeout(safeToRemove, 1000)\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * If `isPresent` is `false`, it means that a component has been removed the tree, but\n * `AnimatePresence` won't really remove it until `safeToRemove` has been called.\n *\n * @public\n */\nfunction usePresence() {\n  var context = React.useContext(PresenceContext);\n  if (context === null) return [true, null];\n  var isPresent = context.isPresent,\n    onExitComplete = context.onExitComplete,\n    register = context.register;\n  // It's safe to call the following hooks conditionally (after an early return) because the context will always\n  // either be null or non-null for the lifespan of the component.\n  // Replace with useId when released in React\n  var id = useId();\n  React.useEffect(function () {\n    return register(id);\n  }, []);\n  var safeToRemove = function safeToRemove() {\n    return onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete(id);\n  };\n  return !isPresent && onExitComplete ? [false, safeToRemove] : [true];\n}\n/**\n * Similar to `usePresence`, except `useIsPresent` simply returns whether or not the component is present.\n * There is no `safeToRemove` function.\n *\n * ```jsx\n * import { useIsPresent } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const isPresent = useIsPresent()\n *\n *   useEffect(() => {\n *     !isPresent && console.log(\"I've been removed!\")\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * @public\n */\nfunction useIsPresent() {\n  return isPresent(React.useContext(PresenceContext));\n}\nfunction isPresent(context) {\n  return context === null ? true : context.isPresent;\n}\nfunction shallowCompare(next, prev) {\n  if (!Array.isArray(prev)) return false;\n  var prevLength = prev.length;\n  if (prevLength !== next.length) return false;\n  for (var i = 0; i < prevLength; i++) {\n    if (prev[i] !== next[i]) return false;\n  }\n  return true;\n}\n\n/**\n * Converts seconds to milliseconds\n *\n * @param seconds - Time in seconds.\n * @return milliseconds - Converted time in milliseconds.\n */\nvar secondsToMilliseconds = function secondsToMilliseconds(seconds) {\n  return seconds * 1000;\n};\nvar easingLookup = {\n  linear: popmotion.linear,\n  easeIn: popmotion.easeIn,\n  easeInOut: popmotion.easeInOut,\n  easeOut: popmotion.easeOut,\n  circIn: popmotion.circIn,\n  circInOut: popmotion.circInOut,\n  circOut: popmotion.circOut,\n  backIn: popmotion.backIn,\n  backInOut: popmotion.backInOut,\n  backOut: popmotion.backOut,\n  anticipate: popmotion.anticipate,\n  bounceIn: popmotion.bounceIn,\n  bounceInOut: popmotion.bounceInOut,\n  bounceOut: popmotion.bounceOut\n};\nvar easingDefinitionToFunction = function easingDefinitionToFunction(definition) {\n  if (Array.isArray(definition)) {\n    // If cubic bezier definition, create bezier curve\n    heyListen.invariant(definition.length === 4, \"Cubic bezier arrays must contain four numerical values.\");\n    var _a = tslib.__read(definition, 4),\n      x1 = _a[0],\n      y1 = _a[1],\n      x2 = _a[2],\n      y2 = _a[3];\n    return popmotion.cubicBezier(x1, y1, x2, y2);\n  } else if (typeof definition === \"string\") {\n    // Else lookup from table\n    heyListen.invariant(easingLookup[definition] !== undefined, \"Invalid easing type '\".concat(definition, \"'\"));\n    return easingLookup[definition];\n  }\n  return definition;\n};\nvar isEasingArray = function isEasingArray(ease) {\n  return Array.isArray(ease) && typeof ease[0] !== \"number\";\n};\n\n/**\n * Check if a value is animatable. Examples:\n *\n * : 100, \"100px\", \"#fff\"\n * : \"block\", \"url(2.jpg)\"\n * @param value\n *\n * @internal\n */\nvar isAnimatable = function isAnimatable(key, value) {\n  // If the list of keys tat might be non-animatable grows, replace with Set\n  if (key === \"zIndex\") return false;\n  // If it's a number or a keyframes array, we can animate it. We might at some point\n  // need to do a deep isAnimatable check of keyframes, or let Popmotion handle this,\n  // but for now lets leave it like this for performance reasons\n  if (typeof value === \"number\" || Array.isArray(value)) return true;\n  if (typeof value === \"string\" &&\n  // It's animatable if we have a string\n  styleValueTypes.complex.test(value) &&\n  // And it contains numbers and/or colors\n  !value.startsWith(\"url(\") // Unless it starts with \"url(\"\n  ) {\n    return true;\n  }\n  return false;\n};\nvar underDampedSpring = function underDampedSpring() {\n  return {\n    type: \"spring\",\n    stiffness: 500,\n    damping: 25,\n    restSpeed: 10\n  };\n};\nvar criticallyDampedSpring = function criticallyDampedSpring(to) {\n  return {\n    type: \"spring\",\n    stiffness: 550,\n    damping: to === 0 ? 2 * Math.sqrt(550) : 30,\n    restSpeed: 10\n  };\n};\nvar linearTween = function linearTween() {\n  return {\n    type: \"keyframes\",\n    ease: \"linear\",\n    duration: 0.3\n  };\n};\nvar keyframes = function keyframes(values) {\n  return {\n    type: \"keyframes\",\n    duration: 0.8,\n    values: values\n  };\n};\nvar defaultTransitions = {\n  x: underDampedSpring,\n  y: underDampedSpring,\n  z: underDampedSpring,\n  rotate: underDampedSpring,\n  rotateX: underDampedSpring,\n  rotateY: underDampedSpring,\n  rotateZ: underDampedSpring,\n  scaleX: criticallyDampedSpring,\n  scaleY: criticallyDampedSpring,\n  scale: criticallyDampedSpring,\n  opacity: linearTween,\n  backgroundColor: linearTween,\n  color: linearTween,\n  default: criticallyDampedSpring\n};\nvar getDefaultTransition = function getDefaultTransition(valueKey, to) {\n  var transitionFactory;\n  if (isKeyframesTarget(to)) {\n    transitionFactory = keyframes;\n  } else {\n    transitionFactory = defaultTransitions[valueKey] || defaultTransitions.default;\n  }\n  return tslib.__assign({\n    to: to\n  }, transitionFactory(to));\n};\n\n/**\n * A map of default value types for common values\n */\nvar defaultValueTypes = tslib.__assign(tslib.__assign({}, numberValueTypes), {\n  // Color props\n  color: styleValueTypes.color,\n  backgroundColor: styleValueTypes.color,\n  outlineColor: styleValueTypes.color,\n  fill: styleValueTypes.color,\n  stroke: styleValueTypes.color,\n  // Border props\n  borderColor: styleValueTypes.color,\n  borderTopColor: styleValueTypes.color,\n  borderRightColor: styleValueTypes.color,\n  borderBottomColor: styleValueTypes.color,\n  borderLeftColor: styleValueTypes.color,\n  filter: styleValueTypes.filter,\n  WebkitFilter: styleValueTypes.filter\n});\n/**\n * Gets the default ValueType for the provided value key\n */\nvar getDefaultValueType = function getDefaultValueType(key) {\n  return defaultValueTypes[key];\n};\nfunction getAnimatableNone(key, value) {\n  var _a;\n  var defaultValueType = getDefaultValueType(key);\n  if (defaultValueType !== styleValueTypes.filter) defaultValueType = styleValueTypes.complex;\n  // If value is not recognised as animatable, ie \"none\", create an animatable version origin based on the target\n  return (_a = defaultValueType.getAnimatableNone) === null || _a === void 0 ? void 0 : _a.call(defaultValueType, value);\n}\nvar instantAnimationState = {\n  current: false\n};\n\n/**\n * Decide whether a transition is defined on a given Transition.\n * This filters out orchestration options and returns true\n * if any options are left.\n */\nfunction isTransitionDefined(_a) {\n  _a.when;\n  _a.delay;\n  _a.delayChildren;\n  _a.staggerChildren;\n  _a.staggerDirection;\n  _a.repeat;\n  _a.repeatType;\n  _a.repeatDelay;\n  _a.from;\n  var transition = tslib.__rest(_a, [\"when\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"repeat\", \"repeatType\", \"repeatDelay\", \"from\"]);\n  return !!Object.keys(transition).length;\n}\nvar legacyRepeatWarning = false;\n/**\n * Convert Framer Motion's Transition type into Popmotion-compatible options.\n */\nfunction convertTransitionToAnimationOptions(_a) {\n  var ease = _a.ease,\n    times = _a.times,\n    yoyo = _a.yoyo,\n    flip = _a.flip,\n    loop = _a.loop,\n    transition = tslib.__rest(_a, [\"ease\", \"times\", \"yoyo\", \"flip\", \"loop\"]);\n  var options = tslib.__assign({}, transition);\n  if (times) options[\"offset\"] = times;\n  /**\n   * Convert any existing durations from seconds to milliseconds\n   */\n  if (transition.duration) options[\"duration\"] = secondsToMilliseconds(transition.duration);\n  if (transition.repeatDelay) options.repeatDelay = secondsToMilliseconds(transition.repeatDelay);\n  /**\n   * Map easing names to Popmotion's easing functions\n   */\n  if (ease) {\n    options[\"ease\"] = isEasingArray(ease) ? ease.map(easingDefinitionToFunction) : easingDefinitionToFunction(ease);\n  }\n  /**\n   * Support legacy transition API\n   */\n  if (transition.type === \"tween\") options.type = \"keyframes\";\n  /**\n   * TODO: These options are officially removed from the API.\n   */\n  if (yoyo || loop || flip) {\n    heyListen.warning(!legacyRepeatWarning, \"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options.\");\n    legacyRepeatWarning = true;\n    if (yoyo) {\n      options.repeatType = \"reverse\";\n    } else if (loop) {\n      options.repeatType = \"loop\";\n    } else if (flip) {\n      options.repeatType = \"mirror\";\n    }\n    options.repeat = loop || yoyo || flip || transition.repeat;\n  }\n  /**\n   * TODO: Popmotion 9 has the ability to automatically detect whether to use\n   * a keyframes or spring animation, but does so by detecting velocity and other spring options.\n   * It'd be good to introduce a similar thing here.\n   */\n  if (transition.type !== \"spring\") options.type = \"keyframes\";\n  return options;\n}\n/**\n * Get the delay for a value by checking Transition with decreasing specificity.\n */\nfunction getDelayFromTransition(transition, key) {\n  var _a, _b;\n  var valueTransition = getValueTransition(transition, key) || {};\n  return (_b = (_a = valueTransition.delay) !== null && _a !== void 0 ? _a : transition.delay) !== null && _b !== void 0 ? _b : 0;\n}\nfunction hydrateKeyframes(options) {\n  if (Array.isArray(options.to) && options.to[0] === null) {\n    options.to = tslib.__spreadArray([], tslib.__read(options.to), false);\n    options.to[0] = options.from;\n  }\n  return options;\n}\nfunction getPopmotionAnimationOptions(transition, options, key) {\n  var _a;\n  if (Array.isArray(options.to)) {\n    (_a = transition.duration) !== null && _a !== void 0 ? _a : transition.duration = 0.8;\n  }\n  hydrateKeyframes(options);\n  /**\n   * Get a default transition if none is determined to be defined.\n   */\n  if (!isTransitionDefined(transition)) {\n    transition = tslib.__assign(tslib.__assign({}, transition), getDefaultTransition(key, options.to));\n  }\n  return tslib.__assign(tslib.__assign({}, options), convertTransitionToAnimationOptions(transition));\n}\n/**\n *\n */\nfunction getAnimation(key, value, target, transition, onComplete) {\n  var _a;\n  var valueTransition = getValueTransition(transition, key);\n  var origin = (_a = valueTransition.from) !== null && _a !== void 0 ? _a : value.get();\n  var isTargetAnimatable = isAnimatable(key, target);\n  if (origin === \"none\" && isTargetAnimatable && typeof target === \"string\") {\n    /**\n     * If we're trying to animate from \"none\", try and get an animatable version\n     * of the target. This could be improved to work both ways.\n     */\n    origin = getAnimatableNone(key, target);\n  } else if (isZero(origin) && typeof target === \"string\") {\n    origin = getZeroUnit(target);\n  } else if (!Array.isArray(target) && isZero(target) && typeof origin === \"string\") {\n    target = getZeroUnit(origin);\n  }\n  var isOriginAnimatable = isAnimatable(key, origin);\n  heyListen.warning(isOriginAnimatable === isTargetAnimatable, \"You are trying to animate \".concat(key, \" from \\\"\").concat(origin, \"\\\" to \\\"\").concat(target, \"\\\". \").concat(origin, \" is not an animatable value - to enable this animation set \").concat(origin, \" to a value animatable to \").concat(target, \" via the `style` property.\"));\n  function start() {\n    var options = {\n      from: origin,\n      to: target,\n      velocity: value.getVelocity(),\n      onComplete: onComplete,\n      onUpdate: function onUpdate(v) {\n        return value.set(v);\n      }\n    };\n    return valueTransition.type === \"inertia\" || valueTransition.type === \"decay\" ? popmotion.inertia(tslib.__assign(tslib.__assign({}, options), valueTransition)) : popmotion.animate(tslib.__assign(tslib.__assign({}, getPopmotionAnimationOptions(valueTransition, options, key)), {\n      onUpdate: function onUpdate(v) {\n        var _a;\n        options.onUpdate(v);\n        (_a = valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, v);\n      },\n      onComplete: function onComplete() {\n        var _a;\n        options.onComplete();\n        (_a = valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n      }\n    }));\n  }\n  function set() {\n    var _a, _b;\n    var finalTarget = resolveFinalValueInKeyframes(target);\n    value.set(finalTarget);\n    onComplete();\n    (_a = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, finalTarget);\n    (_b = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onComplete) === null || _b === void 0 ? void 0 : _b.call(valueTransition);\n    return {\n      stop: function stop() {}\n    };\n  }\n  return !isOriginAnimatable || !isTargetAnimatable || valueTransition.type === false ? set : start;\n}\nfunction isZero(value) {\n  return value === 0 || typeof value === \"string\" && parseFloat(value) === 0 && value.indexOf(\" \") === -1;\n}\nfunction getZeroUnit(potentialUnitType) {\n  return typeof potentialUnitType === \"number\" ? 0 : getAnimatableNone(\"\", potentialUnitType);\n}\nfunction getValueTransition(transition, key) {\n  return transition[key] || transition[\"default\"] || transition;\n}\n/**\n * Start animation on a MotionValue. This function is an interface between\n * Framer Motion and Popmotion\n */\nfunction startAnimation(key, value, target, transition) {\n  if (transition === void 0) {\n    transition = {};\n  }\n  if (instantAnimationState.current) {\n    transition = {\n      type: false\n    };\n  }\n  return value.start(function (onComplete) {\n    var delayTimer;\n    var controls;\n    var animation = getAnimation(key, value, target, transition, onComplete);\n    var delay = getDelayFromTransition(transition, key);\n    var start = function start() {\n      return controls = animation();\n    };\n    if (delay) {\n      delayTimer = window.setTimeout(start, secondsToMilliseconds(delay));\n    } else {\n      start();\n    }\n    return function () {\n      clearTimeout(delayTimer);\n      controls === null || controls === void 0 ? void 0 : controls.stop();\n    };\n  });\n}\n\n/**\n * Check if value is a numerical string, ie a string that is purely a number eg \"100\" or \"-100.1\"\n */\nvar isNumericalString = function isNumericalString(v) {\n  return /^\\-?\\d*\\.?\\d+$/.test(v);\n};\n\n/**\n * Check if the value is a zero value string like \"0px\" or \"0%\"\n */\nvar isZeroValueString = function isZeroValueString(v) {\n  return /^0[^.\\s]+$/.test(v);\n};\nfunction addUniqueItem(arr, item) {\n  arr.indexOf(item) === -1 && arr.push(item);\n}\nfunction removeItem(arr, item) {\n  var index = arr.indexOf(item);\n  index > -1 && arr.splice(index, 1);\n}\n// Adapted from array-move\nfunction moveItem(_a, fromIndex, toIndex) {\n  var _b = tslib.__read(_a),\n    arr = _b.slice(0);\n  var startIndex = fromIndex < 0 ? arr.length + fromIndex : fromIndex;\n  if (startIndex >= 0 && startIndex < arr.length) {\n    var endIndex = toIndex < 0 ? arr.length + toIndex : toIndex;\n    var _c = tslib.__read(arr.splice(fromIndex, 1), 1),\n      item = _c[0];\n    arr.splice(endIndex, 0, item);\n  }\n  return arr;\n}\nvar SubscriptionManager = /** @class */function () {\n  function SubscriptionManager() {\n    this.subscriptions = [];\n  }\n  SubscriptionManager.prototype.add = function (handler) {\n    var _this = this;\n    addUniqueItem(this.subscriptions, handler);\n    return function () {\n      return removeItem(_this.subscriptions, handler);\n    };\n  };\n  SubscriptionManager.prototype.notify = function (a, b, c) {\n    var numSubscriptions = this.subscriptions.length;\n    if (!numSubscriptions) return;\n    if (numSubscriptions === 1) {\n      /**\n       * If there's only a single handler we can just call it without invoking a loop.\n       */\n      this.subscriptions[0](a, b, c);\n    } else {\n      for (var i = 0; i < numSubscriptions; i++) {\n        /**\n         * Check whether the handler exists before firing as it's possible\n         * the subscriptions were modified during this loop running.\n         */\n        var handler = this.subscriptions[i];\n        handler && handler(a, b, c);\n      }\n    }\n  };\n  SubscriptionManager.prototype.getSize = function () {\n    return this.subscriptions.length;\n  };\n  SubscriptionManager.prototype.clear = function () {\n    this.subscriptions.length = 0;\n  };\n  return SubscriptionManager;\n}();\nvar isFloat = function isFloat(value) {\n  return !isNaN(parseFloat(value));\n};\n/**\n * `MotionValue` is used to track the state and velocity of motion values.\n *\n * @public\n */\nvar MotionValue = /** @class */function () {\n  /**\n   * @param init - The initiating value\n   * @param config - Optional configuration options\n   *\n   * -  `transformer`: A function to transform incoming values with.\n   *\n   * @internal\n   */\n  function MotionValue(init) {\n    var _this = this;\n    /**\n     * This will be replaced by the build step with the latest version number.\n     * When MotionValues are provided to motion components, warn if versions are mixed.\n     */\n    this.version = \"6.5.1\";\n    /**\n     * Duration, in milliseconds, since last updating frame.\n     *\n     * @internal\n     */\n    this.timeDelta = 0;\n    /**\n     * Timestamp of the last time this `MotionValue` was updated.\n     *\n     * @internal\n     */\n    this.lastUpdated = 0;\n    /**\n     * Functions to notify when the `MotionValue` updates.\n     *\n     * @internal\n     */\n    this.updateSubscribers = new SubscriptionManager();\n    /**\n     * Functions to notify when the velocity updates.\n     *\n     * @internal\n     */\n    this.velocityUpdateSubscribers = new SubscriptionManager();\n    /**\n     * Functions to notify when the `MotionValue` updates and `render` is set to `true`.\n     *\n     * @internal\n     */\n    this.renderSubscribers = new SubscriptionManager();\n    /**\n     * Tracks whether this value can output a velocity. Currently this is only true\n     * if the value is numerical, but we might be able to widen the scope here and support\n     * other value types.\n     *\n     * @internal\n     */\n    this.canTrackVelocity = false;\n    this.updateAndNotify = function (v, render) {\n      if (render === void 0) {\n        render = true;\n      }\n      _this.prev = _this.current;\n      _this.current = v;\n      // Update timestamp\n      var _a = sync.getFrameData(),\n        delta = _a.delta,\n        timestamp = _a.timestamp;\n      if (_this.lastUpdated !== timestamp) {\n        _this.timeDelta = delta;\n        _this.lastUpdated = timestamp;\n        sync__default[\"default\"].postRender(_this.scheduleVelocityCheck);\n      }\n      // Update update subscribers\n      if (_this.prev !== _this.current) {\n        _this.updateSubscribers.notify(_this.current);\n      }\n      // Update velocity subscribers\n      if (_this.velocityUpdateSubscribers.getSize()) {\n        _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n      }\n      // Update render subscribers\n      if (render) {\n        _this.renderSubscribers.notify(_this.current);\n      }\n    };\n    /**\n     * Schedule a velocity check for the next frame.\n     *\n     * This is an instanced and bound function to prevent generating a new\n     * function once per frame.\n     *\n     * @internal\n     */\n    this.scheduleVelocityCheck = function () {\n      return sync__default[\"default\"].postRender(_this.velocityCheck);\n    };\n    /**\n     * Updates `prev` with `current` if the value hasn't been updated this frame.\n     * This ensures velocity calculations return `0`.\n     *\n     * This is an instanced and bound function to prevent generating a new\n     * function once per frame.\n     *\n     * @internal\n     */\n    this.velocityCheck = function (_a) {\n      var timestamp = _a.timestamp;\n      if (timestamp !== _this.lastUpdated) {\n        _this.prev = _this.current;\n        _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n      }\n    };\n    this.hasAnimated = false;\n    this.prev = this.current = init;\n    this.canTrackVelocity = isFloat(this.current);\n  }\n  /**\n   * Adds a function that will be notified when the `MotionValue` is updated.\n   *\n   * It returns a function that, when called, will cancel the subscription.\n   *\n   * When calling `onChange` inside a React component, it should be wrapped with the\n   * `useEffect` hook. As it returns an unsubscribe function, this should be returned\n   * from the `useEffect` function to ensure you don't add duplicate subscribers..\n   *\n   * ```jsx\n   * export const MyComponent = () => {\n   *   const x = useMotionValue(0)\n   *   const y = useMotionValue(0)\n   *   const opacity = useMotionValue(1)\n   *\n   *   useEffect(() => {\n   *     function updateOpacity() {\n   *       const maxXY = Math.max(x.get(), y.get())\n   *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n   *       opacity.set(newOpacity)\n   *     }\n   *\n   *     const unsubscribeX = x.onChange(updateOpacity)\n   *     const unsubscribeY = y.onChange(updateOpacity)\n   *\n   *     return () => {\n   *       unsubscribeX()\n   *       unsubscribeY()\n   *     }\n   *   }, [])\n   *\n   *   return <motion.div style={{ x }} />\n   * }\n   * ```\n   *\n   * @privateRemarks\n   *\n   * We could look into a `useOnChange` hook if the above lifecycle management proves confusing.\n   *\n   * ```jsx\n   * useOnChange(x, () => {})\n   * ```\n   *\n   * @param subscriber - A function that receives the latest value.\n   * @returns A function that, when called, will cancel this subscription.\n   *\n   * @public\n   */\n  MotionValue.prototype.onChange = function (subscription) {\n    return this.updateSubscribers.add(subscription);\n  };\n  MotionValue.prototype.clearListeners = function () {\n    this.updateSubscribers.clear();\n  };\n  /**\n   * Adds a function that will be notified when the `MotionValue` requests a render.\n   *\n   * @param subscriber - A function that's provided the latest value.\n   * @returns A function that, when called, will cancel this subscription.\n   *\n   * @internal\n   */\n  MotionValue.prototype.onRenderRequest = function (subscription) {\n    // Render immediately\n    subscription(this.get());\n    return this.renderSubscribers.add(subscription);\n  };\n  /**\n   * Attaches a passive effect to the `MotionValue`.\n   *\n   * @internal\n   */\n  MotionValue.prototype.attach = function (passiveEffect) {\n    this.passiveEffect = passiveEffect;\n  };\n  /**\n   * Sets the state of the `MotionValue`.\n   *\n   * @remarks\n   *\n   * ```jsx\n   * const x = useMotionValue(0)\n   * x.set(10)\n   * ```\n   *\n   * @param latest - Latest value to set.\n   * @param render - Whether to notify render subscribers. Defaults to `true`\n   *\n   * @public\n   */\n  MotionValue.prototype.set = function (v, render) {\n    if (render === void 0) {\n      render = true;\n    }\n    if (!render || !this.passiveEffect) {\n      this.updateAndNotify(v, render);\n    } else {\n      this.passiveEffect(v, this.updateAndNotify);\n    }\n  };\n  /**\n   * Returns the latest state of `MotionValue`\n   *\n   * @returns - The latest state of `MotionValue`\n   *\n   * @public\n   */\n  MotionValue.prototype.get = function () {\n    return this.current;\n  };\n  /**\n   * @public\n   */\n  MotionValue.prototype.getPrevious = function () {\n    return this.prev;\n  };\n  /**\n   * Returns the latest velocity of `MotionValue`\n   *\n   * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\n   *\n   * @public\n   */\n  MotionValue.prototype.getVelocity = function () {\n    // This could be isFloat(this.prev) && isFloat(this.current), but that would be wasteful\n    return this.canTrackVelocity ?\n    // These casts could be avoided if parseFloat would be typed better\n    popmotion.velocityPerSecond(parseFloat(this.current) - parseFloat(this.prev), this.timeDelta) : 0;\n  };\n  /**\n   * Registers a new animation to control this `MotionValue`. Only one\n   * animation can drive a `MotionValue` at one time.\n   *\n   * ```jsx\n   * value.start()\n   * ```\n   *\n   * @param animation - A function that starts the provided animation\n   *\n   * @internal\n   */\n  MotionValue.prototype.start = function (animation) {\n    var _this = this;\n    this.stop();\n    return new Promise(function (resolve) {\n      _this.hasAnimated = true;\n      _this.stopAnimation = animation(resolve);\n    }).then(function () {\n      return _this.clearAnimation();\n    });\n  };\n  /**\n   * Stop the currently active animation.\n   *\n   * @public\n   */\n  MotionValue.prototype.stop = function () {\n    if (this.stopAnimation) this.stopAnimation();\n    this.clearAnimation();\n  };\n  /**\n   * Returns `true` if this value is currently animating.\n   *\n   * @public\n   */\n  MotionValue.prototype.isAnimating = function () {\n    return !!this.stopAnimation;\n  };\n  MotionValue.prototype.clearAnimation = function () {\n    this.stopAnimation = null;\n  };\n  /**\n   * Destroy and clean up subscribers to this `MotionValue`.\n   *\n   * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\n   * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\n   * created a `MotionValue` via the `motionValue` function.\n   *\n   * @public\n   */\n  MotionValue.prototype.destroy = function () {\n    this.updateSubscribers.clear();\n    this.renderSubscribers.clear();\n    this.stop();\n  };\n  return MotionValue;\n}();\nfunction motionValue(init) {\n  return new MotionValue(init);\n}\n\n/**\n * Tests a provided value against a ValueType\n */\nvar testValueType = function testValueType(v) {\n  return function (type) {\n    return type.test(v);\n  };\n};\n\n/**\n * ValueType for \"auto\"\n */\nvar auto = {\n  test: function test(v) {\n    return v === \"auto\";\n  },\n  parse: function parse(v) {\n    return v;\n  }\n};\n\n/**\n * A list of value types commonly used for dimensions\n */\nvar dimensionValueTypes = [styleValueTypes.number, styleValueTypes.px, styleValueTypes.percent, styleValueTypes.degrees, styleValueTypes.vw, styleValueTypes.vh, auto];\n/**\n * Tests a dimensional value against the list of dimension ValueTypes\n */\nvar findDimensionValueType = function findDimensionValueType(v) {\n  return dimensionValueTypes.find(testValueType(v));\n};\n\n/**\n * A list of all ValueTypes\n */\nvar valueTypes = tslib.__spreadArray(tslib.__spreadArray([], tslib.__read(dimensionValueTypes), false), [styleValueTypes.color, styleValueTypes.complex], false);\n/**\n * Tests a value against the list of ValueTypes\n */\nvar findValueType = function findValueType(v) {\n  return valueTypes.find(testValueType(v));\n};\n\n/**\n * Set VisualElement's MotionValue, creating a new MotionValue for it if\n * it doesn't exist.\n */\nfunction setMotionValue(visualElement, key, value) {\n  if (visualElement.hasValue(key)) {\n    visualElement.getValue(key).set(value);\n  } else {\n    visualElement.addValue(key, motionValue(value));\n  }\n}\nfunction setTarget(visualElement, definition) {\n  var resolved = resolveVariant(visualElement, definition);\n  var _a = resolved ? visualElement.makeTargetAnimatable(resolved, false) : {},\n    _b = _a.transitionEnd,\n    transitionEnd = _b === void 0 ? {} : _b;\n  _a.transition;\n  var target = tslib.__rest(_a, [\"transitionEnd\", \"transition\"]);\n  target = tslib.__assign(tslib.__assign({}, target), transitionEnd);\n  for (var key in target) {\n    var value = resolveFinalValueInKeyframes(target[key]);\n    setMotionValue(visualElement, key, value);\n  }\n}\nfunction setVariants(visualElement, variantLabels) {\n  var reversedLabels = tslib.__spreadArray([], tslib.__read(variantLabels), false).reverse();\n  reversedLabels.forEach(function (key) {\n    var _a;\n    var variant = visualElement.getVariant(key);\n    variant && setTarget(visualElement, variant);\n    (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n      setVariants(child, variantLabels);\n    });\n  });\n}\nfunction setValues(visualElement, definition) {\n  if (Array.isArray(definition)) {\n    return setVariants(visualElement, definition);\n  } else if (typeof definition === \"string\") {\n    return setVariants(visualElement, [definition]);\n  } else {\n    setTarget(visualElement, definition);\n  }\n}\nfunction checkTargetForNewValues(visualElement, target, origin) {\n  var _a, _b, _c;\n  var _d;\n  var newValueKeys = Object.keys(target).filter(function (key) {\n    return !visualElement.hasValue(key);\n  });\n  var numNewValues = newValueKeys.length;\n  if (!numNewValues) return;\n  for (var i = 0; i < numNewValues; i++) {\n    var key = newValueKeys[i];\n    var targetValue = target[key];\n    var value = null;\n    /**\n     * If the target is a series of keyframes, we can use the first value\n     * in the array. If this first value is null, we'll still need to read from the DOM.\n     */\n    if (Array.isArray(targetValue)) {\n      value = targetValue[0];\n    }\n    /**\n     * If the target isn't keyframes, or the first keyframe was null, we need to\n     * first check if an origin value was explicitly defined in the transition as \"from\",\n     * if not read the value from the DOM. As an absolute fallback, take the defined target value.\n     */\n    if (value === null) {\n      value = (_b = (_a = origin[key]) !== null && _a !== void 0 ? _a : visualElement.readValue(key)) !== null && _b !== void 0 ? _b : target[key];\n    }\n    /**\n     * If value is still undefined or null, ignore it. Preferably this would throw,\n     * but this was causing issues in Framer.\n     */\n    if (value === undefined || value === null) continue;\n    if (typeof value === \"string\" && (isNumericalString(value) || isZeroValueString(value))) {\n      // If this is a number read as a string, ie \"0\" or \"200\", convert it to a number\n      value = parseFloat(value);\n    } else if (!findValueType(value) && styleValueTypes.complex.test(targetValue)) {\n      value = getAnimatableNone(key, targetValue);\n    }\n    visualElement.addValue(key, motionValue(value));\n    (_c = (_d = origin)[key]) !== null && _c !== void 0 ? _c : _d[key] = value;\n    visualElement.setBaseTarget(key, value);\n  }\n}\nfunction getOriginFromTransition(key, transition) {\n  if (!transition) return;\n  var valueTransition = transition[key] || transition[\"default\"] || transition;\n  return valueTransition.from;\n}\nfunction getOrigin(target, transition, visualElement) {\n  var _a, _b;\n  var origin = {};\n  for (var key in target) {\n    origin[key] = (_a = getOriginFromTransition(key, transition)) !== null && _a !== void 0 ? _a : (_b = visualElement.getValue(key)) === null || _b === void 0 ? void 0 : _b.get();\n  }\n  return origin;\n}\nfunction animateVisualElement(visualElement, definition, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  visualElement.notifyAnimationStart(definition);\n  var animation;\n  if (Array.isArray(definition)) {\n    var animations = definition.map(function (variant) {\n      return animateVariant(visualElement, variant, options);\n    });\n    animation = Promise.all(animations);\n  } else if (typeof definition === \"string\") {\n    animation = animateVariant(visualElement, definition, options);\n  } else {\n    var resolvedDefinition = typeof definition === \"function\" ? resolveVariant(visualElement, definition, options.custom) : definition;\n    animation = animateTarget(visualElement, resolvedDefinition, options);\n  }\n  return animation.then(function () {\n    return visualElement.notifyAnimationComplete(definition);\n  });\n}\nfunction animateVariant(visualElement, variant, options) {\n  var _a;\n  if (options === void 0) {\n    options = {};\n  }\n  var resolved = resolveVariant(visualElement, variant, options.custom);\n  var _b = (resolved || {}).transition,\n    transition = _b === void 0 ? visualElement.getDefaultTransition() || {} : _b;\n  if (options.transitionOverride) {\n    transition = options.transitionOverride;\n  }\n  /**\n   * If we have a variant, create a callback that runs it as an animation.\n   * Otherwise, we resolve a Promise immediately for a composable no-op.\n   */\n  var getAnimation = resolved ? function () {\n    return animateTarget(visualElement, resolved, options);\n  } : function () {\n    return Promise.resolve();\n  };\n  /**\n   * If we have children, create a callback that runs all their animations.\n   * Otherwise, we resolve a Promise immediately for a composable no-op.\n   */\n  var getChildAnimations = ((_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.size) ? function (forwardDelay) {\n    if (forwardDelay === void 0) {\n      forwardDelay = 0;\n    }\n    var _a = transition.delayChildren,\n      delayChildren = _a === void 0 ? 0 : _a,\n      staggerChildren = transition.staggerChildren,\n      staggerDirection = transition.staggerDirection;\n    return animateChildren(visualElement, variant, delayChildren + forwardDelay, staggerChildren, staggerDirection, options);\n  } : function () {\n    return Promise.resolve();\n  };\n  /**\n   * If the transition explicitly defines a \"when\" option, we need to resolve either\n   * this animation or all children animations before playing the other.\n   */\n  var when = transition.when;\n  if (when) {\n    var _c = tslib.__read(when === \"beforeChildren\" ? [getAnimation, getChildAnimations] : [getChildAnimations, getAnimation], 2),\n      first = _c[0],\n      last = _c[1];\n    return first().then(last);\n  } else {\n    return Promise.all([getAnimation(), getChildAnimations(options.delay)]);\n  }\n}\n/**\n * @internal\n */\nfunction animateTarget(visualElement, definition, _a) {\n  var _b;\n  var _c = _a === void 0 ? {} : _a,\n    _d = _c.delay,\n    delay = _d === void 0 ? 0 : _d,\n    transitionOverride = _c.transitionOverride,\n    type = _c.type;\n  var _e = visualElement.makeTargetAnimatable(definition),\n    _f = _e.transition,\n    transition = _f === void 0 ? visualElement.getDefaultTransition() : _f,\n    transitionEnd = _e.transitionEnd,\n    target = tslib.__rest(_e, [\"transition\", \"transitionEnd\"]);\n  if (transitionOverride) transition = transitionOverride;\n  var animations = [];\n  var animationTypeState = type && ((_b = visualElement.animationState) === null || _b === void 0 ? void 0 : _b.getState()[type]);\n  for (var key in target) {\n    var value = visualElement.getValue(key);\n    var valueTarget = target[key];\n    if (!value || valueTarget === undefined || animationTypeState && shouldBlockAnimation(animationTypeState, key)) {\n      continue;\n    }\n    var valueTransition = tslib.__assign({\n      delay: delay\n    }, transition);\n    /**\n     * Make animation instant if this is a transform prop and we should reduce motion.\n     */\n    if (visualElement.shouldReduceMotion && isTransformProp(key)) {\n      valueTransition = tslib.__assign(tslib.__assign({}, valueTransition), {\n        type: false,\n        delay: 0\n      });\n    }\n    var animation = startAnimation(key, value, valueTarget, valueTransition);\n    animations.push(animation);\n  }\n  return Promise.all(animations).then(function () {\n    transitionEnd && setTarget(visualElement, transitionEnd);\n  });\n}\nfunction animateChildren(visualElement, variant, delayChildren, staggerChildren, staggerDirection, options) {\n  if (delayChildren === void 0) {\n    delayChildren = 0;\n  }\n  if (staggerChildren === void 0) {\n    staggerChildren = 0;\n  }\n  if (staggerDirection === void 0) {\n    staggerDirection = 1;\n  }\n  var animations = [];\n  var maxStaggerDuration = (visualElement.variantChildren.size - 1) * staggerChildren;\n  var generateStaggerDuration = staggerDirection === 1 ? function (i) {\n    if (i === void 0) {\n      i = 0;\n    }\n    return i * staggerChildren;\n  } : function (i) {\n    if (i === void 0) {\n      i = 0;\n    }\n    return maxStaggerDuration - i * staggerChildren;\n  };\n  Array.from(visualElement.variantChildren).sort(sortByTreeOrder).forEach(function (child, i) {\n    animations.push(animateVariant(child, variant, tslib.__assign(tslib.__assign({}, options), {\n      delay: delayChildren + generateStaggerDuration(i)\n    })).then(function () {\n      return child.notifyAnimationComplete(variant);\n    }));\n  });\n  return Promise.all(animations);\n}\nfunction stopAnimation(visualElement) {\n  visualElement.forEachValue(function (value) {\n    return value.stop();\n  });\n}\nfunction sortByTreeOrder(a, b) {\n  return a.sortNodePosition(b);\n}\n/**\n * Decide whether we should block this animation. Previously, we achieved this\n * just by checking whether the key was listed in protectedKeys, but this\n * posed problems if an animation was triggered by afterChildren and protectedKeys\n * had been set to true in the meantime.\n */\nfunction shouldBlockAnimation(_a, key) {\n  var protectedKeys = _a.protectedKeys,\n    needsAnimating = _a.needsAnimating;\n  var shouldBlock = protectedKeys.hasOwnProperty(key) && needsAnimating[key] !== true;\n  needsAnimating[key] = false;\n  return shouldBlock;\n}\nvar variantPriorityOrder = [exports.AnimationType.Animate, exports.AnimationType.InView, exports.AnimationType.Focus, exports.AnimationType.Hover, exports.AnimationType.Tap, exports.AnimationType.Drag, exports.AnimationType.Exit];\nvar reversePriorityOrder = tslib.__spreadArray([], tslib.__read(variantPriorityOrder), false).reverse();\nvar numAnimationTypes = variantPriorityOrder.length;\nfunction animateList(visualElement) {\n  return function (animations) {\n    return Promise.all(animations.map(function (_a) {\n      var animation = _a.animation,\n        options = _a.options;\n      return animateVisualElement(visualElement, animation, options);\n    }));\n  };\n}\nfunction createAnimationState(visualElement) {\n  var animate = animateList(visualElement);\n  var state = createState();\n  var allAnimatedKeys = {};\n  var isInitialRender = true;\n  /**\n   * This function will be used to reduce the animation definitions for\n   * each active animation type into an object of resolved values for it.\n   */\n  var buildResolvedTypeValues = function buildResolvedTypeValues(acc, definition) {\n    var resolved = resolveVariant(visualElement, definition);\n    if (resolved) {\n      resolved.transition;\n      var transitionEnd = resolved.transitionEnd,\n        target = tslib.__rest(resolved, [\"transition\", \"transitionEnd\"]);\n      acc = tslib.__assign(tslib.__assign(tslib.__assign({}, acc), target), transitionEnd);\n    }\n    return acc;\n  };\n  function isAnimated(key) {\n    return allAnimatedKeys[key] !== undefined;\n  }\n  /**\n   * This just allows us to inject mocked animation functions\n   * @internal\n   */\n  function setAnimateFunction(makeAnimator) {\n    animate = makeAnimator(visualElement);\n  }\n  /**\n   * When we receive new props, we need to:\n   * 1. Create a list of protected keys for each type. This is a directory of\n   *    value keys that are currently being \"handled\" by types of a higher priority\n   *    so that whenever an animation is played of a given type, these values are\n   *    protected from being animated.\n   * 2. Determine if an animation type needs animating.\n   * 3. Determine if any values have been removed from a type and figure out\n   *    what to animate those to.\n   */\n  function animateChanges(options, changedActiveType) {\n    var _a;\n    var props = visualElement.getProps();\n    var context = visualElement.getVariantContext(true) || {};\n    /**\n     * A list of animations that we'll build into as we iterate through the animation\n     * types. This will get executed at the end of the function.\n     */\n    var animations = [];\n    /**\n     * Keep track of which values have been removed. Then, as we hit lower priority\n     * animation types, we can check if they contain removed values and animate to that.\n     */\n    var removedKeys = new Set();\n    /**\n     * A dictionary of all encountered keys. This is an object to let us build into and\n     * copy it without iteration. Each time we hit an animation type we set its protected\n     * keys - the keys its not allowed to animate - to the latest version of this object.\n     */\n    var encounteredKeys = {};\n    /**\n     * If a variant has been removed at a given index, and this component is controlling\n     * variant animations, we want to ensure lower-priority variants are forced to animate.\n     */\n    var removedVariantIndex = Infinity;\n    var _loop_1 = function _loop_1(i) {\n      var type = reversePriorityOrder[i];\n      var typeState = state[type];\n      var prop = (_a = props[type]) !== null && _a !== void 0 ? _a : context[type];\n      var propIsVariant = isVariantLabel(prop);\n      /**\n       * If this type has *just* changed isActive status, set activeDelta\n       * to that status. Otherwise set to null.\n       */\n      var activeDelta = type === changedActiveType ? typeState.isActive : null;\n      if (activeDelta === false) removedVariantIndex = i;\n      /**\n       * If this prop is an inherited variant, rather than been set directly on the\n       * component itself, we want to make sure we allow the parent to trigger animations.\n       *\n       * TODO: Can probably change this to a !isControllingVariants check\n       */\n      var isInherited = prop === context[type] && prop !== props[type] && propIsVariant;\n      /**\n       *\n       */\n      if (isInherited && isInitialRender && visualElement.manuallyAnimateOnMount) {\n        isInherited = false;\n      }\n      /**\n       * Set all encountered keys so far as the protected keys for this type. This will\n       * be any key that has been animated or otherwise handled by active, higher-priortiy types.\n       */\n      typeState.protectedKeys = tslib.__assign({}, encounteredKeys);\n      // Check if we can skip analysing this prop early\n      if (\n      // If it isn't active and hasn't *just* been set as inactive\n      !typeState.isActive && activeDelta === null ||\n      // If we didn't and don't have any defined prop for this animation type\n      !prop && !typeState.prevProp ||\n      // Or if the prop doesn't define an animation\n      isAnimationControls(prop) || typeof prop === \"boolean\") {\n        return \"continue\";\n      }\n      /**\n       * As we go look through the values defined on this type, if we detect\n       * a changed value or a value that was removed in a higher priority, we set\n       * this to true and add this prop to the animation list.\n       */\n      var variantDidChange = checkVariantsDidChange(typeState.prevProp, prop);\n      var shouldAnimateType = variantDidChange ||\n      // If we're making this variant active, we want to always make it active\n      type === changedActiveType && typeState.isActive && !isInherited && propIsVariant ||\n      // If we removed a higher-priority variant (i is in reverse order)\n      i > removedVariantIndex && propIsVariant;\n      /**\n       * As animations can be set as variant lists, variants or target objects, we\n       * coerce everything to an array if it isn't one already\n       */\n      var definitionList = Array.isArray(prop) ? prop : [prop];\n      /**\n       * Build an object of all the resolved values. We'll use this in the subsequent\n       * animateChanges calls to determine whether a value has changed.\n       */\n      var resolvedValues = definitionList.reduce(buildResolvedTypeValues, {});\n      if (activeDelta === false) resolvedValues = {};\n      /**\n       * Now we need to loop through all the keys in the prev prop and this prop,\n       * and decide:\n       * 1. If the value has changed, and needs animating\n       * 2. If it has been removed, and needs adding to the removedKeys set\n       * 3. If it has been removed in a higher priority type and needs animating\n       * 4. If it hasn't been removed in a higher priority but hasn't changed, and\n       *    needs adding to the type's protectedKeys list.\n       */\n      var _b = typeState.prevResolvedValues,\n        prevResolvedValues = _b === void 0 ? {} : _b;\n      var allKeys = tslib.__assign(tslib.__assign({}, prevResolvedValues), resolvedValues);\n      var markToAnimate = function markToAnimate(key) {\n        shouldAnimateType = true;\n        removedKeys.delete(key);\n        typeState.needsAnimating[key] = true;\n      };\n      for (var key in allKeys) {\n        var next = resolvedValues[key];\n        var prev = prevResolvedValues[key];\n        // If we've already handled this we can just skip ahead\n        if (encounteredKeys.hasOwnProperty(key)) continue;\n        /**\n         * If the value has changed, we probably want to animate it.\n         */\n        if (next !== prev) {\n          /**\n           * If both values are keyframes, we need to shallow compare them to\n           * detect whether any value has changed. If it has, we animate it.\n           */\n          if (isKeyframesTarget(next) && isKeyframesTarget(prev)) {\n            if (!shallowCompare(next, prev) || variantDidChange) {\n              markToAnimate(key);\n            } else {\n              /**\n               * If it hasn't changed, we want to ensure it doesn't animate by\n               * adding it to the list of protected keys.\n               */\n              typeState.protectedKeys[key] = true;\n            }\n          } else if (next !== undefined) {\n            // If next is defined and doesn't equal prev, it needs animating\n            markToAnimate(key);\n          } else {\n            // If it's undefined, it's been removed.\n            removedKeys.add(key);\n          }\n        } else if (next !== undefined && removedKeys.has(key)) {\n          /**\n           * If next hasn't changed and it isn't undefined, we want to check if it's\n           * been removed by a higher priority\n           */\n          markToAnimate(key);\n        } else {\n          /**\n           * If it hasn't changed, we add it to the list of protected values\n           * to ensure it doesn't get animated.\n           */\n          typeState.protectedKeys[key] = true;\n        }\n      }\n      /**\n       * Update the typeState so next time animateChanges is called we can compare the\n       * latest prop and resolvedValues to these.\n       */\n      typeState.prevProp = prop;\n      typeState.prevResolvedValues = resolvedValues;\n      /**\n       *\n       */\n      if (typeState.isActive) {\n        encounteredKeys = tslib.__assign(tslib.__assign({}, encounteredKeys), resolvedValues);\n      }\n      if (isInitialRender && visualElement.blockInitialAnimation) {\n        shouldAnimateType = false;\n      }\n      /**\n       * If this is an inherited prop we want to hard-block animations\n       * TODO: Test as this should probably still handle animations triggered\n       * by removed values?\n       */\n      if (shouldAnimateType && !isInherited) {\n        animations.push.apply(animations, tslib.__spreadArray([], tslib.__read(definitionList.map(function (animation) {\n          return {\n            animation: animation,\n            options: tslib.__assign({\n              type: type\n            }, options)\n          };\n        })), false));\n      }\n    };\n    /**\n     * Iterate through all animation types in reverse priority order. For each, we want to\n     * detect which values it's handling and whether or not they've changed (and therefore\n     * need to be animated). If any values have been removed, we want to detect those in\n     * lower priority props and flag for animation.\n     */\n    for (var i = 0; i < numAnimationTypes; i++) {\n      _loop_1(i);\n    }\n    allAnimatedKeys = tslib.__assign({}, encounteredKeys);\n    /**\n     * If there are some removed value that haven't been dealt with,\n     * we need to create a new animation that falls back either to the value\n     * defined in the style prop, or the last read value.\n     */\n    if (removedKeys.size) {\n      var fallbackAnimation_1 = {};\n      removedKeys.forEach(function (key) {\n        var fallbackTarget = visualElement.getBaseTarget(key);\n        if (fallbackTarget !== undefined) {\n          fallbackAnimation_1[key] = fallbackTarget;\n        }\n      });\n      animations.push({\n        animation: fallbackAnimation_1\n      });\n    }\n    var shouldAnimate = Boolean(animations.length);\n    if (isInitialRender && props.initial === false && !visualElement.manuallyAnimateOnMount) {\n      shouldAnimate = false;\n    }\n    isInitialRender = false;\n    return shouldAnimate ? animate(animations) : Promise.resolve();\n  }\n  /**\n   * Change whether a certain animation type is active.\n   */\n  function setActive(type, isActive, options) {\n    var _a;\n    // If the active state hasn't changed, we can safely do nothing here\n    if (state[type].isActive === isActive) return Promise.resolve();\n    // Propagate active change to children\n    (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n      var _a;\n      return (_a = child.animationState) === null || _a === void 0 ? void 0 : _a.setActive(type, isActive);\n    });\n    state[type].isActive = isActive;\n    var animations = animateChanges(options, type);\n    for (var key in state) {\n      state[key].protectedKeys = {};\n    }\n    return animations;\n  }\n  return {\n    isAnimated: isAnimated,\n    animateChanges: animateChanges,\n    setActive: setActive,\n    setAnimateFunction: setAnimateFunction,\n    getState: function getState() {\n      return state;\n    }\n  };\n}\nfunction checkVariantsDidChange(prev, next) {\n  if (typeof next === \"string\") {\n    return next !== prev;\n  } else if (isVariantLabels(next)) {\n    return !shallowCompare(next, prev);\n  }\n  return false;\n}\nfunction createTypeState(isActive) {\n  if (isActive === void 0) {\n    isActive = false;\n  }\n  return {\n    isActive: isActive,\n    protectedKeys: {},\n    needsAnimating: {},\n    prevResolvedValues: {}\n  };\n}\nfunction createState() {\n  var _a;\n  return _a = {}, _a[exports.AnimationType.Animate] = createTypeState(true), _a[exports.AnimationType.InView] = createTypeState(), _a[exports.AnimationType.Hover] = createTypeState(), _a[exports.AnimationType.Tap] = createTypeState(), _a[exports.AnimationType.Drag] = createTypeState(), _a[exports.AnimationType.Focus] = createTypeState(), _a[exports.AnimationType.Exit] = createTypeState(), _a;\n}\nvar animations = {\n  animation: makeRenderlessComponent(function (_a) {\n    var visualElement = _a.visualElement,\n      animate = _a.animate;\n    /**\n     * We dynamically generate the AnimationState manager as it contains a reference\n     * to the underlying animation library. We only want to load that if we load this,\n     * so people can optionally code split it out using the `m` component.\n     */\n    visualElement.animationState || (visualElement.animationState = createAnimationState(visualElement));\n    /**\n     * Subscribe any provided AnimationControls to the component's VisualElement\n     */\n    if (isAnimationControls(animate)) {\n      React.useEffect(function () {\n        return animate.subscribe(visualElement);\n      }, [animate]);\n    }\n  }),\n  exit: makeRenderlessComponent(function (props) {\n    var custom = props.custom,\n      visualElement = props.visualElement;\n    var _a = tslib.__read(usePresence(), 2),\n      isPresent = _a[0],\n      safeToRemove = _a[1];\n    var presenceContext = React.useContext(PresenceContext);\n    React.useEffect(function () {\n      var _a, _b;\n      visualElement.isPresent = isPresent;\n      var animation = (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(exports.AnimationType.Exit, !isPresent, {\n        custom: (_b = presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.custom) !== null && _b !== void 0 ? _b : custom\n      });\n      !isPresent && (animation === null || animation === void 0 ? void 0 : animation.then(safeToRemove));\n    }, [isPresent]);\n  })\n};\n\n/**\n * @internal\n */\nvar PanSession = /** @class */function () {\n  function PanSession(event, handlers, _a) {\n    var _this = this;\n    var _b = _a === void 0 ? {} : _a,\n      transformPagePoint = _b.transformPagePoint;\n    /**\n     * @internal\n     */\n    this.startEvent = null;\n    /**\n     * @internal\n     */\n    this.lastMoveEvent = null;\n    /**\n     * @internal\n     */\n    this.lastMoveEventInfo = null;\n    /**\n     * @internal\n     */\n    this.handlers = {};\n    this.updatePoint = function () {\n      if (!(_this.lastMoveEvent && _this.lastMoveEventInfo)) return;\n      var info = getPanInfo(_this.lastMoveEventInfo, _this.history);\n      var isPanStarted = _this.startEvent !== null;\n      // Only start panning if the offset is larger than 3 pixels. If we make it\n      // any larger than this we'll want to reset the pointer history\n      // on the first update to avoid visual snapping to the cursoe.\n      var isDistancePastThreshold = popmotion.distance(info.offset, {\n        x: 0,\n        y: 0\n      }) >= 3;\n      if (!isPanStarted && !isDistancePastThreshold) return;\n      var point = info.point;\n      var timestamp = sync.getFrameData().timestamp;\n      _this.history.push(tslib.__assign(tslib.__assign({}, point), {\n        timestamp: timestamp\n      }));\n      var _a = _this.handlers,\n        onStart = _a.onStart,\n        onMove = _a.onMove;\n      if (!isPanStarted) {\n        onStart && onStart(_this.lastMoveEvent, info);\n        _this.startEvent = _this.lastMoveEvent;\n      }\n      onMove && onMove(_this.lastMoveEvent, info);\n    };\n    this.handlePointerMove = function (event, info) {\n      _this.lastMoveEvent = event;\n      _this.lastMoveEventInfo = transformPoint(info, _this.transformPagePoint);\n      // Because Safari doesn't trigger mouseup events when it's above a `<select>`\n      if (isMouseEvent(event) && event.buttons === 0) {\n        _this.handlePointerUp(event, info);\n        return;\n      }\n      // Throttle mouse move event to once per frame\n      sync__default[\"default\"].update(_this.updatePoint, true);\n    };\n    this.handlePointerUp = function (event, info) {\n      _this.end();\n      var _a = _this.handlers,\n        onEnd = _a.onEnd,\n        onSessionEnd = _a.onSessionEnd;\n      var panInfo = getPanInfo(transformPoint(info, _this.transformPagePoint), _this.history);\n      if (_this.startEvent && onEnd) {\n        onEnd(event, panInfo);\n      }\n      onSessionEnd && onSessionEnd(event, panInfo);\n    };\n    // If we have more than one touch, don't start detecting this gesture\n    if (isTouchEvent(event) && event.touches.length > 1) return;\n    this.handlers = handlers;\n    this.transformPagePoint = transformPagePoint;\n    var info = extractEventInfo(event);\n    var initialInfo = transformPoint(info, this.transformPagePoint);\n    var point = initialInfo.point;\n    var timestamp = sync.getFrameData().timestamp;\n    this.history = [tslib.__assign(tslib.__assign({}, point), {\n      timestamp: timestamp\n    })];\n    var onSessionStart = handlers.onSessionStart;\n    onSessionStart && onSessionStart(event, getPanInfo(initialInfo, this.history));\n    this.removeListeners = popmotion.pipe(addPointerEvent(window, \"pointermove\", this.handlePointerMove), addPointerEvent(window, \"pointerup\", this.handlePointerUp), addPointerEvent(window, \"pointercancel\", this.handlePointerUp));\n  }\n  PanSession.prototype.updateHandlers = function (handlers) {\n    this.handlers = handlers;\n  };\n  PanSession.prototype.end = function () {\n    this.removeListeners && this.removeListeners();\n    sync.cancelSync.update(this.updatePoint);\n  };\n  return PanSession;\n}();\nfunction transformPoint(info, transformPagePoint) {\n  return transformPagePoint ? {\n    point: transformPagePoint(info.point)\n  } : info;\n}\nfunction subtractPoint(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\nfunction getPanInfo(_a, history) {\n  var point = _a.point;\n  return {\n    point: point,\n    delta: subtractPoint(point, lastDevicePoint(history)),\n    offset: subtractPoint(point, startDevicePoint(history)),\n    velocity: getVelocity(history, 0.1)\n  };\n}\nfunction startDevicePoint(history) {\n  return history[0];\n}\nfunction lastDevicePoint(history) {\n  return history[history.length - 1];\n}\nfunction getVelocity(history, timeDelta) {\n  if (history.length < 2) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n  var i = history.length - 1;\n  var timestampedPoint = null;\n  var lastPoint = lastDevicePoint(history);\n  while (i >= 0) {\n    timestampedPoint = history[i];\n    if (lastPoint.timestamp - timestampedPoint.timestamp > secondsToMilliseconds(timeDelta)) {\n      break;\n    }\n    i--;\n  }\n  if (!timestampedPoint) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n  var time = (lastPoint.timestamp - timestampedPoint.timestamp) / 1000;\n  if (time === 0) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n  var currentVelocity = {\n    x: (lastPoint.x - timestampedPoint.x) / time,\n    y: (lastPoint.y - timestampedPoint.y) / time\n  };\n  if (currentVelocity.x === Infinity) {\n    currentVelocity.x = 0;\n  }\n  if (currentVelocity.y === Infinity) {\n    currentVelocity.y = 0;\n  }\n  return currentVelocity;\n}\nfunction calcLength(axis) {\n  return axis.max - axis.min;\n}\nfunction isNear(value, target, maxDistance) {\n  if (target === void 0) {\n    target = 0;\n  }\n  if (maxDistance === void 0) {\n    maxDistance = 0.01;\n  }\n  return popmotion.distance(value, target) < maxDistance;\n}\nfunction calcAxisDelta(delta, source, target, origin) {\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n  delta.origin = origin;\n  delta.originPoint = popmotion.mix(source.min, source.max, delta.origin);\n  delta.scale = calcLength(target) / calcLength(source);\n  if (isNear(delta.scale, 1, 0.0001) || isNaN(delta.scale)) delta.scale = 1;\n  delta.translate = popmotion.mix(target.min, target.max, delta.origin) - delta.originPoint;\n  if (isNear(delta.translate) || isNaN(delta.translate)) delta.translate = 0;\n}\nfunction calcBoxDelta(delta, source, target, origin) {\n  calcAxisDelta(delta.x, source.x, target.x, origin === null || origin === void 0 ? void 0 : origin.originX);\n  calcAxisDelta(delta.y, source.y, target.y, origin === null || origin === void 0 ? void 0 : origin.originY);\n}\nfunction calcRelativeAxis(target, relative, parent) {\n  target.min = parent.min + relative.min;\n  target.max = target.min + calcLength(relative);\n}\nfunction calcRelativeBox(target, relative, parent) {\n  calcRelativeAxis(target.x, relative.x, parent.x);\n  calcRelativeAxis(target.y, relative.y, parent.y);\n}\nfunction calcRelativeAxisPosition(target, layout, parent) {\n  target.min = layout.min - parent.min;\n  target.max = target.min + calcLength(layout);\n}\nfunction calcRelativePosition(target, layout, parent) {\n  calcRelativeAxisPosition(target.x, layout.x, parent.x);\n  calcRelativeAxisPosition(target.y, layout.y, parent.y);\n}\n\n/**\n * Apply constraints to a point. These constraints are both physical along an\n * axis, and an elastic factor that determines how much to constrain the point\n * by if it does lie outside the defined parameters.\n */\nfunction applyConstraints(point, _a, elastic) {\n  var min = _a.min,\n    max = _a.max;\n  if (min !== undefined && point < min) {\n    // If we have a min point defined, and this is outside of that, constrain\n    point = elastic ? popmotion.mix(min, point, elastic.min) : Math.max(point, min);\n  } else if (max !== undefined && point > max) {\n    // If we have a max point defined, and this is outside of that, constrain\n    point = elastic ? popmotion.mix(max, point, elastic.max) : Math.min(point, max);\n  }\n  return point;\n}\n/**\n * Calculate constraints in terms of the viewport when defined relatively to the\n * measured axis. This is measured from the nearest edge, so a max constraint of 200\n * on an axis with a max value of 300 would return a constraint of 500 - axis length\n */\nfunction calcRelativeAxisConstraints(axis, min, max) {\n  return {\n    min: min !== undefined ? axis.min + min : undefined,\n    max: max !== undefined ? axis.max + max - (axis.max - axis.min) : undefined\n  };\n}\n/**\n * Calculate constraints in terms of the viewport when\n * defined relatively to the measured bounding box.\n */\nfunction calcRelativeConstraints(layoutBox, _a) {\n  var top = _a.top,\n    left = _a.left,\n    bottom = _a.bottom,\n    right = _a.right;\n  return {\n    x: calcRelativeAxisConstraints(layoutBox.x, left, right),\n    y: calcRelativeAxisConstraints(layoutBox.y, top, bottom)\n  };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative axis\n */\nfunction calcViewportAxisConstraints(layoutAxis, constraintsAxis) {\n  var _a;\n  var min = constraintsAxis.min - layoutAxis.min;\n  var max = constraintsAxis.max - layoutAxis.max;\n  // If the constraints axis is actually smaller than the layout axis then we can\n  // flip the constraints\n  if (constraintsAxis.max - constraintsAxis.min < layoutAxis.max - layoutAxis.min) {\n    _a = tslib.__read([max, min], 2), min = _a[0], max = _a[1];\n  }\n  return {\n    min: min,\n    max: max\n  };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative box\n */\nfunction calcViewportConstraints(layoutBox, constraintsBox) {\n  return {\n    x: calcViewportAxisConstraints(layoutBox.x, constraintsBox.x),\n    y: calcViewportAxisConstraints(layoutBox.y, constraintsBox.y)\n  };\n}\n/**\n * Calculate a transform origin relative to the source axis, between 0-1, that results\n * in an asthetically pleasing scale/transform needed to project from source to target.\n */\nfunction calcOrigin(source, target) {\n  var origin = 0.5;\n  var sourceLength = calcLength(source);\n  var targetLength = calcLength(target);\n  if (targetLength > sourceLength) {\n    origin = popmotion.progress(target.min, target.max - sourceLength, source.min);\n  } else if (sourceLength > targetLength) {\n    origin = popmotion.progress(source.min, source.max - targetLength, target.min);\n  }\n  return popmotion.clamp(0, 1, origin);\n}\n/**\n * Rebase the calculated viewport constraints relative to the layout.min point.\n */\nfunction rebaseAxisConstraints(layout, constraints) {\n  var relativeConstraints = {};\n  if (constraints.min !== undefined) {\n    relativeConstraints.min = constraints.min - layout.min;\n  }\n  if (constraints.max !== undefined) {\n    relativeConstraints.max = constraints.max - layout.min;\n  }\n  return relativeConstraints;\n}\nvar defaultElastic = 0.35;\n/**\n * Accepts a dragElastic prop and returns resolved elastic values for each axis.\n */\nfunction resolveDragElastic(dragElastic) {\n  if (dragElastic === void 0) {\n    dragElastic = defaultElastic;\n  }\n  if (dragElastic === false) {\n    dragElastic = 0;\n  } else if (dragElastic === true) {\n    dragElastic = defaultElastic;\n  }\n  return {\n    x: resolveAxisElastic(dragElastic, \"left\", \"right\"),\n    y: resolveAxisElastic(dragElastic, \"top\", \"bottom\")\n  };\n}\nfunction resolveAxisElastic(dragElastic, minLabel, maxLabel) {\n  return {\n    min: resolvePointElastic(dragElastic, minLabel),\n    max: resolvePointElastic(dragElastic, maxLabel)\n  };\n}\nfunction resolvePointElastic(dragElastic, label) {\n  var _a;\n  return typeof dragElastic === \"number\" ? dragElastic : (_a = dragElastic[label]) !== null && _a !== void 0 ? _a : 0;\n}\nvar createAxisDelta = function createAxisDelta() {\n  return {\n    translate: 0,\n    scale: 1,\n    origin: 0,\n    originPoint: 0\n  };\n};\nvar createDelta = function createDelta() {\n  return {\n    x: createAxisDelta(),\n    y: createAxisDelta()\n  };\n};\nvar createAxis = function createAxis() {\n  return {\n    min: 0,\n    max: 0\n  };\n};\nvar createBox = function createBox() {\n  return {\n    x: createAxis(),\n    y: createAxis()\n  };\n};\nfunction eachAxis(callback) {\n  return [callback(\"x\"), callback(\"y\")];\n}\n\n/**\n * Bounding boxes tend to be defined as top, left, right, bottom. For various operations\n * it's easier to consider each axis individually. This function returns a bounding box\n * as a map of single-axis min/max values.\n */\nfunction convertBoundingBoxToBox(_a) {\n  var top = _a.top,\n    left = _a.left,\n    right = _a.right,\n    bottom = _a.bottom;\n  return {\n    x: {\n      min: left,\n      max: right\n    },\n    y: {\n      min: top,\n      max: bottom\n    }\n  };\n}\nfunction convertBoxToBoundingBox(_a) {\n  var x = _a.x,\n    y = _a.y;\n  return {\n    top: y.min,\n    right: x.max,\n    bottom: y.max,\n    left: x.min\n  };\n}\n/**\n * Applies a TransformPoint function to a bounding box. TransformPoint is usually a function\n * provided by Framer to allow measured points to be corrected for device scaling. This is used\n * when measuring DOM elements and DOM event points.\n */\nfunction transformBoxPoints(point, transformPoint) {\n  if (!transformPoint) return point;\n  var topLeft = transformPoint({\n    x: point.left,\n    y: point.top\n  });\n  var bottomRight = transformPoint({\n    x: point.right,\n    y: point.bottom\n  });\n  return {\n    top: topLeft.y,\n    left: topLeft.x,\n    bottom: bottomRight.y,\n    right: bottomRight.x\n  };\n}\nfunction isIdentityScale(scale) {\n  return scale === undefined || scale === 1;\n}\nfunction hasScale(_a) {\n  var scale = _a.scale,\n    scaleX = _a.scaleX,\n    scaleY = _a.scaleY;\n  return !isIdentityScale(scale) || !isIdentityScale(scaleX) || !isIdentityScale(scaleY);\n}\nfunction hasTransform(values) {\n  return hasScale(values) || hasTranslate(values.x) || hasTranslate(values.y) || values.z || values.rotate || values.rotateX || values.rotateY;\n}\nfunction hasTranslate(value) {\n  return value && value !== \"0%\";\n}\n\n/**\n * Scales a point based on a factor and an originPoint\n */\nfunction scalePoint(point, scale, originPoint) {\n  var distanceFromOrigin = point - originPoint;\n  var scaled = scale * distanceFromOrigin;\n  return originPoint + scaled;\n}\n/**\n * Applies a translate/scale delta to a point\n */\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\n  if (boxScale !== undefined) {\n    point = scalePoint(point, boxScale, originPoint);\n  }\n  return scalePoint(point, scale, originPoint) + translate;\n}\n/**\n * Applies a translate/scale delta to an axis\n */\nfunction applyAxisDelta(axis, translate, scale, originPoint, boxScale) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n  if (scale === void 0) {\n    scale = 1;\n  }\n  axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Applies a translate/scale delta to a box\n */\nfunction applyBoxDelta(box, _a) {\n  var x = _a.x,\n    y = _a.y;\n  applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\n  applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\n}\n/**\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\n *\n * This is the final nested loop within updateLayoutDelta for future refactoring\n */\nfunction applyTreeDeltas(box, treeScale, treePath, isSharedTransition) {\n  var _a, _b;\n  if (isSharedTransition === void 0) {\n    isSharedTransition = false;\n  }\n  var treeLength = treePath.length;\n  if (!treeLength) return;\n  // Reset the treeScale\n  treeScale.x = treeScale.y = 1;\n  var node;\n  var delta;\n  for (var i = 0; i < treeLength; i++) {\n    node = treePath[i];\n    delta = node.projectionDelta;\n    if (((_b = (_a = node.instance) === null || _a === void 0 ? void 0 : _a.style) === null || _b === void 0 ? void 0 : _b.display) === \"contents\") continue;\n    if (isSharedTransition && node.options.layoutScroll && node.scroll && node !== node.root) {\n      transformBox(box, {\n        x: -node.scroll.x,\n        y: -node.scroll.y\n      });\n    }\n    if (delta) {\n      // Incoporate each ancestor's scale into a culmulative treeScale for this component\n      treeScale.x *= delta.x.scale;\n      treeScale.y *= delta.y.scale;\n      // Apply each ancestor's calculated delta into this component's recorded layout box\n      applyBoxDelta(box, delta);\n    }\n    if (isSharedTransition && hasTransform(node.latestValues)) {\n      transformBox(box, node.latestValues);\n    }\n  }\n}\nfunction translateAxis(axis, distance) {\n  axis.min = axis.min + distance;\n  axis.max = axis.max + distance;\n}\n/**\n * Apply a transform to an axis from the latest resolved motion values.\n * This function basically acts as a bridge between a flat motion value map\n * and applyAxisDelta\n */\nfunction transformAxis(axis, transforms, _a) {\n  var _b = tslib.__read(_a, 3),\n    key = _b[0],\n    scaleKey = _b[1],\n    originKey = _b[2];\n  var axisOrigin = transforms[originKey] !== undefined ? transforms[originKey] : 0.5;\n  var originPoint = popmotion.mix(axis.min, axis.max, axisOrigin);\n  // Apply the axis delta to the final axis\n  applyAxisDelta(axis, transforms[key], transforms[scaleKey], originPoint, transforms.scale);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\nvar xKeys$1 = [\"x\", \"scaleX\", \"originX\"];\nvar yKeys$1 = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Apply a transform to a box from the latest resolved motion values.\n */\nfunction transformBox(box, transform) {\n  transformAxis(box.x, transform, xKeys$1);\n  transformAxis(box.y, transform, yKeys$1);\n}\nfunction _measureViewportBox2(instance, transformPoint) {\n  return convertBoundingBoxToBox(transformBoxPoints(instance.getBoundingClientRect(), transformPoint));\n}\nfunction measurePageBox(element, rootProjectionNode, transformPagePoint) {\n  var viewportBox = _measureViewportBox2(element, transformPagePoint);\n  var scroll = rootProjectionNode.scroll;\n  if (scroll) {\n    translateAxis(viewportBox.x, scroll.x);\n    translateAxis(viewportBox.y, scroll.y);\n  }\n  return viewportBox;\n}\nvar elementDragControls = new WeakMap();\n/**\n *\n */\n// let latestPointerEvent: AnyPointerEvent\nvar VisualElementDragControls = /** @class */function () {\n  function VisualElementDragControls(visualElement) {\n    // This is a reference to the global drag gesture lock, ensuring only one component\n    // can \"capture\" the drag of one or both axes.\n    // TODO: Look into moving this into pansession?\n    this.openGlobalLock = null;\n    this.isDragging = false;\n    this.currentDirection = null;\n    this.originPoint = {\n      x: 0,\n      y: 0\n    };\n    /**\n     * The permitted boundaries of travel, in pixels.\n     */\n    this.constraints = false;\n    this.hasMutatedConstraints = false;\n    /**\n     * The per-axis resolved elastic values.\n     */\n    this.elastic = createBox();\n    this.visualElement = visualElement;\n  }\n  VisualElementDragControls.prototype.start = function (originEvent, _a) {\n    var _this = this;\n    var _b = _a === void 0 ? {} : _a,\n      _c = _b.snapToCursor,\n      snapToCursor = _c === void 0 ? false : _c;\n    /**\n     * Don't start dragging if this component is exiting\n     */\n    if (this.visualElement.isPresent === false) return;\n    var onSessionStart = function onSessionStart(event) {\n      // Stop any animations on both axis values immediately. This allows the user to throw and catch\n      // the component.\n      _this.stopAnimation();\n      if (snapToCursor) {\n        _this.snapToCursor(extractEventInfo(event, \"page\").point);\n      }\n    };\n    var onStart = function onStart(event, info) {\n      var _a;\n      // Attempt to grab the global drag gesture lock - maybe make this part of PanSession\n      var _b = _this.getProps(),\n        drag = _b.drag,\n        dragPropagation = _b.dragPropagation,\n        onDragStart = _b.onDragStart;\n      if (drag && !dragPropagation) {\n        if (_this.openGlobalLock) _this.openGlobalLock();\n        _this.openGlobalLock = getGlobalLock(drag);\n        // If we don 't have the lock, don't start dragging\n        if (!_this.openGlobalLock) return;\n      }\n      _this.isDragging = true;\n      _this.currentDirection = null;\n      _this.resolveConstraints();\n      if (_this.visualElement.projection) {\n        _this.visualElement.projection.isAnimationBlocked = true;\n        _this.visualElement.projection.target = undefined;\n      }\n      /**\n       * Record gesture origin\n       */\n      eachAxis(function (axis) {\n        var _a, _b;\n        var current = _this.getAxisMotionValue(axis).get() || 0;\n        /**\n         * If the MotionValue is a percentage value convert to px\n         */\n        if (styleValueTypes.percent.test(current)) {\n          var measuredAxis = (_b = (_a = _this.visualElement.projection) === null || _a === void 0 ? void 0 : _a.layout) === null || _b === void 0 ? void 0 : _b.actual[axis];\n          if (measuredAxis) {\n            var length_1 = calcLength(measuredAxis);\n            current = length_1 * (parseFloat(current) / 100);\n          }\n        }\n        _this.originPoint[axis] = current;\n      });\n      // Fire onDragStart event\n      onDragStart === null || onDragStart === void 0 ? void 0 : onDragStart(event, info);\n      (_a = _this.visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(exports.AnimationType.Drag, true);\n    };\n    var onMove = function onMove(event, info) {\n      // latestPointerEvent = event\n      var _a = _this.getProps(),\n        dragPropagation = _a.dragPropagation,\n        dragDirectionLock = _a.dragDirectionLock,\n        onDirectionLock = _a.onDirectionLock,\n        onDrag = _a.onDrag;\n      // If we didn't successfully receive the gesture lock, early return.\n      if (!dragPropagation && !_this.openGlobalLock) return;\n      var offset = info.offset;\n      // Attempt to detect drag direction if directionLock is true\n      if (dragDirectionLock && _this.currentDirection === null) {\n        _this.currentDirection = getCurrentDirection(offset);\n        // If we've successfully set a direction, notify listener\n        if (_this.currentDirection !== null) {\n          onDirectionLock === null || onDirectionLock === void 0 ? void 0 : onDirectionLock(_this.currentDirection);\n        }\n        return;\n      }\n      // Update each point with the latest position\n      _this.updateAxis(\"x\", info.point, offset);\n      _this.updateAxis(\"y\", info.point, offset);\n      /**\n       * Ideally we would leave the renderer to fire naturally at the end of\n       * this frame but if the element is about to change layout as the result\n       * of a re-render we want to ensure the browser can read the latest\n       * bounding box to ensure the pointer and element don't fall out of sync.\n       */\n      _this.visualElement.syncRender();\n      /**\n       * This must fire after the syncRender call as it might trigger a state\n       * change which itself might trigger a layout update.\n       */\n      onDrag === null || onDrag === void 0 ? void 0 : onDrag(event, info);\n    };\n    var onSessionEnd = function onSessionEnd(event, info) {\n      return _this.stop(event, info);\n    };\n    this.panSession = new PanSession(originEvent, {\n      onSessionStart: onSessionStart,\n      onStart: onStart,\n      onMove: onMove,\n      onSessionEnd: onSessionEnd\n    }, {\n      transformPagePoint: this.visualElement.getTransformPagePoint()\n    });\n  };\n  VisualElementDragControls.prototype.stop = function (event, info) {\n    var isDragging = this.isDragging;\n    this.cancel();\n    if (!isDragging) return;\n    var velocity = info.velocity;\n    this.startAnimation(velocity);\n    var onDragEnd = this.getProps().onDragEnd;\n    onDragEnd === null || onDragEnd === void 0 ? void 0 : onDragEnd(event, info);\n  };\n  VisualElementDragControls.prototype.cancel = function () {\n    var _a, _b;\n    this.isDragging = false;\n    if (this.visualElement.projection) {\n      this.visualElement.projection.isAnimationBlocked = false;\n    }\n    (_a = this.panSession) === null || _a === void 0 ? void 0 : _a.end();\n    this.panSession = undefined;\n    var dragPropagation = this.getProps().dragPropagation;\n    if (!dragPropagation && this.openGlobalLock) {\n      this.openGlobalLock();\n      this.openGlobalLock = null;\n    }\n    (_b = this.visualElement.animationState) === null || _b === void 0 ? void 0 : _b.setActive(exports.AnimationType.Drag, false);\n  };\n  VisualElementDragControls.prototype.updateAxis = function (axis, _point, offset) {\n    var drag = this.getProps().drag;\n    // If we're not dragging this axis, do an early return.\n    if (!offset || !shouldDrag(axis, drag, this.currentDirection)) return;\n    var axisValue = this.getAxisMotionValue(axis);\n    var next = this.originPoint[axis] + offset[axis];\n    // Apply constraints\n    if (this.constraints && this.constraints[axis]) {\n      next = applyConstraints(next, this.constraints[axis], this.elastic[axis]);\n    }\n    axisValue.set(next);\n  };\n  VisualElementDragControls.prototype.resolveConstraints = function () {\n    var _this = this;\n    var _a = this.getProps(),\n      dragConstraints = _a.dragConstraints,\n      dragElastic = _a.dragElastic;\n    var layout = (this.visualElement.projection || {}).layout;\n    var prevConstraints = this.constraints;\n    if (dragConstraints && isRefObject(dragConstraints)) {\n      if (!this.constraints) {\n        this.constraints = this.resolveRefConstraints();\n      }\n    } else {\n      if (dragConstraints && layout) {\n        this.constraints = calcRelativeConstraints(layout.actual, dragConstraints);\n      } else {\n        this.constraints = false;\n      }\n    }\n    this.elastic = resolveDragElastic(dragElastic);\n    /**\n     * If we're outputting to external MotionValues, we want to rebase the measured constraints\n     * from viewport-relative to component-relative.\n     */\n    if (prevConstraints !== this.constraints && layout && this.constraints && !this.hasMutatedConstraints) {\n      eachAxis(function (axis) {\n        if (_this.getAxisMotionValue(axis)) {\n          _this.constraints[axis] = rebaseAxisConstraints(layout.actual[axis], _this.constraints[axis]);\n        }\n      });\n    }\n  };\n  VisualElementDragControls.prototype.resolveRefConstraints = function () {\n    var _a = this.getProps(),\n      constraints = _a.dragConstraints,\n      onMeasureDragConstraints = _a.onMeasureDragConstraints;\n    if (!constraints || !isRefObject(constraints)) return false;\n    var constraintsElement = constraints.current;\n    heyListen.invariant(constraintsElement !== null, \"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\");\n    var projection = this.visualElement.projection;\n    // TODO\n    if (!projection || !projection.layout) return false;\n    var constraintsBox = measurePageBox(constraintsElement, projection.root, this.visualElement.getTransformPagePoint());\n    var measuredConstraints = calcViewportConstraints(projection.layout.actual, constraintsBox);\n    /**\n     * If there's an onMeasureDragConstraints listener we call it and\n     * if different constraints are returned, set constraints to that\n     */\n    if (onMeasureDragConstraints) {\n      var userConstraints = onMeasureDragConstraints(convertBoxToBoundingBox(measuredConstraints));\n      this.hasMutatedConstraints = !!userConstraints;\n      if (userConstraints) {\n        measuredConstraints = convertBoundingBoxToBox(userConstraints);\n      }\n    }\n    return measuredConstraints;\n  };\n  VisualElementDragControls.prototype.startAnimation = function (velocity) {\n    var _this = this;\n    var _a = this.getProps(),\n      drag = _a.drag,\n      dragMomentum = _a.dragMomentum,\n      dragElastic = _a.dragElastic,\n      dragTransition = _a.dragTransition,\n      dragSnapToOrigin = _a.dragSnapToOrigin,\n      onDragTransitionEnd = _a.onDragTransitionEnd;\n    var constraints = this.constraints || {};\n    var momentumAnimations = eachAxis(function (axis) {\n      var _a;\n      if (!shouldDrag(axis, drag, _this.currentDirection)) {\n        return;\n      }\n      var transition = (_a = constraints === null || constraints === void 0 ? void 0 : constraints[axis]) !== null && _a !== void 0 ? _a : {};\n      if (dragSnapToOrigin) transition = {\n        min: 0,\n        max: 0\n      };\n      /**\n       * Overdamp the boundary spring if `dragElastic` is disabled. There's still a frame\n       * of spring animations so we should look into adding a disable spring option to `inertia`.\n       * We could do something here where we affect the `bounceStiffness` and `bounceDamping`\n       * using the value of `dragElastic`.\n       */\n      var bounceStiffness = dragElastic ? 200 : 1000000;\n      var bounceDamping = dragElastic ? 40 : 10000000;\n      var inertia = tslib.__assign(tslib.__assign({\n        type: \"inertia\",\n        velocity: dragMomentum ? velocity[axis] : 0,\n        bounceStiffness: bounceStiffness,\n        bounceDamping: bounceDamping,\n        timeConstant: 750,\n        restDelta: 1,\n        restSpeed: 10\n      }, dragTransition), transition);\n      // If we're not animating on an externally-provided `MotionValue` we can use the\n      // component's animation controls which will handle interactions with whileHover (etc),\n      // otherwise we just have to animate the `MotionValue` itself.\n      return _this.startAxisValueAnimation(axis, inertia);\n    });\n    // Run all animations and then resolve the new drag constraints.\n    return Promise.all(momentumAnimations).then(onDragTransitionEnd);\n  };\n  VisualElementDragControls.prototype.startAxisValueAnimation = function (axis, transition) {\n    var axisValue = this.getAxisMotionValue(axis);\n    return startAnimation(axis, axisValue, 0, transition);\n  };\n  VisualElementDragControls.prototype.stopAnimation = function () {\n    var _this = this;\n    eachAxis(function (axis) {\n      return _this.getAxisMotionValue(axis).stop();\n    });\n  };\n  /**\n   * Drag works differently depending on which props are provided.\n   *\n   * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.\n   * - Otherwise, we apply the delta to the x/y motion values.\n   */\n  VisualElementDragControls.prototype.getAxisMotionValue = function (axis) {\n    var _a, _b;\n    var dragKey = \"_drag\" + axis.toUpperCase();\n    var externalMotionValue = this.visualElement.getProps()[dragKey];\n    return externalMotionValue ? externalMotionValue : this.visualElement.getValue(axis, (_b = (_a = this.visualElement.getProps().initial) === null || _a === void 0 ? void 0 : _a[axis]) !== null && _b !== void 0 ? _b : 0);\n  };\n  VisualElementDragControls.prototype.snapToCursor = function (point) {\n    var _this = this;\n    eachAxis(function (axis) {\n      var drag = _this.getProps().drag;\n      // If we're not dragging this axis, do an early return.\n      if (!shouldDrag(axis, drag, _this.currentDirection)) return;\n      var projection = _this.visualElement.projection;\n      var axisValue = _this.getAxisMotionValue(axis);\n      if (projection && projection.layout) {\n        var _a = projection.layout.actual[axis],\n          min = _a.min,\n          max = _a.max;\n        axisValue.set(point[axis] - popmotion.mix(min, max, 0.5));\n      }\n    });\n  };\n  /**\n   * When the viewport resizes we want to check if the measured constraints\n   * have changed and, if so, reposition the element within those new constraints\n   * relative to where it was before the resize.\n   */\n  VisualElementDragControls.prototype.scalePositionWithinConstraints = function () {\n    var _this = this;\n    var _a;\n    var _b = this.getProps(),\n      drag = _b.drag,\n      dragConstraints = _b.dragConstraints;\n    var projection = this.visualElement.projection;\n    if (!isRefObject(dragConstraints) || !projection || !this.constraints) return;\n    /**\n     * Stop current animations as there can be visual glitching if we try to do\n     * this mid-animation\n     */\n    this.stopAnimation();\n    /**\n     * Record the relative position of the dragged element relative to the\n     * constraints box and save as a progress value.\n     */\n    var boxProgress = {\n      x: 0,\n      y: 0\n    };\n    eachAxis(function (axis) {\n      var axisValue = _this.getAxisMotionValue(axis);\n      if (axisValue) {\n        var latest = axisValue.get();\n        boxProgress[axis] = calcOrigin({\n          min: latest,\n          max: latest\n        }, _this.constraints[axis]);\n      }\n    });\n    /**\n     * Update the layout of this element and resolve the latest drag constraints\n     */\n    var transformTemplate = this.visualElement.getProps().transformTemplate;\n    this.visualElement.getInstance().style.transform = transformTemplate ? transformTemplate({}, \"\") : \"none\";\n    (_a = projection.root) === null || _a === void 0 ? void 0 : _a.updateScroll();\n    projection.updateLayout();\n    this.resolveConstraints();\n    /**\n     * For each axis, calculate the current progress of the layout axis\n     * within the new constraints.\n     */\n    eachAxis(function (axis) {\n      if (!shouldDrag(axis, drag, null)) return;\n      /**\n       * Calculate a new transform based on the previous box progress\n       */\n      var axisValue = _this.getAxisMotionValue(axis);\n      var _a = _this.constraints[axis],\n        min = _a.min,\n        max = _a.max;\n      axisValue.set(popmotion.mix(min, max, boxProgress[axis]));\n    });\n  };\n  VisualElementDragControls.prototype.addListeners = function () {\n    var _this = this;\n    var _a;\n    elementDragControls.set(this.visualElement, this);\n    var element = this.visualElement.getInstance();\n    /**\n     * Attach a pointerdown event listener on this DOM element to initiate drag tracking.\n     */\n    var stopPointerListener = addPointerEvent(element, \"pointerdown\", function (event) {\n      var _a = _this.getProps(),\n        drag = _a.drag,\n        _b = _a.dragListener,\n        dragListener = _b === void 0 ? true : _b;\n      drag && dragListener && _this.start(event);\n    });\n    var measureDragConstraints = function measureDragConstraints() {\n      var dragConstraints = _this.getProps().dragConstraints;\n      if (isRefObject(dragConstraints)) {\n        _this.constraints = _this.resolveRefConstraints();\n      }\n    };\n    var projection = this.visualElement.projection;\n    var stopMeasureLayoutListener = projection.addEventListener(\"measure\", measureDragConstraints);\n    if (projection && !projection.layout) {\n      (_a = projection.root) === null || _a === void 0 ? void 0 : _a.updateScroll();\n      projection.updateLayout();\n    }\n    measureDragConstraints();\n    /**\n     * Attach a window resize listener to scale the draggable target within its defined\n     * constraints as the window resizes.\n     */\n    var stopResizeListener = addDomEvent(window, \"resize\", function () {\n      return _this.scalePositionWithinConstraints();\n    });\n    /**\n     * If the element's layout changes, calculate the delta and apply that to\n     * the drag gesture's origin point.\n     */\n    projection.addEventListener(\"didUpdate\", function (_a) {\n      var delta = _a.delta,\n        hasLayoutChanged = _a.hasLayoutChanged;\n      if (_this.isDragging && hasLayoutChanged) {\n        eachAxis(function (axis) {\n          var motionValue = _this.getAxisMotionValue(axis);\n          if (!motionValue) return;\n          _this.originPoint[axis] += delta[axis].translate;\n          motionValue.set(motionValue.get() + delta[axis].translate);\n        });\n        _this.visualElement.syncRender();\n      }\n    });\n    return function () {\n      stopResizeListener();\n      stopPointerListener();\n      stopMeasureLayoutListener();\n    };\n  };\n  VisualElementDragControls.prototype.getProps = function () {\n    var props = this.visualElement.getProps();\n    var _a = props.drag,\n      drag = _a === void 0 ? false : _a,\n      _b = props.dragDirectionLock,\n      dragDirectionLock = _b === void 0 ? false : _b,\n      _c = props.dragPropagation,\n      dragPropagation = _c === void 0 ? false : _c,\n      _d = props.dragConstraints,\n      dragConstraints = _d === void 0 ? false : _d,\n      _e = props.dragElastic,\n      dragElastic = _e === void 0 ? defaultElastic : _e,\n      _f = props.dragMomentum,\n      dragMomentum = _f === void 0 ? true : _f;\n    return tslib.__assign(tslib.__assign({}, props), {\n      drag: drag,\n      dragDirectionLock: dragDirectionLock,\n      dragPropagation: dragPropagation,\n      dragConstraints: dragConstraints,\n      dragElastic: dragElastic,\n      dragMomentum: dragMomentum\n    });\n  };\n  return VisualElementDragControls;\n}();\nfunction shouldDrag(direction, drag, currentDirection) {\n  return (drag === true || drag === direction) && (currentDirection === null || currentDirection === direction);\n}\n/**\n * Based on an x/y offset determine the current drag direction. If both axis' offsets are lower\n * than the provided threshold, return `null`.\n *\n * @param offset - The x/y offset from origin.\n * @param lockThreshold - (Optional) - the minimum absolute offset before we can determine a drag direction.\n */\nfunction getCurrentDirection(offset, lockThreshold) {\n  if (lockThreshold === void 0) {\n    lockThreshold = 10;\n  }\n  var direction = null;\n  if (Math.abs(offset.y) > lockThreshold) {\n    direction = \"y\";\n  } else if (Math.abs(offset.x) > lockThreshold) {\n    direction = \"x\";\n  }\n  return direction;\n}\n\n/**\n * A hook that allows an element to be dragged.\n *\n * @internal\n */\nfunction useDrag(props) {\n  var groupDragControls = props.dragControls,\n    visualElement = props.visualElement;\n  var dragControls = useConstant(function () {\n    return new VisualElementDragControls(visualElement);\n  });\n  // If we've been provided a DragControls for manual control over the drag gesture,\n  // subscribe this component to it on mount.\n  React.useEffect(function () {\n    return groupDragControls && groupDragControls.subscribe(dragControls);\n  }, [dragControls, groupDragControls]);\n  // Apply the event listeners to the element\n  React.useEffect(function () {\n    return dragControls.addListeners();\n  }, [dragControls]);\n}\n\n/**\n *\n * @param handlers -\n * @param ref -\n *\n * @privateRemarks\n * Currently this sets new pan gesture functions every render. The memo route has been explored\n * in the past but ultimately we're still creating new functions every render. An optimisation\n * to explore is creating the pan gestures and loading them into a `ref`.\n *\n * @internal\n */\nfunction usePanGesture(_a) {\n  var onPan = _a.onPan,\n    onPanStart = _a.onPanStart,\n    onPanEnd = _a.onPanEnd,\n    onPanSessionStart = _a.onPanSessionStart,\n    visualElement = _a.visualElement;\n  var hasPanEvents = onPan || onPanStart || onPanEnd || onPanSessionStart;\n  var panSession = React.useRef(null);\n  var transformPagePoint = React.useContext(MotionConfigContext).transformPagePoint;\n  var handlers = {\n    onSessionStart: onPanSessionStart,\n    onStart: onPanStart,\n    onMove: onPan,\n    onEnd: function onEnd(event, info) {\n      panSession.current = null;\n      onPanEnd && onPanEnd(event, info);\n    }\n  };\n  React.useEffect(function () {\n    if (panSession.current !== null) {\n      panSession.current.updateHandlers(handlers);\n    }\n  });\n  function onPointerDown(event) {\n    panSession.current = new PanSession(event, handlers, {\n      transformPagePoint: transformPagePoint\n    });\n  }\n  usePointerEvent(visualElement, \"pointerdown\", hasPanEvents && onPointerDown);\n  useUnmountEffect(function () {\n    return panSession.current && panSession.current.end();\n  });\n}\nvar drag = {\n  pan: makeRenderlessComponent(usePanGesture),\n  drag: makeRenderlessComponent(useDrag)\n};\nvar names = [\"LayoutMeasure\", \"BeforeLayoutMeasure\", \"LayoutUpdate\", \"ViewportBoxUpdate\", \"Update\", \"Render\", \"AnimationComplete\", \"LayoutAnimationComplete\", \"AnimationStart\", \"LayoutAnimationStart\", \"SetAxisTarget\", \"Unmount\"];\nfunction createLifecycles() {\n  var managers = names.map(function () {\n    return new SubscriptionManager();\n  });\n  var propSubscriptions = {};\n  var lifecycles = {\n    clearAllListeners: function clearAllListeners() {\n      return managers.forEach(function (manager) {\n        return manager.clear();\n      });\n    },\n    updatePropListeners: function updatePropListeners(props) {\n      names.forEach(function (name) {\n        var _a;\n        var on = \"on\" + name;\n        var propListener = props[on];\n        // Unsubscribe existing subscription\n        (_a = propSubscriptions[name]) === null || _a === void 0 ? void 0 : _a.call(propSubscriptions);\n        // Add new subscription\n        if (propListener) {\n          propSubscriptions[name] = lifecycles[on](propListener);\n        }\n      });\n    }\n  };\n  managers.forEach(function (manager, i) {\n    lifecycles[\"on\" + names[i]] = function (handler) {\n      return manager.add(handler);\n    };\n    lifecycles[\"notify\" + names[i]] = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return manager.notify.apply(manager, tslib.__spreadArray([], tslib.__read(args), false));\n    };\n  });\n  return lifecycles;\n}\nfunction updateMotionValuesFromProps(element, next, prev) {\n  var _a;\n  for (var key in next) {\n    var nextValue = next[key];\n    var prevValue = prev[key];\n    if (isMotionValue(nextValue)) {\n      /**\n       * If this is a motion value found in props or style, we want to add it\n       * to our visual element's motion value map.\n       */\n      element.addValue(key, nextValue);\n      /**\n       * Check the version of the incoming motion value with this version\n       * and warn against mismatches.\n       */\n      if (process.env.NODE_ENV === \"development\") {\n        warnOnce(nextValue.version === \"6.5.1\", \"Attempting to mix Framer Motion versions \".concat(nextValue.version, \" with 6.5.1 may not work as expected.\"));\n      }\n    } else if (isMotionValue(prevValue)) {\n      /**\n       * If we're swapping to a new motion value, create a new motion value\n       * from that\n       */\n      element.addValue(key, motionValue(nextValue));\n    } else if (prevValue !== nextValue) {\n      /**\n       * If this is a flat value that has changed, update the motion value\n       * or create one if it doesn't exist. We only want to do this if we're\n       * not handling the value with our animation state.\n       */\n      if (element.hasValue(key)) {\n        var existingValue = element.getValue(key);\n        // TODO: Only update values that aren't being animated or even looked at\n        !existingValue.hasAnimated && existingValue.set(nextValue);\n      } else {\n        element.addValue(key, motionValue((_a = element.getStaticValue(key)) !== null && _a !== void 0 ? _a : nextValue));\n      }\n    }\n  }\n  // Handle removed values\n  for (var key in prev) {\n    if (next[key] === undefined) element.removeValue(key);\n  }\n  return next;\n}\nvar visualElement = function visualElement(_a) {\n  var _b = _a.treeType,\n    treeType = _b === void 0 ? \"\" : _b,\n    build = _a.build,\n    _getBaseTarget = _a.getBaseTarget,\n    _makeTargetAnimatable = _a.makeTargetAnimatable,\n    _measureViewportBox = _a.measureViewportBox,\n    renderInstance = _a.render,\n    readValueFromInstance = _a.readValueFromInstance,\n    removeValueFromRenderState = _a.removeValueFromRenderState,\n    _sortNodePosition = _a.sortNodePosition,\n    scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps;\n  return function (_a, options) {\n    var parent = _a.parent,\n      props = _a.props,\n      presenceId = _a.presenceId,\n      blockInitialAnimation = _a.blockInitialAnimation,\n      visualState = _a.visualState,\n      shouldReduceMotion = _a.shouldReduceMotion;\n    if (options === void 0) {\n      options = {};\n    }\n    var isMounted = false;\n    var latestValues = visualState.latestValues,\n      renderState = visualState.renderState;\n    /**\n     * The instance of the render-specific node that will be hydrated by the\n     * exposed React ref. So for example, this visual element can host a\n     * HTMLElement, plain object, or Three.js object. The functions provided\n     * in VisualElementConfig allow us to interface with this instance.\n     */\n    var instance;\n    /**\n     * Manages the subscriptions for a visual element's lifecycle, for instance\n     * onRender\n     */\n    var lifecycles = createLifecycles();\n    /**\n     * A map of all motion values attached to this visual element. Motion\n     * values are source of truth for any given animated value. A motion\n     * value might be provided externally by the component via props.\n     */\n    var values = new Map();\n    /**\n     * A map of every subscription that binds the provided or generated\n     * motion values onChange listeners to this visual element.\n     */\n    var valueSubscriptions = new Map();\n    /**\n     * A reference to the previously-provided motion values as returned\n     * from scrapeMotionValuesFromProps. We use the keys in here to determine\n     * if any motion values need to be removed after props are updated.\n     */\n    var prevMotionValues = {};\n    /**\n     * When values are removed from all animation props we need to search\n     * for a fallback value to animate to. These values are tracked in baseTarget.\n     */\n    var baseTarget = tslib.__assign({}, latestValues);\n    // Internal methods ========================\n    /**\n     * On mount, this will be hydrated with a callback to disconnect\n     * this visual element from its parent on unmount.\n     */\n    var removeFromVariantTree;\n    /**\n     * Render the element with the latest styles outside of the React\n     * render lifecycle\n     */\n    function render() {\n      if (!instance || !isMounted) return;\n      triggerBuild();\n      renderInstance(instance, renderState, props.style, element.projection);\n    }\n    function triggerBuild() {\n      build(element, renderState, latestValues, options, props);\n    }\n    function update() {\n      lifecycles.notifyUpdate(latestValues);\n    }\n    /**\n     *\n     */\n    function bindToMotionValue(key, value) {\n      var removeOnChange = value.onChange(function (latestValue) {\n        latestValues[key] = latestValue;\n        props.onUpdate && sync__default[\"default\"].update(update, false, true);\n      });\n      var removeOnRenderRequest = value.onRenderRequest(element.scheduleRender);\n      valueSubscriptions.set(key, function () {\n        removeOnChange();\n        removeOnRenderRequest();\n      });\n    }\n    /**\n     * Any motion values that are provided to the element when created\n     * aren't yet bound to the element, as this would technically be impure.\n     * However, we iterate through the motion values and set them to the\n     * initial values for this component.\n     *\n     * TODO: This is impure and we should look at changing this to run on mount.\n     * Doing so will break some tests but this isn't neccessarily a breaking change,\n     * more a reflection of the test.\n     */\n    var initialMotionValues = scrapeMotionValuesFromProps(props);\n    for (var key in initialMotionValues) {\n      var value = initialMotionValues[key];\n      if (latestValues[key] !== undefined && isMotionValue(value)) {\n        value.set(latestValues[key], false);\n      }\n    }\n    /**\n     * Determine what role this visual element should take in the variant tree.\n     */\n    var isControllingVariants = checkIfControllingVariants(props);\n    var isVariantNode = checkIfVariantNode(props);\n    var element = tslib.__assign(tslib.__assign({\n      treeType: treeType,\n      /**\n       * This is a mirror of the internal instance prop, which keeps\n       * VisualElement type-compatible with React's RefObject.\n       */\n      current: null,\n      /**\n       * The depth of this visual element within the visual element tree.\n       */\n      depth: parent ? parent.depth + 1 : 0,\n      parent: parent,\n      children: new Set(),\n      /**\n       *\n       */\n      presenceId: presenceId,\n      shouldReduceMotion: shouldReduceMotion,\n      /**\n       * If this component is part of the variant tree, it should track\n       * any children that are also part of the tree. This is essentially\n       * a shadow tree to simplify logic around how to stagger over children.\n       */\n      variantChildren: isVariantNode ? new Set() : undefined,\n      /**\n       * Whether this instance is visible. This can be changed imperatively\n       * by the projection tree, is analogous to CSS's visibility in that\n       * hidden elements should take up layout, and needs enacting by the configured\n       * render function.\n       */\n      isVisible: undefined,\n      /**\n       * Normally, if a component is controlled by a parent's variants, it can\n       * rely on that ancestor to trigger animations further down the tree.\n       * However, if a component is created after its parent is mounted, the parent\n       * won't trigger that mount animation so the child needs to.\n       *\n       * TODO: This might be better replaced with a method isParentMounted\n       */\n      manuallyAnimateOnMount: Boolean(parent === null || parent === void 0 ? void 0 : parent.isMounted()),\n      /**\n       * This can be set by AnimatePresence to force components that mount\n       * at the same time as it to mount as if they have initial={false} set.\n       */\n      blockInitialAnimation: blockInitialAnimation,\n      /**\n       * Determine whether this component has mounted yet. This is mostly used\n       * by variant children to determine whether they need to trigger their\n       * own animations on mount.\n       */\n      isMounted: function isMounted() {\n        return Boolean(instance);\n      },\n      mount: function mount(newInstance) {\n        isMounted = true;\n        instance = element.current = newInstance;\n        if (element.projection) {\n          element.projection.mount(newInstance);\n        }\n        if (isVariantNode && parent && !isControllingVariants) {\n          removeFromVariantTree = parent === null || parent === void 0 ? void 0 : parent.addVariantChild(element);\n        }\n        values.forEach(function (value, key) {\n          return bindToMotionValue(key, value);\n        });\n        parent === null || parent === void 0 ? void 0 : parent.children.add(element);\n        element.setProps(props);\n      },\n      /**\n       *\n       */\n      unmount: function unmount() {\n        var _a;\n        (_a = element.projection) === null || _a === void 0 ? void 0 : _a.unmount();\n        sync.cancelSync.update(update);\n        sync.cancelSync.render(render);\n        valueSubscriptions.forEach(function (remove) {\n          return remove();\n        });\n        removeFromVariantTree === null || removeFromVariantTree === void 0 ? void 0 : removeFromVariantTree();\n        parent === null || parent === void 0 ? void 0 : parent.children.delete(element);\n        lifecycles.clearAllListeners();\n        instance = undefined;\n        isMounted = false;\n      },\n      /**\n       * Add a child visual element to our set of children.\n       */\n      addVariantChild: function addVariantChild(child) {\n        var _a;\n        var closestVariantNode = element.getClosestVariantNode();\n        if (closestVariantNode) {\n          (_a = closestVariantNode.variantChildren) === null || _a === void 0 ? void 0 : _a.add(child);\n          return function () {\n            return closestVariantNode.variantChildren.delete(child);\n          };\n        }\n      },\n      sortNodePosition: function sortNodePosition(other) {\n        /**\n         * If these nodes aren't even of the same type we can't compare their depth.\n         */\n        if (!_sortNodePosition || treeType !== other.treeType) return 0;\n        return _sortNodePosition(element.getInstance(), other.getInstance());\n      },\n      /**\n       * Returns the closest variant node in the tree starting from\n       * this visual element.\n       */\n      getClosestVariantNode: function getClosestVariantNode() {\n        return isVariantNode ? element : parent === null || parent === void 0 ? void 0 : parent.getClosestVariantNode();\n      },\n      /**\n       * Expose the latest layoutId prop.\n       */\n      getLayoutId: function getLayoutId() {\n        return props.layoutId;\n      },\n      /**\n       * Returns the current instance.\n       */\n      getInstance: function getInstance() {\n        return instance;\n      },\n      /**\n       * Get/set the latest static values.\n       */\n      getStaticValue: function getStaticValue(key) {\n        return latestValues[key];\n      },\n      setStaticValue: function setStaticValue(key, value) {\n        return latestValues[key] = value;\n      },\n      /**\n       * Returns the latest motion value state. Currently only used to take\n       * a snapshot of the visual element - perhaps this can return the whole\n       * visual state\n       */\n      getLatestValues: function getLatestValues() {\n        return latestValues;\n      },\n      /**\n       * Set the visiblity of the visual element. If it's changed, schedule\n       * a render to reflect these changes.\n       */\n      setVisibility: function setVisibility(visibility) {\n        if (element.isVisible === visibility) return;\n        element.isVisible = visibility;\n        element.scheduleRender();\n      },\n      /**\n       * Make a target animatable by Popmotion. For instance, if we're\n       * trying to animate width from 100px to 100vw we need to measure 100vw\n       * in pixels to determine what we really need to animate to. This is also\n       * pluggable to support Framer's custom value types like Color,\n       * and CSS variables.\n       */\n      makeTargetAnimatable: function makeTargetAnimatable(target, canMutate) {\n        if (canMutate === void 0) {\n          canMutate = true;\n        }\n        return _makeTargetAnimatable(element, target, props, canMutate);\n      },\n      /**\n       * Measure the current viewport box with or without transforms.\n       * Only measures axis-aligned boxes, rotate and skew must be manually\n       * removed with a re-render to work.\n       */\n      measureViewportBox: function measureViewportBox() {\n        return _measureViewportBox(instance, props);\n      },\n      // Motion values ========================\n      /**\n       * Add a motion value and bind it to this visual element.\n       */\n      addValue: function addValue(key, value) {\n        // Remove existing value if it exists\n        if (element.hasValue(key)) element.removeValue(key);\n        values.set(key, value);\n        latestValues[key] = value.get();\n        bindToMotionValue(key, value);\n      },\n      /**\n       * Remove a motion value and unbind any active subscriptions.\n       */\n      removeValue: function removeValue(key) {\n        var _a;\n        values.delete(key);\n        (_a = valueSubscriptions.get(key)) === null || _a === void 0 ? void 0 : _a();\n        valueSubscriptions.delete(key);\n        delete latestValues[key];\n        removeValueFromRenderState(key, renderState);\n      },\n      /**\n       * Check whether we have a motion value for this key\n       */\n      hasValue: function hasValue(key) {\n        return values.has(key);\n      },\n      /**\n       * Get a motion value for this key. If called with a default\n       * value, we'll create one if none exists.\n       */\n      getValue: function getValue(key, defaultValue) {\n        var value = values.get(key);\n        if (value === undefined && defaultValue !== undefined) {\n          value = motionValue(defaultValue);\n          element.addValue(key, value);\n        }\n        return value;\n      },\n      /**\n       * Iterate over our motion values.\n       */\n      forEachValue: function forEachValue(callback) {\n        return values.forEach(callback);\n      },\n      /**\n       * If we're trying to animate to a previously unencountered value,\n       * we need to check for it in our state and as a last resort read it\n       * directly from the instance (which might have performance implications).\n       */\n      readValue: function readValue(key) {\n        var _a;\n        return (_a = latestValues[key]) !== null && _a !== void 0 ? _a : readValueFromInstance(instance, key, options);\n      },\n      /**\n       * Set the base target to later animate back to. This is currently\n       * only hydrated on creation and when we first read a value.\n       */\n      setBaseTarget: function setBaseTarget(key, value) {\n        baseTarget[key] = value;\n      },\n      /**\n       * Find the base target for a value thats been removed from all animation\n       * props.\n       */\n      getBaseTarget: function getBaseTarget(key) {\n        if (_getBaseTarget) {\n          var target = _getBaseTarget(props, key);\n          if (target !== undefined && !isMotionValue(target)) return target;\n        }\n        return baseTarget[key];\n      }\n    }, lifecycles), {\n      /**\n       * Build the renderer state based on the latest visual state.\n       */\n      build: function build() {\n        triggerBuild();\n        return renderState;\n      },\n      /**\n       * Schedule a render on the next animation frame.\n       */\n      scheduleRender: function scheduleRender() {\n        sync__default[\"default\"].render(render, false, true);\n      },\n      /**\n       * Synchronously fire render. It's prefered that we batch renders but\n       * in many circumstances, like layout measurement, we need to run this\n       * synchronously. However in those instances other measures should be taken\n       * to batch reads/writes.\n       */\n      syncRender: render,\n      /**\n       * Update the provided props. Ensure any newly-added motion values are\n       * added to our map, old ones removed, and listeners updated.\n       */\n      setProps: function setProps(newProps) {\n        if (newProps.transformTemplate || props.transformTemplate) {\n          element.scheduleRender();\n        }\n        props = newProps;\n        lifecycles.updatePropListeners(newProps);\n        prevMotionValues = updateMotionValuesFromProps(element, scrapeMotionValuesFromProps(props), prevMotionValues);\n      },\n      getProps: function getProps() {\n        return props;\n      },\n      // Variants ==============================\n      /**\n       * Returns the variant definition with a given name.\n       */\n      getVariant: function getVariant(name) {\n        var _a;\n        return (_a = props.variants) === null || _a === void 0 ? void 0 : _a[name];\n      },\n      /**\n       * Returns the defined default transition on this component.\n       */\n      getDefaultTransition: function getDefaultTransition() {\n        return props.transition;\n      },\n      getTransformPagePoint: function getTransformPagePoint() {\n        return props.transformPagePoint;\n      },\n      /**\n       * Used by child variant nodes to get the closest ancestor variant props.\n       */\n      getVariantContext: function getVariantContext(startAtParent) {\n        if (startAtParent === void 0) {\n          startAtParent = false;\n        }\n        if (startAtParent) return parent === null || parent === void 0 ? void 0 : parent.getVariantContext();\n        if (!isControllingVariants) {\n          var context_1 = (parent === null || parent === void 0 ? void 0 : parent.getVariantContext()) || {};\n          if (props.initial !== undefined) {\n            context_1.initial = props.initial;\n          }\n          return context_1;\n        }\n        var context = {};\n        for (var i = 0; i < numVariantProps; i++) {\n          var name_1 = variantProps[i];\n          var prop = props[name_1];\n          if (isVariantLabel(prop) || prop === false) {\n            context[name_1] = prop;\n          }\n        }\n        return context;\n      }\n    });\n    return element;\n  };\n};\nvar variantProps = tslib.__spreadArray([\"initial\"], tslib.__read(variantPriorityOrder), false);\nvar numVariantProps = variantProps.length;\nfunction isCSSVariable(value) {\n  return typeof value === \"string\" && value.startsWith(\"var(--\");\n}\n/**\n * Parse Framer's special CSS variable format into a CSS token and a fallback.\n *\n * ```\n * `var(--foo, #fff)` => [`--foo`, '#fff']\n * ```\n *\n * @param current\n */\nvar cssVariableRegex = /var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;\nfunction parseCSSVariable(current) {\n  var match = cssVariableRegex.exec(current);\n  if (!match) return [,];\n  var _a = tslib.__read(match, 3),\n    token = _a[1],\n    fallback = _a[2];\n  return [token, fallback];\n}\nvar maxDepth = 4;\nfunction getVariableValue(current, element, depth) {\n  if (depth === void 0) {\n    depth = 1;\n  }\n  heyListen.invariant(depth <= maxDepth, \"Max CSS variable fallback depth detected in property \\\"\".concat(current, \"\\\". This may indicate a circular fallback dependency.\"));\n  var _a = tslib.__read(parseCSSVariable(current), 2),\n    token = _a[0],\n    fallback = _a[1];\n  // No CSS variable detected\n  if (!token) return;\n  // Attempt to read this CSS variable off the element\n  var resolved = window.getComputedStyle(element).getPropertyValue(token);\n  if (resolved) {\n    return resolved.trim();\n  } else if (isCSSVariable(fallback)) {\n    // The fallback might itself be a CSS variable, in which case we attempt to resolve it too.\n    return getVariableValue(fallback, element, depth + 1);\n  } else {\n    return fallback;\n  }\n}\n/**\n * Resolve CSS variables from\n *\n * @internal\n */\nfunction resolveCSSVariables(visualElement, _a, transitionEnd) {\n  var _b;\n  var target = tslib.__rest(_a, []);\n  var element = visualElement.getInstance();\n  if (!(element instanceof Element)) return {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n  // If `transitionEnd` isn't `undefined`, clone it. We could clone `target` and `transitionEnd`\n  // only if they change but I think this reads clearer and this isn't a performance-critical path.\n  if (transitionEnd) {\n    transitionEnd = tslib.__assign({}, transitionEnd);\n  }\n  // Go through existing `MotionValue`s and ensure any existing CSS variables are resolved\n  visualElement.forEachValue(function (value) {\n    var current = value.get();\n    if (!isCSSVariable(current)) return;\n    var resolved = getVariableValue(current, element);\n    if (resolved) value.set(resolved);\n  });\n  // Cycle through every target property and resolve CSS variables. Currently\n  // we only read single-var properties like `var(--foo)`, not `calc(var(--foo) + 20px)`\n  for (var key in target) {\n    var current = target[key];\n    if (!isCSSVariable(current)) continue;\n    var resolved = getVariableValue(current, element);\n    if (!resolved) continue;\n    // Clone target if it hasn't already been\n    target[key] = resolved;\n    // If the user hasn't already set this key on `transitionEnd`, set it to the unresolved\n    // CSS variable. This will ensure that after the animation the component will reflect\n    // changes in the value of the CSS variable.\n    if (transitionEnd) (_b = transitionEnd[key]) !== null && _b !== void 0 ? _b : transitionEnd[key] = current;\n  }\n  return {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n}\nvar positionalKeys = new Set([\"width\", \"height\", \"top\", \"left\", \"right\", \"bottom\", \"x\", \"y\"]);\nvar isPositionalKey = function isPositionalKey(key) {\n  return positionalKeys.has(key);\n};\nvar hasPositionalKey = function hasPositionalKey(target) {\n  return Object.keys(target).some(isPositionalKey);\n};\nvar setAndResetVelocity = function setAndResetVelocity(value, to) {\n  // Looks odd but setting it twice doesn't render, it'll just\n  // set both prev and current to the latest value\n  value.set(to, false);\n  value.set(to);\n};\nvar isNumOrPxType = function isNumOrPxType(v) {\n  return v === styleValueTypes.number || v === styleValueTypes.px;\n};\nvar BoundingBoxDimension;\n(function (BoundingBoxDimension) {\n  BoundingBoxDimension[\"width\"] = \"width\";\n  BoundingBoxDimension[\"height\"] = \"height\";\n  BoundingBoxDimension[\"left\"] = \"left\";\n  BoundingBoxDimension[\"right\"] = \"right\";\n  BoundingBoxDimension[\"top\"] = \"top\";\n  BoundingBoxDimension[\"bottom\"] = \"bottom\";\n})(BoundingBoxDimension || (BoundingBoxDimension = {}));\nvar getPosFromMatrix = function getPosFromMatrix(matrix, pos) {\n  return parseFloat(matrix.split(\", \")[pos]);\n};\nvar getTranslateFromMatrix = function getTranslateFromMatrix(pos2, pos3) {\n  return function (_bbox, _a) {\n    var transform = _a.transform;\n    if (transform === \"none\" || !transform) return 0;\n    var matrix3d = transform.match(/^matrix3d\\((.+)\\)$/);\n    if (matrix3d) {\n      return getPosFromMatrix(matrix3d[1], pos3);\n    } else {\n      var matrix = transform.match(/^matrix\\((.+)\\)$/);\n      if (matrix) {\n        return getPosFromMatrix(matrix[1], pos2);\n      } else {\n        return 0;\n      }\n    }\n  };\n};\nvar transformKeys = new Set([\"x\", \"y\", \"z\"]);\nvar nonTranslationalTransformKeys = transformProps.filter(function (key) {\n  return !transformKeys.has(key);\n});\nfunction removeNonTranslationalTransform(visualElement) {\n  var removedTransforms = [];\n  nonTranslationalTransformKeys.forEach(function (key) {\n    var value = visualElement.getValue(key);\n    if (value !== undefined) {\n      removedTransforms.push([key, value.get()]);\n      value.set(key.startsWith(\"scale\") ? 1 : 0);\n    }\n  });\n  // Apply changes to element before measurement\n  if (removedTransforms.length) visualElement.syncRender();\n  return removedTransforms;\n}\nvar positionalValues = {\n  // Dimensions\n  width: function width(_a, _b) {\n    var x = _a.x;\n    var _c = _b.paddingLeft,\n      paddingLeft = _c === void 0 ? \"0\" : _c,\n      _d = _b.paddingRight,\n      paddingRight = _d === void 0 ? \"0\" : _d;\n    return x.max - x.min - parseFloat(paddingLeft) - parseFloat(paddingRight);\n  },\n  height: function height(_a, _b) {\n    var y = _a.y;\n    var _c = _b.paddingTop,\n      paddingTop = _c === void 0 ? \"0\" : _c,\n      _d = _b.paddingBottom,\n      paddingBottom = _d === void 0 ? \"0\" : _d;\n    return y.max - y.min - parseFloat(paddingTop) - parseFloat(paddingBottom);\n  },\n  top: function top(_bbox, _a) {\n    var top = _a.top;\n    return parseFloat(top);\n  },\n  left: function left(_bbox, _a) {\n    var left = _a.left;\n    return parseFloat(left);\n  },\n  bottom: function bottom(_a, _b) {\n    var y = _a.y;\n    var top = _b.top;\n    return parseFloat(top) + (y.max - y.min);\n  },\n  right: function right(_a, _b) {\n    var x = _a.x;\n    var left = _b.left;\n    return parseFloat(left) + (x.max - x.min);\n  },\n  // Transform\n  x: getTranslateFromMatrix(4, 13),\n  y: getTranslateFromMatrix(5, 14)\n};\nvar convertChangedValueTypes = function convertChangedValueTypes(target, visualElement, changedKeys) {\n  var originBbox = visualElement.measureViewportBox();\n  var element = visualElement.getInstance();\n  var elementComputedStyle = getComputedStyle(element);\n  var display = elementComputedStyle.display;\n  var origin = {};\n  // If the element is currently set to display: \"none\", make it visible before\n  // measuring the target bounding box\n  if (display === \"none\") {\n    visualElement.setStaticValue(\"display\", target.display || \"block\");\n  }\n  /**\n   * Record origins before we render and update styles\n   */\n  changedKeys.forEach(function (key) {\n    origin[key] = positionalValues[key](originBbox, elementComputedStyle);\n  });\n  // Apply the latest values (as set in checkAndConvertChangedValueTypes)\n  visualElement.syncRender();\n  var targetBbox = visualElement.measureViewportBox();\n  changedKeys.forEach(function (key) {\n    // Restore styles to their **calculated computed style**, not their actual\n    // originally set style. This allows us to animate between equivalent pixel units.\n    var value = visualElement.getValue(key);\n    setAndResetVelocity(value, origin[key]);\n    target[key] = positionalValues[key](targetBbox, elementComputedStyle);\n  });\n  return target;\n};\nvar checkAndConvertChangedValueTypes = function checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd) {\n  if (origin === void 0) {\n    origin = {};\n  }\n  if (transitionEnd === void 0) {\n    transitionEnd = {};\n  }\n  target = tslib.__assign({}, target);\n  transitionEnd = tslib.__assign({}, transitionEnd);\n  var targetPositionalKeys = Object.keys(target).filter(isPositionalKey);\n  // We want to remove any transform values that could affect the element's bounding box before\n  // it's measured. We'll reapply these later.\n  var removedTransformValues = [];\n  var hasAttemptedToRemoveTransformValues = false;\n  var changedValueTypeKeys = [];\n  targetPositionalKeys.forEach(function (key) {\n    var value = visualElement.getValue(key);\n    if (!visualElement.hasValue(key)) return;\n    var from = origin[key];\n    var fromType = findDimensionValueType(from);\n    var to = target[key];\n    var toType;\n    // TODO: The current implementation of this basically throws an error\n    // if you try and do value conversion via keyframes. There's probably\n    // a way of doing this but the performance implications would need greater scrutiny,\n    // as it'd be doing multiple resize-remeasure operations.\n    if (isKeyframesTarget(to)) {\n      var numKeyframes = to.length;\n      var fromIndex = to[0] === null ? 1 : 0;\n      from = to[fromIndex];\n      fromType = findDimensionValueType(from);\n      for (var i = fromIndex; i < numKeyframes; i++) {\n        if (!toType) {\n          toType = findDimensionValueType(to[i]);\n          heyListen.invariant(toType === fromType || isNumOrPxType(fromType) && isNumOrPxType(toType), \"Keyframes must be of the same dimension as the current value\");\n        } else {\n          heyListen.invariant(findDimensionValueType(to[i]) === toType, \"All keyframes must be of the same type\");\n        }\n      }\n    } else {\n      toType = findDimensionValueType(to);\n    }\n    if (fromType !== toType) {\n      // If they're both just number or px, convert them both to numbers rather than\n      // relying on resize/remeasure to convert (which is wasteful in this situation)\n      if (isNumOrPxType(fromType) && isNumOrPxType(toType)) {\n        var current = value.get();\n        if (typeof current === \"string\") {\n          value.set(parseFloat(current));\n        }\n        if (typeof to === \"string\") {\n          target[key] = parseFloat(to);\n        } else if (Array.isArray(to) && toType === styleValueTypes.px) {\n          target[key] = to.map(parseFloat);\n        }\n      } else if ((fromType === null || fromType === void 0 ? void 0 : fromType.transform) && (toType === null || toType === void 0 ? void 0 : toType.transform) && (from === 0 || to === 0)) {\n        // If one or the other value is 0, it's safe to coerce it to the\n        // type of the other without measurement\n        if (from === 0) {\n          value.set(toType.transform(from));\n        } else {\n          target[key] = fromType.transform(to);\n        }\n      } else {\n        // If we're going to do value conversion via DOM measurements, we first\n        // need to remove non-positional transform values that could affect the bbox measurements.\n        if (!hasAttemptedToRemoveTransformValues) {\n          removedTransformValues = removeNonTranslationalTransform(visualElement);\n          hasAttemptedToRemoveTransformValues = true;\n        }\n        changedValueTypeKeys.push(key);\n        transitionEnd[key] = transitionEnd[key] !== undefined ? transitionEnd[key] : target[key];\n        setAndResetVelocity(value, to);\n      }\n    }\n  });\n  if (changedValueTypeKeys.length) {\n    var scrollY_1 = changedValueTypeKeys.indexOf(\"height\") >= 0 ? window.pageYOffset : null;\n    var convertedTarget = convertChangedValueTypes(target, visualElement, changedValueTypeKeys);\n    // If we removed transform values, reapply them before the next render\n    if (removedTransformValues.length) {\n      removedTransformValues.forEach(function (_a) {\n        var _b = tslib.__read(_a, 2),\n          key = _b[0],\n          value = _b[1];\n        visualElement.getValue(key).set(value);\n      });\n    }\n    // Reapply original values\n    visualElement.syncRender();\n    // Restore scroll position\n    if (scrollY_1 !== null) window.scrollTo({\n      top: scrollY_1\n    });\n    return {\n      target: convertedTarget,\n      transitionEnd: transitionEnd\n    };\n  } else {\n    return {\n      target: target,\n      transitionEnd: transitionEnd\n    };\n  }\n};\n/**\n * Convert value types for x/y/width/height/top/left/bottom/right\n *\n * Allows animation between `'auto'` -> `'100%'` or `0` -> `'calc(50% - 10vw)'`\n *\n * @internal\n */\nfunction unitConversion(visualElement, target, origin, transitionEnd) {\n  return hasPositionalKey(target) ? checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd) : {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n}\n\n/**\n * Parse a DOM variant to make it animatable. This involves resolving CSS variables\n * and ensuring animations like \"20%\" => \"calc(50vw)\" are performed in pixels.\n */\nvar parseDomVariant = function parseDomVariant(visualElement, target, origin, transitionEnd) {\n  var resolved = resolveCSSVariables(visualElement, target, transitionEnd);\n  target = resolved.target;\n  transitionEnd = resolved.transitionEnd;\n  return unitConversion(visualElement, target, origin, transitionEnd);\n};\nfunction getComputedStyle$1(element) {\n  return window.getComputedStyle(element);\n}\nvar htmlConfig = {\n  treeType: \"dom\",\n  readValueFromInstance: function readValueFromInstance(domElement, key) {\n    if (isTransformProp(key)) {\n      var defaultType = getDefaultValueType(key);\n      return defaultType ? defaultType.default || 0 : 0;\n    } else {\n      var computedStyle = getComputedStyle$1(domElement);\n      return (isCSSVariable$1(key) ? computedStyle.getPropertyValue(key) : computedStyle[key]) || 0;\n    }\n  },\n  sortNodePosition: function sortNodePosition(a, b) {\n    /**\n     * compareDocumentPosition returns a bitmask, by using the bitwise &\n     * we're returning true if 2 in that bitmask is set to true. 2 is set\n     * to true if b preceeds a.\n     */\n    return a.compareDocumentPosition(b) & 2 ? 1 : -1;\n  },\n  getBaseTarget: function getBaseTarget(props, key) {\n    var _a;\n    return (_a = props.style) === null || _a === void 0 ? void 0 : _a[key];\n  },\n  measureViewportBox: function measureViewportBox(element, _a) {\n    var transformPagePoint = _a.transformPagePoint;\n    return _measureViewportBox2(element, transformPagePoint);\n  },\n  /**\n   * Reset the transform on the current Element. This is called as part\n   * of a batched process across the entire layout tree. To remove this write\n   * cycle it'd be interesting to see if it's possible to \"undo\" all the current\n   * layout transforms up the tree in the same way this.getBoundingBoxWithoutTransforms\n   * works\n   */\n  resetTransform: function resetTransform(element, domElement, props) {\n    var transformTemplate = props.transformTemplate;\n    domElement.style.transform = transformTemplate ? transformTemplate({}, \"\") : \"none\";\n    // Ensure that whatever happens next, we restore our transform on the next frame\n    element.scheduleRender();\n  },\n  restoreTransform: function restoreTransform(instance, mutableState) {\n    instance.style.transform = mutableState.style.transform;\n  },\n  removeValueFromRenderState: function removeValueFromRenderState(key, _a) {\n    var vars = _a.vars,\n      style = _a.style;\n    delete vars[key];\n    delete style[key];\n  },\n  /**\n   * Ensure that HTML and Framer-specific value types like `px`->`%` and `Color`\n   * can be animated by Motion.\n   */\n  makeTargetAnimatable: function makeTargetAnimatable(element, _a, _b, isMounted) {\n    var transformValues = _b.transformValues;\n    if (isMounted === void 0) {\n      isMounted = true;\n    }\n    var transition = _a.transition,\n      transitionEnd = _a.transitionEnd,\n      target = tslib.__rest(_a, [\"transition\", \"transitionEnd\"]);\n    var origin = getOrigin(target, transition || {}, element);\n    /**\n     * If Framer has provided a function to convert `Color` etc value types, convert them\n     */\n    if (transformValues) {\n      if (transitionEnd) transitionEnd = transformValues(transitionEnd);\n      if (target) target = transformValues(target);\n      if (origin) origin = transformValues(origin);\n    }\n    if (isMounted) {\n      checkTargetForNewValues(element, target, origin);\n      var parsed = parseDomVariant(element, target, origin, transitionEnd);\n      transitionEnd = parsed.transitionEnd;\n      target = parsed.target;\n    }\n    return tslib.__assign({\n      transition: transition,\n      transitionEnd: transitionEnd\n    }, target);\n  },\n  scrapeMotionValuesFromProps: scrapeMotionValuesFromProps$1,\n  build: function build(element, renderState, latestValues, options, props) {\n    if (element.isVisible !== undefined) {\n      renderState.style.visibility = element.isVisible ? \"visible\" : \"hidden\";\n    }\n    buildHTMLStyles(renderState, latestValues, options, props.transformTemplate);\n  },\n  render: renderHTML\n};\nvar htmlVisualElement = visualElement(htmlConfig);\nvar svgVisualElement = visualElement(tslib.__assign(tslib.__assign({}, htmlConfig), {\n  getBaseTarget: function getBaseTarget(props, key) {\n    return props[key];\n  },\n  readValueFromInstance: function readValueFromInstance(domElement, key) {\n    var _a;\n    if (isTransformProp(key)) {\n      return ((_a = getDefaultValueType(key)) === null || _a === void 0 ? void 0 : _a.default) || 0;\n    }\n    key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n    return domElement.getAttribute(key);\n  },\n  scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n  build: function build(_element, renderState, latestValues, options, props) {\n    buildSVGAttrs(renderState, latestValues, options, props.transformTemplate);\n  },\n  render: renderSVG\n}));\nvar createDomVisualElement = function createDomVisualElement(Component, options) {\n  return isSVGComponent(Component) ? svgVisualElement(options, {\n    enableHardwareAcceleration: false\n  }) : htmlVisualElement(options, {\n    enableHardwareAcceleration: true\n  });\n};\nfunction pixelsToPercent(pixels, axis) {\n  if (axis.max === axis.min) return 0;\n  return pixels / (axis.max - axis.min) * 100;\n}\n/**\n * We always correct borderRadius as a percentage rather than pixels to reduce paints.\n * For example, if you are projecting a box that is 100px wide with a 10px borderRadius\n * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%\n * borderRadius in both states. If we animate between the two in pixels that will trigger\n * a paint each time. If we animate between the two in percentage we'll avoid a paint.\n */\nvar correctBorderRadius = {\n  correct: function correct(latest, node) {\n    if (!node.target) return latest;\n    /**\n     * If latest is a string, if it's a percentage we can return immediately as it's\n     * going to be stretched appropriately. Otherwise, if it's a pixel, convert it to a number.\n     */\n    if (typeof latest === \"string\") {\n      if (styleValueTypes.px.test(latest)) {\n        latest = parseFloat(latest);\n      } else {\n        return latest;\n      }\n    }\n    /**\n     * If latest is a number, it's a pixel value. We use the current viewportBox to calculate that\n     * pixel value as a percentage of each axis\n     */\n    var x = pixelsToPercent(latest, node.target.x);\n    var y = pixelsToPercent(latest, node.target.y);\n    return \"\".concat(x, \"% \").concat(y, \"%\");\n  }\n};\nvar varToken = \"_$css\";\nvar correctBoxShadow = {\n  correct: function correct(latest, _a) {\n    var treeScale = _a.treeScale,\n      projectionDelta = _a.projectionDelta;\n    var original = latest;\n    /**\n     * We need to first strip and store CSS variables from the string.\n     */\n    var containsCSSVariables = latest.includes(\"var(\");\n    var cssVariables = [];\n    if (containsCSSVariables) {\n      latest = latest.replace(cssVariableRegex, function (match) {\n        cssVariables.push(match);\n        return varToken;\n      });\n    }\n    var shadow = styleValueTypes.complex.parse(latest);\n    // TODO: Doesn't support multiple shadows\n    if (shadow.length > 5) return original;\n    var template = styleValueTypes.complex.createTransformer(latest);\n    var offset = typeof shadow[0] !== \"number\" ? 1 : 0;\n    // Calculate the overall context scale\n    var xScale = projectionDelta.x.scale * treeScale.x;\n    var yScale = projectionDelta.y.scale * treeScale.y;\n    shadow[0 + offset] /= xScale;\n    shadow[1 + offset] /= yScale;\n    /**\n     * Ideally we'd correct x and y scales individually, but because blur and\n     * spread apply to both we have to take a scale average and apply that instead.\n     * We could potentially improve the outcome of this by incorporating the ratio between\n     * the two scales.\n     */\n    var averageScale = popmotion.mix(xScale, yScale, 0.5);\n    // Blur\n    if (typeof shadow[2 + offset] === \"number\") shadow[2 + offset] /= averageScale;\n    // Spread\n    if (typeof shadow[3 + offset] === \"number\") shadow[3 + offset] /= averageScale;\n    var output = template(shadow);\n    if (containsCSSVariables) {\n      var i_1 = 0;\n      output = output.replace(varToken, function () {\n        var cssVariable = cssVariables[i_1];\n        i_1++;\n        return cssVariable;\n      });\n    }\n    return output;\n  }\n};\nvar MeasureLayoutWithContext = /** @class */function (_super) {\n  tslib.__extends(MeasureLayoutWithContext, _super);\n  function MeasureLayoutWithContext() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * This only mounts projection nodes for components that\n   * need measuring, we might want to do it for all components\n   * in order to incorporate transforms\n   */\n  MeasureLayoutWithContext.prototype.componentDidMount = function () {\n    var _this = this;\n    var _a = this.props,\n      visualElement = _a.visualElement,\n      layoutGroup = _a.layoutGroup,\n      switchLayoutGroup = _a.switchLayoutGroup,\n      layoutId = _a.layoutId;\n    var projection = visualElement.projection;\n    addScaleCorrector(defaultScaleCorrectors);\n    if (projection) {\n      if (layoutGroup === null || layoutGroup === void 0 ? void 0 : layoutGroup.group) layoutGroup.group.add(projection);\n      if ((switchLayoutGroup === null || switchLayoutGroup === void 0 ? void 0 : switchLayoutGroup.register) && layoutId) {\n        switchLayoutGroup.register(projection);\n      }\n      projection.root.didUpdate();\n      projection.addEventListener(\"animationComplete\", function () {\n        _this.safeToRemove();\n      });\n      projection.setOptions(tslib.__assign(tslib.__assign({}, projection.options), {\n        onExitComplete: function onExitComplete() {\n          return _this.safeToRemove();\n        }\n      }));\n    }\n    globalProjectionState.hasEverUpdated = true;\n  };\n  MeasureLayoutWithContext.prototype.getSnapshotBeforeUpdate = function (prevProps) {\n    var _this = this;\n    var _a = this.props,\n      layoutDependency = _a.layoutDependency,\n      visualElement = _a.visualElement,\n      drag = _a.drag,\n      isPresent = _a.isPresent;\n    var projection = visualElement.projection;\n    if (!projection) return null;\n    /**\n     * TODO: We use this data in relegate to determine whether to\n     * promote a previous element. There's no guarantee its presence data\n     * will have updated by this point - if a bug like this arises it will\n     * have to be that we markForRelegation and then find a new lead some other way,\n     * perhaps in didUpdate\n     */\n    projection.isPresent = isPresent;\n    if (drag || prevProps.layoutDependency !== layoutDependency || layoutDependency === undefined) {\n      projection.willUpdate();\n    } else {\n      this.safeToRemove();\n    }\n    if (prevProps.isPresent !== isPresent) {\n      if (isPresent) {\n        projection.promote();\n      } else if (!projection.relegate()) {\n        /**\n         * If there's another stack member taking over from this one,\n         * it's in charge of the exit animation and therefore should\n         * be in charge of the safe to remove. Otherwise we call it here.\n         */\n        sync__default[\"default\"].postRender(function () {\n          var _a;\n          if (!((_a = projection.getStack()) === null || _a === void 0 ? void 0 : _a.members.length)) {\n            _this.safeToRemove();\n          }\n        });\n      }\n    }\n    return null;\n  };\n  MeasureLayoutWithContext.prototype.componentDidUpdate = function () {\n    var projection = this.props.visualElement.projection;\n    if (projection) {\n      projection.root.didUpdate();\n      if (!projection.currentAnimation && projection.isLead()) {\n        this.safeToRemove();\n      }\n    }\n  };\n  MeasureLayoutWithContext.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n      visualElement = _a.visualElement,\n      layoutGroup = _a.layoutGroup,\n      promoteContext = _a.switchLayoutGroup;\n    var projection = visualElement.projection;\n    if (projection) {\n      projection.scheduleCheckAfterUnmount();\n      if (layoutGroup === null || layoutGroup === void 0 ? void 0 : layoutGroup.group) layoutGroup.group.remove(projection);\n      if (promoteContext === null || promoteContext === void 0 ? void 0 : promoteContext.deregister) promoteContext.deregister(projection);\n    }\n  };\n  MeasureLayoutWithContext.prototype.safeToRemove = function () {\n    var safeToRemove = this.props.safeToRemove;\n    safeToRemove === null || safeToRemove === void 0 ? void 0 : safeToRemove();\n  };\n  MeasureLayoutWithContext.prototype.render = function () {\n    return null;\n  };\n  return MeasureLayoutWithContext;\n}(React__default[\"default\"].Component);\nfunction MeasureLayout(props) {\n  var _a = tslib.__read(usePresence(), 2),\n    isPresent = _a[0],\n    safeToRemove = _a[1];\n  var layoutGroup = React.useContext(LayoutGroupContext);\n  return React__default[\"default\"].createElement(MeasureLayoutWithContext, tslib.__assign({}, props, {\n    layoutGroup: layoutGroup,\n    switchLayoutGroup: React.useContext(SwitchLayoutGroupContext),\n    isPresent: isPresent,\n    safeToRemove: safeToRemove\n  }));\n}\nvar defaultScaleCorrectors = {\n  borderRadius: tslib.__assign(tslib.__assign({}, correctBorderRadius), {\n    applyTo: [\"borderTopLeftRadius\", \"borderTopRightRadius\", \"borderBottomLeftRadius\", \"borderBottomRightRadius\"]\n  }),\n  borderTopLeftRadius: correctBorderRadius,\n  borderTopRightRadius: correctBorderRadius,\n  borderBottomLeftRadius: correctBorderRadius,\n  borderBottomRightRadius: correctBorderRadius,\n  boxShadow: correctBoxShadow\n};\nvar layoutFeatures = {\n  measureLayout: MeasureLayout\n};\n\n/**\n * Animate a single value or a `MotionValue`.\n *\n * The first argument is either a `MotionValue` to animate, or an initial animation value.\n *\n * The second is either a value to animate to, or an array of keyframes to animate through.\n *\n * The third argument can be either tween or spring options, and optional lifecycle methods: `onUpdate`, `onPlay`, `onComplete`, `onRepeat` and `onStop`.\n *\n * Returns `AnimationPlaybackControls`, currently just a `stop` method.\n *\n * ```javascript\n * const x = useMotionValue(0)\n *\n * useEffect(() => {\n *   const controls = animate(x, 100, {\n *     type: \"spring\",\n *     stiffness: 2000,\n *     onComplete: v => {}\n *   })\n *\n *   return controls.stop\n * })\n * ```\n *\n * @public\n */\nfunction animate(from, to, transition) {\n  if (transition === void 0) {\n    transition = {};\n  }\n  var value = isMotionValue(from) ? from : motionValue(from);\n  startAnimation(\"\", value, to, transition);\n  return {\n    stop: function stop() {\n      return value.stop();\n    },\n    isAnimating: function isAnimating() {\n      return value.isAnimating();\n    }\n  };\n}\nvar borders = [\"TopLeft\", \"TopRight\", \"BottomLeft\", \"BottomRight\"];\nvar numBorders = borders.length;\nvar asNumber = function asNumber(value) {\n  return typeof value === \"string\" ? parseFloat(value) : value;\n};\nvar isPx = function isPx(value) {\n  return typeof value === \"number\" || styleValueTypes.px.test(value);\n};\nfunction mixValues(target, follow, lead, progress, shouldCrossfadeOpacity, isOnlyMember) {\n  var _a, _b, _c, _d;\n  if (shouldCrossfadeOpacity) {\n    target.opacity = popmotion.mix(0,\n    // (follow?.opacity as number) ?? 0,\n    // TODO Reinstate this if only child\n    (_a = lead.opacity) !== null && _a !== void 0 ? _a : 1, easeCrossfadeIn(progress));\n    target.opacityExit = popmotion.mix((_b = follow.opacity) !== null && _b !== void 0 ? _b : 1, 0, easeCrossfadeOut(progress));\n  } else if (isOnlyMember) {\n    target.opacity = popmotion.mix((_c = follow.opacity) !== null && _c !== void 0 ? _c : 1, (_d = lead.opacity) !== null && _d !== void 0 ? _d : 1, progress);\n  }\n  /**\n   * Mix border radius\n   */\n  for (var i = 0; i < numBorders; i++) {\n    var borderLabel = \"border\".concat(borders[i], \"Radius\");\n    var followRadius = getRadius(follow, borderLabel);\n    var leadRadius = getRadius(lead, borderLabel);\n    if (followRadius === undefined && leadRadius === undefined) continue;\n    followRadius || (followRadius = 0);\n    leadRadius || (leadRadius = 0);\n    var canMix = followRadius === 0 || leadRadius === 0 || isPx(followRadius) === isPx(leadRadius);\n    if (canMix) {\n      target[borderLabel] = Math.max(popmotion.mix(asNumber(followRadius), asNumber(leadRadius), progress), 0);\n      if (styleValueTypes.percent.test(leadRadius) || styleValueTypes.percent.test(followRadius)) {\n        target[borderLabel] += \"%\";\n      }\n    } else {\n      target[borderLabel] = leadRadius;\n    }\n  }\n  /**\n   * Mix rotation\n   */\n  if (follow.rotate || lead.rotate) {\n    target.rotate = popmotion.mix(follow.rotate || 0, lead.rotate || 0, progress);\n  }\n}\nfunction getRadius(values, radiusName) {\n  var _a;\n  return (_a = values[radiusName]) !== null && _a !== void 0 ? _a : values.borderRadius;\n}\n// /**\n//  * We only want to mix the background color if there's a follow element\n//  * that we're not crossfading opacity between. For instance with switch\n//  * AnimateSharedLayout animations, this helps the illusion of a continuous\n//  * element being animated but also cuts down on the number of paints triggered\n//  * for elements where opacity is doing that work for us.\n//  */\n// if (\n//     !hasFollowElement &&\n//     latestLeadValues.backgroundColor &&\n//     latestFollowValues.backgroundColor\n// ) {\n//     /**\n//      * This isn't ideal performance-wise as mixColor is creating a new function every frame.\n//      * We could probably create a mixer that runs at the start of the animation but\n//      * the idea behind the crossfader is that it runs dynamically between two potentially\n//      * changing targets (ie opacity or borderRadius may be animating independently via variants)\n//      */\n//     leadState.backgroundColor = followState.backgroundColor = mixColor(\n//         latestFollowValues.backgroundColor as string,\n//         latestLeadValues.backgroundColor as string\n//     )(p)\n// }\nvar easeCrossfadeIn = compress(0, 0.5, popmotion.circOut);\nvar easeCrossfadeOut = compress(0.5, 0.95, popmotion.linear);\nfunction compress(min, max, easing) {\n  return function (p) {\n    // Could replace ifs with clamp\n    if (p < min) return 0;\n    if (p > max) return 1;\n    return easing(popmotion.progress(min, max, p));\n  };\n}\n\n/**\n * Reset an axis to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction copyAxisInto(axis, originAxis) {\n  axis.min = originAxis.min;\n  axis.max = originAxis.max;\n}\n/**\n * Reset a box to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction copyBoxInto(box, originBox) {\n  copyAxisInto(box.x, originBox.x);\n  copyAxisInto(box.y, originBox.y);\n}\n\n/**\n * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse\n */\nfunction removePointDelta(point, translate, scale, originPoint, boxScale) {\n  point -= translate;\n  point = scalePoint(point, 1 / scale, originPoint);\n  if (boxScale !== undefined) {\n    point = scalePoint(point, 1 / boxScale, originPoint);\n  }\n  return point;\n}\n/**\n * Remove a delta from an axis. This is essentially the steps of applyAxisDelta in reverse\n */\nfunction removeAxisDelta(axis, translate, scale, origin, boxScale, originAxis, sourceAxis) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n  if (scale === void 0) {\n    scale = 1;\n  }\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n  if (originAxis === void 0) {\n    originAxis = axis;\n  }\n  if (sourceAxis === void 0) {\n    sourceAxis = axis;\n  }\n  if (styleValueTypes.percent.test(translate)) {\n    translate = parseFloat(translate);\n    var relativeProgress = popmotion.mix(sourceAxis.min, sourceAxis.max, translate / 100);\n    translate = relativeProgress - sourceAxis.min;\n  }\n  if (typeof translate !== \"number\") return;\n  var originPoint = popmotion.mix(originAxis.min, originAxis.max, origin);\n  if (axis === originAxis) originPoint -= translate;\n  axis.min = removePointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = removePointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeAxisTransforms(axis, transforms, _a, origin, sourceAxis) {\n  var _b = tslib.__read(_a, 3),\n    key = _b[0],\n    scaleKey = _b[1],\n    originKey = _b[2];\n  removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale, origin, sourceAxis);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\nvar xKeys = [\"x\", \"scaleX\", \"originX\"];\nvar yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Remove a transforms from an box. This is essentially the steps of applyAxisBox in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeBoxTransforms(box, transforms, originBox, sourceBox) {\n  removeAxisTransforms(box.x, transforms, xKeys, originBox === null || originBox === void 0 ? void 0 : originBox.x, sourceBox === null || sourceBox === void 0 ? void 0 : sourceBox.x);\n  removeAxisTransforms(box.y, transforms, yKeys, originBox === null || originBox === void 0 ? void 0 : originBox.y, sourceBox === null || sourceBox === void 0 ? void 0 : sourceBox.y);\n}\nfunction isAxisDeltaZero(delta) {\n  return delta.translate === 0 && delta.scale === 1;\n}\nfunction isDeltaZero(delta) {\n  return isAxisDeltaZero(delta.x) && isAxisDeltaZero(delta.y);\n}\nfunction boxEquals(a, b) {\n  return a.x.min === b.x.min && a.x.max === b.x.max && a.y.min === b.y.min && a.y.max === b.y.max;\n}\nvar NodeStack = /** @class */function () {\n  function NodeStack() {\n    this.members = [];\n  }\n  NodeStack.prototype.add = function (node) {\n    addUniqueItem(this.members, node);\n    node.scheduleRender();\n  };\n  NodeStack.prototype.remove = function (node) {\n    removeItem(this.members, node);\n    if (node === this.prevLead) {\n      this.prevLead = undefined;\n    }\n    if (node === this.lead) {\n      var prevLead = this.members[this.members.length - 1];\n      if (prevLead) {\n        this.promote(prevLead);\n      }\n    }\n  };\n  NodeStack.prototype.relegate = function (node) {\n    var indexOfNode = this.members.findIndex(function (member) {\n      return node === member;\n    });\n    if (indexOfNode === 0) return false;\n    /**\n     * Find the next projection node that is present\n     */\n    var prevLead;\n    for (var i = indexOfNode; i >= 0; i--) {\n      var member = this.members[i];\n      if (member.isPresent !== false) {\n        prevLead = member;\n        break;\n      }\n    }\n    if (prevLead) {\n      this.promote(prevLead);\n      return true;\n    } else {\n      return false;\n    }\n  };\n  NodeStack.prototype.promote = function (node, preserveFollowOpacity) {\n    var _a;\n    var prevLead = this.lead;\n    if (node === prevLead) return;\n    this.prevLead = prevLead;\n    this.lead = node;\n    node.show();\n    if (prevLead) {\n      prevLead.instance && prevLead.scheduleRender();\n      node.scheduleRender();\n      node.resumeFrom = prevLead;\n      if (preserveFollowOpacity) {\n        node.resumeFrom.preserveOpacity = true;\n      }\n      if (prevLead.snapshot) {\n        node.snapshot = prevLead.snapshot;\n        node.snapshot.latestValues = prevLead.animationValues || prevLead.latestValues;\n        node.snapshot.isShared = true;\n      }\n      if ((_a = node.root) === null || _a === void 0 ? void 0 : _a.isUpdating) {\n        node.isLayoutDirty = true;\n      }\n      var crossfade = node.options.crossfade;\n      if (crossfade === false) {\n        prevLead.hide();\n      }\n      /**\n       * TODO:\n       *   - Test border radius when previous node was deleted\n       *   - boxShadow mixing\n       *   - Shared between element A in scrolled container and element B (scroll stays the same or changes)\n       *   - Shared between element A in transformed container and element B (transform stays the same or changes)\n       *   - Shared between element A in scrolled page and element B (scroll stays the same or changes)\n       * ---\n       *   - Crossfade opacity of root nodes\n       *   - layoutId changes after animation\n       *   - layoutId changes mid animation\n       */\n    }\n  };\n\n  NodeStack.prototype.exitAnimationComplete = function () {\n    this.members.forEach(function (node) {\n      var _a, _b, _c, _d, _e;\n      (_b = (_a = node.options).onExitComplete) === null || _b === void 0 ? void 0 : _b.call(_a);\n      (_e = (_c = node.resumingFrom) === null || _c === void 0 ? void 0 : (_d = _c.options).onExitComplete) === null || _e === void 0 ? void 0 : _e.call(_d);\n    });\n  };\n  NodeStack.prototype.scheduleRender = function () {\n    this.members.forEach(function (node) {\n      node.instance && node.scheduleRender(false);\n    });\n  };\n  /**\n   * Clear any leads that have been removed this render to prevent them from being\n   * used in future animations and to prevent memory leaks\n   */\n  NodeStack.prototype.removeLeadSnapshot = function () {\n    if (this.lead && this.lead.snapshot) {\n      this.lead.snapshot = undefined;\n    }\n  };\n  return NodeStack;\n}();\nvar identityProjection = \"translate3d(0px, 0px, 0) scale(1, 1) scale(1, 1)\";\nfunction buildProjectionTransform(delta, treeScale, latestTransform) {\n  /**\n   * The translations we use to calculate are always relative to the viewport coordinate space.\n   * But when we apply scales, we also scale the coordinate space of an element and its children.\n   * For instance if we have a treeScale (the culmination of all parent scales) of 0.5 and we need\n   * to move an element 100 pixels, we actually need to move it 200 in within that scaled space.\n   */\n  var xTranslate = delta.x.translate / treeScale.x;\n  var yTranslate = delta.y.translate / treeScale.y;\n  var transform = \"translate3d(\".concat(xTranslate, \"px, \").concat(yTranslate, \"px, 0) \");\n  /**\n   * Apply scale correction for the tree transform.\n   * This will apply scale to the screen-orientated axes.\n   */\n  transform += \"scale(\".concat(1 / treeScale.x, \", \").concat(1 / treeScale.y, \") \");\n  if (latestTransform) {\n    var rotate = latestTransform.rotate,\n      rotateX = latestTransform.rotateX,\n      rotateY = latestTransform.rotateY;\n    if (rotate) transform += \"rotate(\".concat(rotate, \"deg) \");\n    if (rotateX) transform += \"rotateX(\".concat(rotateX, \"deg) \");\n    if (rotateY) transform += \"rotateY(\".concat(rotateY, \"deg) \");\n  }\n  /**\n   * Apply scale to match the size of the element to the size we want it.\n   * This will apply scale to the element-orientated axes.\n   */\n  var elementScaleX = delta.x.scale * treeScale.x;\n  var elementScaleY = delta.y.scale * treeScale.y;\n  transform += \"scale(\".concat(elementScaleX, \", \").concat(elementScaleY, \")\");\n  return transform === identityProjection ? \"none\" : transform;\n}\nvar compareByDepth = function compareByDepth(a, b) {\n  return a.depth - b.depth;\n};\nvar FlatTree = /** @class */function () {\n  function FlatTree() {\n    this.children = [];\n    this.isDirty = false;\n  }\n  FlatTree.prototype.add = function (child) {\n    addUniqueItem(this.children, child);\n    this.isDirty = true;\n  };\n  FlatTree.prototype.remove = function (child) {\n    removeItem(this.children, child);\n    this.isDirty = true;\n  };\n  FlatTree.prototype.forEach = function (callback) {\n    this.isDirty && this.children.sort(compareByDepth);\n    this.isDirty = false;\n    this.children.forEach(callback);\n  };\n  return FlatTree;\n}();\n\n/**\n * We use 1000 as the animation target as 0-1000 maps better to pixels than 0-1\n * which has a noticeable difference in spring animations\n */\nvar animationTarget = 1000;\nfunction createProjectionNode(_a) {\n  var attachResizeListener = _a.attachResizeListener,\n    defaultParent = _a.defaultParent,\n    measureScroll = _a.measureScroll,\n    checkIsScrollRoot = _a.checkIsScrollRoot,\n    resetTransform = _a.resetTransform;\n  return (/** @class */function () {\n      function ProjectionNode(id, latestValues, parent) {\n        var _this = this;\n        if (latestValues === void 0) {\n          latestValues = {};\n        }\n        if (parent === void 0) {\n          parent = defaultParent === null || defaultParent === void 0 ? void 0 : defaultParent();\n        }\n        /**\n         * A Set containing all this component's children. This is used to iterate\n         * through the children.\n         *\n         * TODO: This could be faster to iterate as a flat array stored on the root node.\n         */\n        this.children = new Set();\n        /**\n         * Options for the node. We use this to configure what kind of layout animations\n         * we should perform (if any).\n         */\n        this.options = {};\n        /**\n         * We use this to detect when its safe to shut down part of a projection tree.\n         * We have to keep projecting children for scale correction and relative projection\n         * until all their parents stop performing layout animations.\n         */\n        this.isTreeAnimating = false;\n        this.isAnimationBlocked = false;\n        /**\n         * Flag to true if we think this layout has been changed. We can't always know this,\n         * currently we set it to true every time a component renders, or if it has a layoutDependency\n         * if that has changed between renders. Additionally, components can be grouped by LayoutGroup\n         * and if one node is dirtied, they all are.\n         */\n        this.isLayoutDirty = false;\n        /**\n         * Block layout updates for instant layout transitions throughout the tree.\n         */\n        this.updateManuallyBlocked = false;\n        this.updateBlockedByResize = false;\n        /**\n         * Set to true between the start of the first `willUpdate` call and the end of the `didUpdate`\n         * call.\n         */\n        this.isUpdating = false;\n        /**\n         * If this is an SVG element we currently disable projection transforms\n         */\n        this.isSVG = false;\n        /**\n         * Flag to true (during promotion) if a node doing an instant layout transition needs to reset\n         * its projection styles.\n         */\n        this.needsReset = false;\n        /**\n         * Flags whether this node should have its transform reset prior to measuring.\n         */\n        this.shouldResetTransform = false;\n        /**\n         * An object representing the calculated contextual/accumulated/tree scale.\n         * This will be used to scale calculcated projection transforms, as these are\n         * calculated in screen-space but need to be scaled for elements to actually\n         * make it to their calculated destinations.\n         *\n         * TODO: Lazy-init\n         */\n        this.treeScale = {\n          x: 1,\n          y: 1\n        };\n        /**\n         *\n         */\n        this.eventHandlers = new Map();\n        // Note: Currently only running on root node\n        this.potentialNodes = new Map();\n        this.checkUpdateFailed = function () {\n          if (_this.isUpdating) {\n            _this.isUpdating = false;\n            _this.clearAllSnapshots();\n          }\n        };\n        this.updateProjection = function () {\n          _this.nodes.forEach(resolveTargetDelta);\n          _this.nodes.forEach(calcProjection);\n        };\n        this.hasProjected = false;\n        this.isVisible = true;\n        this.animationProgress = 0;\n        /**\n         * Shared layout\n         */\n        // TODO Only running on root node\n        this.sharedNodes = new Map();\n        this.id = id;\n        this.latestValues = latestValues;\n        this.root = parent ? parent.root || parent : this;\n        this.path = parent ? tslib.__spreadArray(tslib.__spreadArray([], tslib.__read(parent.path), false), [parent], false) : [];\n        this.parent = parent;\n        this.depth = parent ? parent.depth + 1 : 0;\n        id && this.root.registerPotentialNode(id, this);\n        for (var i = 0; i < this.path.length; i++) {\n          this.path[i].shouldResetTransform = true;\n        }\n        if (this.root === this) this.nodes = new FlatTree();\n      }\n      ProjectionNode.prototype.addEventListener = function (name, handler) {\n        if (!this.eventHandlers.has(name)) {\n          this.eventHandlers.set(name, new SubscriptionManager());\n        }\n        return this.eventHandlers.get(name).add(handler);\n      };\n      ProjectionNode.prototype.notifyListeners = function (name) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          args[_i - 1] = arguments[_i];\n        }\n        var subscriptionManager = this.eventHandlers.get(name);\n        subscriptionManager === null || subscriptionManager === void 0 ? void 0 : subscriptionManager.notify.apply(subscriptionManager, tslib.__spreadArray([], tslib.__read(args), false));\n      };\n      ProjectionNode.prototype.hasListeners = function (name) {\n        return this.eventHandlers.has(name);\n      };\n      ProjectionNode.prototype.registerPotentialNode = function (id, node) {\n        this.potentialNodes.set(id, node);\n      };\n      /**\n       * Lifecycles\n       */\n      ProjectionNode.prototype.mount = function (instance, isLayoutDirty) {\n        var _this = this;\n        var _a;\n        if (isLayoutDirty === void 0) {\n          isLayoutDirty = false;\n        }\n        if (this.instance) return;\n        this.isSVG = instance instanceof SVGElement && instance.tagName !== \"svg\";\n        this.instance = instance;\n        var _b = this.options,\n          layoutId = _b.layoutId,\n          layout = _b.layout,\n          visualElement = _b.visualElement;\n        if (visualElement && !visualElement.getInstance()) {\n          visualElement.mount(instance);\n        }\n        this.root.nodes.add(this);\n        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.children.add(this);\n        this.id && this.root.potentialNodes.delete(this.id);\n        if (isLayoutDirty && (layout || layoutId)) {\n          this.isLayoutDirty = true;\n        }\n        if (attachResizeListener) {\n          var unblockTimeout_1;\n          var resizeUnblockUpdate_1 = function resizeUnblockUpdate_1() {\n            return _this.root.updateBlockedByResize = false;\n          };\n          attachResizeListener(instance, function () {\n            _this.root.updateBlockedByResize = true;\n            clearTimeout(unblockTimeout_1);\n            unblockTimeout_1 = window.setTimeout(resizeUnblockUpdate_1, 250);\n            if (globalProjectionState.hasAnimatedSinceResize) {\n              globalProjectionState.hasAnimatedSinceResize = false;\n              _this.nodes.forEach(finishAnimation);\n            }\n          });\n        }\n        if (layoutId) {\n          this.root.registerSharedNode(layoutId, this);\n        }\n        // Only register the handler if it requires layout animation\n        if (this.options.animate !== false && visualElement && (layoutId || layout)) {\n          this.addEventListener(\"didUpdate\", function (_a) {\n            var _b, _c, _d, _e, _f;\n            var delta = _a.delta,\n              hasLayoutChanged = _a.hasLayoutChanged,\n              hasRelativeTargetChanged = _a.hasRelativeTargetChanged,\n              newLayout = _a.layout;\n            if (_this.isTreeAnimationBlocked()) {\n              _this.target = undefined;\n              _this.relativeTarget = undefined;\n              return;\n            }\n            // TODO: Check here if an animation exists\n            var layoutTransition = (_c = (_b = _this.options.transition) !== null && _b !== void 0 ? _b : visualElement.getDefaultTransition()) !== null && _c !== void 0 ? _c : defaultLayoutTransition;\n            var _g = visualElement.getProps(),\n              onLayoutAnimationStart = _g.onLayoutAnimationStart,\n              onLayoutAnimationComplete = _g.onLayoutAnimationComplete;\n            /**\n             * The target layout of the element might stay the same,\n             * but its position relative to its parent has changed.\n             */\n            var targetChanged = !_this.targetLayout || !boxEquals(_this.targetLayout, newLayout) || hasRelativeTargetChanged;\n            /**\n             * If the layout hasn't seemed to have changed, it might be that the\n             * element is visually in the same place in the document but its position\n             * relative to its parent has indeed changed. So here we check for that.\n             */\n            var hasOnlyRelativeTargetChanged = !hasLayoutChanged && hasRelativeTargetChanged;\n            if (((_d = _this.resumeFrom) === null || _d === void 0 ? void 0 : _d.instance) || hasOnlyRelativeTargetChanged || hasLayoutChanged && (targetChanged || !_this.currentAnimation)) {\n              if (_this.resumeFrom) {\n                _this.resumingFrom = _this.resumeFrom;\n                _this.resumingFrom.resumingFrom = undefined;\n              }\n              _this.setAnimationOrigin(delta, hasOnlyRelativeTargetChanged);\n              var animationOptions = tslib.__assign(tslib.__assign({}, getValueTransition(layoutTransition, \"layout\")), {\n                onPlay: onLayoutAnimationStart,\n                onComplete: onLayoutAnimationComplete\n              });\n              if (visualElement.shouldReduceMotion) {\n                animationOptions.delay = 0;\n                animationOptions.type = false;\n              }\n              _this.startAnimation(animationOptions);\n            } else {\n              /**\n               * If the layout hasn't changed and we have an animation that hasn't started yet,\n               * finish it immediately. Otherwise it will be animating from a location\n               * that was probably never commited to screen and look like a jumpy box.\n               */\n              if (!hasLayoutChanged && _this.animationProgress === 0) {\n                _this.finishAnimation();\n              }\n              _this.isLead() && ((_f = (_e = _this.options).onExitComplete) === null || _f === void 0 ? void 0 : _f.call(_e));\n            }\n            _this.targetLayout = newLayout;\n          });\n        }\n      };\n      ProjectionNode.prototype.unmount = function () {\n        var _a, _b;\n        this.options.layoutId && this.willUpdate();\n        this.root.nodes.remove(this);\n        (_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.remove(this);\n        (_b = this.parent) === null || _b === void 0 ? void 0 : _b.children.delete(this);\n        this.instance = undefined;\n        sync.cancelSync.preRender(this.updateProjection);\n      };\n      // only on the root\n      ProjectionNode.prototype.blockUpdate = function () {\n        this.updateManuallyBlocked = true;\n      };\n      ProjectionNode.prototype.unblockUpdate = function () {\n        this.updateManuallyBlocked = false;\n      };\n      ProjectionNode.prototype.isUpdateBlocked = function () {\n        return this.updateManuallyBlocked || this.updateBlockedByResize;\n      };\n      ProjectionNode.prototype.isTreeAnimationBlocked = function () {\n        var _a;\n        return this.isAnimationBlocked || ((_a = this.parent) === null || _a === void 0 ? void 0 : _a.isTreeAnimationBlocked()) || false;\n      };\n      // Note: currently only running on root node\n      ProjectionNode.prototype.startUpdate = function () {\n        var _a;\n        if (this.isUpdateBlocked()) return;\n        this.isUpdating = true;\n        (_a = this.nodes) === null || _a === void 0 ? void 0 : _a.forEach(resetRotation);\n      };\n      ProjectionNode.prototype.willUpdate = function (shouldNotifyListeners) {\n        var _a, _b, _c;\n        if (shouldNotifyListeners === void 0) {\n          shouldNotifyListeners = true;\n        }\n        if (this.root.isUpdateBlocked()) {\n          (_b = (_a = this.options).onExitComplete) === null || _b === void 0 ? void 0 : _b.call(_a);\n          return;\n        }\n        !this.root.isUpdating && this.root.startUpdate();\n        if (this.isLayoutDirty) return;\n        this.isLayoutDirty = true;\n        for (var i = 0; i < this.path.length; i++) {\n          var node = this.path[i];\n          node.shouldResetTransform = true;\n          /**\n           * TODO: Check we haven't updated the scroll\n           * since the last didUpdate\n           */\n          node.updateScroll();\n        }\n        var _d = this.options,\n          layoutId = _d.layoutId,\n          layout = _d.layout;\n        if (layoutId === undefined && !layout) return;\n        var transformTemplate = (_c = this.options.visualElement) === null || _c === void 0 ? void 0 : _c.getProps().transformTemplate;\n        this.prevTransformTemplateValue = transformTemplate === null || transformTemplate === void 0 ? void 0 : transformTemplate(this.latestValues, \"\");\n        this.updateSnapshot();\n        shouldNotifyListeners && this.notifyListeners(\"willUpdate\");\n      };\n      // Note: Currently only running on root node\n      ProjectionNode.prototype.didUpdate = function () {\n        var updateWasBlocked = this.isUpdateBlocked();\n        // When doing an instant transition, we skip the layout update,\n        // but should still clean up the measurements so that the next\n        // snapshot could be taken correctly.\n        if (updateWasBlocked) {\n          this.unblockUpdate();\n          this.clearAllSnapshots();\n          this.nodes.forEach(clearMeasurements);\n          return;\n        }\n        if (!this.isUpdating) return;\n        this.isUpdating = false;\n        /**\n         * Search for and mount newly-added projection elements.\n         *\n         * TODO: Every time a new component is rendered we could search up the tree for\n         * the closest mounted node and query from there rather than document.\n         */\n        if (this.potentialNodes.size) {\n          this.potentialNodes.forEach(mountNodeEarly);\n          this.potentialNodes.clear();\n        }\n        /**\n         * Write\n         */\n        this.nodes.forEach(resetTransformStyle);\n        /**\n         * Read ==================\n         */\n        // Update layout measurements of updated children\n        this.nodes.forEach(updateLayout);\n        /**\n         * Write\n         */\n        // Notify listeners that the layout is updated\n        this.nodes.forEach(notifyLayoutUpdate);\n        this.clearAllSnapshots();\n        // Flush any scheduled updates\n        sync.flushSync.update();\n        sync.flushSync.preRender();\n        sync.flushSync.render();\n      };\n      ProjectionNode.prototype.clearAllSnapshots = function () {\n        this.nodes.forEach(clearSnapshot);\n        this.sharedNodes.forEach(removeLeadSnapshots);\n      };\n      ProjectionNode.prototype.scheduleUpdateProjection = function () {\n        sync__default[\"default\"].preRender(this.updateProjection, false, true);\n      };\n      ProjectionNode.prototype.scheduleCheckAfterUnmount = function () {\n        var _this = this;\n        /**\n         * If the unmounting node is in a layoutGroup and did trigger a willUpdate,\n         * we manually call didUpdate to give a chance to the siblings to animate.\n         * Otherwise, cleanup all snapshots to prevents future nodes from reusing them.\n         */\n        sync__default[\"default\"].postRender(function () {\n          if (_this.isLayoutDirty) {\n            _this.root.didUpdate();\n          } else {\n            _this.root.checkUpdateFailed();\n          }\n        });\n      };\n      /**\n       * Update measurements\n       */\n      ProjectionNode.prototype.updateSnapshot = function () {\n        if (this.snapshot || !this.instance) return;\n        var measured = this.measure();\n        var layout = this.removeTransform(this.removeElementScroll(measured));\n        roundBox(layout);\n        this.snapshot = {\n          measured: measured,\n          layout: layout,\n          latestValues: {}\n        };\n      };\n      ProjectionNode.prototype.updateLayout = function () {\n        var _a;\n        if (!this.instance) return;\n        // TODO: Incorporate into a forwarded scroll offset\n        this.updateScroll();\n        if (!(this.options.alwaysMeasureLayout && this.isLead()) && !this.isLayoutDirty) {\n          return;\n        }\n        /**\n         * When a node is mounted, it simply resumes from the prevLead's\n         * snapshot instead of taking a new one, but the ancestors scroll\n         * might have updated while the prevLead is unmounted. We need to\n         * update the scroll again to make sure the layout we measure is\n         * up to date.\n         */\n        if (this.resumeFrom && !this.resumeFrom.instance) {\n          for (var i = 0; i < this.path.length; i++) {\n            var node = this.path[i];\n            node.updateScroll();\n          }\n        }\n        var measured = this.measure();\n        roundBox(measured);\n        var prevLayout = this.layout;\n        this.layout = {\n          measured: measured,\n          actual: this.removeElementScroll(measured)\n        };\n        this.layoutCorrected = createBox();\n        this.isLayoutDirty = false;\n        this.projectionDelta = undefined;\n        this.notifyListeners(\"measure\", this.layout.actual);\n        (_a = this.options.visualElement) === null || _a === void 0 ? void 0 : _a.notifyLayoutMeasure(this.layout.actual, prevLayout === null || prevLayout === void 0 ? void 0 : prevLayout.actual);\n      };\n      ProjectionNode.prototype.updateScroll = function () {\n        if (this.options.layoutScroll && this.instance) {\n          this.isScrollRoot = checkIsScrollRoot(this.instance);\n          this.scroll = measureScroll(this.instance);\n        }\n      };\n      ProjectionNode.prototype.resetTransform = function () {\n        var _a;\n        if (!resetTransform) return;\n        var isResetRequested = this.isLayoutDirty || this.shouldResetTransform;\n        var hasProjection = this.projectionDelta && !isDeltaZero(this.projectionDelta);\n        var transformTemplate = (_a = this.options.visualElement) === null || _a === void 0 ? void 0 : _a.getProps().transformTemplate;\n        var transformTemplateValue = transformTemplate === null || transformTemplate === void 0 ? void 0 : transformTemplate(this.latestValues, \"\");\n        var transformTemplateHasChanged = transformTemplateValue !== this.prevTransformTemplateValue;\n        if (isResetRequested && (hasProjection || hasTransform(this.latestValues) || transformTemplateHasChanged)) {\n          resetTransform(this.instance, transformTemplateValue);\n          this.shouldResetTransform = false;\n          this.scheduleRender();\n        }\n      };\n      ProjectionNode.prototype.measure = function () {\n        var visualElement = this.options.visualElement;\n        if (!visualElement) return createBox();\n        var box = visualElement.measureViewportBox();\n        // Remove viewport scroll to give page-relative coordinates\n        var scroll = this.root.scroll;\n        if (scroll) {\n          translateAxis(box.x, scroll.x);\n          translateAxis(box.y, scroll.y);\n        }\n        return box;\n      };\n      ProjectionNode.prototype.removeElementScroll = function (box) {\n        var boxWithoutScroll = createBox();\n        copyBoxInto(boxWithoutScroll, box);\n        /**\n         * Performance TODO: Keep a cumulative scroll offset down the tree\n         * rather than loop back up the path.\n         */\n        for (var i = 0; i < this.path.length; i++) {\n          var node = this.path[i];\n          var scroll_1 = node.scroll,\n            options = node.options,\n            isScrollRoot = node.isScrollRoot;\n          if (node !== this.root && scroll_1 && options.layoutScroll) {\n            /**\n             * If this is a new scroll root, we want to remove all previous scrolls\n             * from the viewport box.\n             */\n            if (isScrollRoot) {\n              copyBoxInto(boxWithoutScroll, box);\n              var rootScroll = this.root.scroll;\n              /**\n               * Undo the application of page scroll that was originally added\n               * to the measured bounding box.\n               */\n              if (rootScroll) {\n                translateAxis(boxWithoutScroll.x, -rootScroll.x);\n                translateAxis(boxWithoutScroll.y, -rootScroll.y);\n              }\n            }\n            translateAxis(boxWithoutScroll.x, scroll_1.x);\n            translateAxis(boxWithoutScroll.y, scroll_1.y);\n          }\n        }\n        return boxWithoutScroll;\n      };\n      ProjectionNode.prototype.applyTransform = function (box, transformOnly) {\n        if (transformOnly === void 0) {\n          transformOnly = false;\n        }\n        var withTransforms = createBox();\n        copyBoxInto(withTransforms, box);\n        for (var i = 0; i < this.path.length; i++) {\n          var node = this.path[i];\n          if (!transformOnly && node.options.layoutScroll && node.scroll && node !== node.root) {\n            transformBox(withTransforms, {\n              x: -node.scroll.x,\n              y: -node.scroll.y\n            });\n          }\n          if (!hasTransform(node.latestValues)) continue;\n          transformBox(withTransforms, node.latestValues);\n        }\n        if (hasTransform(this.latestValues)) {\n          transformBox(withTransforms, this.latestValues);\n        }\n        return withTransforms;\n      };\n      ProjectionNode.prototype.removeTransform = function (box) {\n        var _a;\n        var boxWithoutTransform = createBox();\n        copyBoxInto(boxWithoutTransform, box);\n        for (var i = 0; i < this.path.length; i++) {\n          var node = this.path[i];\n          if (!node.instance) continue;\n          if (!hasTransform(node.latestValues)) continue;\n          hasScale(node.latestValues) && node.updateSnapshot();\n          var sourceBox = createBox();\n          var nodeBox = node.measure();\n          copyBoxInto(sourceBox, nodeBox);\n          removeBoxTransforms(boxWithoutTransform, node.latestValues, (_a = node.snapshot) === null || _a === void 0 ? void 0 : _a.layout, sourceBox);\n        }\n        if (hasTransform(this.latestValues)) {\n          removeBoxTransforms(boxWithoutTransform, this.latestValues);\n        }\n        return boxWithoutTransform;\n      };\n      /**\n       *\n       */\n      ProjectionNode.prototype.setTargetDelta = function (delta) {\n        this.targetDelta = delta;\n        this.root.scheduleUpdateProjection();\n      };\n      ProjectionNode.prototype.setOptions = function (options) {\n        var _a;\n        this.options = tslib.__assign(tslib.__assign(tslib.__assign({}, this.options), options), {\n          crossfade: (_a = options.crossfade) !== null && _a !== void 0 ? _a : true\n        });\n      };\n      ProjectionNode.prototype.clearMeasurements = function () {\n        this.scroll = undefined;\n        this.layout = undefined;\n        this.snapshot = undefined;\n        this.prevTransformTemplateValue = undefined;\n        this.targetDelta = undefined;\n        this.target = undefined;\n        this.isLayoutDirty = false;\n      };\n      /**\n       * Frame calculations\n       */\n      ProjectionNode.prototype.resolveTargetDelta = function () {\n        var _a;\n        var _b = this.options,\n          layout = _b.layout,\n          layoutId = _b.layoutId;\n        /**\n         * If we have no layout, we can't perform projection, so early return\n         */\n        if (!this.layout || !(layout || layoutId)) return;\n        /**\n         * If we don't have a targetDelta but do have a layout, we can attempt to resolve\n         * a relativeParent. This will allow a component to perform scale correction\n         * even if no animation has started.\n         */\n        // TODO If this is unsuccessful this currently happens every frame\n        if (!this.targetDelta && !this.relativeTarget) {\n          // TODO: This is a semi-repetition of further down this function, make DRY\n          this.relativeParent = this.getClosestProjectingParent();\n          if (this.relativeParent && this.relativeParent.layout) {\n            this.relativeTarget = createBox();\n            this.relativeTargetOrigin = createBox();\n            calcRelativePosition(this.relativeTargetOrigin, this.layout.actual, this.relativeParent.layout.actual);\n            copyBoxInto(this.relativeTarget, this.relativeTargetOrigin);\n          }\n        }\n        /**\n         * If we have no relative target or no target delta our target isn't valid\n         * for this frame.\n         */\n        if (!this.relativeTarget && !this.targetDelta) return;\n        /**\n         * Lazy-init target data structure\n         */\n        if (!this.target) {\n          this.target = createBox();\n          this.targetWithTransforms = createBox();\n        }\n        /**\n         * If we've got a relative box for this component, resolve it into a target relative to the parent.\n         */\n        if (this.relativeTarget && this.relativeTargetOrigin && ((_a = this.relativeParent) === null || _a === void 0 ? void 0 : _a.target)) {\n          calcRelativeBox(this.target, this.relativeTarget, this.relativeParent.target);\n          /**\n           * If we've only got a targetDelta, resolve it into a target\n           */\n        } else if (this.targetDelta) {\n          if (Boolean(this.resumingFrom)) {\n            // TODO: This is creating a new object every frame\n            this.target = this.applyTransform(this.layout.actual);\n          } else {\n            copyBoxInto(this.target, this.layout.actual);\n          }\n          applyBoxDelta(this.target, this.targetDelta);\n        } else {\n          /**\n           * If no target, use own layout as target\n           */\n          copyBoxInto(this.target, this.layout.actual);\n        }\n        /**\n         * If we've been told to attempt to resolve a relative target, do so.\n         */\n        if (this.attemptToResolveRelativeTarget) {\n          this.attemptToResolveRelativeTarget = false;\n          this.relativeParent = this.getClosestProjectingParent();\n          if (this.relativeParent && Boolean(this.relativeParent.resumingFrom) === Boolean(this.resumingFrom) && !this.relativeParent.options.layoutScroll && this.relativeParent.target) {\n            this.relativeTarget = createBox();\n            this.relativeTargetOrigin = createBox();\n            calcRelativePosition(this.relativeTargetOrigin, this.target, this.relativeParent.target);\n            copyBoxInto(this.relativeTarget, this.relativeTargetOrigin);\n          }\n        }\n      };\n      ProjectionNode.prototype.getClosestProjectingParent = function () {\n        if (!this.parent || hasTransform(this.parent.latestValues)) return undefined;\n        if ((this.parent.relativeTarget || this.parent.targetDelta) && this.parent.layout) {\n          return this.parent;\n        } else {\n          return this.parent.getClosestProjectingParent();\n        }\n      };\n      ProjectionNode.prototype.calcProjection = function () {\n        var _a;\n        var _b = this.options,\n          layout = _b.layout,\n          layoutId = _b.layoutId;\n        /**\n         * If this section of the tree isn't animating we can\n         * delete our target sources for the following frame.\n         */\n        this.isTreeAnimating = Boolean(((_a = this.parent) === null || _a === void 0 ? void 0 : _a.isTreeAnimating) || this.currentAnimation || this.pendingAnimation);\n        if (!this.isTreeAnimating) {\n          this.targetDelta = this.relativeTarget = undefined;\n        }\n        if (!this.layout || !(layout || layoutId)) return;\n        var lead = this.getLead();\n        /**\n         * Reset the corrected box with the latest values from box, as we're then going\n         * to perform mutative operations on it.\n         */\n        copyBoxInto(this.layoutCorrected, this.layout.actual);\n        /**\n         * Apply all the parent deltas to this box to produce the corrected box. This\n         * is the layout box, as it will appear on screen as a result of the transforms of its parents.\n         */\n        applyTreeDeltas(this.layoutCorrected, this.treeScale, this.path, Boolean(this.resumingFrom) || this !== lead);\n        var target = lead.target;\n        if (!target) return;\n        if (!this.projectionDelta) {\n          this.projectionDelta = createDelta();\n          this.projectionDeltaWithTransform = createDelta();\n        }\n        var prevTreeScaleX = this.treeScale.x;\n        var prevTreeScaleY = this.treeScale.y;\n        var prevProjectionTransform = this.projectionTransform;\n        /**\n         * Update the delta between the corrected box and the target box before user-set transforms were applied.\n         * This will allow us to calculate the corrected borderRadius and boxShadow to compensate\n         * for our layout reprojection, but still allow them to be scaled correctly by the user.\n         * It might be that to simplify this we may want to accept that user-set scale is also corrected\n         * and we wouldn't have to keep and calc both deltas, OR we could support a user setting\n         * to allow people to choose whether these styles are corrected based on just the\n         * layout reprojection or the final bounding box.\n         */\n        calcBoxDelta(this.projectionDelta, this.layoutCorrected, target, this.latestValues);\n        this.projectionTransform = buildProjectionTransform(this.projectionDelta, this.treeScale);\n        if (this.projectionTransform !== prevProjectionTransform || this.treeScale.x !== prevTreeScaleX || this.treeScale.y !== prevTreeScaleY) {\n          this.hasProjected = true;\n          this.scheduleRender();\n          this.notifyListeners(\"projectionUpdate\", target);\n        }\n      };\n      ProjectionNode.prototype.hide = function () {\n        this.isVisible = false;\n        // TODO: Schedule render\n      };\n\n      ProjectionNode.prototype.show = function () {\n        this.isVisible = true;\n        // TODO: Schedule render\n      };\n\n      ProjectionNode.prototype.scheduleRender = function (notifyAll) {\n        var _a, _b, _c;\n        if (notifyAll === void 0) {\n          notifyAll = true;\n        }\n        (_b = (_a = this.options).scheduleRender) === null || _b === void 0 ? void 0 : _b.call(_a);\n        notifyAll && ((_c = this.getStack()) === null || _c === void 0 ? void 0 : _c.scheduleRender());\n        if (this.resumingFrom && !this.resumingFrom.instance) {\n          this.resumingFrom = undefined;\n        }\n      };\n      ProjectionNode.prototype.setAnimationOrigin = function (delta, hasOnlyRelativeTargetChanged) {\n        var _this = this;\n        var _a;\n        if (hasOnlyRelativeTargetChanged === void 0) {\n          hasOnlyRelativeTargetChanged = false;\n        }\n        var snapshot = this.snapshot;\n        var snapshotLatestValues = (snapshot === null || snapshot === void 0 ? void 0 : snapshot.latestValues) || {};\n        var mixedValues = tslib.__assign({}, this.latestValues);\n        var targetDelta = createDelta();\n        this.relativeTarget = this.relativeTargetOrigin = undefined;\n        this.attemptToResolveRelativeTarget = !hasOnlyRelativeTargetChanged;\n        var relativeLayout = createBox();\n        var isSharedLayoutAnimation = snapshot === null || snapshot === void 0 ? void 0 : snapshot.isShared;\n        var isOnlyMember = (((_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.members.length) || 0) <= 1;\n        var shouldCrossfadeOpacity = Boolean(isSharedLayoutAnimation && !isOnlyMember && this.options.crossfade === true && !this.path.some(hasOpacityCrossfade));\n        this.animationProgress = 0;\n        this.mixTargetDelta = function (latest) {\n          var _a;\n          var progress = latest / 1000;\n          mixAxisDelta(targetDelta.x, delta.x, progress);\n          mixAxisDelta(targetDelta.y, delta.y, progress);\n          _this.setTargetDelta(targetDelta);\n          if (_this.relativeTarget && _this.relativeTargetOrigin && _this.layout && ((_a = _this.relativeParent) === null || _a === void 0 ? void 0 : _a.layout)) {\n            calcRelativePosition(relativeLayout, _this.layout.actual, _this.relativeParent.layout.actual);\n            mixBox(_this.relativeTarget, _this.relativeTargetOrigin, relativeLayout, progress);\n          }\n          if (isSharedLayoutAnimation) {\n            _this.animationValues = mixedValues;\n            mixValues(mixedValues, snapshotLatestValues, _this.latestValues, progress, shouldCrossfadeOpacity, isOnlyMember);\n          }\n          _this.root.scheduleUpdateProjection();\n          _this.scheduleRender();\n          _this.animationProgress = progress;\n        };\n        this.mixTargetDelta(0);\n      };\n      ProjectionNode.prototype.startAnimation = function (options) {\n        var _this = this;\n        var _a, _b;\n        this.notifyListeners(\"animationStart\");\n        (_a = this.currentAnimation) === null || _a === void 0 ? void 0 : _a.stop();\n        if (this.resumingFrom) {\n          (_b = this.resumingFrom.currentAnimation) === null || _b === void 0 ? void 0 : _b.stop();\n        }\n        if (this.pendingAnimation) {\n          sync.cancelSync.update(this.pendingAnimation);\n          this.pendingAnimation = undefined;\n        }\n        /**\n         * Start the animation in the next frame to have a frame with progress 0,\n         * where the target is the same as when the animation started, so we can\n         * calculate the relative positions correctly for instant transitions.\n         */\n        this.pendingAnimation = sync__default[\"default\"].update(function () {\n          globalProjectionState.hasAnimatedSinceResize = true;\n          _this.currentAnimation = animate(0, animationTarget, tslib.__assign(tslib.__assign({}, options), {\n            onUpdate: function onUpdate(latest) {\n              var _a;\n              _this.mixTargetDelta(latest);\n              (_a = options.onUpdate) === null || _a === void 0 ? void 0 : _a.call(options, latest);\n            },\n            onComplete: function onComplete() {\n              var _a;\n              (_a = options.onComplete) === null || _a === void 0 ? void 0 : _a.call(options);\n              _this.completeAnimation();\n            }\n          }));\n          if (_this.resumingFrom) {\n            _this.resumingFrom.currentAnimation = _this.currentAnimation;\n          }\n          _this.pendingAnimation = undefined;\n        });\n      };\n      ProjectionNode.prototype.completeAnimation = function () {\n        var _a;\n        if (this.resumingFrom) {\n          this.resumingFrom.currentAnimation = undefined;\n          this.resumingFrom.preserveOpacity = undefined;\n        }\n        (_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.exitAnimationComplete();\n        this.resumingFrom = this.currentAnimation = this.animationValues = undefined;\n        this.notifyListeners(\"animationComplete\");\n      };\n      ProjectionNode.prototype.finishAnimation = function () {\n        var _a;\n        if (this.currentAnimation) {\n          (_a = this.mixTargetDelta) === null || _a === void 0 ? void 0 : _a.call(this, animationTarget);\n          this.currentAnimation.stop();\n        }\n        this.completeAnimation();\n      };\n      ProjectionNode.prototype.applyTransformsToTarget = function () {\n        var _a = this.getLead(),\n          targetWithTransforms = _a.targetWithTransforms,\n          target = _a.target,\n          layout = _a.layout,\n          latestValues = _a.latestValues;\n        if (!targetWithTransforms || !target || !layout) return;\n        copyBoxInto(targetWithTransforms, target);\n        /**\n         * Apply the latest user-set transforms to the targetBox to produce the targetBoxFinal.\n         * This is the final box that we will then project into by calculating a transform delta and\n         * applying it to the corrected box.\n         */\n        transformBox(targetWithTransforms, latestValues);\n        /**\n         * Update the delta between the corrected box and the final target box, after\n         * user-set transforms are applied to it. This will be used by the renderer to\n         * create a transform style that will reproject the element from its actual layout\n         * into the desired bounding box.\n         */\n        calcBoxDelta(this.projectionDeltaWithTransform, this.layoutCorrected, targetWithTransforms, latestValues);\n      };\n      ProjectionNode.prototype.registerSharedNode = function (layoutId, node) {\n        var _a, _b, _c;\n        if (!this.sharedNodes.has(layoutId)) {\n          this.sharedNodes.set(layoutId, new NodeStack());\n        }\n        var stack = this.sharedNodes.get(layoutId);\n        stack.add(node);\n        node.promote({\n          transition: (_a = node.options.initialPromotionConfig) === null || _a === void 0 ? void 0 : _a.transition,\n          preserveFollowOpacity: (_c = (_b = node.options.initialPromotionConfig) === null || _b === void 0 ? void 0 : _b.shouldPreserveFollowOpacity) === null || _c === void 0 ? void 0 : _c.call(_b, node)\n        });\n      };\n      ProjectionNode.prototype.isLead = function () {\n        var stack = this.getStack();\n        return stack ? stack.lead === this : true;\n      };\n      ProjectionNode.prototype.getLead = function () {\n        var _a;\n        var layoutId = this.options.layoutId;\n        return layoutId ? ((_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.lead) || this : this;\n      };\n      ProjectionNode.prototype.getPrevLead = function () {\n        var _a;\n        var layoutId = this.options.layoutId;\n        return layoutId ? (_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.prevLead : undefined;\n      };\n      ProjectionNode.prototype.getStack = function () {\n        var layoutId = this.options.layoutId;\n        if (layoutId) return this.root.sharedNodes.get(layoutId);\n      };\n      ProjectionNode.prototype.promote = function (_a) {\n        var _b = _a === void 0 ? {} : _a,\n          needsReset = _b.needsReset,\n          transition = _b.transition,\n          preserveFollowOpacity = _b.preserveFollowOpacity;\n        var stack = this.getStack();\n        if (stack) stack.promote(this, preserveFollowOpacity);\n        if (needsReset) {\n          this.projectionDelta = undefined;\n          this.needsReset = true;\n        }\n        if (transition) this.setOptions({\n          transition: transition\n        });\n      };\n      ProjectionNode.prototype.relegate = function () {\n        var stack = this.getStack();\n        if (stack) {\n          return stack.relegate(this);\n        } else {\n          return false;\n        }\n      };\n      ProjectionNode.prototype.resetRotation = function () {\n        var visualElement = this.options.visualElement;\n        if (!visualElement) return;\n        // If there's no detected rotation values, we can early return without a forced render.\n        var hasRotate = false;\n        // Keep a record of all the values we've reset\n        var resetValues = {};\n        // Check the rotate value of all axes and reset to 0\n        for (var i = 0; i < transformAxes.length; i++) {\n          var axis = transformAxes[i];\n          var key = \"rotate\" + axis;\n          // If this rotation doesn't exist as a motion value, then we don't\n          // need to reset it\n          if (!visualElement.getStaticValue(key)) {\n            continue;\n          }\n          hasRotate = true;\n          // Record the rotation and then temporarily set it to 0\n          resetValues[key] = visualElement.getStaticValue(key);\n          visualElement.setStaticValue(key, 0);\n        }\n        // If there's no rotation values, we don't need to do any more.\n        if (!hasRotate) return;\n        // Force a render of this element to apply the transform with all rotations\n        // set to 0.\n        visualElement === null || visualElement === void 0 ? void 0 : visualElement.syncRender();\n        // Put back all the values we reset\n        for (var key in resetValues) {\n          visualElement.setStaticValue(key, resetValues[key]);\n        }\n        // Schedule a render for the next frame. This ensures we won't visually\n        // see the element with the reset rotate value applied.\n        visualElement.scheduleRender();\n      };\n      ProjectionNode.prototype.getProjectionStyles = function (styleProp) {\n        var _a, _b, _c, _d, _e, _f;\n        if (styleProp === void 0) {\n          styleProp = {};\n        }\n        // TODO: Return lifecycle-persistent object\n        var styles = {};\n        if (!this.instance || this.isSVG) return styles;\n        if (!this.isVisible) {\n          return {\n            visibility: \"hidden\"\n          };\n        } else {\n          styles.visibility = \"\";\n        }\n        var transformTemplate = (_a = this.options.visualElement) === null || _a === void 0 ? void 0 : _a.getProps().transformTemplate;\n        if (this.needsReset) {\n          this.needsReset = false;\n          styles.opacity = \"\";\n          styles.pointerEvents = resolveMotionValue(styleProp.pointerEvents) || \"\";\n          styles.transform = transformTemplate ? transformTemplate(this.latestValues, \"\") : \"none\";\n          return styles;\n        }\n        var lead = this.getLead();\n        if (!this.projectionDelta || !this.layout || !lead.target) {\n          var emptyStyles = {};\n          if (this.options.layoutId) {\n            emptyStyles.opacity = (_b = this.latestValues.opacity) !== null && _b !== void 0 ? _b : 1;\n            emptyStyles.pointerEvents = resolveMotionValue(styleProp.pointerEvents) || \"\";\n          }\n          if (this.hasProjected && !hasTransform(this.latestValues)) {\n            emptyStyles.transform = transformTemplate ? transformTemplate({}, \"\") : \"none\";\n            this.hasProjected = false;\n          }\n          return emptyStyles;\n        }\n        var valuesToRender = lead.animationValues || lead.latestValues;\n        this.applyTransformsToTarget();\n        styles.transform = buildProjectionTransform(this.projectionDeltaWithTransform, this.treeScale, valuesToRender);\n        if (transformTemplate) {\n          styles.transform = transformTemplate(valuesToRender, styles.transform);\n        }\n        var _g = this.projectionDelta,\n          x = _g.x,\n          y = _g.y;\n        styles.transformOrigin = \"\".concat(x.origin * 100, \"% \").concat(y.origin * 100, \"% 0\");\n        if (lead.animationValues) {\n          /**\n           * If the lead component is animating, assign this either the entering/leaving\n           * opacity\n           */\n          styles.opacity = lead === this ? (_d = (_c = valuesToRender.opacity) !== null && _c !== void 0 ? _c : this.latestValues.opacity) !== null && _d !== void 0 ? _d : 1 : this.preserveOpacity ? this.latestValues.opacity : valuesToRender.opacityExit;\n        } else {\n          /**\n           * Or we're not animating at all, set the lead component to its actual\n           * opacity and other components to hidden.\n           */\n          styles.opacity = lead === this ? (_e = valuesToRender.opacity) !== null && _e !== void 0 ? _e : \"\" : (_f = valuesToRender.opacityExit) !== null && _f !== void 0 ? _f : 0;\n        }\n        /**\n         * Apply scale correction\n         */\n        for (var key in scaleCorrectors) {\n          if (valuesToRender[key] === undefined) continue;\n          var _h = scaleCorrectors[key],\n            correct = _h.correct,\n            applyTo = _h.applyTo;\n          var corrected = correct(valuesToRender[key], lead);\n          if (applyTo) {\n            var num = applyTo.length;\n            for (var i = 0; i < num; i++) {\n              styles[applyTo[i]] = corrected;\n            }\n          } else {\n            styles[key] = corrected;\n          }\n        }\n        /**\n         * Disable pointer events on follow components. This is to ensure\n         * that if a follow component covers a lead component it doesn't block\n         * pointer events on the lead.\n         */\n        if (this.options.layoutId) {\n          styles.pointerEvents = lead === this ? resolveMotionValue(styleProp.pointerEvents) || \"\" : \"none\";\n        }\n        return styles;\n      };\n      ProjectionNode.prototype.clearSnapshot = function () {\n        this.resumeFrom = this.snapshot = undefined;\n      };\n      // Only run on root\n      ProjectionNode.prototype.resetTree = function () {\n        this.root.nodes.forEach(function (node) {\n          var _a;\n          return (_a = node.currentAnimation) === null || _a === void 0 ? void 0 : _a.stop();\n        });\n        this.root.nodes.forEach(clearMeasurements);\n        this.root.sharedNodes.clear();\n      };\n      return ProjectionNode;\n    }()\n  );\n}\nfunction updateLayout(node) {\n  node.updateLayout();\n}\nfunction notifyLayoutUpdate(node) {\n  var _a, _b, _c, _d;\n  var snapshot = (_b = (_a = node.resumeFrom) === null || _a === void 0 ? void 0 : _a.snapshot) !== null && _b !== void 0 ? _b : node.snapshot;\n  if (node.isLead() && node.layout && snapshot && node.hasListeners(\"didUpdate\")) {\n    var _e = node.layout,\n      layout_1 = _e.actual,\n      measuredLayout = _e.measured;\n    // TODO Maybe we want to also resize the layout snapshot so we don't trigger\n    // animations for instance if layout=\"size\" and an element has only changed position\n    if (node.options.animationType === \"size\") {\n      eachAxis(function (axis) {\n        var axisSnapshot = snapshot.isShared ? snapshot.measured[axis] : snapshot.layout[axis];\n        var length = calcLength(axisSnapshot);\n        axisSnapshot.min = layout_1[axis].min;\n        axisSnapshot.max = axisSnapshot.min + length;\n      });\n    } else if (node.options.animationType === \"position\") {\n      eachAxis(function (axis) {\n        var axisSnapshot = snapshot.isShared ? snapshot.measured[axis] : snapshot.layout[axis];\n        var length = calcLength(layout_1[axis]);\n        axisSnapshot.max = axisSnapshot.min + length;\n      });\n    }\n    var layoutDelta = createDelta();\n    calcBoxDelta(layoutDelta, layout_1, snapshot.layout);\n    var visualDelta = createDelta();\n    if (snapshot.isShared) {\n      calcBoxDelta(visualDelta, node.applyTransform(measuredLayout, true), snapshot.measured);\n    } else {\n      calcBoxDelta(visualDelta, layout_1, snapshot.layout);\n    }\n    var hasLayoutChanged = !isDeltaZero(layoutDelta);\n    var hasRelativeTargetChanged = false;\n    if (!node.resumeFrom) {\n      node.relativeParent = node.getClosestProjectingParent();\n      /**\n       * If the relativeParent is itself resuming from a different element then\n       * the relative snapshot is not relavent\n       */\n      if (node.relativeParent && !node.relativeParent.resumeFrom) {\n        var _f = node.relativeParent,\n          parentSnapshot = _f.snapshot,\n          parentLayout = _f.layout;\n        if (parentSnapshot && parentLayout) {\n          var relativeSnapshot = createBox();\n          calcRelativePosition(relativeSnapshot, snapshot.layout, parentSnapshot.layout);\n          var relativeLayout = createBox();\n          calcRelativePosition(relativeLayout, layout_1, parentLayout.actual);\n          if (!boxEquals(relativeSnapshot, relativeLayout)) {\n            hasRelativeTargetChanged = true;\n          }\n        }\n      }\n    }\n    node.notifyListeners(\"didUpdate\", {\n      layout: layout_1,\n      snapshot: snapshot,\n      delta: visualDelta,\n      layoutDelta: layoutDelta,\n      hasLayoutChanged: hasLayoutChanged,\n      hasRelativeTargetChanged: hasRelativeTargetChanged\n    });\n  } else if (node.isLead()) {\n    (_d = (_c = node.options).onExitComplete) === null || _d === void 0 ? void 0 : _d.call(_c);\n  }\n  /**\n   * Clearing transition\n   * TODO: Investigate why this transition is being passed in as {type: false } from Framer\n   * and why we need it at all\n   */\n  node.options.transition = undefined;\n}\nfunction clearSnapshot(node) {\n  node.clearSnapshot();\n}\nfunction clearMeasurements(node) {\n  node.clearMeasurements();\n}\nfunction resetTransformStyle(node) {\n  var visualElement = node.options.visualElement;\n  if (visualElement === null || visualElement === void 0 ? void 0 : visualElement.getProps().onBeforeLayoutMeasure) {\n    visualElement.notifyBeforeLayoutMeasure();\n  }\n  node.resetTransform();\n}\nfunction finishAnimation(node) {\n  node.finishAnimation();\n  node.targetDelta = node.relativeTarget = node.target = undefined;\n}\nfunction resolveTargetDelta(node) {\n  node.resolveTargetDelta();\n}\nfunction calcProjection(node) {\n  node.calcProjection();\n}\nfunction resetRotation(node) {\n  node.resetRotation();\n}\nfunction removeLeadSnapshots(stack) {\n  stack.removeLeadSnapshot();\n}\nfunction mixAxisDelta(output, delta, p) {\n  output.translate = popmotion.mix(delta.translate, 0, p);\n  output.scale = popmotion.mix(delta.scale, 1, p);\n  output.origin = delta.origin;\n  output.originPoint = delta.originPoint;\n}\nfunction mixAxis(output, from, to, p) {\n  output.min = popmotion.mix(from.min, to.min, p);\n  output.max = popmotion.mix(from.max, to.max, p);\n}\nfunction mixBox(output, from, to, p) {\n  mixAxis(output.x, from.x, to.x, p);\n  mixAxis(output.y, from.y, to.y, p);\n}\nfunction hasOpacityCrossfade(node) {\n  return node.animationValues && node.animationValues.opacityExit !== undefined;\n}\nvar defaultLayoutTransition = {\n  duration: 0.45,\n  ease: [0.4, 0, 0.1, 1]\n};\nfunction mountNodeEarly(node, id) {\n  /**\n   * Rather than searching the DOM from document we can search the\n   * path for the deepest mounted ancestor and search from there\n   */\n  var searchNode = node.root;\n  for (var i = node.path.length - 1; i >= 0; i--) {\n    if (Boolean(node.path[i].instance)) {\n      searchNode = node.path[i];\n      break;\n    }\n  }\n  var searchElement = searchNode && searchNode !== node.root ? searchNode.instance : document;\n  var element = searchElement.querySelector(\"[data-projection-id=\\\"\".concat(id, \"\\\"]\"));\n  if (element) node.mount(element, true);\n}\nfunction roundAxis(axis) {\n  axis.min = Math.round(axis.min);\n  axis.max = Math.round(axis.max);\n}\nfunction roundBox(box) {\n  roundAxis(box.x);\n  roundAxis(box.y);\n}\nvar DocumentProjectionNode = createProjectionNode({\n  attachResizeListener: function attachResizeListener(ref, notify) {\n    return addDomEvent(ref, \"resize\", notify);\n  },\n  measureScroll: function measureScroll() {\n    return {\n      x: document.documentElement.scrollLeft || document.body.scrollLeft,\n      y: document.documentElement.scrollTop || document.body.scrollTop\n    };\n  },\n  checkIsScrollRoot: function checkIsScrollRoot() {\n    return true;\n  }\n});\nvar rootProjectionNode = {\n  current: undefined\n};\nvar HTMLProjectionNode = createProjectionNode({\n  measureScroll: function measureScroll(instance) {\n    return {\n      x: instance.scrollLeft,\n      y: instance.scrollTop\n    };\n  },\n  defaultParent: function defaultParent() {\n    if (!rootProjectionNode.current) {\n      var documentNode = new DocumentProjectionNode(0, {});\n      documentNode.mount(window);\n      documentNode.setOptions({\n        layoutScroll: true\n      });\n      rootProjectionNode.current = documentNode;\n    }\n    return rootProjectionNode.current;\n  },\n  resetTransform: function resetTransform(instance, value) {\n    instance.style.transform = value !== null && value !== void 0 ? value : \"none\";\n  },\n  checkIsScrollRoot: function checkIsScrollRoot(instance) {\n    return Boolean(window.getComputedStyle(instance).position === \"fixed\");\n  }\n});\nvar featureBundle = tslib.__assign(tslib.__assign(tslib.__assign(tslib.__assign({}, animations), gestureAnimations), drag), layoutFeatures);\n/**\n * HTML & SVG components, optimised for use with gestures and animation. These can be used as\n * drop-in replacements for any HTML & SVG component, all CSS & SVG properties are supported.\n *\n * @public\n */\nvar motion = /*@__PURE__*/createMotionProxy(function (Component, config) {\n  return createDomMotionConfig(Component, config, featureBundle, createDomVisualElement, HTMLProjectionNode);\n});\n/**\n * Create a DOM `motion` component with the provided string. This is primarily intended\n * as a full alternative to `motion` for consumers who have to support environments that don't\n * support `Proxy`.\n *\n * ```javascript\n * import { createDomMotionComponent } from \"framer-motion\"\n *\n * const motion = {\n *   div: createDomMotionComponent('div')\n * }\n * ```\n *\n * @public\n */\nfunction createDomMotionComponent(key) {\n  return createMotionComponent(createDomMotionConfig(key, {\n    forwardMotionProps: false\n  }, featureBundle, createDomVisualElement, HTMLProjectionNode));\n}\n\n/**\n * @public\n */\nvar m = createMotionProxy(createDomMotionConfig);\nfunction useIsMounted() {\n  var isMounted = React.useRef(false);\n  useIsomorphicLayoutEffect(function () {\n    isMounted.current = true;\n    return function () {\n      isMounted.current = false;\n    };\n  }, []);\n  return isMounted;\n}\nfunction useForceUpdate() {\n  var isMounted = useIsMounted();\n  var _a = tslib.__read(React.useState(0), 2),\n    forcedRenderCount = _a[0],\n    setForcedRenderCount = _a[1];\n  var forceRender = React.useCallback(function () {\n    isMounted.current && setForcedRenderCount(forcedRenderCount + 1);\n  }, [forcedRenderCount]);\n  /**\n   * Defer this to the end of the next animation frame in case there are multiple\n   * synchronous calls.\n   */\n  var deferredForceRender = React.useCallback(function () {\n    return sync__default[\"default\"].postRender(forceRender);\n  }, [forceRender]);\n  return [deferredForceRender, forcedRenderCount];\n}\nvar PresenceChild = function PresenceChild(_a) {\n  var children = _a.children,\n    initial = _a.initial,\n    isPresent = _a.isPresent,\n    _onExitComplete = _a.onExitComplete,\n    custom = _a.custom,\n    presenceAffectsLayout = _a.presenceAffectsLayout;\n  var presenceChildren = useConstant(newChildrenMap);\n  var id = useId();\n  var context = React.useMemo(function () {\n    return {\n      id: id,\n      initial: initial,\n      isPresent: isPresent,\n      custom: custom,\n      onExitComplete: function onExitComplete(childId) {\n        var e_1, _a;\n        presenceChildren.set(childId, true);\n        try {\n          for (var _b = tslib.__values(presenceChildren.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var isComplete = _c.value;\n            if (!isComplete) return; // can stop searching when any is incomplete\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n        _onExitComplete === null || _onExitComplete === void 0 ? void 0 : _onExitComplete();\n      },\n      register: function register(childId) {\n        presenceChildren.set(childId, false);\n        return function () {\n          return presenceChildren.delete(childId);\n        };\n      }\n    };\n  },\n  /**\n   * If the presence of a child affects the layout of the components around it,\n   * we want to make a new context value to ensure they get re-rendered\n   * so they can detect that layout change.\n   */\n  presenceAffectsLayout ? undefined : [isPresent]);\n  React.useMemo(function () {\n    presenceChildren.forEach(function (_, key) {\n      return presenceChildren.set(key, false);\n    });\n  }, [isPresent]);\n  /**\n   * If there's no `motion` components to fire exit animations, we want to remove this\n   * component immediately.\n   */\n  React__namespace.useEffect(function () {\n    !isPresent && !presenceChildren.size && (_onExitComplete === null || _onExitComplete === void 0 ? void 0 : _onExitComplete());\n  }, [isPresent]);\n  return React__namespace.createElement(PresenceContext.Provider, {\n    value: context\n  }, children);\n};\nfunction newChildrenMap() {\n  return new Map();\n}\nvar getChildKey = function getChildKey(child) {\n  return child.key || \"\";\n};\nfunction updateChildLookup(children, allChildren) {\n  children.forEach(function (child) {\n    var key = getChildKey(child);\n    allChildren.set(key, child);\n  });\n}\nfunction onlyElements(children) {\n  var filtered = [];\n  // We use forEach here instead of map as map mutates the component key by preprending `.$`\n  React.Children.forEach(children, function (child) {\n    if (React.isValidElement(child)) filtered.push(child);\n  });\n  return filtered;\n}\n/**\n * `AnimatePresence` enables the animation of components that have been removed from the tree.\n *\n * When adding/removing more than a single child, every child **must** be given a unique `key` prop.\n *\n * Any `motion` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { motion, AnimatePresence } from 'framer-motion'\n *\n * export const Items = ({ items }) => (\n *   <AnimatePresence>\n *     {items.map(item => (\n *       <motion.div\n *         key={item.id}\n *         initial={{ opacity: 0 }}\n *         animate={{ opacity: 1 }}\n *         exit={{ opacity: 0 }}\n *       />\n *     ))}\n *   </AnimatePresence>\n * )\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * If a child contains multiple `motion` components with `exit` props, it will only unmount the child\n * once all `motion` components have finished animating out. Likewise, any components using\n * `usePresence` all need to call `safeToRemove`.\n *\n * @public\n */\nvar AnimatePresence = function AnimatePresence(_a) {\n  var children = _a.children,\n    custom = _a.custom,\n    _b = _a.initial,\n    initial = _b === void 0 ? true : _b,\n    onExitComplete = _a.onExitComplete,\n    exitBeforeEnter = _a.exitBeforeEnter,\n    _c = _a.presenceAffectsLayout,\n    presenceAffectsLayout = _c === void 0 ? true : _c;\n  // We want to force a re-render once all exiting animations have finished. We\n  // either use a local forceRender function, or one from a parent context if it exists.\n  var _d = tslib.__read(useForceUpdate(), 1),\n    forceRender = _d[0];\n  var forceRenderLayoutGroup = React.useContext(LayoutGroupContext).forceRender;\n  if (forceRenderLayoutGroup) forceRender = forceRenderLayoutGroup;\n  var isMounted = useIsMounted();\n  // Filter out any children that aren't ReactElements. We can only track ReactElements with a props.key\n  var filteredChildren = onlyElements(children);\n  var childrenToRender = filteredChildren;\n  var exiting = new Set();\n  // Keep a living record of the children we're actually rendering so we\n  // can diff to figure out which are entering and exiting\n  var presentChildren = React.useRef(childrenToRender);\n  // A lookup table to quickly reference components by key\n  var allChildren = React.useRef(new Map()).current;\n  // If this is the initial component render, just deal with logic surrounding whether\n  // we play onMount animations or not.\n  var isInitialRender = React.useRef(true);\n  useIsomorphicLayoutEffect(function () {\n    isInitialRender.current = false;\n    updateChildLookup(filteredChildren, allChildren);\n    presentChildren.current = childrenToRender;\n  });\n  useUnmountEffect(function () {\n    isInitialRender.current = true;\n    allChildren.clear();\n    exiting.clear();\n  });\n  if (isInitialRender.current) {\n    return React__namespace.createElement(React__namespace.Fragment, null, childrenToRender.map(function (child) {\n      return React__namespace.createElement(PresenceChild, {\n        key: getChildKey(child),\n        isPresent: true,\n        initial: initial ? undefined : false,\n        presenceAffectsLayout: presenceAffectsLayout\n      }, child);\n    }));\n  }\n  // If this is a subsequent render, deal with entering and exiting children\n  childrenToRender = tslib.__spreadArray([], tslib.__read(childrenToRender), false);\n  // Diff the keys of the currently-present and target children to update our\n  // exiting list.\n  var presentKeys = presentChildren.current.map(getChildKey);\n  var targetKeys = filteredChildren.map(getChildKey);\n  // Diff the present children with our target children and mark those that are exiting\n  var numPresent = presentKeys.length;\n  for (var i = 0; i < numPresent; i++) {\n    var key = presentKeys[i];\n    if (targetKeys.indexOf(key) === -1) {\n      exiting.add(key);\n    }\n  }\n  // If we currently have exiting children, and we're deferring rendering incoming children\n  // until after all current children have exiting, empty the childrenToRender array\n  if (exitBeforeEnter && exiting.size) {\n    childrenToRender = [];\n  }\n  // Loop through all currently exiting components and clone them to overwrite `animate`\n  // with any `exit` prop they might have defined.\n  exiting.forEach(function (key) {\n    // If this component is actually entering again, early return\n    if (targetKeys.indexOf(key) !== -1) return;\n    var child = allChildren.get(key);\n    if (!child) return;\n    var insertionIndex = presentKeys.indexOf(key);\n    var onExit = function onExit() {\n      allChildren.delete(key);\n      exiting.delete(key);\n      // Remove this child from the present children\n      var removeIndex = presentChildren.current.findIndex(function (presentChild) {\n        return presentChild.key === key;\n      });\n      presentChildren.current.splice(removeIndex, 1);\n      // Defer re-rendering until all exiting children have indeed left\n      if (!exiting.size) {\n        presentChildren.current = filteredChildren;\n        if (isMounted.current === false) return;\n        forceRender();\n        onExitComplete && onExitComplete();\n      }\n    };\n    childrenToRender.splice(insertionIndex, 0, React__namespace.createElement(PresenceChild, {\n      key: getChildKey(child),\n      isPresent: false,\n      onExitComplete: onExit,\n      custom: custom,\n      presenceAffectsLayout: presenceAffectsLayout\n    }, child));\n  });\n  // Add `MotionContext` even to children that don't need it to ensure we're rendering\n  // the same tree between renders\n  childrenToRender = childrenToRender.map(function (child) {\n    var key = child.key;\n    return exiting.has(key) ? child : React__namespace.createElement(PresenceChild, {\n      key: getChildKey(child),\n      isPresent: true,\n      presenceAffectsLayout: presenceAffectsLayout\n    }, child);\n  });\n  if (env !== \"production\" && exitBeforeEnter && childrenToRender.length > 1) {\n    console.warn(\"You're attempting to animate multiple children within AnimatePresence, but its exitBeforeEnter prop is set to true. This will lead to odd visual behaviour.\");\n  }\n  return React__namespace.createElement(React__namespace.Fragment, null, exiting.size ? childrenToRender : childrenToRender.map(function (child) {\n    return React.cloneElement(child);\n  }));\n};\n\n/**\n * @deprecated\n */\nvar DeprecatedLayoutGroupContext = React.createContext(null);\nvar notify = function notify(node) {\n  return !node.isLayoutDirty && node.willUpdate(false);\n};\nfunction nodeGroup() {\n  var nodes = new Set();\n  var subscriptions = new WeakMap();\n  var dirtyAll = function dirtyAll() {\n    return nodes.forEach(notify);\n  };\n  return {\n    add: function add(node) {\n      nodes.add(node);\n      subscriptions.set(node, node.addEventListener(\"willUpdate\", dirtyAll));\n    },\n    remove: function remove(node) {\n      var _a;\n      nodes.delete(node);\n      (_a = subscriptions.get(node)) === null || _a === void 0 ? void 0 : _a();\n      subscriptions.delete(node);\n      dirtyAll();\n    },\n    dirty: dirtyAll\n  };\n}\nvar shouldInheritGroup = function shouldInheritGroup(inherit) {\n  return inherit === true;\n};\nvar shouldInheritId = function shouldInheritId(inherit) {\n  return shouldInheritGroup(inherit === true) || inherit === \"id\";\n};\nvar LayoutGroup = function LayoutGroup(_a) {\n  var _b, _c;\n  var children = _a.children,\n    id = _a.id,\n    inheritId = _a.inheritId,\n    _d = _a.inherit,\n    inherit = _d === void 0 ? true : _d;\n  // Maintain backwards-compatibility with inheritId until 7.0\n  if (inheritId !== undefined) inherit = inheritId;\n  var layoutGroupContext = React.useContext(LayoutGroupContext);\n  var deprecatedLayoutGroupContext = React.useContext(DeprecatedLayoutGroupContext);\n  var _e = tslib.__read(useForceUpdate(), 2),\n    forceRender = _e[0],\n    key = _e[1];\n  var context = React.useRef(null);\n  var upstreamId = (_b = layoutGroupContext.id) !== null && _b !== void 0 ? _b : deprecatedLayoutGroupContext;\n  if (context.current === null) {\n    if (shouldInheritId(inherit) && upstreamId) {\n      id = id ? upstreamId + \"-\" + id : upstreamId;\n    }\n    context.current = {\n      id: id,\n      group: shouldInheritGroup(inherit) ? (_c = layoutGroupContext === null || layoutGroupContext === void 0 ? void 0 : layoutGroupContext.group) !== null && _c !== void 0 ? _c : nodeGroup() : nodeGroup()\n    };\n  }\n  var memoizedContext = React.useMemo(function () {\n    return tslib.__assign(tslib.__assign({}, context.current), {\n      forceRender: forceRender\n    });\n  }, [key]);\n  return React__namespace.createElement(LayoutGroupContext.Provider, {\n    value: memoizedContext\n  }, children);\n};\nvar id = 0;\nvar AnimateSharedLayout = function AnimateSharedLayout(_a) {\n  var children = _a.children;\n  React__namespace.useEffect(function () {\n    heyListen.warning(false, \"AnimateSharedLayout is deprecated: https://www.framer.com/docs/guide-upgrade/##shared-layout-animations\");\n  }, []);\n  return React__namespace.createElement(LayoutGroup, {\n    id: useConstant(function () {\n      return \"asl-\".concat(id++);\n    })\n  }, children);\n};\n\n/**\n * `MotionConfig` is used to set configuration options for all children `motion` components.\n *\n * ```jsx\n * import { motion, MotionConfig } from \"framer-motion\"\n *\n * export function App() {\n *   return (\n *     <MotionConfig transition={{ type: \"spring\" }}>\n *       <motion.div animate={{ x: 100 }} />\n *     </MotionConfig>\n *   )\n * }\n * ```\n *\n * @public\n */\nfunction MotionConfig(_a) {\n  var children = _a.children,\n    isValidProp = _a.isValidProp,\n    config = tslib.__rest(_a, [\"children\", \"isValidProp\"]);\n  isValidProp && loadExternalIsValidProp(isValidProp);\n  /**\n   * Inherit props from any parent MotionConfig components\n   */\n  config = tslib.__assign(tslib.__assign({}, React.useContext(MotionConfigContext)), config);\n  /**\n   * Don't allow isStatic to change between renders as it affects how many hooks\n   * motion components fire.\n   */\n  config.isStatic = useConstant(function () {\n    return config.isStatic;\n  });\n  /**\n   * Creating a new config context object will re-render every `motion` component\n   * every time it renders. So we only want to create a new one sparingly.\n   */\n  var context = React.useMemo(function () {\n    return config;\n  }, [JSON.stringify(config.transition), config.transformPagePoint, config.reducedMotion]);\n  return React__namespace.createElement(MotionConfigContext.Provider, {\n    value: context\n  }, children);\n}\n\n/**\n * Used in conjunction with the `m` component to reduce bundle size.\n *\n * `m` is a version of the `motion` component that only loads functionality\n * critical for the initial render.\n *\n * `LazyMotion` can then be used to either synchronously or asynchronously\n * load animation and gesture support.\n *\n * ```jsx\n * // Synchronous loading\n * import { LazyMotion, m, domAnimations } from \"framer-motion\"\n *\n * function App() {\n *   return (\n *     <LazyMotion features={domAnimations}>\n *       <m.div animate={{ scale: 2 }} />\n *     </LazyMotion>\n *   )\n * }\n *\n * // Asynchronous loading\n * import { LazyMotion, m } from \"framer-motion\"\n *\n * function App() {\n *   return (\n *     <LazyMotion features={() => import('./path/to/domAnimations')}>\n *       <m.div animate={{ scale: 2 }} />\n *     </LazyMotion>\n *   )\n * }\n * ```\n *\n * @public\n */\nfunction LazyMotion(_a) {\n  var children = _a.children,\n    features = _a.features,\n    _b = _a.strict,\n    strict = _b === void 0 ? false : _b;\n  var _c = tslib.__read(React.useState(!isLazyBundle(features)), 2),\n    setIsLoaded = _c[1];\n  var loadedRenderer = React.useRef(undefined);\n  /**\n   * If this is a synchronous load, load features immediately\n   */\n  if (!isLazyBundle(features)) {\n    var renderer = features.renderer,\n      loadedFeatures = tslib.__rest(features, [\"renderer\"]);\n    loadedRenderer.current = renderer;\n    loadFeatures(loadedFeatures);\n  }\n  React.useEffect(function () {\n    if (isLazyBundle(features)) {\n      features().then(function (_a) {\n        var renderer = _a.renderer,\n          loadedFeatures = tslib.__rest(_a, [\"renderer\"]);\n        loadFeatures(loadedFeatures);\n        loadedRenderer.current = renderer;\n        setIsLoaded(true);\n      });\n    }\n  }, []);\n  return React__namespace.createElement(LazyContext.Provider, {\n    value: {\n      renderer: loadedRenderer.current,\n      strict: strict\n    }\n  }, children);\n}\nfunction isLazyBundle(features) {\n  return typeof features === \"function\";\n}\nvar ReorderContext = React.createContext(null);\nfunction checkReorder(order, value, offset, velocity) {\n  if (!velocity) return order;\n  var index = order.findIndex(function (item) {\n    return item.value === value;\n  });\n  if (index === -1) return order;\n  var nextOffset = velocity > 0 ? 1 : -1;\n  var nextItem = order[index + nextOffset];\n  if (!nextItem) return order;\n  var item = order[index];\n  var nextLayout = nextItem.layout;\n  var nextItemCenter = popmotion.mix(nextLayout.min, nextLayout.max, 0.5);\n  if (nextOffset === 1 && item.layout.max + offset > nextItemCenter || nextOffset === -1 && item.layout.min + offset < nextItemCenter) {\n    return moveItem(order, index, index + nextOffset);\n  }\n  return order;\n}\nfunction ReorderGroup(_a, externalRef) {\n  var children = _a.children,\n    _b = _a.as,\n    as = _b === void 0 ? \"ul\" : _b,\n    _c = _a.axis,\n    axis = _c === void 0 ? \"y\" : _c,\n    onReorder = _a.onReorder,\n    values = _a.values,\n    props = tslib.__rest(_a, [\"children\", \"as\", \"axis\", \"onReorder\", \"values\"]);\n  var Component = useConstant(function () {\n    return motion(as);\n  });\n  var order = [];\n  var isReordering = React.useRef(false);\n  heyListen.invariant(Boolean(values), \"Reorder.Group must be provided a values prop\");\n  var context = {\n    axis: axis,\n    registerItem: function registerItem(value, layout) {\n      /**\n       * Ensure entries can't add themselves more than once\n       */\n      if (layout && order.findIndex(function (entry) {\n        return value === entry.value;\n      }) === -1) {\n        order.push({\n          value: value,\n          layout: layout[axis]\n        });\n        order.sort(compareMin);\n      }\n    },\n    updateOrder: function updateOrder(id, offset, velocity) {\n      if (isReordering.current) return;\n      var newOrder = checkReorder(order, id, offset, velocity);\n      if (order !== newOrder) {\n        isReordering.current = true;\n        onReorder(newOrder.map(getValue).filter(function (value) {\n          return values.indexOf(value) !== -1;\n        }));\n      }\n    }\n  };\n  React.useEffect(function () {\n    isReordering.current = false;\n  });\n  return React__namespace.createElement(Component, tslib.__assign({}, props, {\n    ref: externalRef\n  }), React__namespace.createElement(ReorderContext.Provider, {\n    value: context\n  }, children));\n}\nvar Group = React.forwardRef(ReorderGroup);\nfunction getValue(item) {\n  return item.value;\n}\nfunction compareMin(a, b) {\n  return a.layout.min - b.layout.min;\n}\n\n/**\n * Creates a `MotionValue` to track the state and velocity of a value.\n *\n * Usually, these are created automatically. For advanced use-cases, like use with `useTransform`, you can create `MotionValue`s externally and pass them into the animated component via the `style` prop.\n *\n * ```jsx\n * export const MyComponent = () => {\n *   const scale = useMotionValue(1)\n *\n *   return <motion.div style={{ scale }} />\n * }\n * ```\n *\n * @param initial - The initial state.\n *\n * @public\n */\nfunction useMotionValue(initial) {\n  var value = useConstant(function () {\n    return motionValue(initial);\n  });\n  /**\n   * If this motion value is being used in static mode, like on\n   * the Framer canvas, force components to rerender when the motion\n   * value is updated.\n   */\n  var isStatic = React.useContext(MotionConfigContext).isStatic;\n  if (isStatic) {\n    var _a = tslib.__read(React.useState(initial), 2),\n      setLatest_1 = _a[1];\n    React.useEffect(function () {\n      return value.onChange(setLatest_1);\n    }, []);\n  }\n  return value;\n}\nvar isCustomValueType = function isCustomValueType(v) {\n  return typeof v === \"object\" && v.mix;\n};\nvar getMixer = function getMixer(v) {\n  return isCustomValueType(v) ? v.mix : undefined;\n};\nfunction transform() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  var useImmediate = !Array.isArray(args[0]);\n  var argOffset = useImmediate ? 0 : -1;\n  var inputValue = args[0 + argOffset];\n  var inputRange = args[1 + argOffset];\n  var outputRange = args[2 + argOffset];\n  var options = args[3 + argOffset];\n  var interpolator = popmotion.interpolate(inputRange, outputRange, tslib.__assign({\n    mixer: getMixer(outputRange[0])\n  }, options));\n  return useImmediate ? interpolator(inputValue) : interpolator;\n}\nfunction useOnChange(value, callback) {\n  useIsomorphicLayoutEffect(function () {\n    if (isMotionValue(value)) return value.onChange(callback);\n  }, [callback]);\n}\nfunction useMultiOnChange(values, handler) {\n  useIsomorphicLayoutEffect(function () {\n    var subscriptions = values.map(function (value) {\n      return value.onChange(handler);\n    });\n    return function () {\n      return subscriptions.forEach(function (unsubscribe) {\n        return unsubscribe();\n      });\n    };\n  });\n}\nfunction useCombineMotionValues(values, combineValues) {\n  /**\n   * Initialise the returned motion value. This remains the same between renders.\n   */\n  var value = useMotionValue(combineValues());\n  /**\n   * Create a function that will update the template motion value with the latest values.\n   * This is pre-bound so whenever a motion value updates it can schedule its\n   * execution in Framesync. If it's already been scheduled it won't be fired twice\n   * in a single frame.\n   */\n  var updateValue = function updateValue() {\n    return value.set(combineValues());\n  };\n  /**\n   * Synchronously update the motion value with the latest values during the render.\n   * This ensures that within a React render, the styles applied to the DOM are up-to-date.\n   */\n  updateValue();\n  /**\n   * Subscribe to all motion values found within the template. Whenever any of them change,\n   * schedule an update.\n   */\n  useMultiOnChange(values, function () {\n    return sync__default[\"default\"].update(updateValue, false, true);\n  });\n  return value;\n}\nfunction useTransform(input, inputRangeOrTransformer, outputRange, options) {\n  var transformer = typeof inputRangeOrTransformer === \"function\" ? inputRangeOrTransformer : transform(inputRangeOrTransformer, outputRange, options);\n  return Array.isArray(input) ? useListTransform(input, transformer) : useListTransform([input], function (_a) {\n    var _b = tslib.__read(_a, 1),\n      latest = _b[0];\n    return transformer(latest);\n  });\n}\nfunction useListTransform(values, transformer) {\n  var latest = useConstant(function () {\n    return [];\n  });\n  return useCombineMotionValues(values, function () {\n    latest.length = 0;\n    var numValues = values.length;\n    for (var i = 0; i < numValues; i++) {\n      latest[i] = values[i].get();\n    }\n    return transformer(latest);\n  });\n}\nfunction useDefaultMotionValue(value, defaultValue) {\n  if (defaultValue === void 0) {\n    defaultValue = 0;\n  }\n  return isMotionValue(value) ? value : useMotionValue(defaultValue);\n}\nfunction ReorderItem(_a, externalRef) {\n  var children = _a.children,\n    style = _a.style,\n    value = _a.value,\n    _b = _a.as,\n    as = _b === void 0 ? \"li\" : _b,\n    _onDrag = _a.onDrag,\n    _c = _a.layout,\n    layout = _c === void 0 ? true : _c,\n    props = tslib.__rest(_a, [\"children\", \"style\", \"value\", \"as\", \"onDrag\", \"layout\"]);\n  var Component = useConstant(function () {\n    return motion(as);\n  });\n  var context = React.useContext(ReorderContext);\n  var point = {\n    x: useDefaultMotionValue(style === null || style === void 0 ? void 0 : style.x),\n    y: useDefaultMotionValue(style === null || style === void 0 ? void 0 : style.y)\n  };\n  var zIndex = useTransform([point.x, point.y], function (_a) {\n    var _b = tslib.__read(_a, 2),\n      latestX = _b[0],\n      latestY = _b[1];\n    return latestX || latestY ? 1 : \"unset\";\n  });\n  var measuredLayout = React.useRef(null);\n  heyListen.invariant(Boolean(context), \"Reorder.Item must be a child of Reorder.Group\");\n  var _d = context,\n    axis = _d.axis,\n    registerItem = _d.registerItem,\n    updateOrder = _d.updateOrder;\n  React.useEffect(function () {\n    registerItem(value, measuredLayout.current);\n  }, [context]);\n  return React__namespace.createElement(Component, tslib.__assign({\n    drag: axis\n  }, props, {\n    dragSnapToOrigin: true,\n    style: tslib.__assign(tslib.__assign({}, style), {\n      x: point.x,\n      y: point.y,\n      zIndex: zIndex\n    }),\n    layout: layout,\n    onDrag: function onDrag(event, gesturePoint) {\n      var velocity = gesturePoint.velocity;\n      velocity[axis] && updateOrder(value, point[axis].get(), velocity[axis]);\n      _onDrag === null || _onDrag === void 0 ? void 0 : _onDrag(event, gesturePoint);\n    },\n    onLayoutMeasure: function onLayoutMeasure(measured) {\n      measuredLayout.current = measured;\n    },\n    ref: externalRef\n  }), children);\n}\nvar Item = React.forwardRef(ReorderItem);\nvar Reorder = {\n  Group: Group,\n  Item: Item\n};\n\n/**\n * @public\n */\nvar domAnimation = tslib.__assign(tslib.__assign({\n  renderer: createDomVisualElement\n}, animations), gestureAnimations);\n\n/**\n * @public\n */\nvar domMax = tslib.__assign(tslib.__assign(tslib.__assign(tslib.__assign({}, domAnimation), drag), layoutFeatures), {\n  projectionNodeConstructor: HTMLProjectionNode\n});\n\n/**\n * Combine multiple motion values into a new one using a string template literal.\n *\n * ```jsx\n * import {\n *   motion,\n *   useSpring,\n *   useMotionValue,\n *   useMotionTemplate\n * } from \"framer-motion\"\n *\n * function Component() {\n *   const shadowX = useSpring(0)\n *   const shadowY = useMotionValue(0)\n *   const shadow = useMotionTemplate`drop-shadow(${shadowX}px ${shadowY}px 20px rgba(0,0,0,0.3))`\n *\n *   return <motion.div style={{ filter: shadow }} />\n * }\n * ```\n *\n * @public\n */\nfunction useMotionTemplate(fragments) {\n  var values = [];\n  for (var _i = 1; _i < arguments.length; _i++) {\n    values[_i - 1] = arguments[_i];\n  }\n  /**\n   * Create a function that will build a string from the latest motion values.\n   */\n  var numFragments = fragments.length;\n  function buildValue() {\n    var output = \"\";\n    for (var i = 0; i < numFragments; i++) {\n      output += fragments[i];\n      var value = values[i];\n      if (value) output += values[i].get();\n    }\n    return output;\n  }\n  return useCombineMotionValues(values, buildValue);\n}\n\n/**\n * Creates a `MotionValue` that, when `set`, will use a spring animation to animate to its new state.\n *\n * It can either work as a stand-alone `MotionValue` by initialising it with a value, or as a subscriber\n * to another `MotionValue`.\n *\n * @remarks\n *\n * ```jsx\n * const x = useSpring(0, { stiffness: 300 })\n * const y = useSpring(x, { damping: 10 })\n * ```\n *\n * @param inputValue - `MotionValue` or number. If provided a `MotionValue`, when the input `MotionValue` changes, the created `MotionValue` will spring towards that value.\n * @param springConfig - Configuration options for the spring.\n * @returns `MotionValue`\n *\n * @public\n */\nfunction useSpring(source, config) {\n  if (config === void 0) {\n    config = {};\n  }\n  var isStatic = React.useContext(MotionConfigContext).isStatic;\n  var activeSpringAnimation = React.useRef(null);\n  var value = useMotionValue(isMotionValue(source) ? source.get() : source);\n  React.useMemo(function () {\n    return value.attach(function (v, set) {\n      /**\n       * A more hollistic approach to this might be to use isStatic to fix VisualElement animations\n       * at that level, but this will work for now\n       */\n      if (isStatic) return set(v);\n      if (activeSpringAnimation.current) {\n        activeSpringAnimation.current.stop();\n      }\n      activeSpringAnimation.current = popmotion.animate(tslib.__assign(tslib.__assign({\n        from: value.get(),\n        to: v,\n        velocity: value.getVelocity()\n      }, config), {\n        onUpdate: set\n      }));\n      return value.get();\n    });\n  }, [JSON.stringify(config)]);\n  useOnChange(source, function (v) {\n    return value.set(parseFloat(v));\n  });\n  return value;\n}\n\n/**\n * Creates a `MotionValue` that updates when the velocity of the provided `MotionValue` changes.\n *\n * ```javascript\n * const x = useMotionValue(0)\n * const xVelocity = useVelocity(x)\n * const xAcceleration = useVelocity(xVelocity)\n * ```\n *\n * @public\n */\nfunction useVelocity(value) {\n  var velocity = useMotionValue(value.getVelocity());\n  React.useEffect(function () {\n    return value.velocityUpdateSubscribers.add(function (newVelocity) {\n      velocity.set(newVelocity);\n    });\n  }, [value]);\n  return velocity;\n}\nvar createScrollMotionValues = function createScrollMotionValues() {\n  return {\n    scrollX: motionValue(0),\n    scrollY: motionValue(0),\n    scrollXProgress: motionValue(0),\n    scrollYProgress: motionValue(0)\n  };\n};\nfunction useScroll(_a) {\n  if (_a === void 0) {\n    _a = {};\n  }\n  var container = _a.container,\n    target = _a.target,\n    options = tslib.__rest(_a, [\"container\", \"target\"]);\n  var values = useConstant(createScrollMotionValues);\n  useIsomorphicLayoutEffect(function () {\n    return dom.scroll(function (_a) {\n      var x = _a.x,\n        y = _a.y;\n      values.scrollX.set(x.current);\n      values.scrollXProgress.set(x.progress);\n      values.scrollY.set(y.current);\n      values.scrollYProgress.set(y.progress);\n    }, tslib.__assign(tslib.__assign({}, options), {\n      container: (container === null || container === void 0 ? void 0 : container.current) || undefined,\n      target: (target === null || target === void 0 ? void 0 : target.current) || undefined\n    }));\n  }, []);\n  return values;\n}\nfunction useElementScroll(ref) {\n  warnOnce(false, \"useElementScroll is deprecated. Convert to useScroll({ container: ref }).\");\n  return useScroll({\n    container: ref\n  });\n}\nfunction useViewportScroll() {\n  warnOnce(false, \"useViewportScroll is deprecated. Convert to useScroll().\");\n  return useScroll();\n}\nvar getCurrentTime = typeof performance !== \"undefined\" ? function () {\n  return performance.now();\n} : function () {\n  return Date.now();\n};\nfunction useAnimationFrame(callback) {\n  var initialTimestamp = useConstant(getCurrentTime);\n  var isStatic = React.useContext(MotionConfigContext).isStatic;\n  React.useEffect(function () {\n    if (isStatic) return;\n    var provideTimeSinceStart = function provideTimeSinceStart(_a) {\n      var timestamp = _a.timestamp;\n      callback(timestamp - initialTimestamp);\n    };\n    sync__default[\"default\"].update(provideTimeSinceStart, true);\n    return function () {\n      return sync.cancelSync.update(provideTimeSinceStart);\n    };\n  }, [callback]);\n}\nfunction useTime() {\n  var time = useMotionValue(0);\n  useAnimationFrame(function (t) {\n    return time.set(t);\n  });\n  return time;\n}\n\n/**\n * @public\n */\nfunction animationControls() {\n  /**\n   * Track whether the host component has mounted.\n   */\n  var hasMounted = false;\n  /**\n   * Pending animations that are started before a component is mounted.\n   * TODO: Remove this as animations should only run in effects\n   */\n  var pendingAnimations = [];\n  /**\n   * A collection of linked component animation controls.\n   */\n  var subscribers = new Set();\n  var controls = {\n    subscribe: function subscribe(visualElement) {\n      subscribers.add(visualElement);\n      return function () {\n        return void subscribers.delete(visualElement);\n      };\n    },\n    start: function start(definition, transitionOverride) {\n      /**\n       * TODO: We only perform this hasMounted check because in Framer we used to\n       * encourage the ability to start an animation within the render phase. This\n       * isn't behaviour concurrent-safe so when we make Framer concurrent-safe\n       * we can ditch this.\n       */\n      if (hasMounted) {\n        var animations_1 = [];\n        subscribers.forEach(function (visualElement) {\n          animations_1.push(animateVisualElement(visualElement, definition, {\n            transitionOverride: transitionOverride\n          }));\n        });\n        return Promise.all(animations_1);\n      } else {\n        return new Promise(function (resolve) {\n          pendingAnimations.push({\n            animation: [definition, transitionOverride],\n            resolve: resolve\n          });\n        });\n      }\n    },\n    set: function set(definition) {\n      heyListen.invariant(hasMounted, \"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook.\");\n      return subscribers.forEach(function (visualElement) {\n        setValues(visualElement, definition);\n      });\n    },\n    stop: function stop() {\n      subscribers.forEach(function (visualElement) {\n        stopAnimation(visualElement);\n      });\n    },\n    mount: function mount() {\n      hasMounted = true;\n      pendingAnimations.forEach(function (_a) {\n        var animation = _a.animation,\n          resolve = _a.resolve;\n        controls.start.apply(controls, tslib.__spreadArray([], tslib.__read(animation), false)).then(resolve);\n      });\n      return function () {\n        hasMounted = false;\n        controls.stop();\n      };\n    }\n  };\n  return controls;\n}\n\n/**\n * Creates `AnimationControls`, which can be used to manually start, stop\n * and sequence animations on one or more components.\n *\n * The returned `AnimationControls` should be passed to the `animate` property\n * of the components you want to animate.\n *\n * These components can then be animated with the `start` method.\n *\n * ```jsx\n * import * as React from 'react'\n * import { motion, useAnimation } from 'framer-motion'\n *\n * export function MyComponent(props) {\n *    const controls = useAnimation()\n *\n *    controls.start({\n *        x: 100,\n *        transition: { duration: 0.5 },\n *    })\n *\n *    return <motion.div animate={controls} />\n * }\n * ```\n *\n * @returns Animation controller with `start` and `stop` methods\n *\n * @public\n */\nfunction useAnimationControls() {\n  var controls = useConstant(animationControls);\n  React.useEffect(controls.mount, []);\n  return controls;\n}\nvar useAnimation = useAnimationControls;\n\n/**\n * Cycles through a series of visual properties. Can be used to toggle between or cycle through animations. It works similar to `useState` in React. It is provided an initial array of possible states, and returns an array of two arguments.\n *\n * An index value can be passed to the returned `cycle` function to cycle to a specific index.\n *\n * ```jsx\n * import * as React from \"react\"\n * import { motion, useCycle } from \"framer-motion\"\n *\n * export const MyComponent = () => {\n *   const [x, cycleX] = useCycle(0, 50, 100)\n *\n *   return (\n *     <motion.div\n *       animate={{ x: x }}\n *       onTap={() => cycleX()}\n *      />\n *    )\n * }\n * ```\n *\n * @param items - items to cycle through\n * @returns [currentState, cycleState]\n *\n * @public\n */\nfunction useCycle() {\n  var items = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    items[_i] = arguments[_i];\n  }\n  var index = React.useRef(0);\n  var _a = tslib.__read(React.useState(items[index.current]), 2),\n    item = _a[0],\n    setItem = _a[1];\n  var runCycle = React.useCallback(function (next) {\n    index.current = typeof next !== \"number\" ? popmotion.wrap(0, items.length, index.current + 1) : next;\n    setItem(items[index.current]);\n  }, tslib.__spreadArray([items.length], tslib.__read(items), false));\n  return [item, runCycle];\n}\nfunction useInView(ref, _a) {\n  var _b = _a === void 0 ? {} : _a,\n    root = _b.root,\n    margin = _b.margin,\n    amount = _b.amount,\n    _c = _b.once,\n    once = _c === void 0 ? false : _c;\n  var _d = tslib.__read(React.useState(false), 2),\n    isInView = _d[0],\n    setInView = _d[1];\n  React.useEffect(function () {\n    var _a;\n    if (!ref.current || once && isInView) return;\n    var onEnter = function onEnter() {\n      setInView(true);\n      return once ? undefined : function () {\n        return setInView(false);\n      };\n    };\n    var options = {\n      root: (_a = root === null || root === void 0 ? void 0 : root.current) !== null && _a !== void 0 ? _a : undefined,\n      margin: margin,\n      amount: amount === \"some\" ? \"any\" : amount\n    };\n    return dom.inView(ref.current, onEnter, options);\n  }, [root, ref, margin, once]);\n  return isInView;\n}\n\n/**\n * Can manually trigger a drag gesture on one or more `drag`-enabled `motion` components.\n *\n * ```jsx\n * const dragControls = useDragControls()\n *\n * function startDrag(event) {\n *   dragControls.start(event, { snapToCursor: true })\n * }\n *\n * return (\n *   <>\n *     <div onPointerDown={startDrag} />\n *     <motion.div drag=\"x\" dragControls={dragControls} />\n *   </>\n * )\n * ```\n *\n * @public\n */\nvar DragControls = /** @class */function () {\n  function DragControls() {\n    this.componentControls = new Set();\n  }\n  /**\n   * Subscribe a component's internal `VisualElementDragControls` to the user-facing API.\n   *\n   * @internal\n   */\n  DragControls.prototype.subscribe = function (controls) {\n    var _this = this;\n    this.componentControls.add(controls);\n    return function () {\n      return _this.componentControls.delete(controls);\n    };\n  };\n  /**\n   * Start a drag gesture on every `motion` component that has this set of drag controls\n   * passed into it via the `dragControls` prop.\n   *\n   * ```jsx\n   * dragControls.start(e, {\n   *   snapToCursor: true\n   * })\n   * ```\n   *\n   * @param event - PointerEvent\n   * @param options - Options\n   *\n   * @public\n   */\n  DragControls.prototype.start = function (event, options) {\n    this.componentControls.forEach(function (controls) {\n      controls.start(event.nativeEvent || event, options);\n    });\n  };\n  return DragControls;\n}();\nvar createDragControls = function createDragControls() {\n  return new DragControls();\n};\n/**\n * Usually, dragging is initiated by pressing down on a `motion` component with a `drag` prop\n * and moving it. For some use-cases, for instance clicking at an arbitrary point on a video scrubber, we\n * might want to initiate that dragging from a different component than the draggable one.\n *\n * By creating a `dragControls` using the `useDragControls` hook, we can pass this into\n * the draggable component's `dragControls` prop. It exposes a `start` method\n * that can start dragging from pointer events on other components.\n *\n * ```jsx\n * const dragControls = useDragControls()\n *\n * function startDrag(event) {\n *   dragControls.start(event, { snapToCursor: true })\n * }\n *\n * return (\n *   <>\n *     <div onPointerDown={startDrag} />\n *     <motion.div drag=\"x\" dragControls={dragControls} />\n *   </>\n * )\n * ```\n *\n * @public\n */\nfunction useDragControls() {\n  return useConstant(createDragControls);\n}\nfunction useInstantLayoutTransition() {\n  return startTransition;\n}\nfunction startTransition(cb) {\n  if (!rootProjectionNode.current) return;\n  rootProjectionNode.current.isUpdating = false;\n  rootProjectionNode.current.blockUpdate();\n  cb === null || cb === void 0 ? void 0 : cb();\n}\nfunction useInstantTransition() {\n  var _a = tslib.__read(useForceUpdate(), 2),\n    forceUpdate = _a[0],\n    forcedRenderCount = _a[1];\n  var startInstantLayoutTransition = useInstantLayoutTransition();\n  React.useEffect(function () {\n    /**\n     * Unblock after two animation frames, otherwise this will unblock too soon.\n     */\n    sync__default[\"default\"].postRender(function () {\n      return sync__default[\"default\"].postRender(function () {\n        return instantAnimationState.current = false;\n      });\n    });\n  }, [forcedRenderCount]);\n  return function (callback) {\n    startInstantLayoutTransition(function () {\n      instantAnimationState.current = true;\n      forceUpdate();\n      callback();\n    });\n  };\n}\nfunction useResetProjection() {\n  var reset = React__namespace.useCallback(function () {\n    var root = rootProjectionNode.current;\n    if (!root) return;\n    root.resetTree();\n  }, []);\n  return reset;\n}\nvar createObject = function createObject() {\n  return {};\n};\nvar stateVisualElement = visualElement({\n  build: function build() {},\n  measureViewportBox: createBox,\n  resetTransform: function resetTransform() {},\n  restoreTransform: function restoreTransform() {},\n  removeValueFromRenderState: function removeValueFromRenderState() {},\n  render: function render() {},\n  scrapeMotionValuesFromProps: createObject,\n  readValueFromInstance: function readValueFromInstance(_state, key, options) {\n    return options.initialState[key] || 0;\n  },\n  makeTargetAnimatable: function makeTargetAnimatable(element, _a) {\n    var transition = _a.transition,\n      transitionEnd = _a.transitionEnd,\n      target = tslib.__rest(_a, [\"transition\", \"transitionEnd\"]);\n    var origin = getOrigin(target, transition || {}, element);\n    checkTargetForNewValues(element, target, origin);\n    return tslib.__assign({\n      transition: transition,\n      transitionEnd: transitionEnd\n    }, target);\n  }\n});\nvar useVisualState = makeUseVisualState({\n  scrapeMotionValuesFromProps: createObject,\n  createRenderState: createObject\n});\n/**\n * This is not an officially supported API and may be removed\n * on any version.\n */\nfunction useAnimatedState(initialState) {\n  var _a = tslib.__read(React.useState(initialState), 2),\n    animationState = _a[0],\n    setAnimationState = _a[1];\n  var visualState = useVisualState({}, false);\n  var element = useConstant(function () {\n    return stateVisualElement({\n      props: {},\n      visualState: visualState\n    }, {\n      initialState: initialState\n    });\n  });\n  React.useEffect(function () {\n    element.mount({});\n    return element.unmount;\n  }, [element]);\n  React.useEffect(function () {\n    element.setProps({\n      onUpdate: function onUpdate(v) {\n        setAnimationState(tslib.__assign({}, v));\n      }\n    });\n  }, [setAnimationState, element]);\n  var startAnimation = useConstant(function () {\n    return function (animationDefinition) {\n      return animateVisualElement(element, animationDefinition);\n    };\n  });\n  return [animationState, startAnimation];\n}\n\n// Keep things reasonable and avoid scale: Infinity. In practise we might need\n// to add another value, opacity, that could interpolate scaleX/Y [0,0.01] => [0,1]\n// to simply hide content at unreasonable scales.\nvar maxScale = 100000;\nvar invertScale = function invertScale(scale) {\n  return scale > 0.001 ? 1 / scale : maxScale;\n};\nvar hasWarned = false;\n/**\n * Returns a `MotionValue` each for `scaleX` and `scaleY` that update with the inverse\n * of their respective parent scales.\n *\n * This is useful for undoing the distortion of content when scaling a parent component.\n *\n * By default, `useInvertedScale` will automatically fetch `scaleX` and `scaleY` from the nearest parent.\n * By passing other `MotionValue`s in as `useInvertedScale({ scaleX, scaleY })`, it will invert the output\n * of those instead.\n *\n * ```jsx\n * const MyComponent = () => {\n *   const { scaleX, scaleY } = useInvertedScale()\n *   return <motion.div style={{ scaleX, scaleY }} />\n * }\n * ```\n *\n * @deprecated\n */\nfunction useInvertedScale(scale) {\n  var parentScaleX = useMotionValue(1);\n  var parentScaleY = useMotionValue(1);\n  var visualElement = useVisualElementContext();\n  heyListen.invariant(!!(scale || visualElement), \"If no scale values are provided, useInvertedScale must be used within a child of another motion component.\");\n  heyListen.warning(hasWarned, \"useInvertedScale is deprecated and will be removed in 3.0. Use the layout prop instead.\");\n  hasWarned = true;\n  if (scale) {\n    parentScaleX = scale.scaleX || parentScaleX;\n    parentScaleY = scale.scaleY || parentScaleY;\n  } else if (visualElement) {\n    parentScaleX = visualElement.getValue(\"scaleX\", 1);\n    parentScaleY = visualElement.getValue(\"scaleY\", 1);\n  }\n  var scaleX = useTransform(parentScaleX, invertScale);\n  var scaleY = useTransform(parentScaleY, invertScale);\n  return {\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\nexports.AnimatePresence = AnimatePresence;\nexports.AnimateSharedLayout = AnimateSharedLayout;\nexports.DeprecatedLayoutGroupContext = DeprecatedLayoutGroupContext;\nexports.DragControls = DragControls;\nexports.FlatTree = FlatTree;\nexports.LayoutGroup = LayoutGroup;\nexports.LayoutGroupContext = LayoutGroupContext;\nexports.LazyMotion = LazyMotion;\nexports.MotionConfig = MotionConfig;\nexports.MotionConfigContext = MotionConfigContext;\nexports.MotionContext = MotionContext;\nexports.MotionValue = MotionValue;\nexports.PresenceContext = PresenceContext;\nexports.Reorder = Reorder;\nexports.SwitchLayoutGroupContext = SwitchLayoutGroupContext;\nexports.addPointerEvent = addPointerEvent;\nexports.addScaleCorrector = addScaleCorrector;\nexports.animate = animate;\nexports.animateVisualElement = animateVisualElement;\nexports.animationControls = animationControls;\nexports.animations = animations;\nexports.calcLength = calcLength;\nexports.checkTargetForNewValues = checkTargetForNewValues;\nexports.createBox = createBox;\nexports.createDomMotionComponent = createDomMotionComponent;\nexports.createMotionComponent = createMotionComponent;\nexports.domAnimation = domAnimation;\nexports.domMax = domMax;\nexports.filterProps = filterProps;\nexports.isBrowser = isBrowser;\nexports.isDragActive = isDragActive;\nexports.isMotionValue = isMotionValue;\nexports.isValidMotionProp = isValidMotionProp;\nexports.m = m;\nexports.makeUseVisualState = makeUseVisualState;\nexports.motion = motion;\nexports.motionValue = motionValue;\nexports.resolveMotionValue = resolveMotionValue;\nexports.transform = transform;\nexports.useAnimation = useAnimation;\nexports.useAnimationControls = useAnimationControls;\nexports.useAnimationFrame = useAnimationFrame;\nexports.useCycle = useCycle;\nexports.useDeprecatedAnimatedState = useAnimatedState;\nexports.useDeprecatedInvertedScale = useInvertedScale;\nexports.useDomEvent = useDomEvent;\nexports.useDragControls = useDragControls;\nexports.useElementScroll = useElementScroll;\nexports.useForceUpdate = useForceUpdate;\nexports.useInView = useInView;\nexports.useInstantLayoutTransition = useInstantLayoutTransition;\nexports.useInstantTransition = useInstantTransition;\nexports.useIsPresent = useIsPresent;\nexports.useIsomorphicLayoutEffect = useIsomorphicLayoutEffect;\nexports.useMotionTemplate = useMotionTemplate;\nexports.useMotionValue = useMotionValue;\nexports.usePresence = usePresence;\nexports.useReducedMotion = useReducedMotion;\nexports.useReducedMotionConfig = useReducedMotionConfig;\nexports.useResetProjection = useResetProjection;\nexports.useScroll = useScroll;\nexports.useSpring = useSpring;\nexports.useTime = useTime;\nexports.useTransform = useTransform;\nexports.useUnmountEffect = useUnmountEffect;\nexports.useVelocity = useVelocity;\nexports.useViewportScroll = useViewportScroll;\nexports.useVisualElementContext = useVisualElementContext;\nexports.visualElement = visualElement;\nexports.wrapHandler = wrapHandler;"],"names":["Object","defineProperty","exports","value","tslib","React","heyListen","styleValueTypes","popmotion","sync","dom","_interopDefaultLegacy","e","_interopNamespace","__esModule","n","create","keys","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","freeze","React__namespace","React__default","sync__default","env","createDefinition","propNames","isEnabled","props","some","name","featureDefinitions","measureLayout","animation","exit","drag","focus","hover","tap","pan","inView","loadFeatures","features","key","projectionNodeConstructor","Component","LazyContext","createContext","strict","featureNames","numFeatures","length","MotionConfigContext","transformPagePoint","p","isStatic","reducedMotion","MotionContext","useVisualElementContext","useContext","visualElement","PresenceContext","isBrowser","document","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","prefersReducedMotion","current","hasDetected","useReducedMotion","window","matchMedia","motionMediaQuery_1","setReducedMotionPreferences","matches","addListener","initPrefersReducedMotion","__read","useState","useReducedMotionConfig","reducedMotionPreference","isRefObject","ref","prototype","hasOwnProperty","call","isVariantLabels","v","Array","isArray","isVariantLabel","resolveVariantFromProps","definition","custom","currentValues","currentVelocity","_a","variants","resolveVariant","getProps","forEachValue","getCurrent","velocity","getVelocity","getVelocity$1","checkIfControllingVariants","animate","start","initial","whileHover","whileDrag","whileTap","whileFocus","checkIfVariantNode","Boolean","useCreateMotionContext","context","undefined","inherit","getCurrentTreeVariants","useMemo","variantLabelsAsDependency","prop","join","useConstant","init","useRef","globalProjectionState","hasAnimatedSinceResize","hasEverUpdated","id$1","LayoutGroupContext","SwitchLayoutGroupContext","VisualElementHandler","_super","apply","this","arguments","__extends","getSnapshotBeforeUpdate","updateProps","componentDidUpdate","setProps","render","children","createMotionComponent","preloadedFeatures","createVisualElement","useRender","useVisualState","forwardRef","externalRef","layoutId","_b","layoutGroupId","id","useLayoutId","__assign","config","projectionId","visualState","lazyContext","parent","presenceContext","shouldReduceMotion","visualElementRef","renderer","presenceId","blockInitialAnimation","syncRender","animationState","animateChanges","notifyUnmount","useVisualElement","ProjectionNodeConstructor","layout","dragConstraints","layoutScroll","initialPromotionConfig","projection","getLatestValues","setOptions","alwaysMeasureLayout","scheduleRender","animationType","useProjection","invariant","i","name_1","push","createElement","useFeatures","Provider","useCallback","instance","mount","unmount","useMotionRef","createMotionProxy","createConfig","customMotionComponentConfig","Proxy","componentCache","Map","_target","has","set","lowercaseSVGElements","isSVGComponent","includes","indexOf","test","scaleCorrectors","addScaleCorrector","correctors","assign","transformAxes","transformProps","sortTransformProps","a","b","operationKey","axesKey","transformPropSet","Set","isTransformProp","transformOriginProps","isTransformOriginProp","isForcedMotionValue","isMotionValue","translateAlias","x","y","z","transformPerspective","isCSSVariable$1","startsWith","getValueAsType","type","transform","int","number","Math","round","numberValueTypes","borderWidth","px","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderRadius","radius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","width","maxWidth","height","maxHeight","size","top","right","bottom","left","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","rotate","degrees","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","distance","translateX","translateY","translateZ","perspective","opacity","alpha","originX","progressPercentage","originY","originZ","zIndex","fillOpacity","strokeOpacity","numOctaves","buildHTMLStyles","state","latestValues","options","transformTemplate","style","vars","transformKeys","transformOrigin","hasTransform","hasTransformOrigin","transformIsNone","valueType","valueAsType","default","transformIsDefault","_c","enableHardwareAcceleration","_d","allowTransformNone","transformString","sort","transformHasZ","numTransformKeys","concat","trim","buildTransform","buildTransformOrigin","createHtmlRenderState","copyRawValuesOnly","target","source","useStyle","useInitialMotionValues","transformValues","useHTMLProps","htmlProps","dragListener","draggable","userSelect","WebkitUserSelect","WebkitTouchCallout","touchAction","validMotionProps","isValidMotionProp","shouldForward","loadExternalIsValidProp","isValidProp","filterProps","isDom","forwardMotionProps","filteredProps","calcOrigin$1","origin","offset","dashKeys","array","camelKeys","buildSVGAttrs","attrX","attrY","pathLength","pathSpacing","pathOffset","__rest","attrs","dimensions","pxOriginX","pxOriginY","calcSVGTransformOrigin","spacing","useDashCase","buildSVGPath","createSvgRenderState","useSVGProps","visualProps","rawStyles","createUseRender","elementProps","CAMEL_CASE_PATTERN","camelToDash","str","replace","toLowerCase","renderHTML","element","styleProp","getProjectionStyles","setProperty","camelCaseAttributes","renderSVG","renderState","_styleProp","setAttribute","scrapeMotionValuesFromProps$1","newValues","scrapeMotionValuesFromProps","toUpperCase","isAnimationControls","isKeyframesTarget","isCustomValue","mix","toValue","resolveFinalValueInKeyframes","resolveMotionValue","unwrappedValue","makeState","createRenderState","onMount","makeLatestValues","makeUseVisualState","scrapeMotionValues","values","motionValues","isControllingVariants","isVariantNode","initialAnimationIsBlocked","variantToSet","resolved","transitionEnd","transition","valueTarget","AnimationType","svgMotionConfig","getBBox","getBoundingClientRect","htmlMotionConfig","createDomMotionConfig","baseConfig","addDomEvent","eventName","handler","passive","addEventListener","removeEventListener","useDomEvent","isMouseEvent","event","PointerEvent","pointerType","MouseEvent","isTouchEvent","touches","defaultPagePoint","pageX","pageY","pointFromTouch","pointType","point","changedTouches","pointFromMouse","extractEventInfo","wrapHandler","shouldFilterPrimaryPointer","eventHandler","listener","button","supportsPointerEvents","onpointerdown","supportsTouchEvents","ontouchstart","supportsMouseEvents","onmousedown","mouseEventNames","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","pointerenter","pointerleave","touchEventNames","getPointerEventName","addPointerEvent","usePointerEvent","createLock","lock","globalHorizontalLock","globalVerticalLock","getGlobalLock","openHorizontal_1","openVertical_1","isDragActive","openGestureLock","createHoverEvent","isActive","callback","info","setActive","Hover","isNodeOrChild","child","parentElement","useUnmountEffect","warned","warnOnce","condition","message","console","warn","add","observerCallbacks","WeakMap","observers","fireObserverCallback","entry","fireAllObserverCallbacks","entries","observeIntersection","rootInteresectionObserver","root","lookupRoot","rootObservers","JSON","stringify","IntersectionObserver","initIntersectionObserver","observe","delete","unobserve","thresholdNames","all","useIntersectionObserver","shouldObserve","rootMargin","amount","once","threshold","getInstance","isIntersecting","isInView","hasEnteredView","InView","onViewportEnter","onViewportLeave","useMissingIntersectionObserver","fallback","requestAnimationFrame","makeRenderlessComponent","hook","gestureAnimations","whileInView","viewport","onTap","onTapStart","onTapCancel","hasPressListeners","isPressing","cancelPointerEndListeners","eventOptions","onPointerDown","removePointerEndListener","checkPointerEnd","Tap","onPointerUp","onPointerCancel","pipe","Focus","onHoverStart","onHoverEnd","counter","incrementId","useId","usePresence","isPresent","onExitComplete","register","shallowCompare","next","prev","prevLength","secondsToMilliseconds","seconds","easingLookup","linear","easeIn","easeInOut","easeOut","circIn","circInOut","circOut","backIn","backInOut","backOut","anticipate","bounceIn","bounceInOut","bounceOut","easingDefinitionToFunction","x1","y1","x2","y2","cubicBezier","isEasingArray","ease","isAnimatable","complex","underDampedSpring","stiffness","damping","restSpeed","criticallyDampedSpring","to","sqrt","linearTween","duration","keyframes","defaultTransitions","backgroundColor","color","getDefaultTransition","valueKey","transitionFactory","defaultValueTypes","outlineColor","fill","stroke","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","filter","WebkitFilter","getDefaultValueType","getAnimatableNone","defaultValueType","instantAnimationState","legacyRepeatWarning","getPopmotionAnimationOptions","__spreadArray","from","hydrateKeyframes","when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","isTransitionDefined","times","yoyo","flip","loop","map","warning","convertTransitionToAnimationOptions","isZero","parseFloat","getZeroUnit","potentialUnitType","getValueTransition","startAnimation","onComplete","delayTimer","controls","valueTransition","isTargetAnimatable","isOriginAnimatable","onUpdate","inertia","finalTarget","stop","getAnimation","getDelayFromTransition","setTimeout","clearTimeout","isZeroValueString","addUniqueItem","arr","item","removeItem","index","splice","SubscriptionManager","subscriptions","_this","notify","c","numSubscriptions","getSize","clear","MotionValue","version","timeDelta","lastUpdated","updateSubscribers","velocityUpdateSubscribers","renderSubscribers","canTrackVelocity","updateAndNotify","getFrameData","delta","timestamp","postRender","scheduleVelocityCheck","velocityCheck","hasAnimated","isNaN","onChange","subscription","clearListeners","onRenderRequest","attach","passiveEffect","getPrevious","velocityPerSecond","Promise","resolve","stopAnimation","then","clearAnimation","isAnimating","destroy","motionValue","testValueType","dimensionValueTypes","percent","vw","vh","parse","findDimensionValueType","find","valueTypes","findValueType","setMotionValue","hasValue","getValue","addValue","setTarget","makeTargetAnimatable","setVariants","variantLabels","reverse","variant","getVariant","variantChildren","checkTargetForNewValues","newValueKeys","numNewValues","targetValue","readValue","setBaseTarget","getOriginFromTransition","getOrigin","animateVisualElement","notifyAnimationStart","animations","animateVariant","resolvedDefinition","animateTarget","notifyAnimationComplete","transitionOverride","getChildAnimations","forwardDelay","maxStaggerDuration","generateStaggerDuration","sortByTreeOrder","animateChildren","first","last","_e","_f","animationTypeState","getState","shouldBlockAnimation","sortNodePosition","protectedKeys","needsAnimating","shouldBlock","variantPriorityOrder","Animate","Drag","Exit","reversePriorityOrder","numAnimationTypes","createAnimationState","animateList","createTypeState","allAnimatedKeys","isInitialRender","buildResolvedTypeValues","acc","changedActiveType","getVariantContext","removedKeys","encounteredKeys","removedVariantIndex","Infinity","_loop_1","typeState","propIsVariant","activeDelta","isInherited","manuallyAnimateOnMount","prevProp","variantDidChange","checkVariantsDidChange","shouldAnimateType","definitionList","resolvedValues","reduce","prevResolvedValues","allKeys","markToAnimate","fallbackAnimation_1","fallbackTarget","getBaseTarget","shouldAnimate","isAnimated","setAnimateFunction","makeAnimator","subscribe","safeToRemove","PanSession","handlers","startEvent","lastMoveEvent","lastMoveEventInfo","updatePoint","getPanInfo","history","isPanStarted","isDistancePastThreshold","onStart","onMove","handlePointerMove","transformPoint","buttons","handlePointerUp","update","end","onEnd","onSessionEnd","panInfo","initialInfo","onSessionStart","removeListeners","updateHandlers","cancelSync","subtractPoint","lastDevicePoint","startDevicePoint","timestampedPoint","lastPoint","time","calcLength","axis","max","min","isNear","maxDistance","calcAxisDelta","originPoint","translate","calcBoxDelta","calcRelativeAxis","relative","calcRelativeAxisPosition","calcRelativePosition","calcRelativeAxisConstraints","calcViewportAxisConstraints","layoutAxis","constraintsAxis","defaultElastic","resolveAxisElastic","dragElastic","minLabel","maxLabel","resolvePointElastic","label","createDelta","createBox","eachAxis","convertBoundingBoxToBox","isIdentityScale","hasScale","hasTranslate","scalePoint","applyPointDelta","boxScale","applyAxisDelta","applyBoxDelta","box","translateAxis","transformAxis","transforms","scaleKey","originKey","axisOrigin","xKeys$1","yKeys$1","transformBox","_measureViewportBox2","topLeft","bottomRight","transformBoxPoints","elementDragControls","VisualElementDragControls","openGlobalLock","isDragging","currentDirection","constraints","hasMutatedConstraints","elastic","originEvent","snapToCursor","panSession","dragPropagation","onDragStart","resolveConstraints","isAnimationBlocked","getAxisMotionValue","measuredAxis","actual","dragDirectionLock","onDirectionLock","onDrag","lockThreshold","direction","abs","getCurrentDirection","updateAxis","getTransformPagePoint","cancel","onDragEnd","_point","shouldDrag","axisValue","prevConstraints","resolveRefConstraints","layoutBox","calcRelativeConstraints","resolveDragElastic","relativeConstraints","rebaseAxisConstraints","onMeasureDragConstraints","constraintsElement","constraintsBox","rootProjectionNode","viewportBox","scroll","measurePageBox","measuredConstraints","calcViewportConstraints","userConstraints","convertBoxToBoundingBox","dragMomentum","dragTransition","dragSnapToOrigin","onDragTransitionEnd","momentumAnimations","bounceStiffness","bounceDamping","timeConstant","restDelta","startAxisValueAnimation","dragKey","externalMotionValue","scalePositionWithinConstraints","boxProgress","sourceLength","targetLength","latest","progress","clamp","updateScroll","updateLayout","addListeners","stopPointerListener","measureDragConstraints","stopMeasureLayoutListener","stopResizeListener","hasLayoutChanged","onPan","onPanStart","onPanEnd","onPanSessionStart","hasPanEvents","groupDragControls","dragControls","names","treeType","build","_getBaseTarget","_makeTargetAnimatable","_measureViewportBox","measureViewportBox","renderInstance","readValueFromInstance","removeValueFromRenderState","_sortNodePosition","removeFromVariantTree","isMounted","lifecycles","managers","propSubscriptions","clearAllListeners","manager","updatePropListeners","on","propListener","args","_i","createLifecycles","valueSubscriptions","prevMotionValues","baseTarget","triggerBuild","notifyUpdate","bindToMotionValue","removeOnChange","latestValue","removeOnRenderRequest","initialMotionValues","depth","isVisible","newInstance","addVariantChild","remove","closestVariantNode","getClosestVariantNode","other","getLayoutId","getStaticValue","setStaticValue","setVisibility","visibility","canMutate","removeValue","defaultValue","newProps","nextValue","prevValue","existingValue","updateMotionValuesFromProps","startAtParent","context_1","numVariantProps","variantProps","isCSSVariable","cssVariableRegex","maxDepth","getVariableValue","match","exec","parseCSSVariable","token","getComputedStyle","getPropertyValue","BoundingBoxDimension","positionalKeys","isPositionalKey","setAndResetVelocity","isNumOrPxType","getPosFromMatrix","matrix","pos","split","getTranslateFromMatrix","pos2","pos3","_bbox","matrix3d","nonTranslationalTransformKeys","positionalValues","checkAndConvertChangedValueTypes","targetPositionalKeys","removedTransformValues","hasAttemptedToRemoveTransformValues","changedValueTypeKeys","toType","fromType","numKeyframes","fromIndex","removedTransforms","removeNonTranslationalTransform","scrollY_1","pageYOffset","convertedTarget","changedKeys","originBbox","elementComputedStyle","display","targetBbox","convertChangedValueTypes","scrollTo","unitConversion","hasPositionalKey","parseDomVariant","Element","resolveCSSVariables","htmlConfig","domElement","defaultType","computedStyle","compareDocumentPosition","resetTransform","restoreTransform","mutableState","parsed","htmlVisualElement","svgVisualElement","getAttribute","_element","createDomVisualElement","pixelsToPercent","pixels","correctBorderRadius","correct","node","varToken","correctBoxShadow","treeScale","projectionDelta","original","containsCSSVariables","cssVariables","shadow","template","createTransformer","xScale","yScale","averageScale","output","i_1","cssVariable","MeasureLayoutWithContext","componentDidMount","layoutGroup","switchLayoutGroup","defaultScaleCorrectors","group","didUpdate","prevProps","layoutDependency","willUpdate","promote","relegate","getStack","members","currentAnimation","isLead","componentWillUnmount","promoteContext","scheduleCheckAfterUnmount","deregister","applyTo","boxShadow","layoutFeatures","borders","numBorders","asNumber","isPx","getRadius","radiusName","easeCrossfadeIn","compress","easeCrossfadeOut","easing","copyAxisInto","originAxis","copyBoxInto","originBox","removePointDelta","removeAxisTransforms","sourceAxis","removeAxisDelta","xKeys","yKeys","removeBoxTransforms","sourceBox","isAxisDeltaZero","isDeltaZero","boxEquals","NodeStack","prevLead","lead","indexOfNode","findIndex","member","preserveFollowOpacity","show","resumeFrom","preserveOpacity","snapshot","animationValues","isShared","isUpdating","isLayoutDirty","crossfade","hide","exitAnimationComplete","resumingFrom","removeLeadSnapshot","identityProjection","buildProjectionTransform","latestTransform","xTranslate","yTranslate","elementScaleX","elementScaleY","compareByDepth","FlatTree","isDirty","createProjectionNode","attachResizeListener","defaultParent","measureScroll","checkIsScrollRoot","ProjectionNode","isTreeAnimating","updateManuallyBlocked","updateBlockedByResize","isSVG","needsReset","shouldResetTransform","eventHandlers","potentialNodes","checkUpdateFailed","clearAllSnapshots","updateProjection","nodes","resolveTargetDelta","calcProjection","hasProjected","animationProgress","sharedNodes","path","registerPotentialNode","notifyListeners","subscriptionManager","hasListeners","SVGElement","tagName","unblockTimeout_1","resizeUnblockUpdate_1","finishAnimation","registerSharedNode","hasRelativeTargetChanged","newLayout","isTreeAnimationBlocked","relativeTarget","layoutTransition","defaultLayoutTransition","_g","onLayoutAnimationStart","onLayoutAnimationComplete","targetChanged","targetLayout","hasOnlyRelativeTargetChanged","setAnimationOrigin","animationOptions","onPlay","preRender","blockUpdate","unblockUpdate","isUpdateBlocked","startUpdate","resetRotation","shouldNotifyListeners","prevTransformTemplateValue","updateSnapshot","clearMeasurements","mountNodeEarly","resetTransformStyle","notifyLayoutUpdate","flushSync","clearSnapshot","removeLeadSnapshots","scheduleUpdateProjection","measured","measure","removeTransform","removeElementScroll","roundBox","prevLayout","layoutCorrected","notifyLayoutMeasure","isScrollRoot","isResetRequested","hasProjection","transformTemplateValue","transformTemplateHasChanged","boxWithoutScroll","scroll_1","rootScroll","applyTransform","transformOnly","withTransforms","boxWithoutTransform","setTargetDelta","targetDelta","relativeParent","getClosestProjectingParent","relativeTargetOrigin","targetWithTransforms","attemptToResolveRelativeTarget","pendingAnimation","getLead","treePath","isSharedTransition","treeLength","applyTreeDeltas","projectionDeltaWithTransform","prevTreeScaleX","prevTreeScaleY","prevProjectionTransform","projectionTransform","notifyAll","snapshotLatestValues","mixedValues","relativeLayout","isSharedLayoutAnimation","isOnlyMember","shouldCrossfadeOpacity","hasOpacityCrossfade","mixTargetDelta","mixAxisDelta","mixAxis","follow","opacityExit","borderLabel","followRadius","leadRadius","mixValues","completeAnimation","applyTransformsToTarget","shouldPreserveFollowOpacity","stack","getPrevLead","hasRotate","resetValues","styles","pointerEvents","emptyStyles","valuesToRender","_h","corrected","num","resetTree","layout_1","measuredLayout","axisSnapshot","layoutDelta","visualDelta","parentSnapshot","parentLayout","relativeSnapshot","onBeforeLayoutMeasure","notifyBeforeLayoutMeasure","searchNode","querySelector","roundAxis","DocumentProjectionNode","documentElement","scrollLeft","body","scrollTop","HTMLProjectionNode","documentNode","position","featureBundle","motion","m","useIsMounted","useForceUpdate","forcedRenderCount","setForcedRenderCount","forceRender","PresenceChild","_onExitComplete","presenceAffectsLayout","presenceChildren","newChildrenMap","childId","e_1","__values","done","e_1_1","error","return","_","getChildKey","DeprecatedLayoutGroupContext","nodeGroup","dirtyAll","dirty","shouldInheritGroup","LayoutGroup","inheritId","layoutGroupContext","deprecatedLayoutGroupContext","upstreamId","shouldInheritId","memoizedContext","isLazyBundle","ReorderContext","checkReorder","order","nextOffset","nextItem","nextLayout","nextItemCenter","toIndex","slice","startIndex","endIndex","moveItem","Group","as","onReorder","isReordering","registerItem","compareMin","updateOrder","newOrder","useMotionValue","setLatest_1","getMixer","isCustomValueType","useImmediate","argOffset","inputValue","inputRange","outputRange","interpolator","interpolate","mixer","useCombineMotionValues","combineValues","updateValue","unsubscribe","useMultiOnChange","useTransform","input","inputRangeOrTransformer","transformer","useListTransform","numValues","useDefaultMotionValue","Reorder","Item","_onDrag","latestX","latestY","gesturePoint","onLayoutMeasure","domAnimation","domMax","createScrollMotionValues","scrollX","scrollY","scrollXProgress","scrollYProgress","useScroll","container","getCurrentTime","performance","now","Date","useAnimationFrame","initialTimestamp","provideTimeSinceStart","animationControls","hasMounted","pendingAnimations","subscribers","animations_1","setValues","useAnimationControls","useAnimation","DragControls","componentControls","nativeEvent","createDragControls","useInstantLayoutTransition","startTransition","cb","createObject","stateVisualElement","_state","initialState","invertScale","hasWarned","AnimatePresence","exitBeforeEnter","forceRenderLayoutGroup","filteredChildren","filtered","Children","isValidElement","onlyElements","childrenToRender","exiting","presentChildren","allChildren","updateChildLookup","Fragment","presentKeys","targetKeys","numPresent","insertionIndex","removeIndex","presentChild","cloneElement","AnimateSharedLayout","LazyMotion","setIsLoaded","loadedRenderer","loadedFeatures","MotionConfig","createDomMotionComponent","useCycle","items","setItem","wrap","useDeprecatedAnimatedState","setAnimationState","animationDefinition","useDeprecatedInvertedScale","parentScaleX","parentScaleY","useDragControls","useElementScroll","useInView","setInView","useInstantTransition","forceUpdate","startInstantLayoutTransition","useIsPresent","useMotionTemplate","fragments","numFragments","useResetProjection","useSpring","activeSpringAnimation","useOnChange","useTime","t","useVelocity","newVelocity","useViewportScroll"],"sourceRoot":""}