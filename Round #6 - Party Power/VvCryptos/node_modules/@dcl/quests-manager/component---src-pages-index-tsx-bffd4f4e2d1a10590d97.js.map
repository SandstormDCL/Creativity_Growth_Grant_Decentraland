{"version":3,"file":"component---src-pages-index-tsx-bffd4f4e2d1a10590d97.js","mappings":"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","sources":["webpack://@dcl/quests-manager/./src/pages/index.tsx","webpack://@dcl/quests-manager/./src/quests.ts"],"sourcesContent":["import React, { useEffect, useState } from \"react\"\n\nimport { validateCreateQuest } from \"@dcl/quests-client/dist/utils\"\nimport { useAuthContext } from \"decentraland-gatsby/dist/context/Auth\"\nimport { Link, navigate } from \"decentraland-gatsby/dist/plugins/intl\"\nimport { Button } from \"decentraland-ui/dist/components/Button/Button\"\nimport { Container } from \"decentraland-ui/dist/components/Container/Container\"\nimport { SignIn } from \"decentraland-ui/dist/components/SignIn/SignIn\"\n\nimport { QuestsClient } from \"../quests\"\nimport { DraftQuest, QuestAmplified } from \"../types\"\nimport { deleteQuestDraft, getQuestDrafts, locations } from \"../utils\"\n\nimport \"./index.css\"\n\nconst Line = () => <div className=\"line\"></div>\n\nconst Trash = () => {\n  return (\n    <svg\n      width=\"18\"\n      height=\"18\"\n      viewBox=\"0 0 18 18\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M7.5 12C7.5 12.4125 7.1625 12.75 6.75 12.75C6.3375 12.75 6 12.4125 6 12V9C6 8.5875 6.3375 8.25 6.75 8.25C7.1625 8.25 7.5 8.5875 7.5 9V12ZM12 12C12 12.4125 11.6625 12.75 11.25 12.75C10.8375 12.75 10.5 12.4125 10.5 12V9C10.5 8.5875 10.8375 8.25 11.25 8.25C11.6625 8.25 12 8.5875 12 9V12ZM13.5 14.25C13.5 14.6632 13.164 15 12.75 15H5.25C4.836 15 4.5 14.6632 4.5 14.25V6H13.5V14.25ZM7.5 3.246C7.5 3.12975 7.6605 3 7.875 3H10.125C10.3395 3 10.5 3.12975 10.5 3.246V4.5H7.5V3.246ZM15.75 4.5H15H12V3.246C12 2.283 11.1593 1.5 10.125 1.5H7.875C6.84075 1.5 6 2.283 6 3.246V4.5H3H2.25C1.8375 4.5 1.5 4.8375 1.5 5.25C1.5 5.6625 1.8375 6 2.25 6H3V14.25C3 15.4905 4.0095 16.5 5.25 16.5H12.75C13.9905 16.5 15 15.4905 15 14.25V6H15.75C16.1625 6 16.5 5.6625 16.5 5.25C16.5 4.8375 16.1625 4.5 15.75 4.5Z\"\n        fill=\"#161518\"\n      />\n    </svg>\n  )\n}\n\nexport default function OverviewPage() {\n  const [account, accountState] = useAuthContext()\n\n  const [quests, setQuests] = useState<QuestAmplified[]>([])\n  const [draftQuests, setDrafts] = useState<DraftQuest[]>(getQuestDrafts())\n\n  useEffect(() => {\n    if (account) {\n      const questClient = new QuestsClient(account)\n      questClient\n        .getMyQuests()\n        .then((res) => setQuests(res.quests))\n        .catch(console.error)\n    }\n  }, [account])\n\n  if (!account || accountState.loading) {\n    return (\n      <SignIn\n        onConnect={() => accountState.select()}\n        isConnecting={accountState.loading}\n      />\n    )\n  }\n\n  const isValidQuest = (q: DraftQuest) => {\n    try {\n      validateCreateQuest(q)\n      return true\n    } catch (error) {\n      return false\n    }\n  }\n\n  return (\n    <Container className=\"full overview-container\">\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          width: \"100%\",\n          alignItems: \"center\",\n        }}\n      >\n        <h1 style={{ textAlign: \"center\", marginBottom: \"0\" }}>\n          Quests Manager\n        </h1>\n        <Button\n          onClick={() => navigate(locations.designer())}\n          content=\"Create Quest\"\n          primary\n        />\n      </div>\n      <div\n        style={{\n          background: \"#ECEBED\",\n          marginTop: \"45px\",\n          marginBottom: \"40px\",\n          width: \"410px\",\n          borderRadius: 6,\n        }}\n      >\n        <p style={{ padding: 15 }}>\n          Need help getting started? Check out the{\" \"}\n          <Link\n            href=\"https://docs.decentraland.org/creator/quests/overview/\"\n            style={{ textDecoration: \"underline\" }}\n          >\n            documentation\n          </Link>{\" \"}\n        </p>\n      </div>\n      <h2>My published Quests</h2>\n      {quests.length ? (\n        <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n          <ColumnNames />\n          {quests.map((q) => {\n            return (\n              <div key={q.name}>\n                <div\n                  style={{\n                    display: \"flex\",\n                    justifyContent: \"space-between\",\n                    alignItems: \"center\",\n                    padding: \"28px 0\",\n                    width: \"100%\",\n                  }}\n                >\n                  <p style={{ width: \"20%\", marginBottom: \"0\" }}>- {q.name}</p>\n                  <p style={{ width: \"20%\", marginBottom: \"0\" }}>\n                    {q.description.length >= 20\n                      ? q.description.slice(0, 20) + \"...\"\n                      : q.description}\n                  </p>\n                  <Link\n                    style={{\n                      width: \"20%\",\n                      marginBottom: \"0\",\n                      fontWeight: \"600\",\n                    }}\n                    href={q.imageUrl}\n                  >\n                    Link\n                  </Link>\n                  <p style={{ width: \"20%\", marginBottom: \"0\" }}>\n                    {q.active ? \"Active\" : \"Not Active\"}\n                  </p>\n                  <div\n                    style={{\n                      width: \"20%\",\n                      display: \"flex\",\n                    }}\n                  >\n                    <Button\n                      size=\"small\"\n                      onClick={() =>\n                        navigate(locations.editPublishedQuest(q.id))\n                      }\n                      className=\"quests-btn\"\n                      primary\n                      content=\"Edit\"\n                    />\n                  </div>\n                </div>\n                <Line />\n              </div>\n            )\n          })}\n        </div>\n      ) : (\n        <p>You don't have any published Quests</p>\n      )}\n      <h2>My drafts</h2>\n      {draftQuests.length ? (\n        <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n          <ColumnNames draft />\n          {draftQuests.map((q) => {\n            return (\n              <div key={q.name || q.id}>\n                <div\n                  style={{\n                    display: \"flex\",\n                    justifyContent: \"space-between\",\n                    alignItems: \"center\",\n                    padding: \"28px 0\",\n                    width: \"100%\",\n                  }}\n                >\n                  <p style={{ width: \"20%\", marginBottom: \"0\" }}>- {q.id}</p>\n                  <p style={{ width: \"20%\", marginBottom: \"0\" }}>\n                    {q.name || \"No name\"}\n                  </p>\n                  <p style={{ width: \"20%\", marginBottom: \"0\" }}>\n                    {q.description\n                      ? q.description.length >= 20\n                        ? q.description.slice(0, 20) + \"...\"\n                        : q.description\n                      : \"No Description\"}\n                  </p>\n                  <p style={{ width: \"20%\", marginBottom: \"0\" }}>\n                    {isValidQuest(q) ? \"Ready\" : \"Not Ready\"}\n                  </p>\n                  <div\n                    style={{\n                      width: \"20%\",\n                      display: \"flex\",\n                      justifyContent: \"space-between\",\n                    }}\n                  >\n                    <Button\n                      size=\"small\"\n                      onClick={() => navigate(locations.editDraftQuest(q.id))}\n                      primary\n                      className=\"quests-btn\"\n                      content=\"Edit\"\n                    />\n                    <Button\n                      size=\"small\"\n                      onClick={async () => {\n                        if (isValidQuest(q)) {\n                          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                          const { id, ...quest } = q\n                          await navigator.clipboard.writeText(\n                            JSON.stringify(quest)\n                          )\n                          alert(\"Definition has been Copied to your clipboard\")\n                        }\n                      }}\n                      className=\"quests-btn\"\n                      style={{ padding: \"0 0\" }}\n                      content=\"Export\"\n                      disabled={!isValidQuest(q)}\n                    />\n                    <Button\n                      size=\"small\"\n                      onClick={() => {\n                        deleteQuestDraft(q.id)\n                        setDrafts(getQuestDrafts())\n                      }}\n                      style={{\n                        minWidth: \"20%\",\n                        padding: \"5px\",\n                        alignSelf: \"flex-end\",\n                        background: \"none\",\n                        border: \"2px solid black\",\n                        display: \"flex\",\n                        justifyContent: \"center\",\n                      }}\n                      content={<Trash />}\n                    />\n                  </div>\n                </div>\n                <Line />\n              </div>\n            )\n          })}\n        </div>\n      ) : (\n        <p>You don't have any drafts</p>\n      )}\n    </Container>\n  )\n}\n\nconst ColumnNames = ({ draft = false }: { draft?: boolean }) => (\n  <>\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        borderColor: \"#736E7D\",\n        width: \"100%\",\n      }}\n    >\n      <p className=\"quest-table-column-name\">{draft ? \"#\" : \"Name\"}</p>\n      <p className=\"quest-table-column-name\">\n        {draft ? \"Name\" : \"Description\"}\n      </p>\n      <p className=\"quest-table-column-name\">\n        {draft ? \"Description\" : \"Image\"}\n      </p>\n      <p className=\"quest-table-column-name\">\n        {draft ? \"Ready to Publish?\" : \"Status\"}\n      </p>\n      <p className=\"quest-table-column-name\" style={{ marginBottom: \"1em\" }}>\n        Actions\n      </p>\n    </div>\n    <Line />\n  </>\n)\n","import { Quest } from \"@dcl/quests-client/dist/protocol/decentraland/quests/definitions.gen\"\nimport { validateCreateQuest } from \"@dcl/quests-client/dist/utils\"\nimport API from \"decentraland-gatsby/dist/utils/api/API\"\nimport env from \"decentraland-gatsby/dist/utils/env\"\n\nimport { DraftQuest, QuestAmplified, QuestRewards } from \"./types\"\n\nexport class QuestsClient extends API {\n  static URL = env(\"QUESTS_SERVER_URL\", \"https://quests.decentraland.org/api\")\n\n  constructor(public user: string) {\n    super(QuestsClient.URL)\n  }\n\n  getMyQuests() {\n    return this.fetch<{\n      quests: QuestAmplified[]\n    }>(\n      `/creators/${this.user}/quests`,\n      this.options().method(\"GET\").authorization({ sign: true })\n    )\n  }\n\n  publishQuest(quest: Omit<DraftQuest, \"metadata\" | \"id\">) {\n    validateCreateQuest(quest)\n    // we must stringify all non-string parameters\n    // server expects map<string, string>\n    for (const step of quest.definition!.steps) {\n      for (const task of step.tasks) {\n        for (const action of task.actionItems) {\n          for (const param in action.parameters) {\n            if (typeof action.parameters[param] != \"string\") {\n              action.parameters[param] = JSON.stringify(\n                action.parameters[param]\n              )\n            }\n          }\n        }\n      }\n    }\n\n    return this.fetch<{ id: string }>(\n      `/quests`,\n      this.options()\n        .method(\"POST\")\n        .authorization({ sign: true })\n        .json(quest)\n        .metadata(quest as unknown as any)\n    )\n  }\n\n  async getQuest(id: string): Promise<QuestAmplified> {\n    const questWithoutRewards = await this.fetch<{\n      quest: Quest & { active: boolean }\n    }>(\n      `/quests/${id}`,\n      this.options().method(\"GET\").authorization({ sign: true })\n    )\n\n    let questRewards: QuestRewards[\"reward\"] | null = null\n\n    try {\n      questRewards = await this.fetch<QuestRewards[\"reward\"]>(\n        `/quests/${id}/reward?with_hook=true`,\n        this.options().method(\"GET\").authorization({ sign: true })\n      )\n    } catch (error) {\n      console.log(error)\n    }\n\n    return {\n      ...questWithoutRewards.quest,\n      reward: questRewards ? questRewards : undefined,\n    }\n  }\n\n  updateQuest(\n    id: string,\n    quest: Omit<QuestAmplified, \"creatorAddress\" | \"id\" | \"active\">\n  ) {\n    if (!quest.name) {\n      throw new Error(\"Quest must have a name\")\n    }\n\n    return this.fetch<{ quest_id: string }>(\n      `/quests/${id}`,\n      this.options().method(\"PUT\").authorization({ sign: true }).json(quest)\n    )\n  }\n\n  deactivateQuest(id: string) {\n    return this.fetch(\n      `/quests/${id}`,\n      this.options().method(\"DELETE\").authorization({ sign: true })\n    )\n  }\n\n  activateQuest(id: string) {\n    return this.fetch(\n      `/quests/${id}/activate`,\n      this.options().method(\"PUT\").authorization({ sign: true })\n    )\n  }\n\n  getOldVersions(id: string) {\n    return this.fetch<{ updates: string[] }>(\n      `/quests/${id}/updates`,\n      this.options().method(\"GET\")\n    )\n  }\n}\n"],"names":["Line","React","className","Trash","width","height","viewBox","fill","xmlns","fillRule","clipRule","d","OverviewPage","_useAuthContext","useAuthContext","account","accountState","_useState","useState","quests","setQuests","_useState2","getQuestDrafts","draftQuests","setDrafts","useEffect","QuestsClient","getMyQuests","then","res","catch","console","error","loading","SignIn","onConnect","select","isConnecting","isValidQuest","q","validateCreateQuest","Container","style","display","justifyContent","alignItems","textAlign","marginBottom","Button","onClick","navigate","locations","designer","content","primary","background","marginTop","borderRadius","padding","Link","href","textDecoration","length","flexDirection","ColumnNames","map","key","name","description","slice","fontWeight","imageUrl","active","size","editPublishedQuest","id","draft","editDraftQuest","_asyncToGenerator","_regeneratorRuntime","_callee","quest","_context","prev","next","_objectWithoutPropertiesLoose","_excluded","navigator","clipboard","writeText","JSON","stringify","alert","stop","disabled","deleteQuestDraft","minWidth","alignSelf","border","_ref2","_ref2$draft","borderColor","_API","user","_this","call","URL","_inheritsLoose","_proto","prototype","this","fetch","options","method","authorization","sign","publishQuest","_step","_iterator","_createForOfIteratorHelperLoose","definition","steps","done","_step2","_iterator2","value","tasks","_step3","_iterator3","actionItems","action","param","parameters","json","metadata","getQuest","_getQuest","questWithoutRewards","questRewards","sent","t0","log","abrupt","Object","assign","reward","undefined","_x","apply","arguments","updateQuest","Error","deactivateQuest","activateQuest","getOldVersions","API","env"],"sourceRoot":""}