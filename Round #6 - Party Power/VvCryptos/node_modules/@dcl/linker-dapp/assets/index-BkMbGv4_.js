var C=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(C||{}),J=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e))(J||{}),ge=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e[e.RedirectLoginComplete=-10015]="RedirectLoginComplete",e))(ge||{}),M=(e=>(e.MetaMask="metamask",e.CoinbaseWallet="coinbase_wallet",e))(M||{}),se=(e=>(e.WalletSelected="wallet_selected",e.WalletConnected="wallet_connected",e.WalletRejected="wallet_rejected",e))(se||{}),d=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.SetAuthorizationToken="magic_auth_set_authorization_token",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e.IntermediaryEvent="magic_intermediary_event",e.RequestAccounts="eth_requestAccounts",e.GetInfo="magic_get_info",e.ShowUI="magic_wallet",e.NFTPurchase="magic_nft_purchase",e.NFTCheckout="magic_nft_checkout",e.NFTTransfer="magic_nft_transfer",e.RequestUserInfoWithUI="mc_request_user_info",e.Disconnect="mc_disconnect",e.RecoverAccount="magic_auth_recover_account",e.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",e.MagicBoxHeartBeat="magic_box_heart_beat",e.AutoConnect="mc_auto_connect",e.Login="mc_login",e.EncryptV1="magic_auth_encrypt_v1",e.DecryptV1="magic_auth_decrypt_v1",e.ShowNFTs="magic_show_nfts",e.ShowOnRamp="magic_show_fiat_onramp",e.ShowSendTokensUI="magic_show_send_tokens_ui",e.ShowAddress="magic_show_address",e.ShowBalances="magic_show_balances",e.SendGaslessTransaction="eth_sendGaslessTransaction",e))(d||{}),D=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e.MAGIC_MG_BOX_SEND_RECEIPT="MAGIC_MG_BOX_SEND_RECEIPT",e))(D||{}),oe=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e))(oe||{}),ct=(e=>(e.UpdateEmail="update-email",e.MFA="mfa",e.Recovery="recovery",e))(ct||{}),ut=(e=>(e.Retry="retry",e))(ut||{}),ht=(e=>(e.EmailSent="email-sent",e.EmailNotDeliverable="email-not-deliverable",e))(ht||{}),X=(e=>(e.VerifyEmailOtp="verify-email-otp",e.Cancel="cancel",e))(X||{}),dt=(e=>(e.EmailOTPSent="email-otp-sent",e.InvalidEmailOtp="invalid-email-otp",e.ExpiredEmailOtp="expired-email-otp",e))(dt||{}),Ee=(e=>(e.Retry="device-retry",e))(Ee||{}),pt=(e=>(e.DeviceApproved="device-approved",e.DeviceNeedsApproval="device-needs-approval",e.DeviceVerificationLinkExpired="device-verification-link-expired",e.DeviceVerificationEmailSent="device-verification-email-sent",e))(pt||{}),mt=(e=>(e.Harmony="HARMONY",e))(mt||{}),Et=(e=>(e.PhoneNumber="phone_number",e))(Et||{}),pe={VITE_REACT_APP_DCL_DEFAULT_ENV:"prod",VITE_BASE_URL:""},ft=Object.create,ue=Object.defineProperty,gt=Object.defineProperties,_t=Object.getOwnPropertyDescriptor,It=Object.getOwnPropertyDescriptors,vt=Object.getOwnPropertyNames,Oe=Object.getOwnPropertySymbols,yt=Object.getPrototypeOf,je=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable,Te=(e,t,r)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_e=(e,t)=>{for(var r in t||(t={}))je.call(t,r)&&Te(e,r,t[r]);if(Oe)for(var r of Oe(t))wt.call(t,r)&&Te(e,r,t[r]);return e},qe=(e,t)=>gt(e,It(t)),Rt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),$t=(e,t)=>{for(var r in t)ue(e,r,{get:t[r],enumerable:!0})},At=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of vt(t))!je.call(e,s)&&s!==r&&ue(e,s,{get:()=>t[s],enumerable:!(i=_t(t,s))||i.enumerable});return e},Ot=(e,t,r)=>(r=e!=null?ft(yt(e)):{},At(!e||!e.__esModule?ue(r,"default",{value:e,enumerable:!0}):r,e)),I=(e,t,r)=>new Promise((i,s)=>{var n=u=>{try{o(r.next(u))}catch(l){s(l)}},a=u=>{try{o(r.throw(u))}catch(l){s(l)}},o=u=>u.done?i(u.value):Promise.resolve(u.value).then(n,a);o((r=r.apply(e,t)).next())}),Tt=Rt((e,t)=>{var r=Object.prototype.hasOwnProperty,i="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(i=!1));function n(l,c,h){this.fn=l,this.context=c,this.once=h||!1}function a(l,c,h,f,_){if(typeof h!="function")throw new TypeError("The listener must be a function");var v=new n(h,f||l,_),$=i?i+c:c;return l._events[$]?l._events[$].fn?l._events[$]=[l._events[$],v]:l._events[$].push(v):(l._events[$]=v,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new s:delete l._events[c]}function u(){this._events=new s,this._eventsCount=0}u.prototype.eventNames=function(){var l=[],c,h;if(this._eventsCount===0)return l;for(h in c=this._events)r.call(c,h)&&l.push(i?h.slice(1):h);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},u.prototype.listeners=function(l){var c=i?i+l:l,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,_=h.length,v=new Array(_);f<_;f++)v[f]=h[f].fn;return v},u.prototype.listenerCount=function(l){var c=i?i+l:l,h=this._events[c];return h?h.fn?1:h.length:0},u.prototype.emit=function(l,c,h,f,_,v){var $=i?i+l:l;if(!this._events[$])return!1;var p=this._events[$],L=arguments.length,b,y;if(p.fn){switch(p.once&&this.removeListener(l,p.fn,void 0,!0),L){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,c),!0;case 3:return p.fn.call(p.context,c,h),!0;case 4:return p.fn.call(p.context,c,h,f),!0;case 5:return p.fn.call(p.context,c,h,f,_),!0;case 6:return p.fn.call(p.context,c,h,f,_,v),!0}for(y=1,b=new Array(L-1);y<L;y++)b[y-1]=arguments[y];p.fn.apply(p.context,b)}else{var lt=p.length,q;for(y=0;y<lt;y++)switch(p[y].once&&this.removeListener(l,p[y].fn,void 0,!0),L){case 1:p[y].fn.call(p[y].context);break;case 2:p[y].fn.call(p[y].context,c);break;case 3:p[y].fn.call(p[y].context,c,h);break;case 4:p[y].fn.call(p[y].context,c,h,f);break;default:if(!b)for(q=1,b=new Array(L-1);q<L;q++)b[q-1]=arguments[q];p[y].fn.apply(p[y].context,b)}}return!0},u.prototype.on=function(l,c,h){return a(this,l,c,h,!1)},u.prototype.once=function(l,c,h){return a(this,l,c,h,!0)},u.prototype.removeListener=function(l,c,h,f){var _=i?i+l:l;if(!this._events[_])return this;if(!c)return o(this,_),this;var v=this._events[_];if(v.fn)v.fn===c&&(!f||v.once)&&(!h||v.context===h)&&o(this,_);else{for(var $=0,p=[],L=v.length;$<L;$++)(v[$].fn!==c||f&&!v[$].once||h&&v[$].context!==h)&&p.push(v[$]);p.length?this._events[_]=p.length===1?p[0]:p:o(this,_)}return this},u.prototype.removeAllListeners=function(l){var c;return l?(c=i?i+l:l,this._events[c]&&o(this,c)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,typeof t<"u"&&(t.exports=u)});function Mt(e){let t={exports:{}};return e(t,t.exports),t.exports}var Nt=Number.MAX_SAFE_INTEGER||9007199254740991,Ie={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Nt,MAX_SAFE_COMPONENT_LENGTH:16},Lt=typeof process=="object"&&pe&&pe.NODE_DEBUG&&/\bsemver\b/i.test(pe.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},E=Lt,Q=Mt(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:r}=Ie,i=(t=e.exports={}).re=[],s=t.src=[],n=t.t={},a=0,o=(u,l,c)=>{let h=a++;E(h,l),n[u]=h,s[h]=l,i[h]=new RegExp(l,c?"g":void 0)};o("NUMERICIDENTIFIER","0|[1-9]\\d*"),o("NUMERICIDENTIFIERLOOSE","[0-9]+"),o("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),o("MAINVERSION",`(${s[n.NUMERICIDENTIFIER]})\\.(${s[n.NUMERICIDENTIFIER]})\\.(${s[n.NUMERICIDENTIFIER]})`),o("MAINVERSIONLOOSE",`(${s[n.NUMERICIDENTIFIERLOOSE]})\\.(${s[n.NUMERICIDENTIFIERLOOSE]})\\.(${s[n.NUMERICIDENTIFIERLOOSE]})`),o("PRERELEASEIDENTIFIER",`(?:${s[n.NUMERICIDENTIFIER]}|${s[n.NONNUMERICIDENTIFIER]})`),o("PRERELEASEIDENTIFIERLOOSE",`(?:${s[n.NUMERICIDENTIFIERLOOSE]}|${s[n.NONNUMERICIDENTIFIER]})`),o("PRERELEASE",`(?:-(${s[n.PRERELEASEIDENTIFIER]}(?:\\.${s[n.PRERELEASEIDENTIFIER]})*))`),o("PRERELEASELOOSE",`(?:-?(${s[n.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[n.PRERELEASEIDENTIFIERLOOSE]})*))`),o("BUILDIDENTIFIER","[0-9A-Za-z-]+"),o("BUILD",`(?:\\+(${s[n.BUILDIDENTIFIER]}(?:\\.${s[n.BUILDIDENTIFIER]})*))`),o("FULLPLAIN",`v?${s[n.MAINVERSION]}${s[n.PRERELEASE]}?${s[n.BUILD]}?`),o("FULL",`^${s[n.FULLPLAIN]}$`),o("LOOSEPLAIN",`[v=\\s]*${s[n.MAINVERSIONLOOSE]}${s[n.PRERELEASELOOSE]}?${s[n.BUILD]}?`),o("LOOSE",`^${s[n.LOOSEPLAIN]}$`),o("GTLT","((?:<|>)?=?)"),o("XRANGEIDENTIFIERLOOSE",`${s[n.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),o("XRANGEIDENTIFIER",`${s[n.NUMERICIDENTIFIER]}|x|X|\\*`),o("XRANGEPLAIN",`[v=\\s]*(${s[n.XRANGEIDENTIFIER]})(?:\\.(${s[n.XRANGEIDENTIFIER]})(?:\\.(${s[n.XRANGEIDENTIFIER]})(?:${s[n.PRERELEASE]})?${s[n.BUILD]}?)?)?`),o("XRANGEPLAINLOOSE",`[v=\\s]*(${s[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[n.XRANGEIDENTIFIERLOOSE]})(?:${s[n.PRERELEASELOOSE]})?${s[n.BUILD]}?)?)?`),o("XRANGE",`^${s[n.GTLT]}\\s*${s[n.XRANGEPLAIN]}$`),o("XRANGELOOSE",`^${s[n.GTLT]}\\s*${s[n.XRANGEPLAINLOOSE]}$`),o("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),o("COERCERTL",s[n.COERCE],!0),o("LONETILDE","(?:~>?)"),o("TILDETRIM",`(\\s*)${s[n.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",o("TILDE",`^${s[n.LONETILDE]}${s[n.XRANGEPLAIN]}$`),o("TILDELOOSE",`^${s[n.LONETILDE]}${s[n.XRANGEPLAINLOOSE]}$`),o("LONECARET","(?:\\^)"),o("CARETTRIM",`(\\s*)${s[n.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",o("CARET",`^${s[n.LONECARET]}${s[n.XRANGEPLAIN]}$`),o("CARETLOOSE",`^${s[n.LONECARET]}${s[n.XRANGEPLAINLOOSE]}$`),o("COMPARATORLOOSE",`^${s[n.GTLT]}\\s*(${s[n.LOOSEPLAIN]})$|^$`),o("COMPARATOR",`^${s[n.GTLT]}\\s*(${s[n.FULLPLAIN]})$|^$`),o("COMPARATORTRIM",`(\\s*)${s[n.GTLT]}\\s*(${s[n.LOOSEPLAIN]}|${s[n.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",o("HYPHENRANGE",`^\\s*(${s[n.XRANGEPLAIN]})\\s+-\\s+(${s[n.XRANGEPLAIN]})\\s*$`),o("HYPHENRANGELOOSE",`^\\s*(${s[n.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[n.XRANGEPLAINLOOSE]})\\s*$`),o("STAR","(<|>)?=?\\s*\\*"),o("GTE0","^\\s*>=\\s*0.0.0\\s*$"),o("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),Me=/^[0-9]+$/,Ve=(e,t)=>{let r=Me.test(e),i=Me.test(t);return r&&i&&(e=+e,t=+t),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1},St=(e,t)=>Ve(t,e),bt={compareIdentifiers:Ve,rcompareIdentifiers:St},{MAX_LENGTH:Ne,MAX_SAFE_INTEGER:Z}=Ie,{re:Le,t:Se}=Q,{compareIdentifiers:V}=bt,w=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof w){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Ne)throw new TypeError(`version is longer than ${Ne} characters`);E("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?Le[Se.LOOSE]:Le[Se.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Z||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Z||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Z||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Z)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(E("SemVer.compare",this.version,this.options,e),!(e instanceof w)){if(typeof e=="string"&&e===this.version)return 0;e=new w(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof w||(e=new w(e,this.options)),V(this.major,e.major)||V(this.minor,e.minor)||V(this.patch,e.patch)}comparePre(e){if(e instanceof w||(e=new w(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(E("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r!==i)return V(r,i)}while(++t)}compareBuild(e){e instanceof w||(e=new w(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(E("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r!==i)return V(r,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},Ct=(e,t,r)=>new w(e,r).compare(new w(t,r)),j=Ct,kt=(e,t,r)=>j(e,t,r)===0,Pt=kt,Ut=(e,t,r)=>j(e,t,r)!==0,Dt=Ut,Gt=(e,t,r)=>j(e,t,r)>0,xt=Gt,Ft=(e,t,r)=>j(e,t,r)>=0,Wt=Ft,jt=(e,t,r)=>j(e,t,r)<0,qt=jt,Vt=(e,t,r)=>j(e,t,r)<=0,Ht=Vt,Xt=(e,t,r,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Pt(e,r,i);case"!=":return Dt(e,r,i);case">":return xt(e,r,i);case">=":return Wt(e,r,i);case"<":return qt(e,r,i);case"<=":return Ht(e,r,i);default:throw new TypeError(`Invalid operator: ${t}`)}},me=Xt,H=Symbol("SemVer ANY"),Y=class{static get ANY(){return H}constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Y){if(e.loose===!!t.loose)return e;e=e.value}E("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===H?this.value="":this.value=this.operator+this.semver.version,E("comp",this)}parse(e){let t=this.options.loose?be[Ce.COMPARATORLOOSE]:be[Ce.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new w(r[2],this.options.loose):this.semver=H}toString(){return this.value}test(e){if(E("Comparator.test",e,this.options.loose),this.semver===H||e===H)return!0;if(typeof e=="string")try{e=new w(e,this.options)}catch{return!1}return me(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Y))throw new TypeError("a Comparator is required");if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""||new G(e.value,t).test(this.value);if(e.operator==="")return e.value===""||new G(this.value,t).test(e.semver);let r=!(this.operator!==">="&&this.operator!==">"||e.operator!==">="&&e.operator!==">"),i=!(this.operator!=="<="&&this.operator!=="<"||e.operator!=="<="&&e.operator!=="<"),s=this.semver.version===e.semver.version,n=!(this.operator!==">="&&this.operator!=="<="||e.operator!==">="&&e.operator!=="<="),a=me(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),o=me(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||s&&n||a||o}},{re:be,t:Ce}=Q,G=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof G)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new G(e.raw,t);if(e instanceof Y)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let{loose:t}=this.options;e=e.trim();let r=t?A[R.HYPHENRANGELOOSE]:A[R.HYPHENRANGE];e=e.replace(r,nr(this.options.includePrerelease)),E("hyphen replace",e),e=e.replace(A[R.COMPARATORTRIM],Bt),E("comparator trim",e,A[R.COMPARATORTRIM]),e=(e=(e=e.replace(A[R.TILDETRIM],Kt)).replace(A[R.CARETTRIM],Yt)).split(/\s+/).join(" ");let i=t?A[R.COMPARATORLOOSE]:A[R.COMPARATOR];return e.split(" ").map(s=>zt(s,this.options)).join(" ").split(/\s+/).map(s=>sr(s,this.options)).filter(this.options.loose?s=>!!s.match(i):()=>!0).map(s=>new Y(s,this.options))}intersects(e,t){if(!(e instanceof G))throw new TypeError("a Range is required");return this.set.some(r=>ke(r,t)&&e.set.some(i=>ke(i,t)&&r.every(s=>i.every(n=>s.intersects(n,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new w(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(or(this.set[t],e,this.options))return!0;return!1}},{re:A,t:R,comparatorTrimReplace:Bt,tildeTrimReplace:Kt,caretTrimReplace:Yt}=Q,ke=(e,t)=>{let r=!0,i=e.slice(),s=i.pop();for(;r&&i.length;)r=i.every(n=>s.intersects(n,t)),s=i.pop();return r},zt=(e,t)=>(E("comp",e,t),e=Zt(e,t),E("caret",e),e=Jt(e,t),E("tildes",e),e=tr(e,t),E("xrange",e),e=ir(e,t),E("stars",e),e),O=e=>!e||e.toLowerCase()==="x"||e==="*",Jt=(e,t)=>e.trim().split(/\s+/).map(r=>Qt(r,t)).join(" "),Qt=(e,t)=>{let r=t.loose?A[R.TILDELOOSE]:A[R.TILDE];return e.replace(r,(i,s,n,a,o)=>{let u;return E("tilde",e,i,s,n,a,o),O(s)?u="":O(n)?u=`>=${s}.0.0 <${+s+1}.0.0-0`:O(a)?u=`>=${s}.${n}.0 <${s}.${+n+1}.0-0`:o?(E("replaceTilde pr",o),u=`>=${s}.${n}.${a}-${o} <${s}.${+n+1}.0-0`):u=`>=${s}.${n}.${a} <${s}.${+n+1}.0-0`,E("tilde return",u),u})},Zt=(e,t)=>e.trim().split(/\s+/).map(r=>er(r,t)).join(" "),er=(e,t)=>{E("caret",e,t);let r=t.loose?A[R.CARETLOOSE]:A[R.CARET],i=t.includePrerelease?"-0":"";return e.replace(r,(s,n,a,o,u)=>{let l;return E("caret",e,s,n,a,o,u),O(n)?l="":O(a)?l=`>=${n}.0.0${i} <${+n+1}.0.0-0`:O(o)?l=n==="0"?`>=${n}.${a}.0${i} <${n}.${+a+1}.0-0`:`>=${n}.${a}.0${i} <${+n+1}.0.0-0`:u?(E("replaceCaret pr",u),l=n==="0"?a==="0"?`>=${n}.${a}.${o}-${u} <${n}.${a}.${+o+1}-0`:`>=${n}.${a}.${o}-${u} <${n}.${+a+1}.0-0`:`>=${n}.${a}.${o}-${u} <${+n+1}.0.0-0`):(E("no pr"),l=n==="0"?a==="0"?`>=${n}.${a}.${o}${i} <${n}.${a}.${+o+1}-0`:`>=${n}.${a}.${o}${i} <${n}.${+a+1}.0-0`:`>=${n}.${a}.${o} <${+n+1}.0.0-0`),E("caret return",l),l})},tr=(e,t)=>(E("replaceXRanges",e,t),e.split(/\s+/).map(r=>rr(r,t)).join(" ")),rr=(e,t)=>{e=e.trim();let r=t.loose?A[R.XRANGELOOSE]:A[R.XRANGE];return e.replace(r,(i,s,n,a,o,u)=>{E("xRange",e,i,s,n,a,o,u);let l=O(n),c=l||O(a),h=c||O(o),f=h;return s==="="&&f&&(s=""),u=t.includePrerelease?"-0":"",l?i=s===">"||s==="<"?"<0.0.0-0":"*":s&&f?(c&&(a=0),o=0,s===">"?(s=">=",c?(n=+n+1,a=0,o=0):(a=+a+1,o=0)):s==="<="&&(s="<",c?n=+n+1:a=+a+1),s==="<"&&(u="-0"),i=`${s+n}.${a}.${o}${u}`):c?i=`>=${n}.0.0${u} <${+n+1}.0.0-0`:h&&(i=`>=${n}.${a}.0${u} <${n}.${+a+1}.0-0`),E("xRange return",i),i})},ir=(e,t)=>(E("replaceStars",e,t),e.trim().replace(A[R.STAR],"")),sr=(e,t)=>(E("replaceGTE0",e,t),e.trim().replace(A[t.includePrerelease?R.GTE0PRE:R.GTE0],"")),nr=e=>(t,r,i,s,n,a,o,u,l,c,h,f,_)=>`${r=O(i)?"":O(s)?`>=${i}.0.0${e?"-0":""}`:O(n)?`>=${i}.${s}.0${e?"-0":""}`:a?`>=${r}`:`>=${r}${e?"-0":""}`} ${u=O(l)?"":O(c)?`<${+l+1}.0.0-0`:O(h)?`<${l}.${+c+1}.0-0`:f?`<=${l}.${c}.${h}-${f}`:e?`<${l}.${c}.${+h+1}-0`:`<=${u}`}`.trim(),or=(e,t,r)=>{for(let i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let i=0;i<e.length;i++)if(E(e[i].semver),e[i].semver!==Y.ANY&&e[i].semver.prerelease.length>0){let s=e[i].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0},ar=(e,t,r)=>{try{t=new G(t,r)}catch{return!1}return t.test(e)},{MAX_LENGTH:lr}=Ie,{re:Pe,t:Ue}=Q,cr=(e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof w)return e;if(typeof e!="string"||e.length>lr||!(t.loose?Pe[Ue.LOOSE]:Pe[Ue.FULL]).test(e))return null;try{return new w(e,t)}catch{return null}},ur=cr,{re:ee,t:te}=Q,hr=(e,t)=>{if(e instanceof w)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let r=null;if((t=t||{}).rtl){let i;for(;(i=ee[te.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&i.index+i[0].length===r.index+r[0].length||(r=i),ee[te.COERCERTL].lastIndex=i.index+i[1].length+i[2].length;ee[te.COERCERTL].lastIndex=-1}else r=e.match(ee[te.COERCE]);return r===null?null:ur(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};function dr(e){return String.fromCharCode(parseInt(e.slice(1),16))}function pr(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function mr(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,dr))}function Er(e){return decodeURIComponent(Array.from(atob(e),pr).join(""))}function He(e){return mr(JSON.stringify(e))}function fr(e){return JSON.parse(Er(e))}function B(e){return typeof e>"u"}function gr(e){return e===null}function Xe(e){return gr(e)||B(e)}function _r(e){return Xe(e)?!1:!B(e.jsonrpc)&&!B(e.id)&&(!B(e.result)||!B(e.error))}function Ir(e){return Xe(e)?!1:typeof e=="number"&&Object.values(ge).includes(e)}function ae(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}var g={};function mi(e,t){return Object.assign(g,t),e}var vr={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},k=class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`),this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,k.prototype)}},le=class extends Error{constructor(e){super(),this.__proto__=Error;let t=Number(e==null?void 0:e.code);this.rawMessage=(e==null?void 0:e.message)||"Internal error",this.code=Ir(t)?t:ge.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=(e==null?void 0:e.data)||void 0,Object.setPrototypeOf(this,le.prototype)}},he=class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}log(){console.warn(this.message)}},Be=class extends Error{constructor(e,t,r,i){super(`Magic Extension Error (${e.name}): [${t}] ${r}`),this.code=t,this.rawMessage=r,this.data=i,this.__proto__=Error,Object.setPrototypeOf(this,Be.prototype)}},De=class{constructor(e,t,r){this.code=t,this.rawMessage=r,this.message=`Magic Extension Warning (${e.name}): [${t}] ${r}`}log(){console.warn(this.message)}};function yr(){return new k(C.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function wr(){return new k(C.ModalNotReady,"Modal is not ready.")}function Rr(){return new k(C.MalformedResponse,"Response from the Magic iframe is malformed.")}function $r(e){return new k(C.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function Ar(e){let t=`Some extensions are incompatible with \`${g.sdkName}@${g.version}\`:`;return e.filter(r=>typeof r.compat<"u"&&r.compat!==null).forEach(r=>{let i=r.compat[g.sdkName];typeof i=="string"?t+=`
  - Extension \`${r.name}\` supports version(s) \`${i}\``:i||(t+=`
  - Extension \`${r.name}\` does not support ${g.platform} environments.`)}),new k(C.IncompatibleExtensions,t)}function Or(e){let t=r=>{let i=r+1,s=i%10,n=i%100;return s===1&&n!==11?`${i}st`:s===2&&n!==12?`${i}nd`:s===3&&n!==13?`${i}rd`:`${i}th`};return new k(C.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}function Ei(){return new he(J.DuplicateIframe,"Duplicate iframes found.")}function Tr(){return new he(J.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}function Mr(){return new he(J.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${g.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}function x(e){let{method:t,removalVersions:r,useInstead:i}=e,s=r[g.sdkName],n=i?` Use \`${i}\` instead.`:"",a=`\`${t}\` will be removed from \`${g.sdkName}\` in version \`${s}\`.${n}`;return new he(J.DeprecationNotice,a)}function*Nr(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}var Lr=Nr();function Ke(){return Lr.next().value}var Ye=Symbol("Payload pre-processed by Magic SDK");function ze(e){return Object.defineProperty(e,Ye,{value:!0,enumerable:!1}),e}function Sr(e){return!!e[Ye]}function ce(e){var t,r,i;return Sr(e)||(e.jsonrpc=(t=e.jsonrpc)!=null?t:"2.0",e.id=Ke(),e.method=(r=e.method)!=null?r:"noop",e.params=(i=e.params)!=null?i:[],ze(e)),e}function m(e,t=[]){return ze({params:t,method:e,jsonrpc:"2.0",id:Ke()})}var ve=class{constructor(e){e instanceof ve?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):_r(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return typeof this._error<"u"&&this._error!==null}get hasResult(){return typeof this._result<"u"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},br=Ot(Tt()),Cr=class extends br.default{};function Je(){let e=new Cr;return{emitter:e,createChainingEmitterMethod:(t,r)=>(...i)=>(e[t].apply(e,i),r),createBoundEmitterMethod:t=>(...r)=>e[t].apply(e,r)}}var Qe=Symbol("isPromiEvent");function kr(e){return!!e[Qe]}function z(e){let t=Ze(e),{createBoundEmitterMethod:r,createChainingEmitterMethod:i}=Je(),s=Symbol("Promise.then"),n=Symbol("Promise.catch"),a=Symbol("Promise.finally"),o=(c,h)=>(...f)=>{let _=h[c].apply(h,f);return u(_)},u=c=>Object.assign(c,{[Qe]:!0,[s]:c[s]||c.then,[n]:c[n]||c.catch,[a]:c[a]||c.finally,then:o(s,c),catch:o(n,c),finally:o(a,c),on:i("on",c),once:i("once",c),addListener:i("addListener",c),off:i("off",c),removeListener:i("removeListener",c),removeAllListeners:i("removeAllListeners",c),emit:r("emit"),eventNames:r("eventNames"),listeners:r("listeners"),listenerCount:r("listenerCount")}),l=u(t.then(c=>(l.emit("done",c),l.emit("settled"),c),c=>{throw l.emit("error",c),l.emit("settled"),c}));return l}function Ze(e){return new Promise((t,r)=>{let i=e(t,r);Promise.resolve(i).catch(r)})}var P=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(oe.MAGIC_HANDLE_REQUEST,ce(e)),r=z((s,n)=>{t.then(a=>{if(i(),a.hasError)n(new le(a.payload.error));else if(a.hasResult)s(a.payload.result);else throw Rr()}).catch(a=>{i(),n(a)})}),i=this.overlay.on(D.MAGIC_HANDLE_EVENT,s=>{var n;let{response:a}=s.data;if(a.id===e.id&&((n=a.result)!=null&&n.event)){let{event:o,params:u=[]}=a.result;r.emit(o,...u)}});return r}createIntermediaryEvent(e,t){return r=>{let i=m(d.IntermediaryEvent,[{payloadId:t,eventType:e,args:r}]);this.request(i)}}};function Pr(e,t){let[r]=e.split(".").map(Number);return r>=t}var F={"magic-sdk":"v18.0.0","@magic-sdk/react-native":"v14.0.0","@magic-sdk/react-native-bare":"v19.0.0","@magic-sdk/react-native-expo":"v19.0.0"},Ur=class extends P{loginWithMagicLink(e){let t=g.sdkName==="@magic-sdk/react-native"||g.sdkName==="@magic-sdk/react-native-bare"||g.sdkName==="@magic-sdk/react-native-expo";if(t&&Pr(g.version,19))throw new Error("loginWithMagicLink() is deprecated for this package, please utlize a passcode method like loginWithSMS or loginWithEmailOTP instead.");t&&x({method:"auth.loginWithMagicLink()",removalVersions:F,useInstead:"auth.loginWithEmailOTP()"}).log();let{email:r,showUI:i=!0,redirectURI:s,overrides:n}=e,a=m(this.sdk.testMode?d.LoginWithMagicLinkTestMode:d.LoginWithMagicLink,[{email:r,showUI:i,redirectURI:s,overrides:n}]);return this.request(a)}loginWithSMS(e){let{phoneNumber:t}=e,r=m(this.sdk.testMode?d.LoginWithSmsTestMode:d.LoginWithSms,[{phoneNumber:t,showUI:!0}]);return this.request(r)}loginWithEmailOTP(e){let{email:t,showUI:r,deviceCheckUI:i,overrides:s}=e,n=m(this.sdk.testMode?d.LoginWithEmailOTPTestMode:d.LoginWithEmailOTP,[{email:t,showUI:r,deviceCheckUI:i,overrides:s}]),a=this.request(n);return!i&&a&&a.on(Ee.Retry,()=>{this.createIntermediaryEvent(Ee.Retry,n.id)()}),!r&&a&&(a.on(X.VerifyEmailOtp,o=>{this.createIntermediaryEvent(X.VerifyEmailOtp,n.id)(o)}),a.on(X.Cancel,()=>{this.createIntermediaryEvent(X.Cancel,n.id)()})),a}loginWithCredential(e){let t=e??"";if(!e&&g.platform==="web"){t=window.location.search;let i=window.location.origin+window.location.pathname;window.history.replaceState(null,"",i)}let r=m(this.sdk.testMode?d.LoginWithCredentialTestMode:d.LoginWithCredential,[t]);return this.request(r)}setAuthorizationToken(e){let t=m(d.SetAuthorizationToken,[{jwt:e}]);return this.request(t)}updateEmailWithUI(e){let{email:t,showUI:r=!0}=e,i=m(this.sdk.testMode?d.UpdateEmailTestMode:d.UpdateEmail,[{email:t,showUI:r}]);return this.request(i)}},et={};$t(et,{clear:()=>Dr,getItem:()=>T,iterate:()=>tt,key:()=>xr,keys:()=>Fr,length:()=>Gr,removeItem:()=>W,setItem:()=>N});var re;function S(e){return(...t)=>I(this,null,function*(){return re||(re=yield g.configureStorage()),yield re.ready(),re[e](...t)})}var T=S("getItem"),N=S("setItem"),W=S("removeItem"),Dr=S("clear"),Gr=S("length"),xr=S("key"),Fr=S("keys"),tt=S("iterate");function Wr(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}var rt="STORE_KEY_PRIVATE_KEY",fe="STORE_KEY_PUBLIC_JWK",it="ECDSA",jr="P-256",qr={name:it,namedCurve:jr};function de(){let e=typeof window<"u"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}function Vr(){return I(this,null,function*(){let e=yield Hr();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,r=yield T(rt);if(!r||!t){console.info("unable to find private key or webcrypto unsupported");return}let i={iat:Math.floor(new Date().getTime()/1e3),jti:Wr()},s={typ:"dpop+jwt",alg:"ES256",jwk:e},n={protected:Ge(JSON.stringify(s)),claims:Ge(JSON.stringify(i))},a=Br(`${n.protected}.${n.claims}`),o={name:it,hash:{name:"SHA-256"}},u=Yr(new Uint8Array(yield t.sign(o,r,a)));return`${n.protected}.${n.claims}.${u}`})}function Hr(){return I(this,null,function*(){if(!de()){console.info("webcrypto is not supported");return}return(yield T(fe))||(yield Xr()),T(fe)})}function Xr(){return I(this,null,function*(){let{subtle:e}=window.crypto,t=yield e.generateKey(qr,!1,["sign"]),r=yield e.exportKey("jwk",t.publicKey);yield N(rt,t.privateKey),yield N(fe,r)})}function Ge(e){return st(Kr(e))}function Br(e){return new TextEncoder().encode(e)}function st(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function Kr(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,r)=>String.fromCharCode(parseInt(r,16)))}function Yr(e){let t="";return e.forEach(r=>{t+=String.fromCharCode(r)}),st(t)}var ye="ds",we="ek",Re="iv",$e="AES-GCM",zr=256;function Ae(){return I(this,null,function*(){let e=[];yield tt((t,r,i)=>{r.startsWith(`${ye}_`)&&e.push(r)});for(let t of e)yield W(t)})}function nt(e){let t="",r=new Uint8Array(e),i=r.byteLength;for(let s=0;s<i;s++)t+=String.fromCharCode(r[s]);return window.btoa(t)}function ot(e){let t=window.atob(e),r=t.length,i=new Uint8Array(r);for(let s=0;s<r;s++)i[s]=t.charCodeAt(s);return i.buffer}function Jr(){return I(this,null,function*(){if(!de()){console.info("webcrypto is not supported");return}let{crypto:e}=window;return(yield T(Re))||e.getRandomValues(new Uint8Array(12))})}function Qr(){return I(this,null,function*(){if(!de()){console.info("webcrypto is not supported");return}let{subtle:e}=window.crypto;return(yield T(we))||(yield e.generateKey({name:$e,length:zr},!1,["encrypt","decrypt"]))})}function Zr(e,t){return I(this,null,function*(){let r=yield Jr(),i=yield Qr();if(!r||!i||!e)return;let s=ot(e),{subtle:n}=window.crypto,a=yield n.encrypt({name:$e,iv:r},i,s),o=nt(a);yield N(`${ye}_${t}`,o),yield N(we,i),yield N(Re,r)})}function ei(e){return I(this,null,function*(){let t=yield T(`${ye}_${e}`),r=yield T(Re),i=yield T(we);if(!r||!t||!i||!de())return;let{subtle:s}=window.crypto,n=yield s.decrypt({name:$e,iv:r},i,ot(t));return nt(n)})}function xe(e,t){return t?new URL(e,t):new URL(e)}var ti=class extends P{constructor(){super(...arguments),this.localForageKey="mc_active_wallet",this.localForageIsLoggedInKey="magic_auth_is_logged_in",this.userLoggedOutCallbacks=[]}getIdToken(e){let t=m(this.sdk.testMode?d.GetIdTokenTestMode:d.GetIdToken,[e]);return this.request(t)}generateIdToken(e){let t=m(this.sdk.testMode?d.GenerateIdTokenTestMode:d.GenerateIdToken,[e]);return this.request(t)}getInfo(){return I(this,null,function*(){let e=yield T(this.localForageKey),t=m(d.GetInfo,[{walletType:e}]);return this.request(t)})}isLoggedIn(){return z((e,t)=>I(this,null,function*(){try{let r=!1;this.sdk.useStorageCache&&(r=(yield T(this.localForageIsLoggedInKey))==="true",r&&e(!0));let i=m(this.sdk.testMode?d.IsLoggedInTestMode:d.IsLoggedIn),s=yield this.request(i);this.sdk.useStorageCache&&(s?N(this.localForageIsLoggedInKey,!0):W(this.localForageIsLoggedInKey),r&&!s&&this.emitUserLoggedOut(!0)),e(s)}catch(r){t(r)}}))}logout(){return W(this.localForageKey),W(this.localForageIsLoggedInKey),Ae(),z((e,t)=>I(this,null,function*(){try{let r=m(this.sdk.testMode?d.LogoutTestMode:d.Logout),i=yield this.request(r);this.sdk.useStorageCache&&this.emitUserLoggedOut(i),e(i)}catch(r){t(r)}}))}requestInfoWithUI(e){let t=m(d.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}showSettings(e){let t=m(this.sdk.testMode?d.UserSettingsTestMode:d.UserSettings,[e]);return this.request(t)}recoverAccount(e){let t=m(this.sdk.testMode?d.RecoverAccountTestMode:d.RecoverAccount,[e]);return this.request(t)}getMetadata(){x({method:"user.getMetadata()",removalVersions:F,useInstead:"user.getInfo()"}).log();let e=m(this.sdk.testMode?d.GetMetadataTestMode:d.GetMetadata);return this.request(e)}updateEmail(e){x({method:"user.updateEmail()",removalVersions:F,useInstead:"auth.updateEmailWithUI()"}).log();let{email:t,showUI:r=!0}=e,i=m(this.sdk.testMode?d.UpdateEmailTestMode:d.UpdateEmail,[{email:t,showUI:r}]);return this.request(i)}onUserLoggedOut(e){this.userLoggedOutCallbacks.push(e)}emitUserLoggedOut(e){this.userLoggedOutCallbacks.forEach(t=>{t(e)})}},ri=class extends P{constructor(){super(...arguments),this.localForageKey="mc_active_wallet"}connectWithUI(){let e=z((t,r)=>I(this,null,function*(){try{if(this.isMetaMaskBrowser()&&(yield this.isWalletEnabled(M.MetaMask))){let o=yield this.autoConnectIfWalletBrowser(M.MetaMask);t(o);return}if(this.isCoinbaseWalletBrowser()&&(yield this.isWalletEnabled(M.CoinbaseWallet))){let o=yield this.autoConnectIfWalletBrowser(M.CoinbaseWallet);t(o);return}let i=this.getUserEnv(),s=m(d.Login,[i]),n=this.request(s);n.on(se.WalletSelected,o=>this.handleWalletSelected(qe(_e({},o),{payloadId:s.id}))),n.on("id-token-created",o=>{e.emit("id-token-created",o)});let a=yield n;a.error&&r(a),t(a)}catch(i){r(i)}}));return e}showUI(){return this.request(m(d.ShowUI))}showAddress(){return this.request(m(d.ShowAddress))}showSendTokensUI(){return this.request(m(d.ShowSendTokensUI))}showOnRamp(){return this.request(m(d.ShowOnRamp))}showNFTs(){return this.request(m(d.ShowNFTs))}showBalances(){return this.request(m(d.ShowBalances))}sendGaslessTransaction(e,t){return this.request(m(d.SendGaslessTransaction,[e,t]))}getInfo(){return I(this,null,function*(){x({method:"wallet.getInfo()",removalVersions:F,useInstead:"user.getInfo()"}).log();let e=yield T(this.localForageKey),t=m(d.GetInfo,[{walletType:e}]);return this.request(t)})}disconnect(){x({method:"wallet.disconnect()",removalVersions:F,useInstead:"user.logout()"}).log(),W(this.localForageKey),Ae();let e=m(d.Disconnect);return this.request(e)}requestUserInfoWithUI(e){x({method:"wallet.requestUserInfoWithUI()",removalVersions:F,useInstead:"user.requestUserInfoWithUI()"}).log();let t=m(d.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}getProvider(){return I(this,null,function*(){switch(yield T(this.localForageKey)){case M.MetaMask:return this.getMetaMaskProvider();case M.CoinbaseWallet:return this.getCoinbaseProvider();default:return this.sdk.rpcProvider}})}isMetaMaskInstalled(){var e,t,r;return((e=window.ethereum)==null?void 0:e.isMetaMask)||!!((r=(t=window.ethereum)==null?void 0:t.providers)!=null&&r.find(i=>i==null?void 0:i.isMetaMask))}isMetaMaskBrowser(){return this.isMobile()&&this.isMetaMaskInstalled()}getMetaMaskProvider(){var e,t;return((t=(e=window.ethereum)==null?void 0:e.providers)==null?void 0:t.find(r=>r==null?void 0:r.isMetaMask))||window.ethereum}connectToMetaMask(){if(this.isMobile()&&!this.isMetaMaskInstalled()){let e=`https://metamask.app.link/dapp/${window.location.href.replace(/(^\w+:|^)\/\//,"")}`;window.location.href=e}return this.getMetaMaskProvider().request({method:"eth_requestAccounts"})}isCoinbaseWalletInstalled(){var e,t,r;return((e=window.ethereum)==null?void 0:e.isCoinbaseWallet)||!!((r=(t=window.ethereum)==null?void 0:t.providers)!=null&&r.find(i=>i==null?void 0:i.isCoinbaseWallet))}isCoinbaseWalletBrowser(){var e;return!!((e=window.ethereum)!=null&&e.isCoinbaseBrowser)}getCoinbaseProvider(){var e,t;return((t=(e=window.ethereum)==null?void 0:e.providers)==null?void 0:t.find(r=>r==null?void 0:r.isCoinbaseWallet))||window.ethereum}connectToCoinbaseWallet(){if(this.isMobile()&&!this.isCoinbaseWalletBrowser()){let e=`https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(window.location.href)}`;window.location.href=e}return this.getCoinbaseProvider().request({method:"eth_requestAccounts"})}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Silk|Opera Mini/i.test(navigator.userAgent)}getUserEnv(){return{env:{isMetaMaskInstalled:this.isMetaMaskInstalled(),isCoinbaseWalletInstalled:this.isCoinbaseWalletInstalled()}}}connectToThirdPartyWallet(e){switch(e){case M.MetaMask:return this.connectToMetaMask();case M.CoinbaseWallet:return this.connectToCoinbaseWallet();default:throw new Error(`Invalid provider: ${e}. Must be one of "metamask" or "coinbase_wallet".`)}}isWalletEnabled(e){let t=m("mc_is_wallet_enabled",[{wallet:e}]);return this.request(t)}handleWalletSelected(e){return I(this,null,function*(){try{let t=yield this.connectToThirdPartyWallet(e.wallet);yield N(this.localForageKey,e.wallet),this.createIntermediaryEvent(se.WalletConnected,e.payloadId)(t)}catch(t){console.error(t),this.createIntermediaryEvent(se.WalletRejected,e.payloadId)()}})}autoConnectIfWalletBrowser(e){return I(this,null,function*(){let t;e===M.MetaMask&&(t=yield this.getMetaMaskProvider().request({method:"eth_requestAccounts"})),e===M.CoinbaseWallet&&(t=yield this.getCoinbaseProvider().request({method:"eth_requestAccounts"})),yield N(this.localForageKey,e);let r=m(d.AutoConnect,[{wallet:e,address:t}]);return this.request(r)})}},{createBoundEmitterMethod:ie,createChainingEmitterMethod:U}=Je(),ii=class extends P{constructor(){super(...arguments),this.isMagic=!0,this.on=U("on",this),this.once=U("once",this),this.addListener=U("addListener",this),this.off=U("off",this),this.removeListener=U("removeListener",this),this.removeAllListeners=U("removeAllListeners",this),this.emit=ie("emit"),this.eventNames=ie("eventNames"),this.listeners=ie("listeners"),this.listenerCount=ie("listenerCount")}sendAsync(e,t){if(!t)throw Or({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(oe.MAGIC_HANDLE_REQUEST,e.map(r=>{let i=ce(r);return this.prefixPayloadMethodForTestMode(i),i})).then(r=>{t(null,r.map(i=>qe(_e({},i.payload),{error:i.hasError?new le(i.payload.error):null})))});else{let r=ce(e);this.prefixPayloadMethodForTestMode(r),this.overlay.post(oe.MAGIC_HANDLE_REQUEST,r).then(i=>{t(i.hasError?new le(i.payload.error):null,i.payload)})}}send(e,t){if(typeof e=="string"){let i=m(e,Array.isArray(t)?t:[]);return this.request(i)}if(Array.isArray(e)||t){this.sendAsync(e,t);return}let r=Tr();return r.log(),new ve(e).applyError({code:-32603,message:r.rawMessage}).payload}enable(){let e=m(d.Login);return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`)}},Fe=["request","overlay","sdk"];function si(e){let t=Object.getPrototypeOf(e),r=[t];for(;t!==P.prototype;)t=Object.getPrototypeOf(t),r.push(t);return r}var at=class extends P{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:z,isPromiEvent:kr,encodeJSON:He,decodeJSON:fr,createJsonRpcRequestPayload:m,standardizeJsonRpcRequestPayload:ce,storage:et};let e=[this,...si(this)];Fe.forEach(t=>{let r=e.map(a=>Object.getOwnPropertyDescriptor(a,t)),i=r.findIndex(a=>!!a),s=i>0,n=r[i];n&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:n,isPrototypeField:s}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw $r(t)}}))})}init(e){this.__is_initialized__||(Fe.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:r,isPrototypeField:i}=this.__sdk_access_field_descriptors__.get(t);i?delete this[t]:Object.defineProperty(this,t,r)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:t,removalVersion:r,useInstead:i}=e,s=i?` Use \`${i}\` instead.`:"",n=`\`${t}\` will be removed from this Extension in version \`${r}\`.${s}`;return new De(this,"DEPRECATION_NOTICE",n)}createWarning(e,t){return new De(this,e,t)}createError(e,t,r){return new Be(this,e,t,r)}},ni=class extends at{},K=class extends at{};K.Internal=ni,K.Anonymous="anonymous extension";var oi=class extends P{purchase(e){let t=m(d.NFTPurchase,[e]);return this.request(t)}checkout(e){let t=m(d.NFTCheckout,[e]);return this.request(t)}transfer(e){let t=m(d.NFTTransfer,[e]);return this.request(t)}};function We(e){return e.compat&&e.compat[g.sdkName]!=null?typeof e.compat[g.sdkName]=="string"?ar(hr(g.version),e.compat[g.sdkName]):!!e.compat[g.sdkName]:!0}function ai(e,t,r){return!t&&!r?`${e}_eth_mainnet`:r?`${e}_${JSON.stringify(r)}`:t?typeof t=="string"?`${e}_eth_${t}`:`${e}_${t.rpcUrl}_${t.chainId}_${t.chainType}`:`${e}_unknown`}function li(e){var t;let r=(t=e==null?void 0:e.extensions)!=null?t:[],i={},s=[];if(Array.isArray(r)?r.forEach(n=>{We(n)?(n.init(this),(n.name||n.name!==K.Anonymous)&&(this[n.name]=n),n instanceof K.Internal&&(ae(n.config)||(i[n.name]=n.config))):s.push(n)}):Object.keys(r).forEach(n=>{if(We(r[n])){r[n].init(this);let a=r[n];this[n]=a,a instanceof K.Internal&&(ae(a.config)||(i[r[n].name]=a.config))}else s.push(r[n])}),s.length)throw Ar(s);return i}var ne=class{constructor(e,t){this.apiKey=e;var r;if(!e)throw yr();g.platform==="react-native"&&(t!=null&&t.endpoint)&&Mr().log();let{defaultEndpoint:i,version:s}=g;this.testMode=!!(t!=null&&t.testMode),this.useStorageCache=!!(t!=null&&t.useStorageCache),this.endpoint=xe((r=t==null?void 0:t.endpoint)!=null?r:i).origin,this.auth=new Ur(this),this.user=new ti(this),this.wallet=new ri(this),this.nft=new oi(this),this.rpcProvider=new ii(this);let n=li.call(this,t);this.parameters=He(_e({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:t==null?void 0:t.network,host:xe(this.endpoint).host,sdk:vr[g.sdkName],version:s,ext:ae(n)?void 0:n,locale:(t==null?void 0:t.locale)||"en_US"},g.bundleId?{bundleId:g.bundleId}:{})),this.networkHash=ai(this.apiKey,t==null?void 0:t.network,ae(n)?void 0:n),t!=null&&t.deferPreload||this.preload()}get overlay(){if(!ne.__overlays__.has(this.parameters)){let e=new g.ViewController(this.endpoint,this.parameters,this.networkHash);e.init(),ne.__overlays__.set(this.parameters,e)}return ne.__overlays__.get(this.parameters)}preload(){return I(this,null,function*(){yield this.overlay.checkIsReadyForRequest})}},ci=ne;ci.__overlays__=new Map;function ui(e,t){return t&&Array.isArray(e)?e.find(r=>r.id===t):e}function hi(e,t){var r;let i=(r=t.data.response)==null?void 0:r.id,s=ui(e,i);if(i&&s){let n=new ve(s).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:i,response:n}}return{}}function di(e,t,r){return I(this,null,function*(){var i;let s=yield T("rt"),n;if(g.platform==="web")try{n=(i=yield T("jwt"))!=null?i:yield Vr()}catch(u){console.error("webcrypto error",u)}let a={msgType:e,payload:t};n&&(a.jwt=n),n&&s&&(a.rt=s);let o=yield ei(r);return o&&(a.deviceShare=o),a})}function pi(e){return I(this,null,function*(){!e.data.rt||(yield N("rt",e.data.rt))})}var fi=class{constructor(e,t,r){this.endpoint=e,this.parameters=t,this.networkHash=r,this.messageHandlers=new Set,this.isConnectedToInternet=!0,this.checkIsReadyForRequest=this.waitForReady(),this.isReadyForRequest=!1,this.listen()}post(e,t){return I(this,null,function*(){return Ze((r,i)=>I(this,null,function*(){if(!this.isConnectedToInternet){let l=wr();i(l)}this.isReadyForRequest||(yield this.waitForReady());let s=[],n=Array.isArray(t)?t.map(l=>l.id):[],a=yield di(`${e}-${this.parameters}`,t,this.networkHash);yield this._post(a);let o=l=>c=>{var h;let{id:f,response:_}=hi(t,c);if(pi(c),((h=_==null?void 0:_.payload.error)==null?void 0:h.message)==="User denied account access.")Ae();else if(c.data.deviceShare){let{deviceShare:v}=c.data;Zr(v,this.networkHash)}f&&_&&Array.isArray(t)&&n.includes(f)?(s.push(_),s.length===t.length&&(l(),r(s))):f&&_&&!Array.isArray(t)&&f===t.id&&(l(),r(_))},u=this.on(D.MAGIC_HANDLE_RESPONSE,o(()=>u()))}))})}on(e,t){let r=t.bind(window),i=s=>{s.data.msgType===`${e}-${this.parameters}`&&r(s)};return this.messageHandlers.add(i),()=>this.messageHandlers.delete(i)}waitForReady(){return new Promise(e=>{let t=this.on(D.MAGIC_OVERLAY_READY,()=>{this.isReadyForRequest=!0,e(),t()})})}listen(){this.on(D.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(D.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()})}};export{pt as A,he as B,k as C,K as D,ht as E,Be as H,X as I,mi as J,fi as K,ci as M,Et as N,Ei as O,kr as P,mt as R,Ee as T,xe as W,le as _,J as a,M as b,se as c,ct as f,oe as g,d as l,ge as m,C as o,wr as p,De as t,D as u,ut as v,dt as x};
//# sourceMappingURL=index-BkMbGv4_.js.map
