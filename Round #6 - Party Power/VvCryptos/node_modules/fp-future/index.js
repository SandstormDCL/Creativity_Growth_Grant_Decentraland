"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function future() {
    let resolver;
    let rejecter;
    const promise = new Promise((ok, err) => {
        resolver = (x) => {
            ok(x);
            promise.isPending = false;
        };
        rejecter = (x) => {
            err(x);
            promise.isPending = false;
        };
    }).catch(e => Promise.reject(e));
    promise.resolve = resolver;
    promise.reject = rejecter;
    if (!("finally" in promise)) {
        promise.finally = fn => {
            promise.then(fn);
            promise.catch(fn);
        };
    }
    promise.isPending = true;
    return promise;
}
exports.future = future;
exports.default = future;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQU9BLFNBQWdCLE1BQU07SUFDcEIsSUFBSSxRQUF3QixDQUFDO0lBQzdCLElBQUksUUFBNEIsQ0FBQztJQUVqQyxNQUFNLE9BQU8sR0FBUSxJQUFJLE9BQU8sQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUMzQyxRQUFRLEdBQUcsQ0FBQyxDQUFJLEVBQUUsRUFBRTtZQUNsQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDTixPQUFPLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUM1QixDQUFDLENBQUM7UUFDRixRQUFRLEdBQUcsQ0FBQyxDQUFRLEVBQUUsRUFBRTtZQUN0QixHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDUCxPQUFPLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUM1QixDQUFDLENBQUM7SUFDSixDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFakMsT0FBTyxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUM7SUFDM0IsT0FBTyxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUM7SUFFMUIsSUFBSSxDQUFDLENBQUMsU0FBUyxJQUFJLE9BQU8sQ0FBQyxFQUFFO1FBQzNCLE9BQU8sQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLEVBQUU7WUFDckIsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNqQixPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3BCLENBQUMsQ0FBQztLQUNIO0lBRUQsT0FBTyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7SUFFekIsT0FBTyxPQUFxQixDQUFDO0FBQy9CLENBQUM7QUE1QkQsd0JBNEJDO0FBRUQsa0JBQWUsTUFBTSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHR5cGUgSUZ1dHVyZTxUPiA9IFByb21pc2U8VD4gJiB7XG4gIHJlc29sdmU6ICh4OiBUKSA9PiB2b2lkO1xuICByZWplY3Q6ICh4OiBFcnJvcikgPT4gdm9pZDtcbiAgZmluYWxseTogKGZuOiAoKSA9PiB2b2lkKSA9PiB2b2lkO1xuICBpc1BlbmRpbmc6IGJvb2xlYW47XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZnV0dXJlPFQgPSBhbnk+KCk6IElGdXR1cmU8VD4ge1xuICBsZXQgcmVzb2x2ZXI6ICh4OiBUKSA9PiB2b2lkO1xuICBsZXQgcmVqZWN0ZXI6ICh4OiBFcnJvcikgPT4gdm9pZDtcblxuICBjb25zdCBwcm9taXNlOiBhbnkgPSBuZXcgUHJvbWlzZSgob2ssIGVycikgPT4ge1xuICAgIHJlc29sdmVyID0gKHg6IFQpID0+IHtcbiAgICAgIG9rKHgpO1xuICAgICAgcHJvbWlzZS5pc1BlbmRpbmcgPSBmYWxzZTtcbiAgICB9O1xuICAgIHJlamVjdGVyID0gKHg6IEVycm9yKSA9PiB7XG4gICAgICBlcnIoeCk7XG4gICAgICBwcm9taXNlLmlzUGVuZGluZyA9IGZhbHNlO1xuICAgIH07XG4gIH0pLmNhdGNoKGUgPT4gUHJvbWlzZS5yZWplY3QoZSkpO1xuXG4gIHByb21pc2UucmVzb2x2ZSA9IHJlc29sdmVyO1xuICBwcm9taXNlLnJlamVjdCA9IHJlamVjdGVyO1xuXG4gIGlmICghKFwiZmluYWxseVwiIGluIHByb21pc2UpKSB7XG4gICAgcHJvbWlzZS5maW5hbGx5ID0gZm4gPT4ge1xuICAgICAgcHJvbWlzZS50aGVuKGZuKTtcbiAgICAgIHByb21pc2UuY2F0Y2goZm4pO1xuICAgIH07XG4gIH1cblxuICBwcm9taXNlLmlzUGVuZGluZyA9IHRydWU7XG5cbiAgcmV0dXJuIHByb21pc2UgYXMgSUZ1dHVyZTxUPjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnV0dXJlO1xuIl19